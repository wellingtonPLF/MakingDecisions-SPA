!function($C,Ge){"object"==typeof exports&&"object"==typeof module?module.exports=Ge():"function"==typeof define&&define.amd?define([],Ge):"object"==typeof exports?exports.MakingDecision=Ge():$C.MakingDecision=Ge()}(self,function(){return(()=>{var BF={8255:p=>{function he(H){return Promise.resolve().then(()=>{var R=new Error("Cannot find module '"+H+"'");throw R.code="MODULE_NOT_FOUND",R})}he.keys=()=>[],he.resolve=he,he.id=8255,p.exports=he},7716:(p,he,H)=>{"use strict";H.d(he,{deG:()=>gh,tb:()=>_S,AFp:()=>gS,ip1:()=>jy,CZH:()=>_f,hGG:()=>ub,z2F:()=>Nm,sBO:()=>mR,Sil:()=>lu,_Vd:()=>sm,EJc:()=>lw,SBq:()=>pl,qLn:()=>v,vpe:()=>yc,gxx:()=>xp,tBr:()=>vi,XFs:()=>ot,OlP:()=>mn,zs3:()=>Qn,ZZ4:()=>Dd,aQg:()=>hy,soG:()=>yf,YKP:()=>gD,v3s:()=>IN,h0i:()=>Sd,PXZ:()=>Jy,R0b:()=>as,FiY:()=>ro,Lbi:()=>ow,g9A:()=>Hy,Qsj:()=>oR,FYo:()=>Td,JOm:()=>so,Tiy:()=>sD,q3G:()=>Vn,tp0:()=>la,EAV:()=>DN,Rgc:()=>lm,dDg:()=>Qy,DyG:()=>ki,q4F:()=>oD,GfV:()=>cR,s_b:()=>fy,ifc:()=>tn,eFA:()=>km,G48:()=>Am,Gpc:()=>$,f3M:()=>$g,X6Q:()=>wf,_c5:()=>PN,VLi:()=>IS,c2e:()=>$y,zSh:()=>T_,wAp:()=>wt,vHH:()=>Ne,EiD:()=>l_,mCW:()=>ic,qzn:()=>rc,JVY:()=>da,pB0:()=>up,eBb:()=>Th,L6k:()=>id,LAX:()=>Jg,cg1:()=>ny,Tjo:()=>RS,kL8:()=>NT,yhl:()=>Ao,dqk:()=>It,sIi:()=>pd,CqO:()=>O_,QGY:()=>pT,F4k:()=>rM,RDi:()=>sh,AaK:()=>Q,z3N:()=>So,qOj:()=>Op,TTD:()=>Ou,_Bn:()=>tD,xp6:()=>pI,uIk:()=>r0,ekj:()=>fc,Suo:()=>xe,Xpm:()=>Vt,lG2:()=>Ma,Yz7:()=>an,cJS:()=>fn,oAB:()=>qo,Yjl:()=>Ai,Y36:()=>Xh,_UZ:()=>m0,qZA:()=>N_,TgZ:()=>fT,EpF:()=>nM,n5z:()=>Xa,Ikx:()=>kT,LFG:()=>Kn,$8M:()=>Zu,NdJ:()=>nu,CRH:()=>Uo,oxw:()=>b0,Hsn:()=>L_,F$t:()=>F_,Q6J:()=>ya,DdM:()=>WR,iGM:()=>rN,MAs:()=>s0,CHM:()=>Oc,LSH:()=>Nh,kYT:()=>xc,YNc:()=>Hk,W1O:()=>it,_uU:()=>Z_,Oqu:()=>nf,hij:()=>Y_,Gf:()=>LE});var R=H(9765),ee=H(5319),L=H(7574),Y=H(6682),J=H(8819);function te(s){for(let o in s)if(s[o]===te)return o;throw Error("Could not find renamed property on target object.")}function Ie(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function Q(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Q).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ie(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=te({__forward_ref__:te});function $(s){return s.__forward_ref__=$,s.toString=function(){return Q(this())},s}function z(s){return ce(s)?s():s}function ce(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===$}class Ne extends Error{constructor(o,a){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,a)),this.code=o}}function ue(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ue(s)}function Nt(s,o){const a=o?` in ${o}`:"";throw new Ne("201",`No provider for ${be(s)} found${a}`)}function Kt(s,o){null==s&&function(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function an(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function fn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Yr(s){return Qr(s,Us)||Qr(s,An)}function Qr(s,o){return s.hasOwnProperty(o)?s[o]:null}function mo(s){return s&&(s.hasOwnProperty(Di)||s.hasOwnProperty(Bs))?s[Di]:null}const Us=te({\u0275prov:te}),Di=te({\u0275inj:te}),An=te({ngInjectableDef:te}),Bs=te({ngInjectorDef:te});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Si;function Jr(s){const o=Si;return Si=s,o}function Hn(s,o,a){const c=Yr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ot.Optional?null:void 0!==o?o:void Nt(Q(s),"Injector")}function $t(s){return{toString:s}.toString()}var Xe=(()=>((Xe=Xe||{})[Xe.OnPush=0]="OnPush",Xe[Xe.Default=1]="Default",Xe))(),tn=(()=>((tn=tn||{})[tn.Emulated=0]="Emulated",tn[tn.None=2]="None",tn[tn.ShadowDom=3]="ShadowDom",tn))();const yr="undefined"!=typeof globalThis&&globalThis,rr="undefined"!=typeof window&&window,$n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It=yr||"undefined"!=typeof global&&global||rr||$n,ne={},K=[],ae=te({\u0275cmp:te}),Me=te({\u0275dir:te}),pe=te({\u0275pipe:te}),tt=te({\u0275mod:te}),Pe=te({\u0275loc:te}),Ce=te({\u0275fac:te}),He=te({__NG_ELEMENT_ID__:te});let at=0;function Vt(s){return $t(()=>{const a={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Xe.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||K,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||tn.Emulated,id:"c",styles:s.styles||K,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,h=s.features,_=s.pipes;return c.id+=at++,c.inputs=ka(s.inputs,a),c.outputs=ka(s.outputs),h&&h.forEach(b=>b(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(rn):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(Mn):null,c})}function rn(s){return Ar(s)||function(s){return s[Me]||null}(s)}function Mn(s){return function(s){return s[pe]||null}(s)}const Ml={};function qo(s){return $t(()=>{const o={type:s.type,bootstrap:s.bootstrap||K,declarations:s.declarations||K,imports:s.imports||K,exports:s.exports||K,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Ml[s.id]=s.type),o})}function xc(s,o){return $t(()=>{const a=xi(s,!0);a.declarations=o.declarations||K,a.imports=o.imports||K,a.exports=o.exports||K})}function ka(s,o){if(null==s)return ne;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=c,o&&(o[d]=h)}return a}const Ma=Vt;function Ai(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ar(s){return s[ae]||null}function xi(s,o){const a=s[tt]||null;if(!a&&!0===o)throw new Error(`Type ${Q(s)} does not have '\u0275mod' property.`);return a}function es(s){return Array.isArray(s)&&"object"==typeof s[1]}function ei(s){return Array.isArray(s)&&!0===s[1]}function Mu(s){return 0!=(8&s.flags)}function ti(s){return 2==(2&s.flags)}function Na(s){return 1==(1&s.flags)}function Hr(s){return null!==s.template}function Gs(s){return 0!=(512&s[2])}function gs(s,o){return s.hasOwnProperty(Ce)?s[Ce]:null}class Nu{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ou(){return Qo}function Qo(s){return s.type.prototype.ngOnChanges&&(s.setInput=_s),Ng}function Ng(){const s=ih(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===ne)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function _s(s,o,a,c){const d=ih(s)||function(s,o){return s[ys]=o}(s,{previous:ne,current:null}),h=d.current||(d.current={}),_=d.previous,b=this.declaredInputs[a],C=_[b];h[b]=new Nu(C&&C.currentValue,o,_===ne),s[c]=o}Ou.ngInherit=!0;const ys="__ngSimpleChanges__";function ih(s){return s[ys]||null}let Ll;function sh(s){Ll=s}function pn(s){return!!s.listen}const Jo={createRenderer:(s,o)=>void 0!==Ll?Ll:"undefined"!=typeof document?document:void 0};function Tn(s){for(;Array.isArray(s);)s=s[0];return s}function Eo(s,o){return Tn(o[s])}function Gr(s,o){return Tn(o[s.index])}function Lu(s,o){return s.data[o]}function br(s,o){const a=o[s];return es(a)?a:a[0]}function Ul(s){return 4==(4&s[2])}function Nc(s){return 128==(128&s[2])}function bs(s,o){return null==o?null:s[o]}function Xo(s){s[18]=0}function wo(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const vt={lFrame:Lc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ws(){return vt.bindingsEnabled}function Fe(){return vt.lFrame.lView}function Ut(){return vt.lFrame.tView}function Oc(s){return vt.lFrame.contextLView=s,s[8]}function _n(){let s=Bu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Bu(){return vt.lFrame.currentTNode}function vs(s,o){const a=vt.lFrame;a.currentTNode=s,a.isParent=o}function ju(){return vt.lFrame.isParent}function Hl(){vt.lFrame.isParent=!1}function ea(){return vt.isInCheckNoChangesMode}function Gl(s){vt.isInCheckNoChangesMode=s}function Ha(){return vt.lFrame.bindingIndex++}function oh(s,o){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=s,ql(o)}function ql(s){vt.lFrame.currentDirectiveIndex=s}function ah(){return vt.lFrame.currentQueryIndex}function Hu(s){vt.lFrame.currentQueryIndex=s}function Pc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Fc(s,o,a){if(a&ot.SkipSelf){let d=o,h=s;for(;!(d=d.parent,null!==d||a&ot.Host||(d=Pc(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;o=d,s=h}const c=vt.lFrame=Ga();return c.currentTNode=o,c.lView=s,!0}function Kl(s){const o=Ga(),a=s[1];vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ga(){const s=vt.lFrame,o=null===s?null:s.child;return null===o?Lc(s):o}function Lc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function lh(){const s=vt.lFrame;return vt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const $u=lh;function ta(){const s=lh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function bi(){return vt.lFrame.selectedIndex}function Zl(s){vt.lFrame.selectedIndex=s}function Pn(){const s=vt.lFrame;return Lu(s.tView,s.selectedIndex)}function za(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const h=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:k}=h;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),b&&((s.contentHooks||(s.contentHooks=[])).push(a,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(a,k)}}function Vc(s,o,a){dh(s,o,3,a)}function Ql(s,o,a,c){(3&s[2])===a&&dh(s,o,a,c)}function Wn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function dh(s,o,a,c){const h=null!=c?c:-1,_=o.length-1;let b=0;for(let C=void 0!==c?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=c&&b>=c)break}else o[C]<0&&(s[18]+=65536),(b<h||-1==h)&&(hh(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function hh(s,o,a,c){const d=a[c]<0,h=a[c+1],b=s[d?-a[c]:a[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{h.call(b)}finally{}}}else try{h.call(b)}finally{}}class Jl{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function ns(s,o,a){const c=pn(s);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const _=a[d++],b=a[d++],C=a[d++];c?s.setAttribute(o,b,C,_):o.setAttributeNS(_,b,C)}else{const _=h,b=a[++d];Xl(_)?c&&s.setProperty(o,_,b):c?s.setAttribute(o,_,b):o.setAttribute(_,b),d++}}return d}function fh(s){return 3===s||4===s||6===s}function Xl(s){return 64===s.charCodeAt(0)}function ws(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Xf(s,a,d,null,-1===a||2===a?o[++c]:null)}}return s}function Xf(s,o,a,c,d){let h=0,_=s.length;if(-1===o)_=-1;else for(;h<s.length;){const b=s[h++];if("number"==typeof b){if(b===o){_=-1;break}if(b>o){_=h-1;break}}}for(;h<s.length;){const b=s[h];if("number"==typeof b)break;if(b===a){if(null===c)return void(null!==d&&(s[h+1]=d));if(c===s[h+1])return void(s[h+2]=d)}h++,null!==c&&h++,null!==d&&h++}-1!==_&&(s.splice(_,0,o),h=_+1),s.splice(h++,0,a),null!==c&&s.splice(h++,0,c),null!==d&&s.splice(h++,0,d)}function qn(s){return-1!==s}function ra(s){return 32767&s}function ia(s,o){let a=function(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let Ka=!0;function ec(s){const o=Ka;return Ka=s,o}let Ku=0;function lt(s,o){const a=Bc(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Fn(c.data,s),Fn(o,null),Fn(c.blueprint,null));const d=bn(s,o),h=s.injectorIndex;if(qn(d)){const _=ra(d),b=ia(d,o),C=b[1].data;for(let T=0;T<8;T++)o[h+T]=b[_+T]|C[_+T]}return o[h+8]=d,h}function Fn(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Bc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function bn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){const h=d[1],_=h.type;if(c=2===_?h.declTNode:1===_?d[6]:null,null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function sa(s,o,a){!function(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(He)&&(c=a[He]),null==c&&(c=a[He]=Ku++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function ar(s,o,a){if(a&ot.Optional)return s;Nt(o,"NodeInjector")}function Ya(s,o,a,c){if(a&ot.Optional&&void 0===c&&(c=null),0==(a&(ot.Self|ot.Host))){const d=s[9],h=Jr(void 0);try{return d?d.get(o,c,a&ot.Optional):Hn(o,c,a&ot.Optional)}finally{Jr(h)}}return ar(c,o,a)}function jc(s,o,a,c=ot.Default,d){if(null!==s){const h=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(He)?s[He]:void 0;return"number"==typeof o?o>=0?255&o:Mr:o}(a);if("function"==typeof h){if(!Fc(o,s,c))return c&ot.Host?ar(d,a,c):Ya(o,a,c,d);try{const _=h(c);if(null!=_||c&ot.Optional)return _;Nt(a)}finally{$u()}}else if("number"==typeof h){let _=null,b=Bc(s,o),C=-1,T=c&ot.Host?o[16][6]:null;for((-1===b||c&ot.SkipSelf)&&(C=-1===b?bn(s,o):o[b+8],-1!==C&&$c(c,!1)?(_=o[1],b=ra(C),o=ia(C,o)):b=-1);-1!==b;){const k=o[1];if(Hc(h,b,k.data)){const P=Vg(b,o,a,_,c,T);if(P!==Qa)return P}C=o[b+8],-1!==C&&$c(c,o[1].data[b+8]===T)&&Hc(h,b,o)?(_=k,b=ra(C),o=ia(C,o)):b=-1}}}return Ya(o,a,c,d)}const Qa={};function Mr(){return new oa(_n(),Fe())}function Vg(s,o,a,c,d,h){const _=o[1],b=_.data[s+8],k=Ks(b,_,a,null==c?ti(b)&&Ka:c!=_&&0!=(3&b.type),d&ot.Host&&h===b);return null!==k?Ja(o,_,k,b):Qa}function Ks(s,o,a,c,d){const h=s.providerIndexes,_=o.data,b=1048575&h,C=s.directiveStart,k=h>>20,V=d?b+k:s.directiveEnd;for(let q=c?b:b+k;q<V;q++){const X=_[q];if(q<C&&a===X||q>=C&&X.type===a)return q}if(d){const q=_[C];if(q&&Hr(q)&&q.type===a)return C}return null}function Ja(s,o,a,c){let d=s[a];const h=o.data;if(function(s){return s instanceof Jl}(d)){const _=d;_.resolving&&function(s,o){throw new Ne("200",`Circular dependency in DI detected for ${s}`)}(be(h[a]));const b=ec(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?Jr(_.injectImpl):null;Fc(s,c,ot.Default);try{d=s[a]=_.factory(void 0,h,s,c),o.firstCreatePass&&a>=c.directiveStart&&function(s,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:h}=o.type.prototype;if(c){const _=Qo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,h))}(a,h[a],o)}finally{null!==C&&Jr(C),ec(b),_.resolving=!1,$u()}}return d}function Hc(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function $c(s,o){return!(s&ot.Self||s&ot.Host&&o)}class oa{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return jc(this._tNode,this._lView,o,c,a)}}function Xa(s){return $t(()=>{const o=s.prototype.constructor,a=o[Ce]||Zs(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const h=d[Ce]||Zs(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function Zs(s){return ce(s)?()=>{const o=Zs(z(s));return o&&o()}:gs(s)}function Zu(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const h=a[d];if(fh(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(h===o)return a[d+1];d+=2}}}return null}(_n(),s)}const Rr="__parameters__";function vr(s,o,a){return $t(()=>{const c=function(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...h){if(this instanceof d)return c.apply(this,h),this;const _=new d(...h);return b.annotation=_,b;function b(C,T,k){const P=C.hasOwnProperty(Rr)?C[Rr]:Object.defineProperty(C,Rr,{value:[]})[Rr];for(;P.length<=k;)P.push(null);return(P[k]=P[k]||[]).push(_),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class mn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=an({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const gh=new mn("AnalyzeForEntryComponents"),ki=Function;function rs(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),rs(c,o)):o!==s&&o.push(c)}return o}function Ts(s,o){s.forEach(a=>Array.isArray(a)?Ts(a,o):o(a))}function el(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function ri(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Xs(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}function zr(s,o,a){let c=eo(s,o);return c>=0?s[1|c]=a:(c=~c,function(s,o,a,c){let d=s.length;if(d==o)s.push(a,c);else if(1===d)s.push(c,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function Wc(s,o){const a=eo(s,o);if(a>=0)return s[1|a]}function eo(s,o){return function(s,o,a){let c=0,d=s.length>>a;for(;d!==c;){const h=c+(d-c>>1),_=s[h<<a];if(o===_)return h<<a;_>o?d=h:c=h+1}return~(d<<a)}(s,o,1)}const Gt={},sn="__NG_DI_FLAG__",Ln="ngTempTokenPath",Er=/\n/gm,nl="__source",Ni=te({provide:String,useValue:te});let wr;function no(s){const o=wr;return wr=s,o}function Xu(s,o=ot.Default){if(void 0===wr)throw new Error("inject() must be called from an injection context");return null===wr?Hn(s,void 0,o):wr.get(s,o&ot.Optional?null:void 0,o)}function Kn(s,o=ot.Default){return(Si||Xu)(z(s),o)}const $g=Kn;function Wr(s){const o=[];for(let a=0;a<s.length;a++){const c=z(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let d,h=ot.Default;for(let _=0;_<c.length;_++){const b=c[_],C=sp(b);"number"==typeof C?-1===C?d=b.token:h|=C:d=b}o.push(Kn(d,h))}else o.push(Kn(c))}return o}function qc(s,o){return s[sn]=o,s.prototype[sn]=o,s}function sp(s){return s[sn]}function ed(s,o,a,c){const d=s[Ln];throw o[nl]&&d.unshift(o[nl]),s.message=function(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=Q(o);if(Array.isArray(o))d=o.map(Q).join(" -> ");else if("object"==typeof o){let h=[];for(let _ in o)if(o.hasOwnProperty(_)){let b=o[_];h.push(_+":"+("string"==typeof b?JSON.stringify(b):Q(b)))}d=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(Er,"\n  ")}`}("\n"+s.message,d,a,c),s.ngTokenPath=d,s[Ln]=null,s}const vi=qc(vr("Inject",s=>({token:s})),-1),ro=qc(vr("Optional"),8),la=qc(vr("SkipSelf"),4);let ca;function ua(s){var o;return(null===(o=function(){if(void 0===ca&&(ca=null,It.trustedTypes))try{ca=It.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ca}())||void 0===o?void 0:o.createHTML(s))||s}class Ss{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class _v extends Ss{getTypeName(){return"HTML"}}class Yg extends Ss{getTypeName(){return"Style"}}class Qg extends Ss{getTypeName(){return"Script"}}class yv extends Ss{getTypeName(){return"URL"}}class bv extends Ss{getTypeName(){return"ResourceURL"}}function So(s){return s instanceof Ss?s.changingThisBreaksApplicationSecurity:s}function rc(s,o){const a=Ao(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function Ao(s){return s instanceof Ss&&s.getTypeName()||null}function da(s){return new _v(s)}function id(s){return new Yg(s)}function Th(s){return new Qg(s)}function Jg(s){return new yv(s)}function up(s){return new bv(s)}class Xg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(ua(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class dp{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=ua(o),a;const c=this.inertDocument.createElement("body");return c.innerHTML=ua(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const _=a.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const e_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,t_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ic(s){return(s=String(s)).match(e_)||s.match(t_)?s:"unsafe:"+s}function xo(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function il(...s){const o={};for(const a of s)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const xh=xo("area,br,col,hr,img,wbr"),kh=xo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),n_=xo("rp,rt"),od=il(xh,il(kh,xo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),il(n_,xo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),il(n_,kh)),Mh=xo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sc=xo("srcset"),i_=il(Mh,sc,xo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),s_=xo("script,style,template");class vv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!od.hasOwnProperty(a))return this.sanitizedSomething=!0,!s_.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=o.attributes;for(let d=0;d<c.length;d++){const h=c.item(d),_=h.name,b=_.toLowerCase();if(!i_.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let C=h.value;Mh[b]&&(C=ic(C)),sc[b]&&(s=C,C=(s=String(s)).split(",").map(o=>ic(o.trim())).join(", ")),this.buf.push(" ",_,'="',a_(C),'"')}var s;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();od.hasOwnProperty(a)&&!xh.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(a_(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const o_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rh=/([^\#-~ |!])/g;function a_(s){return s.replace(/&/g,"&amp;").replace(o_,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Rh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ha;function l_(s,o){let a=null;try{ha=ha||function(s){const o=new dp(s);return function(){try{return!!(new window.DOMParser).parseFromString(ua(""),"text/html")}catch(s){return!1}}()?new Xg(o):o}(s);let c=o?String(o):"";a=ha.getInertBodyElement(c);let d=5,h=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=h,h=a.innerHTML,a=ha.getInertBodyElement(c)}while(c!==h);return ua((new vv).sanitizeChildren(ad(a)||a))}finally{if(a){const c=ad(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function ad(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Vn=(()=>((Vn=Vn||{})[Vn.NONE=0]="NONE",Vn[Vn.HTML=1]="HTML",Vn[Vn.STYLE=2]="STYLE",Vn[Vn.SCRIPT=3]="SCRIPT",Vn[Vn.URL=4]="URL",Vn[Vn.RESOURCE_URL=5]="RESOURCE_URL",Vn))();function Nh(s){const o=function(){const s=Fe();return s&&s[12]}();return o?o.sanitize(Vn.URL,s)||"":rc(s,"URL")?So(s):ic(ue(s))}const h_="__ngContext__";function qr(s,o){s[h_]=o}function Zn(s){const o=function(s){return s[h_]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Bh(s){return s.ngOriginalError}function Iv(s,...o){s.error(...o)}class v{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),c=this._findContext(o),d=(s=o)&&s.ngErrorLogger||Iv;var s;d(this._console,"ERROR",o),a&&d(this._console,"ORIGINAL ERROR",a),c&&d(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(Bh(o)):null}_findOriginalError(o){let a=o&&Bh(o);for(;a&&Bh(a);)a=Bh(a);return a||null}}const xs=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function io(s){return s instanceof Function?s():s}var so=(()=>((so=so||{})[so.Important=1]="Important",so[so.DashCase=2]="DashCase",so))();function ud(s,o){return undefined(s,o)}function Hh(s){const o=s[3];return ei(o)?o[3]:o}function __(s){return Av(s[13])}function y_(s){return Av(s[4])}function Av(s){for(;null!==s&&!ei(s);)s=s[4];return s}function $h(s,o,a,c,d){if(null!=c){let h,_=!1;ei(c)?h=c:es(c)&&(_=!0,c=c[0]);const b=Tn(c);0===s&&null!==a?null==d?tI(o,a,b):Yn(o,a,b,d||null,!0):1===s&&null!==a?Yn(o,a,b,d||null,!0):2===s?function(s,o,a){const c=zh(s,o);c&&function(s,o,a,c){pn(s)?s.removeChild(o,a,c):o.removeChild(a)}(s,c,o,a)}(o,b,_):3===s&&o.destroyNode(b),null!=h&&function(s,o,a,c,d){const h=a[7];h!==Tn(a)&&$h(o,s,c,h,d);for(let b=10;b<a.length;b++){const C=a[b];qh(C[1],C,s,o,c,h)}}(o,s,h,a,d)}}function Ep(s,o,a){return pn(s)?s.createElement(o,a):null===a?s.createElement(o):s.createElementNS(a,o)}function dd(s,o){const a=s[9],c=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,wo(d,-1)),a.splice(c,1)}function Mv(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const d=c[17];null!==d&&d!==s&&dd(d,c),o>0&&(s[a-1][4]=c[4]);const h=ri(s,10+o);!function(s,o){qh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=h[19];null!==_&&_.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function QC(s,o){if(!(256&o[2])){const a=o[11];pn(a)&&a.destroyNode&&qh(s,o,a,3,null,null),function(s){let o=s[13];if(!o)return Rv(s[1],s);for(;o;){let a=null;if(es(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)es(o)&&Rv(o[1],o),o=o[3];null===o&&(o=s),es(o)&&Rv(o[1],o),a=o&&o[4]}o=a}}(o)}}function Rv(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Jl)){const h=a[c+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const b=d[h[_]],C=h[_+1];try{C.call(b)}finally{}}else try{h.call(d)}finally{}}}}(s,o),function(s,o){const a=s.cleanup,c=o[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const _=a[h+1],b="function"==typeof _?_(o):Tn(o[_]),C=c[d=a[h+2]],T=a[h+3];"boolean"==typeof T?b.removeEventListener(a[h],C,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),h+=2}else{const _=c[d=a[h+1]];a[h].call(_)}if(null!==c){for(let h=d+1;h<c.length;h++)c[h]();o[7]=null}}(s,o),1===o[1].type&&pn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ei(o[3])){a!==o[3]&&dd(a,o);const c=o[19];null!==c&&c.detachView(s)}}}function XC(s,o,a){return function(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===tn.None||d===tn.Emulated)return null}return Gr(c,a)}(s,o.parent,a)}function Yn(s,o,a,c,d){pn(s)?s.insertBefore(o,a,c,d):o.insertBefore(a,c,d)}function tI(s,o,a){pn(s)?s.appendChild(o,a):o.appendChild(a)}function wp(s,o,a,c,d){null!==c?Yn(s,o,a,c,d):tI(s,o,a)}function zh(s,o){return pn(s)?s.parentNode(o):o.parentNode}function nI(s,o,a){return b_(s,o,a)}let b_=function(s,o,a){return 40&s.type?Gr(s,a):null};function v_(s,o,a,c){const d=XC(s,c,o),h=o[11],b=nI(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)wp(h,d,a[C],b,!1);else wp(h,d,a,b,!1)}function Cp(s,o){if(null!==o){const a=o.type;if(3&a)return Gr(o,s);if(4&a)return Ip(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Cp(s,c);{const d=s[o.index];return ei(d)?Ip(-1,d):Tn(d)}}if(32&a)return ud(o,s)()||Tn(s[o.index]);{const c=Pv(s,o);return null!==c?Array.isArray(c)?c[0]:Cp(Hh(s[16]),c):Cp(s,o.next)}}return null}function Pv(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ip(s,o){const a=10+s+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return Cp(c,d)}return o[7]}function uc(s,o,a,c,d,h,_){for(;null!=a;){const b=c[a.index],C=a.type;if(_&&0===o&&(b&&qr(Tn(b),c),a.flags|=4),64!=(64&a.flags))if(8&C)uc(s,o,a.child,c,d,h,!1),$h(o,s,d,b,h);else if(32&C){const T=ud(a,c);let k;for(;k=T();)$h(o,s,d,k,h);$h(o,s,d,b,h)}else 16&C?iI(s,o,c,a,d,h):$h(o,s,d,b,h);a=_?a.projectionNext:a.next}}function qh(s,o,a,c,d,h){uc(a,c,s.firstChild,o,d,h,!1)}function iI(s,o,a,c,d,h){const _=a[16],C=_[6].projection[c.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)$h(o,s,d,C[T],h);else uc(s,o,C,_[3],d,h,!0)}function oI(s,o,a){pn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function Fv(s,o,a){pn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function aI(s,o,a){let c=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const h=o.length;if(d+h===c||s.charCodeAt(d+h)<=32)return d}a=d+1}}const lI="ng-template";function Px(s,o,a){let c=0;for(;c<s.length;){let d=s[c++];if(a&&"class"===d){if(d=s[c],-1!==aI(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function cI(s){return 4===s.type&&s.value!==lI}function Lv(s,o,a){return o===(4!==s.type||a?s.value:lI)}function Fx(s,o,a){let c=4;const d=s.attrs||[],h=function(s){for(let o=0;o<s.length;o++)if(fh(s[o]))return o;return s.length}(d);let _=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!_)if(4&c){if(c=2|1&c,""!==C&&!Lv(s,C,a)||""===C&&1===o.length){if(fa(c))return!1;_=!0}}else{const T=8&c?C:o[++b];if(8&c&&null!==s.attrs){if(!Px(s.attrs,T,a)){if(fa(c))return!1;_=!0}continue}const P=uI(8&c?"class":C,d,cI(s),a);if(-1===P){if(fa(c))return!1;_=!0;continue}if(""!==T){let V;V=P>h?"":d[P+1].toLowerCase();const q=8&c?V:null;if(q&&-1!==aI(q,T,0)||2&c&&T!==V){if(fa(c))return!1;_=!0}}}}else{if(!_&&!fa(c)&&!fa(C))return!1;if(_&&fa(C))continue;_=!1,c=C|1&c}}return fa(c)||_}function fa(s){return 0==(1&s)}function uI(s,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let h=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)h=!0;else{if(1===_||2===_){let b=o[++d];for(;"string"==typeof b;)b=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=h?1:2}return-1}return function(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function dI(s,o,a=!1){for(let c=0;c<o.length;c++)if(Fx(s,o[c],a))return!0;return!1}function Vx(s,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(s.length===c.length){for(let d=0;d<s.length;d++)if(s[d]!==c[d])continue e;return!0}}return!1}function fI(s,o){return s?":not("+o.trim()+")":o}function Ux(s){let o=s[0],a=1,c=2,d="",h=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&c){const b=s[++a];d+="["+_+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!fa(_)&&(o+=fI(h,d),d=""),c=_,h=h||!fa(c);a++}return""!==d&&(o+=fI(h,d)),o}const Ft={};function pI(s){mI(Ut(),Fe(),bi()+s,ea())}function mI(s,o,a,c){if(!c)if(3==(3&o[2])){const h=s.preOrderCheckHooks;null!==h&&Vc(o,h,a)}else{const h=s.preOrderHooks;null!==h&&Ql(o,h,0,a)}Zl(a)}function E_(s,o){return s<<17|o<<2}function pa(s){return s>>17&32767}function Bv(s){return 2|s}function ol(s){return(131068&s)>>2}function w_(s,o){return-131069&s|o<<2}function jv(s){return 1|s}function DI(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],h=a[c+1];if(-1!==h){const _=s.data[h];Hu(d),_.contentQueries(2,o[h],h)}}}function C_(s,o,a,c,d,h,_,b,C,T){const k=o.blueprint.slice();return k[0]=d,k[2]=140|c,Xo(k),k[3]=k[15]=s,k[8]=a,k[10]=_||s&&s[10],k[11]=b||s&&s[11],k[12]=C||s&&s[12]||null,k[9]=T||s&&s[9]||null,k[6]=h,k[16]=2==o.type?s[16]:k,k}function Jc(s,o,a,c,d){let h=s.data[o];if(null===h)h=function(s,o,a,c,d){const h=Bu(),_=ju(),C=s.data[o]=function(s,o,a,c,d,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,a,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==h&&(_?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(s,o,a,c,d),vt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=c,h.attrs=d;const _=function(){const s=vt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return vs(h,!0),h}function Zh(s,o,a,c){if(0===a)return-1;const d=o.length;for(let h=0;h<a;h++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Ap(s,o,a){Kl(o);try{const c=s.viewQuery;null!==c&&VI(1,c,a);const d=s.template;null!==d&&SI(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&DI(s,o),s.staticViewQueries&&VI(2,s.viewQuery,a);const h=s.components;null!==h&&function(s,o){for(let a=0;a<o.length;a++)pL(s,o[a])}(o,h)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ta()}}function Yh(s,o,a,c){const d=o[2];if(256==(256&d))return;Kl(o);const h=ea();try{Xo(o),function(s){vt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&SI(s,o,a,2,c);const _=3==(3&d);if(!h)if(_){const T=s.preOrderCheckHooks;null!==T&&Vc(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Ql(o,T,0,null),Wn(o,0)}if(function(s){for(let o=__(s);null!==o;o=y_(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],h=d[3];0==(1024&d[2])&&wo(h,1),d[2]|=1024}}}(o),function(s){for(let o=__(s);null!==o;o=y_(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];Nc(c)&&Yh(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&DI(s,o),!h)if(_){const T=s.contentCheckHooks;null!==T&&Vc(o,T)}else{const T=s.contentHooks;null!==T&&Ql(o,T,1),Wn(o,1)}!function(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Zl(~d);else{const h=d,_=a[++c],b=a[++c];oh(_,h),b(2,o[h])}}}finally{Zl(-1)}}(s,o);const b=s.components;null!==b&&function(s,o){for(let a=0;a<o.length;a++)fL(s,o[a])}(o,b);const C=s.viewQuery;if(null!==C&&VI(2,C,c),!h)if(_){const T=s.viewCheckHooks;null!==T&&Vc(o,T)}else{const T=s.viewHooks;null!==T&&Ql(o,T,2),Wn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),h||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,wo(o[3],-1))}finally{ta()}}function qx(s,o,a,c){const d=o[10],h=!ea(),_=Ul(o);try{h&&!_&&d.begin&&d.begin(),_&&Ap(s,o,c),Yh(s,o,a,c)}finally{h&&!_&&d.end&&d.end()}}function SI(s,o,a,c,d){const h=bi(),_=2&c;try{Zl(-1),_&&o.length>20&&mI(s,o,20,ea()),a(c,d)}finally{Zl(h)}}function Yv(s,o,a){!Ws()||(function(s,o,a,c){const d=a.directiveStart,h=a.directiveEnd;s.firstCreatePass||lt(a,o),qr(c,o);const _=a.initialInputs;for(let b=d;b<h;b++){const C=s.data[b],T=Hr(C);T&&lL(o,a,C);const k=Ja(o,s,b,a);qr(k,o),null!==_&&cL(0,b-d,k,C,0,_),T&&(br(a.index,o)[8]=k)}}(s,o,a,Gr(a,o)),128==(128&a.flags)&&function(s,o,a){const c=a.directiveStart,d=a.directiveEnd,_=a.index,b=vt.lFrame.currentDirectiveIndex;try{Zl(_);for(let C=c;C<d;C++){const T=s.data[C],k=o[C];ql(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&tk(T,k)}}finally{Zl(-1),ql(b)}}(s,o,a))}function Qv(s,o,a=Gr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let h=0;h<c.length;h+=2){const _=c[h+1],b=-1===_?a(o,s):s[_];s[d++]=b}}}function xI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=I_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function I_(s,o,a,c,d,h,_,b,C,T){const k=20+c,P=k+d,V=function(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Ft);return a}(k,P),q="function"==typeof T?T():T;return V[1]={type:s,blueprint:V,template:a,queries:null,viewQuery:b,declTNode:o,data:V.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:q,incompleteFirstPass:!1}}function kI(s,o,a,c){const d=ak(o);null===a?d.push(c):(d.push(a),s.firstCreatePass&&lk(s).push(c,d.length-1))}function MI(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function No(s,o,a,c,d,h,_,b){const C=Gr(o,a);let k,T=o.inputs;!b&&null!=T&&(k=T[c])?(dk(s,a,k,c,d),ti(o)&&function(s,o){const a=br(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,pn(h)?h.setProperty(C,c,d):Xl(c)||(C.setProperty?C.setProperty(c,d):C[c]=d))}function RI(s,o,a,c){let d=!1;if(Ws()){const h=function(s,o,a){const c=s.directiveRegistry;let d=null;if(c)for(let h=0;h<c.length;h++){const _=c[h];dI(a,_.selectors,!1)&&(d||(d=[]),sa(lt(a,o),s,_.type),Hr(_)?(nk(s,a),d.unshift(_)):d.push(_))}return d}(s,o,a),_=null===c?null:{"":-1};if(null!==h){d=!0,rk(a,s.data.length,h.length);for(let k=0;k<h.length;k++){const P=h[k];P.providersResolver&&P.providersResolver(P)}let b=!1,C=!1,T=Zh(s,o,h.length,null);for(let k=0;k<h.length;k++){const P=h[k];a.mergedAttrs=ws(a.mergedAttrs,P.hostAttrs),ik(s,a,o,T,P),aL(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!b&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),b=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(s,o){const c=o.directiveEnd,d=s.data,h=o.attrs,_=[];let b=null,C=null;for(let T=o.directiveStart;T<c;T++){const k=d[T],P=k.inputs,V=null===h||cI(o)?null:uL(P,h);_.push(V),b=MI(P,T,b),C=MI(k.outputs,T,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=b,o.outputs=C}(s,a)}_&&function(s,o,a){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const h=a[o[d+1]];if(null==h)throw new Ne("301",`Export of name '${o[d+1]}' not found!`);c.push(o[d],h)}}}(a,c,_)}return a.mergedAttrs=ws(a.mergedAttrs,a.attrs),d}function ek(s,o,a,c,d,h){const _=h.hostBindings;if(_){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(b)!=C&&b.push(C),b.push(c,d,_)}}function tk(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function nk(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function aL(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Hr(o)&&(a[""]=s)}}function rk(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function ik(s,o,a,c,d){s.data[c]=d;const h=d.factory||(d.factory=gs(d.type)),_=new Jl(h,Hr(d),null);s.blueprint[c]=_,a[c]=_,ek(s,o,0,c,Zh(s,a,d.hostVars,Ft),d)}function lL(s,o,a){const c=Gr(o,s),d=xI(a),h=s[10],_=Jv(s,C_(s,d,null,a.onPush?64:16,c,o,h,h.createRenderer(c,a),null,null));s[o.index]=_}function hc(s,o,a,c,d,h){const _=Gr(s,o);!function(s,o,a,c,d,h,_){if(null==h)pn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const b=null==_?ue(h):_(h,c||"",d);pn(s)?s.setAttribute(o,d,b,a):a?o.setAttributeNS(a,d,b):o.setAttribute(d,b)}}(o[11],_,h,s.value,a,c,d)}function cL(s,o,a,c,d,h){const _=h[o];if(null!==_){const b=c.setInput;for(let C=0;C<_.length;){const T=_[C++],k=_[C++],P=_[C++];null!==b?c.setInput(a,P,T,k):a[k]=P}}}function uL(s,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function sk(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function fL(s,o){const a=br(o,s);if(Nc(a)){const c=a[1];80&a[2]?Yh(c,a,c.template,a[8]):a[5]>0&&OI(a)}}function OI(s){for(let c=__(s);null!==c;c=y_(c))for(let d=10;d<c.length;d++){const h=c[d];if(1024&h[2]){const _=h[1];Yh(_,h,_.template,h[8])}else h[5]>0&&OI(h)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=br(a[c],s);Nc(d)&&d[5]>0&&OI(d)}}function pL(s,o){const a=br(o,s),c=a[1];(function(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),Ap(c,a,a[8])}function Jv(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function PI(s){for(;s;){s[2]|=64;const o=Hh(s);if(Gs(s)&&!o)return s;s=o}return null}function LI(s,o,a){const c=o[10];c.begin&&c.begin();try{Yh(s,o,s.template,a)}catch(d){throw uk(o,d),d}finally{c.end&&c.end()}}function ok(s){!function(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],c=Zn(a),d=c[1];qx(d,c,d.template,a)}}(s[8])}function VI(s,o,a){Hu(0),o(s,a)}const bL=(()=>Promise.resolve(null))();function ak(s){return s[7]||(s[7]=[])}function lk(s){return s.cleanup||(s.cleanup=[])}function uk(s,o){const a=s[9],c=a?a.get(v,null):null;c&&c.handleError(o)}function dk(s,o,a,c,d){for(let h=0;h<a.length;){const _=a[h++],b=a[h++],C=o[_],T=s.data[_];null!==T.setInput?T.setInput(C,d,c,b):C[b]=d}}function Xc(s,o,a){const c=Eo(o,s);!function(s,o,a){pn(s)?s.setValue(o,a):o.textContent=a}(s[11],c,a)}function Xv(s,o,a){let c=a?s.styles:null,d=a?s.classes:null,h=0;if(null!==o)for(let _=0;_<o.length;_++){const b=o[_];"number"==typeof b?h=b:1==h?d=ie(d,b):2==h&&(c=ie(c,b+": "+o[++_]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}const xp=new mn("INJECTOR",-1);class UI{get(o,a=Gt){if(a===Gt){const c=new Error(`NullInjectorError: No provider for ${Q(o)}!`);throw c.name="NullInjectorError",c}return a}}const T_=new mn("Set Injector scope."),D_={},wL={};let BI;function hk(){return void 0===BI&&(BI=new UI),BI}function fk(s,o=null,a=null,c){return new IL(s,a,o||hk(),c)}class IL{constructor(o,a,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Ts(a,b=>this.processProvider(b,o,a)),Ts([o],b=>this.processInjectorType(b,[],h)),this.records.set(xp,kp(void 0,this));const _=this.records.get(T_);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:Q(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Gt,c=ot.Default){this.assertNotDestroyed();const d=no(this),h=Jr(void 0);try{if(!(c&ot.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof mn)&&Yr(o);b=C&&this.injectableDefInScope(C)?kp(jI(o),D_):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&ot.Self?hk():this.parent).get(o,a=c&ot.Optional&&a===Gt?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Ln]=_[Ln]||[]).unshift(Q(o)),d)throw _;return ed(_,o,"R3InjectorError",this.source)}throw _}finally{Jr(h),no(d)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(Q(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,a,c){if(!(o=z(o)))return!1;let d=mo(o);const h=null==d&&o.ngModule||void 0,_=void 0===h?o:h,b=-1!==c.indexOf(_);if(void 0!==h&&(d=mo(h)),null==d)return!1;if(null!=d.imports&&!b){let k;c.push(_);try{Ts(d.imports,P=>{this.processInjectorType(P,a,c)&&(void 0===k&&(k=[]),k.push(P))})}finally{}if(void 0!==k)for(let P=0;P<k.length;P++){const{ngModule:V,providers:q}=k[P];Ts(q,X=>this.processProvider(X,V,q||K))}}this.injectorDefTypes.add(_);const C=gs(_)||(()=>new _);this.records.set(_,kp(C,D_));const T=d.providers;if(null!=T&&!b){const k=o;Ts(T,P=>this.processProvider(P,k,T))}return void 0!==h&&void 0!==o.providers}processProvider(o,a,c){let d=Mp(o=z(o))?o:z(o&&o.provide);const h=mk(s=o)?kp(void 0,s.useValue):kp(pk(s),D_);var s;if(Mp(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=kp(void 0,D_,!0),_.factory=()=>Wr(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,h)}hydrate(o,a){return a.value===D_&&(a.value=wL,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(s=a.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const a=z(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function jI(s){const o=Yr(s),a=null!==o?o.factory:gs(s);if(null!==a)return a;if(s instanceof mn)throw new Error(`Token ${Q(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=Xs(o,"?");throw new Error(`Can't resolve all parameters for ${Q(s)}: (${c.join(", ")}).`)}const a=function(s){const o=s&&(s[Us]||s[An]);if(o){const a=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Error("unreachable")}function pk(s,o,a){let c;if(Mp(s)){const d=z(s);return gs(d)||jI(d)}if(mk(s))c=()=>z(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Wr(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>Kn(z(s.useExisting));else{const d=z(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return gs(d)||jI(d);c=()=>new d(...Wr(s.deps))}return c}function kp(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function mk(s){return null!==s&&"object"==typeof s&&Ni in s}function Mp(s){return"function"==typeof s}const gk=function(s,o,a){return function(s,o=null,a=null,c){const d=fk(s,o,a,c);return d._resolveInjectorDefTypes(),d}({name:a},o,s,a)};let Qn=(()=>{class s{static create(a,c){return Array.isArray(a)?gk(a,c,""):gk(a.providers,a.parent,a.name||"")}}return s.THROW_IF_NOT_FOUND=Gt,s.NULL=new UI,s.\u0275prov=an({token:s,providedIn:"any",factory:()=>Kn(xp)}),s.__NG_ELEMENT_ID__=-1,s})();function KL(s,o){za(Zn(s)[1],_n())}function Op(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let d;if(Hr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");d=o.\u0275dir}if(d){if(a){c.push(d);const _=s;_.inputs=Pp(s.inputs),_.declaredInputs=Pp(s.declaredInputs),_.outputs=Pp(s.outputs);const b=d.hostBindings;b&&ZL(s,b);const C=d.viewQuery,T=d.contentQueries;if(C&&Qh(s,C),T&&ZI(s,T),Ie(s.inputs,d.inputs),Ie(s.declaredInputs,d.declaredInputs),Ie(s.outputs,d.outputs),Hr(d)&&d.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let _=0;_<h.length;_++){const b=h[_];b&&b.ngInherit&&b(s),b===Op&&(a=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ws(d.hostAttrs,a=ws(a,d.hostAttrs))}}(c)}function Pp(s){return s===ne?{}:s===K?[]:s}function Qh(s,o){const a=s.viewQuery;s.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function ZI(s,o){const a=s.contentQueries;s.contentQueries=a?(c,d,h)=>{o(c,d,h),a(c,d,h)}:o}function ZL(s,o){const a=s.hostBindings;s.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let fd=null;function Oo(){if(!fd){const s=It.Symbol;if(s&&s.iterator)fd=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(fd=c)}}}return fd}function pd(s){return!!n0(s)&&(Array.isArray(s)||!(s instanceof Map)&&Oo()in s)}function n0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function si(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function r0(s,o,a,c){const d=Fe();return si(d,Ha(),o)&&(Ut(),hc(Pn(),d,s,o,a,c)),r0}function Hk(s,o,a,c,d,h,_,b){const C=Fe(),T=Ut(),k=s+20,P=T.firstCreatePass?function(s,o,a,c,d,h,_,b,C){const T=o.consts,k=Jc(o,s,4,_||null,bs(T,b));RI(o,a,k,bs(T,C)),za(o,k);const P=k.tViews=I_(2,k,c,d,h,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,k),P.queries=o.queries.embeddedTView(k)),k}(k,T,C,o,a,c,d,h,_):T.data[k];vs(P,!1);const V=C[11].createComment("");v_(T,C,V,P),qr(V,C),Jv(C,C[k]=sk(V,C,V,P)),Na(P)&&Yv(T,C,P),null!=_&&Qv(C,P,b)}function s0(s){return function(s,o){return s[o]}(vt.lFrame.contextLView,20+s)}function Xh(s,o=ot.Default){const a=Fe();return null===a?Kn(s,o):jc(_n(),a,z(s),o)}function ya(s,o,a){const c=Fe();return si(c,Ha(),o)&&No(Ut(),Pn(),c,s,o,c[11],a,!1),ya}function hT(s,o,a,c,d){const _=d?"class":"style";dk(s,a,o.inputs[_],_,c)}function fT(s,o,a,c){const d=Fe(),h=Ut(),_=20+s,b=d[11],C=d[_]=Ep(b,o,vt.lFrame.currentNamespace),T=h.firstCreatePass?function(s,o,a,c,d,h,_){const b=o.consts,T=Jc(o,s,2,d,bs(b,h));return RI(o,a,T,bs(b,_)),null!==T.attrs&&Xv(T,T.attrs,!1),null!==T.mergedAttrs&&Xv(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,h,d,0,o,a,c):h.data[_];vs(T,!0);const k=T.mergedAttrs;null!==k&&ns(b,C,k);const P=T.classes;null!==P&&Fv(b,C,P);const V=T.styles;null!==V&&oI(b,C,V),64!=(64&T.flags)&&v_(h,d,C,T),0===vt.lFrame.elementDepthCount&&qr(C,d),vt.lFrame.elementDepthCount++,Na(T)&&(Yv(h,d,T),function(s,o,a){if(Mu(o)){const d=o.directiveEnd;for(let h=o.directiveStart;h<d;h++){const _=s.data[h];_.contentQueries&&_.contentQueries(1,a[h],h)}}}(h,T,d)),null!==c&&Qv(d,T)}function N_(){let s=_n();ju()?Hl():(s=s.parent,vs(s,!1));const o=s;vt.lFrame.elementDepthCount--;const a=Ut();a.firstCreatePass&&(za(a,s),Mu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&hT(a,o,Fe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&hT(a,o,Fe(),o.stylesWithoutHost,!1)}function m0(s,o,a,c){fT(s,o,a,c),N_()}function nM(){return Fe()}function pT(s){return!!s&&"function"==typeof s.then}function rM(s){return!!s&&"function"==typeof s.subscribe}const O_=rM;function nu(s,o,a,c){const d=Fe(),h=Ut(),_=_n();return function(s,o,a,c,d,h,_,b){const C=Na(c),k=s.firstCreatePass&&lk(s),P=o[8],V=ak(o);let q=!0;if(3&c.type||b){const le=Gr(c,o),Be=b?b(le):le,ke=V.length,ut=b?yt=>b(Tn(yt[c.index])):c.index;if(pn(a)){let yt=null;if(!b&&C&&(yt=function(s,o,a,c){const d=s.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const _=d[h];if(_===a&&d[h+1]===c){const b=o[7],C=d[h+2];return b.length>C?b[C]:null}"string"==typeof _&&(h+=2)}return null}(s,o,d,c.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=h,yt.__ngLastListenerFn__=h,q=!1;else{h=dl(c,o,P,h,!1);const kt=a.listen(Be,d,h);V.push(h,kt),k&&k.push(d,ut,ke,ke+1)}}else h=dl(c,o,P,h,!0),Be.addEventListener(d,h,_),V.push(h),k&&k.push(d,ut,ke,_)}else h=dl(c,o,P,h,!1);const X=c.outputs;let ye;if(q&&null!==X&&(ye=X[d])){const le=ye.length;if(le)for(let Be=0;Be<le;Be+=2){const Lr=o[ye[Be]][ye[Be+1]].subscribe(h),ji=V.length;V.push(h,Lr),k&&k.push(d,c.index,ji,-(ji+1))}}}(h,d,d[11],_,s,o,!!a,c),nu}function P_(s,o,a,c){try{return!1!==a(c)}catch(d){return uk(s,d),!1}}function dl(s,o,a,c,d){return function h(_){if(_===Function)return c;const b=2&s.flags?br(s.index,o):o;0==(32&o[2])&&PI(b);let C=P_(o,0,c,_),T=h.__ngNextListenerFn__;for(;T;)C=P_(o,0,T,_)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function b0(s=1){return function(s){return(vt.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,vt.lFrame.contextLView))[8]}(s)}function v0(s,o){let a=null;const c=function(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const h=o[d];if("*"!==h){if(null===c?dI(s,h,!0):Vx(c,h))return d}else a=d}return a}function F_(s){const o=Fe()[16][6];if(!o.projection){const c=o.projection=Xs(s?s.length:1,null),d=c.slice();let h=o.child;for(;null!==h;){const _=s?v0(h,s):0;null!==_&&(d[_]?d[_].projectionNext=h:c[_]=h,d[_]=h),h=h.next}}}function L_(s,o=0,a){const c=Fe(),d=Ut(),h=Jc(d,20+s,16,null,a||null);null===h.projection&&(h.projection=o),Hl(),64!=(64&h.flags)&&function(s,o,a){iI(o[11],0,o,a,XC(s,a,o),nI(a.parent||o[6],a,o))}(d,c,h)}function _T(s,o,a,c,d){const h=s[a+1],_=null===o;let b=c?pa(h):ol(h),C=!1;for(;0!==b&&(!1===C||_);){const k=s[b+1];I0(s[b],o)&&(C=!0,s[b+1]=c?jv(k):Bv(k)),b=c?pa(k):ol(k)}C&&(s[a+1]=c?Bv(h):jv(h))}function I0(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&eo(s,o)>=0}function fc(s,o){return function(s,o,a,c){const d=Fe(),h=Ut(),_=function(s){const o=vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);h.firstUpdatePass&&function(s,o,a,c){const d=s.data;if(null===d[a+1]){const h=d[bi()],_=function(s,o){return o>=s.expandoStartIndex}(s,a);(function(s,o){return 0!=(s.flags&(o?16:32))})(h,c)&&null===o&&!_&&(o=!1),o=function(s,o,a,c){const d=function(s){const o=vt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let h=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=tf(a=Gp(null,s,o,a,c),o.attrs,c),h=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(a=Gp(d,s,o,a,c),null===h){let C=function(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==ol(c))return s[pa(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Gp(null,s,o,C[1],c),C=tf(C,o.attrs,c),function(s,o,a,c){s[pa(a?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else h=function(s,o,a){let c;const d=o.directiveEnd;for(let h=1+o.directiveStylingLast;h<d;h++)c=tf(c,s[h].hostAttrs,a);return tf(c,o.attrs,a)}(s,o,c)}return void 0!==h&&(c?o.residualClasses=h:o.residualStyles=h),a}(d,h,o,c),function(s,o,a,c,d,h){let _=h?o.classBindings:o.styleBindings,b=pa(_),C=ol(_);s[c]=a;let k,T=!1;if(Array.isArray(a)){const P=a;k=P[1],(null===k||eo(P,k)>0)&&(T=!0)}else k=a;if(d)if(0!==C){const V=pa(s[b+1]);s[c+1]=E_(V,b),0!==V&&(s[V+1]=w_(s[V+1],c)),s[b+1]=function(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=E_(b,0),0!==b&&(s[b+1]=w_(s[b+1],c)),b=c;else s[c+1]=E_(C,0),0===b?b=c:s[C+1]=w_(s[C+1],c),C=c;T&&(s[c+1]=Bv(s[c+1])),_T(s,k,c,!0),_T(s,k,c,!1),function(s,o,a,c,d){const h=d?s.residualClasses:s.residualStyles;null!=h&&"string"==typeof o&&eo(h,o)>=0&&(a[c+1]=jv(a[c+1]))}(o,k,s,c,h),_=E_(b,C),h?o.classBindings=_:o.styleBindings=_}(d,h,o,a,_,c)}}(h,s,_,c),o!==Ft&&si(d,_,o)&&function(s,o,a,c,d,h,_,b){if(!(3&o.type))return;const C=s.data,T=C[b+1];Wp(function(s){return 1==(1&s)}(T)?ET(C,o,a,d,ol(T),_):void 0)||(Wp(h)||function(s){return 2==(2&s)}(T)&&(h=ET(C,null,a,d,b,_)),function(s,o,a,c,d){const h=pn(s);if(o)d?h?s.addClass(a,c):a.classList.add(c):h?s.removeClass(a,c):a.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:so.DashCase;if(null==d)h?s.removeStyle(a,c,_):a.style.removeProperty(c);else{const b="string"==typeof d&&d.endsWith("!important");b&&(d=d.slice(0,-10),_|=so.Important),h?s.setStyle(a,c,d,_):a.style.setProperty(c,d,b?"important":"")}}}(c,_,Eo(bi(),a),d,h))}(h,h.data[bi()],d,d[11],s,d[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Q(So(s)))),s}(o,a),c,_)}(s,o,null,!0),fc}function Gp(s,o,a,c,d){let h=null;const _=a.directiveEnd;let b=a.directiveStylingLast;for(-1===b?b=a.directiveStart:b++;b<_&&(h=o[b],c=tf(c,h.hostAttrs,d),h!==s);)b++;return null!==s&&(a.directiveStylingLast=b),c}function tf(s,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let h=0;h<o.length;h++){const _=o[h];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),zr(s,_,!!a||o[++h]))}return void 0===s?null:s}function ET(s,o,a,c,d,h){const _=null===o;let b;for(;d>0;){const C=s[d],T=Array.isArray(C),k=T?C[1]:C,P=null===k;let V=a[d+1];V===Ft&&(V=P?K:void 0);let q=P?Wc(V,c):k===c?V:void 0;if(T&&!Wp(q)&&(q=Wc(C,c)),Wp(q)&&(b=q,_))return b;const X=s[d+1];d=_?pa(X):ol(X)}if(null!==o){let C=h?o.residualClasses:o.residualStyles;null!=C&&(b=Wc(C,c))}return b}function Wp(s){return void 0!==s}function Z_(s,o=""){const a=Fe(),c=Ut(),d=s+20,h=c.firstCreatePass?Jc(c,d,1,o,null):c.data[d],_=a[d]=function(s,o){return pn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);v_(c,a,_,h),vs(h,!1)}function nf(s){return Y_("",s,""),nf}function Y_(s,o,a){const c=Fe(),d=function(s,o,a,c){return si(s,Ha(),a)?o+ue(a)+c:Ft}(c,s,o,a);return d!==Ft&&Xc(c,bi(),d),Y_}function kT(s,o,a){const c=Fe();return si(c,Ha(),o)&&No(Ut(),Pn(),c,s,o,c[11],a,!0),kT}const rf=void 0;var DM=["en",[["a","p"],["AM","PM"],rf],[["AM","PM"],rf,rf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rf,"{1} 'at' {0}",rf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),a=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Ed={};function ny(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=OT(o);if(a)return a;const c=o.split("-")[0];if(a=OT(c),a)return a;if("en"===c)return DM;throw new Error(`Missing locale data for the locale "${s}".`)}function NT(s){return ny(s)[wt.PluralCase]}function OT(s){return s in Ed||(Ed[s]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[s]),Ed[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Qp="en-US";let FT=Qp;function ry(s){Kt(s,"Expected localeId to be defined"),"string"==typeof s&&(FT=s.toLowerCase().replace(/_/g,"-"))}function W0(s,o,a,c,d){if(s=z(s),Array.isArray(s))for(let h=0;h<s.length;h++)W0(s[h],o,a,c,d);else{const h=Ut(),_=Fe();let b=Mp(s)?s:z(s.provide),C=pk(s);const T=_n(),k=1048575&T.providerIndexes,P=T.directiveStart,V=T.providerIndexes>>20;if(Mp(s)||!s.multi){const q=new Jl(C,d,Xh),X=K0(b,o,d?k:k+V,P);-1===X?(sa(lt(T,_),h,b),q0(h,s,o.length),o.push(b),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(q),_.push(q)):(a[X]=q,_[X]=q)}else{const q=K0(b,o,k+V,P),X=K0(b,o,k,k+V),ye=q>=0&&a[q],le=X>=0&&a[X];if(d&&!le||!d&&!ye){sa(lt(T,_),h,b);const Be=function(s,o,a,c,d){const h=new Jl(s,a,Xh);return h.multi=[],h.index=o,h.componentProviders=0,JT(h,d,c&&!a),h}(d?C2:w2,a.length,d,c,C);!d&&le&&(a[X].providerFactory=Be),q0(h,s,o.length,0),o.push(b),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Be),_.push(Be)}else q0(h,s,q>-1?q:X,JT(a[d?X:q],C,!d&&c));!d&&c&&le&&a[X].componentProviders++}}}function q0(s,o,a,c){const d=Mp(o);if(d||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const b=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const C=b.indexOf(a);-1===C?b.push(a,[c,_]):b[C+1].push(c,_)}else b.push(a,_)}}}function JT(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function K0(s,o,a,c){for(let d=a;d<c;d++)if(o[d]===s)return d;return-1}function w2(s,o,a,c){return XT(this.multi,[])}function C2(s,o,a,c){const d=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,b=Ja(a,a[1],this.providerFactory.index,c);h=b.slice(0,_),XT(d,h);for(let C=_;C<b.length;C++)h.push(b[C])}else h=[],XT(d,h);return h}function XT(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function tD(s,o=[]){return a=>{a.providersResolver=(c,d)=>function(s,o,a){const c=Ut();if(c.firstCreatePass){const d=Hr(s);W0(a,c.data,c.blueprint,d,!0),W0(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class pc{}const nD="ngComponent";class T2{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${Q(s)}. Did you add it to @NgModule.entryComponents?`);return o[nD]=s,o}(o)}}let sm=(()=>{class s{}return s.NULL=new T2,s})();function dy(...s){}function af(s,o){return new pl(Gr(s,o))}const S2=function(){return af(_n(),Fe())};let pl=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=S2,s})();function iD(s){return s instanceof pl?s.nativeElement:s}class Td{}let oR=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>lR(),s})();const lR=function(){const s=Fe(),a=br(_n().index,s);return function(s){return s[11]}(es(a)?a:s)};let sD=(()=>{class s{}return s.\u0275prov=an({token:s,providedIn:"root",factory:()=>null}),s})();class cR{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const oD=new cR("12.2.16");class lf{constructor(){}supports(o){return pd(o)}create(o){return new aD(o)}}const R2=(s,o)=>o;class aD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||R2}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,h=null;for(;a||c;){const _=!c||a&&a.currentIndex<X0(c,d,h)?a:c,b=X0(_,d,h),C=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{h||(h=[]);const T=b-d,k=C-d;if(T!=k){for(let V=0;V<T;V++){const q=V<h.length?h[V]:h[V]=0,X=q+V;k<=X&&X<T&&(h[V]=q+1)}h[_.previousIndex]=k-T}}b!==C&&o(_,b,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!pd(o))throw new Error(`Error trying to diff '${Q(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,h,_,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)h=o[b],_=this._trackByFn(b,h),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,h,_,b)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,_,b),c=!0),a=a._next}else d=0,function(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Oo()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,b=>{_=this._trackByFn(d,b),null!==a&&Object.is(a.trackById,_)?(c&&(a=this._verifyReinsertion(a,b,_,d)),Object.is(a.item,b)||this._addIdentityChange(a,b)):(a=this._mismatch(a,b,_,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let h;return null===o?h=this._itTail:(h=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,h,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,h,d)):o=this._addAfter(new uR(a,c),h,d),o}_verifyReinsertion(o,a,c,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?o=this._reinsertAfter(h,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,h=o._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new J0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new J0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class uR{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Q0{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class J0{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Q0,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function X0(s,o,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class lD{constructor(){}supports(o){return o instanceof Map||n0(o)}create(){return new dR}}class dR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||n0(o)))throw new Error(`Error trying to diff '${Q(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const h=d._prev,_=d._next;return h&&(h._next=_),_&&(_._prev=h),d._next=null,d._prev=null,d}const c=new hR(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class hR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cD(){return new Dd([new lf])}let Dd=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||cD()),deps:[[s,new la,new ro]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(s){return s.name||typeof s}(a)}'`)}}return s.\u0275prov=an({token:s,providedIn:"root",factory:cD}),s})();function dD(){return new hy([new lD])}let hy=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||dD()),deps:[[s,new la,new ro]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return s.\u0275prov=an({token:s,providedIn:"root",factory:dD}),s})();function om(s,o,a,c,d=!1){for(;null!==a;){const h=o[a.index];if(null!==h&&c.push(Tn(h)),ei(h))for(let b=10;b<h.length;b++){const C=h[b],T=C[1].firstChild;null!==T&&om(C[1],C,T,c)}const _=a.type;if(8&_)om(s,o,a.child,c);else if(32&_){const b=ud(a,o);let C;for(;C=b();)c.push(C)}else if(16&_){const b=Pv(o,a);if(Array.isArray(b))c.push(...b);else{const C=Hh(o[16]);om(C[1],C,b,c,!0)}}a=d?a.projectionNext:a.next}return c}class am{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return om(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ei(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Mv(o,c),ri(a,c))}this._attachedToViewContainer=!1}QC(this._lView[1],this._lView)}onDestroy(o){kI(this._lView[1],this._lView,null,o)}markForCheck(){PI(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){LI(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,a){Gl(!0);try{LI(s,o,a)}finally{Gl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,qh(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class fR extends am{constructor(o){super(o),this._view=o}detectChanges(){ok(this._view)}checkNoChanges(){!function(s){Gl(!0);try{ok(s)}finally{Gl(!1)}}(this._view)}get context(){return null}}const O2=function(s){return function(s,o,a){if(ti(s)&&!a){const c=br(s.index,o);return new am(c,c)}return 47&s.type?new am(o[16],o):null}(_n(),Fe(),16==(16&s))};let mR=(()=>{class s{}return s.__NG_ELEMENT_ID__=O2,s})();const P2=[new lD],L2=new Dd([new lf]),V2=new hy(P2),pD=function(){return eE(_n(),Fe())};let lm=(()=>{class s{}return s.__NG_ELEMENT_ID__=pD,s})();const bR=lm,vR=class extends bR{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o){const a=this._declarationTContainer.tViews,c=C_(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(a)),Ap(a,c,o),new am(c)}};function eE(s,o){return 4&s.type?new vR(o,s,af(s,o)):null}class Sd{}class gD{}const wR=function(){return iu(_n(),Fe())};let fy=(()=>{class s{}return s.__NG_ELEMENT_ID__=wR,s})();const CR=fy,yD=class extends CR{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return af(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const o=bn(this._hostTNode,this._hostLView);if(qn(o)){const a=ia(o,this._hostLView),c=ra(o);return new oa(a[1].data[c+8],a)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=cm(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){const d=o.createEmbeddedView(a||{});return this.insert(d,c),d}createComponent(o,a,c,d,h){const _=c||this.parentInjector;if(!h&&null==o.ngModule&&_){const C=_.get(Sd,null);C&&(h=C)}const b=o.create(_,d,void 0,h);return this.insert(b.hostView,a),b}insert(o,a){const c=o._lView,d=c[1];if(ei(c[3])){const k=this.indexOf(o);if(-1!==k)this.detach(k);else{const P=c[3],V=new yD(P,P[6],P[3]);V.detach(V.indexOf(o))}}const h=this._adjustIndex(a),_=this._lContainer;!function(s,o,a,c){const d=10+c,h=a.length;c>0&&(a[d-1][4]=o),c<h-10?(o[4]=a[d],el(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(d,c,_,h);const b=Ip(h,_),C=c[11],T=zh(C,_[7]);return null!==T&&function(s,o,a,c,d,h){c[0]=d,c[6]=o,qh(s,c,a,1,d,h)}(d,_[6],C,c,T,b),o.attachToViewContainerRef(),el(py(_),h,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=cm(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Mv(this._lContainer,a);c&&(ri(py(this._lContainer),a),QC(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Mv(this._lContainer,a);return c&&null!=ri(py(this._lContainer),a)?new am(c):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function cm(s){return s[8]}function py(s){return s[8]||(s[8]=[])}function iu(s,o){let a;const c=o[s.index];if(ei(c))a=c;else{let d;if(8&s.type)d=Tn(c);else{const h=o[11];d=h.createComment("");const _=Gr(s,o);Yn(h,zh(h,_),d,function(s,o){return pn(s)?s.nextSibling(o):o.nextSibling}(h,_),!1)}o[s.index]=a=sk(c,o,d,s),Jv(o,a)}return new yD(a,s,o)}const Rd={};class CE extends sm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Ar(o);return new RD(a,this.ngModule)}}function MD(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}const HR=new mn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xs});class RD extends pc{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=o.selectors.map(Ux).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return MD(this.componentDef.inputs)}get outputs(){return MD(this.componentDef.outputs)}create(o,a,c,d){const h=(d=d||this.ngModule)?function(s,o){return{get:(a,c,d)=>{const h=s.get(a,Rd,d);return h!==Rd||c===Rd?h:o.get(a,c,d)}}}(o,d.injector):o,_=h.get(Td,Jo),b=h.get(sD,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",k=c?function(s,o,a){if(pn(s))return s.selectRootElement(o,a===tn.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):Ep(_.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),P=this.componentDef.onPush?576:528,V=function(s,o){return{components:[],scheduler:s||xs,clean:bL,playerHandler:o||null,flags:0}}(),q=I_(0,null,null,1,0,null,null,null,null,null),X=C_(null,q,V,P,null,null,_,C,b,h);let ye,le;Kl(X);try{const Be=function(s,o,a,c,d,h){const _=a[1];a[20]=s;const C=Jc(_,20,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(Xv(C,T,!0),null!==s&&(ns(d,s,T),null!==C.classes&&Fv(d,s,C.classes),null!==C.styles&&oI(d,s,C.styles)));const k=c.createRenderer(s,o),P=C_(a,xI(o),null,o.onPush?64:16,a[20],C,c,k,h||null,null);return _.firstCreatePass&&(sa(lt(C,a),_,o.type),nk(_,C),rk(C,a.length,1)),Jv(a,P),a[20]=P}(k,this.componentDef,X,_,C);if(k)if(c)ns(C,k,["ng-version",oD.full]);else{const{attrs:ke,classes:ut}=function(s){const o=[],a=[];let c=1,d=2;for(;c<s.length;){let h=s[c];if("string"==typeof h)2===d?""!==h&&o.push(h,s[++c]):8===d&&a.push(h);else{if(!fa(d))break;d=h}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);ke&&ns(C,k,ke),ut&&ut.length>0&&Fv(C,k,ut.join(" "))}if(le=Lu(q,20),void 0!==a){const ke=le.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const yt=a[ut];ke.push(null!=yt?Array.from(yt):null)}}ye=function(s,o,a,c,d){const h=a[1],_=function(s,o,a){const c=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ik(s,c,o,Zh(s,o,1,null),a));const d=Ja(o,s,c.directiveStart,c);qr(d,o);const h=Gr(c,o);return h&&qr(h,o),d}(h,a,o);if(c.components.push(_),s[8]=_,d&&d.forEach(C=>C(_,o)),o.contentQueries){const C=_n();o.contentQueries(1,_,C.directiveStart)}const b=_n();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zl(b.index),ek(a[1],b,0,b.directiveStart,b.directiveEnd,o),tk(o,_)),_}(Be,this.componentDef,X,V,[KL]),Ap(q,X,null)}finally{ta()}return new GR(this.componentType,ye,af(le,X),X,le)}}class GR extends class{}{constructor(o,a,c,d,h){super(),this.location=c,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new fR(d),this.componentType=o}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const pf=new Map;class FD extends Sd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new CE(this);const c=xi(o),d=o[Pe]||null;d&&ry(d),this._bootstrapComponents=io(c.bootstrap),this._r3Injector=fk(o,a,[{provide:Sd,useValue:this},{provide:sm,useValue:this.componentFactoryResolver}],Q(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Qn.THROW_IF_NOT_FOUND,c=ot.Default){return o===Qn||o===Sd||o===xp?this:this._r3Injector.get(o,a,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class AE extends gD{constructor(o){super(),this.moduleType=o,null!==xi(o)&&function(s){const o=new Set;!function a(c){const d=xi(c,!0),h=d.id;null!==h&&(function(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${Q(o)} vs ${Q(o.name)}`)}(h,pf.get(h),c),pf.set(h,c));const _=io(d.imports);for(const b of _)o.has(b)||(o.add(b),a(b))}(s)}(o)}create(o){return new FD(this.moduleType,o)}}function WR(s,o,a){const c=function(){const s=vt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,d=Fe();return d[c]===Ft?function(s,o,a){return s[o]=a}(d,c,a?o.call(a):o()):function(s,o){return s[o]}(d,c)}function WD(s){return o=>{setTimeout(s,void 0,o)}}const yc=class extends R.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){var d,h,_;let b=o,C=a||(()=>null),T=c;if(o&&"object"==typeof o){const P=o;b=null===(d=P.next)||void 0===d?void 0:d.bind(P),C=null===(h=P.error)||void 0===h?void 0:h.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(C=WD(C),b&&(b=WD(b)),T&&(T=WD(T)));const k=super.subscribe({next:b,error:C,complete:T});return o instanceof ee.w&&o.add(k),k}};function J2(){return this._results[Oo()]()}class RE{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Oo(),c=RE.prototype;c[a]||(c[a]=J2)}get changes(){return this._changes||(this._changes=new yc)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=rs(o);(this._changesDetected=!function(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],h=o[c];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class qD{constructor(o){this.queryList=o,this.matches=null}clone(){return new qD(this.queryList)}setDirty(){this.queryList.setDirty()}}class KD{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let h=0;h<c;h++){const _=a.getByIndex(h);d.push(this.queries[_.indexInDeclarationView].clone())}return new KD(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==ml(o,a).matches&&this.queries[a].setDirty()}}class ZD{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class NE{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(o,d);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new NE(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class OE{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new OE(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const h=c[d];this.matchTNodeWithReadOption(o,a,ss(a,h)),this.matchTNodeWithReadOption(o,a,Ks(a,o,h,!1,!1))}else c===lm?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ks(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===pl||d===fy||d===lm&&4&a.type)this.addMatch(a.index,-2);else{const h=Ks(a,o,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ss(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function xn(s,o,a,c){return-1===a?function(s,o){return 11&s.type?af(s,o):4&s.type?eE(s,o):null}(o,s):-2===a?function(s,o,a){return a===pl?af(o,s):a===lm?eE(o,s):a===fy?iu(o,s):void 0}(s,o,c):Ja(s,s[1],a,o)}function YD(s,o,a,c){const d=o[19].queries[c];if(null===d.matches){const h=s.data,_=a.matches,b=[];for(let C=0;C<_.length;C+=2){const T=_[C];b.push(T<0?null:xn(o,h[T],_[C+1],a.metadata.read))}d.matches=b}return d.matches}function FE(s,o,a,c){const d=s.queries.getByIndex(a),h=d.matches;if(null!==h){const _=YD(s,o,d,a);for(let b=0;b<h.length;b+=2){const C=h[b];if(C>0)c.push(_[b/2]);else{const T=h[b+1],k=o[-C];for(let P=10;P<k.length;P++){const V=k[P];V[17]===V[3]&&FE(V[1],V,T,c)}if(null!==k[9]){const P=k[9];for(let V=0;V<P.length;V++){const q=P[V];FE(q[1],q,T,c)}}}}}return c}function rN(s){const o=Fe(),a=Ut(),c=ah();Hu(c+1);const d=ml(a,c);if(s.dirty&&Ul(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const h=d.crossesNgTemplate?FE(a,o,c,[]):YD(a,o,d,c);s.reset(h,iD),s.notifyOnChanges()}return!0}return!1}function LE(s,o,a){const c=Ut();c.firstCreatePass&&(U(c,new ZD(s,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),Bo(c,Fe(),o)}function xe(s,o,a,c){const d=Ut();if(d.firstCreatePass){const h=_n();U(d,new ZD(o,a,c),h.index),function(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}Bo(d,Fe(),a)}function Uo(){return s=Fe(),o=ah(),s[19].queries[o].queryList;var s,o}function Bo(s,o,a){const c=new RE(4==(4&a));kI(s,o,c,c.destroy),null===o[19]&&(o[19]=new KD),o[19].queries.push(new qD(c))}function U(s,o,a){null===s.queries&&(s.queries=new NE),s.queries.track(new OE(o,a))}function ml(s,o){return s.queries.getByIndex(o)}function it(s,o){return eE(s,o)}const jy=new mn("Application Initializer");let _f=(()=>{class s{constructor(a){this.appInits=a,this.resolve=dy,this.reject=dy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(pT(h))a.push(h);else if(O_(h)){const _=new Promise((b,C)=>{h.subscribe({complete:b,error:C})});a.push(_)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Kn(jy,8))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();const gS=new mn("AppId"),iw={provide:gS,useFactory:function(){return`${sw()}${sw()}${sw()}`},deps:[]};function sw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hy=new mn("Platform Initializer"),ow=new mn("Platform ID"),_S=new mn("appBootstrapListener");let $y=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();const yf=new mn("LocaleId"),lw=new mn("DefaultCurrencyCode");class _N{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}const cw=function(s){return new AE(s)},yN=cw,zy=function(s){return Promise.resolve(cw(s))},vf=function(s){const o=cw(s),c=io(xi(s).declarations).reduce((d,h)=>{const _=Ar(h);return _&&d.push(new RD(_)),d},[]);return new _N(o,c)},bS=vf,Im=function(s){return Promise.resolve(vf(s))};let lu=(()=>{class s{constructor(){this.compileModuleSync=yN,this.compileModuleAsync=zy,this.compileModuleAndAllComponentsSync=bS,this.compileModuleAndAllComponentsAsync=Im}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();const ES=(()=>Promise.resolve(0))();function Wy(s){"undefined"==typeof Zone?ES.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class as{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yc(!1),this.onMicrotaskEmpty=new yc(!1),this.onStable=new yc(!1),this.onError=new yc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let s=It.requestAnimationFrame,o=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(It,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ky(s),s.isCheckStableRunning=!0,Dm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ky(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,h,_,b)=>{try{return wS(s),a.invokeTask(d,h,_,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||s.shouldCoalesceRunChangeDetection)&&o(),Zy(s)}},onInvoke:(a,c,d,h,_,b,C)=>{try{return wS(s),a.invoke(d,h,_,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Zy(s)}},onHasTask:(a,c,d,h)=>{a.hasTask(d,h),c===d&&("microTask"==h.change?(s._hasPendingMicrotasks=h.microTask,Ky(s),Dm(s)):"macroTask"==h.change&&(s.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,d,h)=>(a.handleError(d,h),s.runOutsideAngular(()=>s.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!as.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(as.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+d,o,dw,dy,dy);try{return h.runTask(_,a,c)}finally{h.cancelTask(_)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const dw={};function Dm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ky(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function wS(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Zy(s){s._nesting--,Dm(s)}class Yy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yc,this.onMicrotaskEmpty=new yc,this.onStable=new yc,this.onError=new yc}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}let Qy=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{as.assertNotInAngularZone(),Wy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wy(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Kn(as))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})(),hw=(()=>{class s{constructor(){this._applications=new Map,fw.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return fw.findTestabilityInTree(this,a,c)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();class CS{addToWindow(o){}findTestabilityInTree(o,a,c){return null}}function IS(s){fw=s}let fw=new CS,Ef=!0,pw=!1;function wf(){return pw=!0,Ef}function Am(){if(pw)throw new Error("Cannot enable prod mode after platform setup.");Ef=!1}let Ti;const _l=new mn("AllowMultipleToken");class Jy{constructor(o,a){this.name=o,this.token=a}}function km(s,o,a=[]){const c=`Platform: ${o}`,d=new mn(c);return(h=[])=>{let _=Mm();if(!_||_.injector.get(_l,!1))if(s)s(a.concat(h).concat({provide:d,useValue:!0}));else{const b=a.concat(h).concat({provide:d,useValue:!0},{provide:T_,useValue:"platform"});!function(s){if(Ti&&!Ti.destroyed&&!Ti.injector.get(_l,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ti=s.get(SS);const o=s.get(Hy,null);o&&o.forEach(a=>a())}(Qn.create({providers:b,name:c}))}return function(s){const o=Mm();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(d)}}function Mm(){return Ti&&!Ti.destroyed?Ti:null}let SS=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const b=function(s,o){let a;return a="noop"===s?new Yy:("zone.js"===s?void 0:s)||new as({enableLongStackTrace:wf(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:as,useValue:b}];return b.run(()=>{const T=Qn.create({providers:C,parent:this.injector,name:a.moduleType.name}),k=a.create(T),P=k.injector.get(v,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return b.runOutsideAngular(()=>{const V=b.onError.subscribe({next:q=>{P.handleError(q)}});k.onDestroy(()=>{eb(this._modules,k),V.unsubscribe()})}),function(s,o,a){try{const c=a();return pT(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(P,b,()=>{const V=k.injector.get(_f);return V.runInitializers(),V.donePromise.then(()=>(ry(k.injector.get(yf,Qp)||Qp),this._moduleDoBootstrap(k),k))})})}bootstrapModule(a,c=[]){const d=Cf({},c);return function(s,o,a){const c=new AE(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const c=a.injector.get(Nm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${Q(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Kn(Qn))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();function Cf(s,o){return Array.isArray(o)?o.reduce(Cf,s):Object.assign(Object.assign({},s),o)}let Nm=(()=>{class s{constructor(a,c,d,h,_){this._zone=a,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new L.y(T=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{as.assertNotInAngularZone(),Wy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{as.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{k.unsubscribe(),P.unsubscribe()}});this.isStable=(0,Y.T)(b,C.pipe((0,J.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof pc?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Sd),b=d.create(Qn.NULL,[],c||d.selector,h),C=b.location.nativeElement,T=b.injector.get(Qy,null),k=T&&b.injector.get(hw);return T&&k&&k.registerApplication(C,T),b.onDestroy(()=>{this.detachView(b.hostView),eb(this.components,b),k&&k.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;eb(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(_S,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Kn(as),Kn(Qn),Kn(v),Kn(sm),Kn(_f))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();function eb(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}class IN{}class If{}const TN={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let DN=(()=>{class s{constructor(a,c){this._compiler=a,this._config=c||TN}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[c,d]=a.split("#");return void 0===d&&(d="default"),H(8255)(c).then(h=>h[d]).then(h=>vw(h,c,d)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[c,d]=a.split("#"),h="NgFactory";return void 0===d&&(d="default",h=""),H(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(_=>_[d+h]).then(_=>vw(_,c,d))}}return s.\u0275fac=function(a){return new(a||s)(Kn(lu),Kn(If,8))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})();function vw(s,o,a){if(!s)throw new Error(`Cannot find '${a}' in '${o}'`);return s}const RS=function(s){return null},PN=km(null,"core",[{provide:ow,useValue:"unknown"},{provide:SS,deps:[Qn]},{provide:hw,deps:[]},{provide:$y,deps:[]}]),OS=[{provide:Nm,useClass:Nm,deps:[as,Qn,v,sm,_f]},{provide:HR,deps:[as],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(a){o.push(a)}}},{provide:_f,useClass:_f,deps:[[new ro,jy]]},{provide:lu,useClass:lu,deps:[]},iw,{provide:Dd,useFactory:function(){return L2},deps:[]},{provide:hy,useFactory:function(){return V2},deps:[]},{provide:yf,useFactory:function(s){return ry(s=s||"undefined"!=typeof $localize&&$localize.locale||Qp),s},deps:[[new vi(yf),new ro,new la]]},{provide:lw,useValue:"USD"}];let ub=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Kn(Nm))},s.\u0275mod=qo({type:s}),s.\u0275inj=fn({providers:OS}),s})()},8939:(p,he,H)=>{"use strict";H.d(he,{hO:()=>ce,xv:()=>ie,Dh:()=>Q,GT:()=>te,cc:()=>ge,on:()=>j,pX:()=>J});var R=H(7716),ee=H(7841),L=H(1537);p=H.hmd(p);const Y=["ngOnDestroy"],J=(ue,be,De,Oe={})=>new Proxy(ue,{get:(qe,Nt)=>De.runOutsideAngular(()=>{var ft;if(ue[Nt])return(null===(ft=null==Oe?void 0:Oe.spy)||void 0===ft?void 0:ft.get)&&Oe.spy.get(Nt,ue[Nt]),ue[Nt];if(Y.indexOf(Nt)>-1)return()=>{};const st=be.toPromise().then(Te=>{const se=Te&&Te[Nt];return"function"==typeof se?se.bind(Te):se&&se.then?se.then(me=>De.run(()=>me)):De.run(()=>se)});return new Proxy(()=>{},{get:(Te,se)=>st[se],apply:(Te,se,me)=>st.then(fe=>{var Le;const Ye=fe&&fe(...me);return(null===(Le=null==Oe?void 0:Oe.spy)||void 0===Le?void 0:Le.apply)&&Oe.spy.apply(Nt,me,Ye),Ye})})})}),te=(ue,be)=>{be.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(Oe=>{Object.defineProperty(ue.prototype,Oe,Object.getOwnPropertyDescriptor(De.prototype||De,Oe))})})};class Ie{constructor(be){return be}}const Q=new R.OlP("angularfire2.app.options"),ie=new R.OlP("angularfire2.app.name");function j(ue,be,De){const qe="object"==typeof De&&De||{};qe.name=qe.name||"string"==typeof De&&De||"[DEFAULT]";const ft=ee.Z.apps.filter(st=>st&&st.name===qe.name)[0]||be.runOutsideAngular(()=>ee.Z.initializeApp(ue,qe));try{JSON.stringify(ue)!==JSON.stringify(ft.options)&&$("error",`${ft.name} Firebase App already initialized with different options${p.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(st){}return new Ie(ft)}const $=(ue,...be)=>{(0,R.X6Q)()&&"undefined"!=typeof console&&console[ue](...be)},z={provide:Ie,useFactory:j,deps:[Q,R.R0b,[new R.FiY,ie]]};let ce=(()=>{class ue{constructor(De){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",R.q4F.full,De.toString())}static initializeApp(De,Oe){return{ngModule:ue,providers:[{provide:Q,useValue:De},{provide:ie,useValue:Oe}]}}}return ue.\u0275fac=function(De){return new(De||ue)(R.LFG(R.Lbi))},ue.\u0275mod=R.oAB({type:ue}),ue.\u0275inj=R.cJS({providers:[z]}),ue})();function ge(ue,be,De,Oe,qe){const[,Nt,ft]=globalThis.\u0275AngularfireInstanceCache.find(st=>st[0]===ue)||[];if(Nt)return function(ue,be){try{return ue.toString()===be.toString()}catch(De){return ue===be}}(qe,ft)||(we("error",`${be} was already initialized on the ${De} Firebase App with different settings.${Re?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:qe,was:ft})),Nt;{const st=Oe();return globalThis.\u0275AngularfireInstanceCache.push([ue,st,qe]),st}}const Re=!!p.hot,we=(ue,...be)=>{(0,R.X6Q)()&&"undefined"!=typeof console&&console[ue](...be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},1537:(p,he,H)=>{"use strict";H.d(he,{q4:()=>jg,iC:()=>Wc,HU:()=>zc,vb:()=>el,JM:()=>Ts});var R=H(7716),ee=H(2329),L=H(8239),Y=H(8026),J=H(3854),te=H(3910),Ie=H(5422),Q=H(6676);const ie="@firebase/installations",j="0.5.5",z=`w:${j}`,ce="FIS_v2",be=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof J.ZR&&I.code.includes("request-failed")}function Oe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function qe(I){return{token:I.token,requestStatus:2,expiresIn:fe(I.expiresIn),creationTime:Date.now()}}function Nt(I,x){return ft.apply(this,arguments)}function ft(){return(ft=(0,L.Z)(function*(I,x){const W=(yield x.json()).error;return be.create("request-failed",{requestName:I,serverCode:W.code,serverMessage:W.message,serverStatus:W.status})})).apply(this,arguments)}function st({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Te(I,{refreshToken:x}){const O=st(I);return O.append("Authorization",function(I){return`${ce} ${I}`}(x)),O}function se(I){return me.apply(this,arguments)}function me(){return(me=(0,L.Z)(function*(I){const x=yield I();return x.status>=500&&x.status<600?I():x})).apply(this,arguments)}function fe(I){return Number(I.replace("s","000"))}function Ye(I,x){return $e.apply(this,arguments)}function $e(){return($e=(0,L.Z)(function*(I,{fid:x}){const O=Oe(I),_e={method:"POST",headers:st(I),body:JSON.stringify({fid:x,authVersion:ce,appId:I.appId,sdkVersion:z})},Ue=yield se(()=>fetch(O,_e));if(Ue.ok){const Qe=yield Ue.json();return{fid:Qe.fid||x,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:qe(Qe.authToken)}}throw yield Nt("Create Installation",Ue)})).apply(this,arguments)}function Ct(I){return new Promise(x=>{setTimeout(x,I)})}const nr=/^[cdef][\w-]{21}$/;function Kt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const O=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return nr.test(O)?O:""}catch(I){return""}}function Wt(I){return`${I.appName}!${I.appId}`}const kn=new Map;function Nn(I,x){const O=Wt(I);fn(O,x),function(I,x){const O=(!Qr&&"BroadcastChannel"in self&&(Qr=new BroadcastChannel("[Firebase] FID Change"),Qr.onmessage=I=>{fn(I.data.key,I.data.fid)}),Qr);O&&O.postMessage({key:I,fid:x}),0===kn.size&&Qr&&(Qr.close(),Qr=null)}(O,x)}function fn(I,x){const O=kn.get(I);if(O)for(const W of O)W(x)}let Qr=null;const Di="firebase-installations-store";let An=null;function Bs(){return An||(An=(0,Q.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(Di)}})),An}function ot(I,x){return Si.apply(this,arguments)}function Si(){return(Si=(0,L.Z)(function*(I,x){const O=Wt(I),oe=(yield Bs()).transaction(Di,"readwrite"),_e=oe.objectStore(Di),Ue=yield _e.get(O);return yield _e.put(x,O),yield oe.complete,(!Ue||Ue.fid!==x.fid)&&Nn(I,x.fid),x})).apply(this,arguments)}function Qi(I){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,L.Z)(function*(I){const x=Wt(I),W=(yield Bs()).transaction(Di,"readwrite");yield W.objectStore(Di).delete(x),yield W.complete})).apply(this,arguments)}function Hn(I,x){return js.apply(this,arguments)}function js(){return(js=(0,L.Z)(function*(I,x){const O=Wt(I),oe=(yield Bs()).transaction(Di,"readwrite"),_e=oe.objectStore(Di),Ue=yield _e.get(O),Qe=x(Ue);return void 0===Qe?yield _e.delete(O):yield _e.put(Qe,O),yield oe.complete,Qe&&(!Ue||Ue.fid!==Qe.fid)&&Nn(I,Qe.fid),Qe})).apply(this,arguments)}function $t(I){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,L.Z)(function*(I){let x;const O=yield Hn(I,W=>{const oe=Et(W),_e=xa(I,oe);return x=_e.registrationPromise,_e.installationEntry});return""===O.fid?{installationEntry:yield x}:{installationEntry:O,registrationPromise:x}})).apply(this,arguments)}function Et(I){return It(I||{fid:Kt(),registrationStatus:0})}function xa(I,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(be.create("app-offline"))};const O={fid:x.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:O,registrationPromise:function(I,x){return yr.apply(this,arguments)}(I,O)}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:rr(I)}:{installationEntry:x}}function yr(){return(yr=(0,L.Z)(function*(I,x){try{return ot(I,yield Ye(I,x))}catch(O){throw De(O)&&409===O.customData.serverCode?yield Qi(I):yield ot(I,{fid:x.fid,registrationStatus:0}),O}})).apply(this,arguments)}function rr(I){return $n.apply(this,arguments)}function $n(){return($n=(0,L.Z)(function*(I){let x=yield Wo(I);for(;1===x.registrationStatus;)yield Ct(100),x=yield Wo(I);if(0===x.registrationStatus){const{installationEntry:O,registrationPromise:W}=yield $t(I);return W||O}return x})).apply(this,arguments)}function Wo(I){return Hn(I,x=>{if(!x)throw be.create("installation-not-found");return It(x)})}function It(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Zt(I,x){return ne.apply(this,arguments)}function ne(){return(ne=(0,L.Z)(function*({appConfig:I,platformLoggerProvider:x},O){const W=K(I,O),oe=Te(I,O),_e=x.getImmediate({optional:!0});_e&&oe.append("x-firebase-client",_e.getPlatformInfoString());const Qe={method:"POST",headers:oe,body:JSON.stringify({installation:{sdkVersion:z}})},et=yield se(()=>fetch(W,Qe));if(et.ok)return qe(yield et.json());throw yield Nt("Generate Auth Token",et)})).apply(this,arguments)}function K(I,{fid:x}){return`${Oe(I)}/${x}/authTokens:generate`}function ae(I){return Me.apply(this,arguments)}function Me(){return(Me=(0,L.Z)(function*(I,x=!1){let O;const W=yield Hn(I.appConfig,_e=>{if(!at(_e))throw be.create("not-registered");const Ue=_e.authToken;if(!x&&Vt(Ue))return _e;if(1===Ue.requestStatus)return O=pe(I,x),_e;{if(!navigator.onLine)throw be.create("app-offline");const Qe=rn(_e);return O=Ce(I,Qe),Qe}});return O?yield O:W.authToken})).apply(this,arguments)}function pe(I,x){return tt.apply(this,arguments)}function tt(){return(tt=(0,L.Z)(function*(I,x){let O=yield Pe(I.appConfig);for(;1===O.authToken.requestStatus;)yield Ct(100),O=yield Pe(I.appConfig);const W=O.authToken;return 0===W.requestStatus?ae(I,x):W})).apply(this,arguments)}function Pe(I){return Hn(I,x=>{if(!at(x))throw be.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function Ce(I,x){return He.apply(this,arguments)}function He(){return(He=(0,L.Z)(function*(I,x){try{const O=yield Zt(I,x),W=Object.assign(Object.assign({},x),{authToken:O});return yield ot(I.appConfig,W),O}catch(O){if(!De(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const W=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield ot(I.appConfig,W)}else yield Qi(I.appConfig);throw O}})).apply(this,arguments)}function at(I){return void 0!==I&&2===I.registrationStatus}function Vt(I){return 2===I.requestStatus&&!function(I){const x=Date.now();return x<I.creationTime||I.creationTime+I.expiresIn<x+36e5}(I)}function rn(I){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:x})}function qo(){return(qo=(0,L.Z)(function*(I){const x=I,{installationEntry:O,registrationPromise:W}=yield $t(x.appConfig);return W?W.catch(console.error):ae(x).catch(console.error),O.fid})).apply(this,arguments)}function ka(){return(ka=(0,L.Z)(function*(I,x=!1){const O=I;return yield Ma(O.appConfig),(yield ae(O,x)).token})).apply(this,arguments)}function Ma(I){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,L.Z)(function*(I){const{registrationPromise:x}=yield $t(I);x&&(yield x)})).apply(this,arguments)}function dn(I){return be.create("missing-app-config-values",{valueName:I})}const xr="installations";(0,Y._registerComponent)(new te.wA(xr,I=>{const x=I.getProvider("app").getImmediate();return{app:x,appConfig:function(I){if(!I||!I.options)throw dn("App Configuration");if(!I.name)throw dn("App Name");const x=["projectId","apiKey","appId"];for(const O of x)if(!I.options[O])throw dn(O);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(x),platformLoggerProvider:(0,Y._getProvider)(x,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Y._registerComponent)(new te.wA("installations-internal",I=>{const x=I.getProvider("app").getImmediate(),O=(0,Y._getProvider)(x,xr).getImmediate();return{getId:()=>function(I){return qo.apply(this,arguments)}(O),getToken:oe=>function(I){return ka.apply(this,arguments)}(O,oe)}},"PRIVATE")),(0,Y.registerVersion)(ie,j),(0,Y.registerVersion)(ie,j,"esm2017");const fs="@firebase/remote-config",ir=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Na{constructor(x,O,W,oe){this.client=x,this.storage=O,this.storageCache=W,this.logger=oe}isCachedDataFresh(x,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const W=Date.now()-O,oe=W<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${W}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${oe}.`),oe}fetch(x){var O=this;return(0,L.Z)(function*(){const[W,oe]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(oe&&O.isCachedDataFresh(x.cacheMaxAgeMillis,W))return oe;x.eTag=oe&&oe.eTag;const _e=yield O.client.fetch(x),Ue=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===_e.status&&Ue.push(O.storage.setLastSuccessfulFetchResponse(_e)),yield Promise.all(Ue),_e})()}}function Hr(I=navigator){return I.languages&&I.languages[0]||I.language}class Gs{constructor(x,O,W,oe,_e,Ue){this.firebaseInstallations=x,this.sdkVersion=O,this.namespace=W,this.projectId=oe,this.apiKey=_e,this.appId=Ue}fetch(x){var O=this;return(0,L.Z)(function*(){const[W,oe]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},et={sdk_version:O.sdkVersion,app_instance_id:W,app_instance_id_token:oe,app_id:O.appId,language_code:Hr()},Gt={method:"POST",headers:Qe,body:JSON.stringify(et)},sn=fetch(Ue,Gt),Ln=new Promise((Ni,wr)=>{x.signal.addEventListener(()=>{const no=new Error("The operation was aborted.");no.name="AbortError",wr(no)})});let Ri;try{yield Promise.race([sn,Ln]),Ri=yield sn}catch(Ni){let wr="fetch-client-network";throw"AbortError"===Ni.name&&(wr="fetch-timeout"),ir.create(wr,{originalErrorMessage:Ni.message})}let Er=Ri.status;const tl=Ri.headers.get("ETag")||void 0;let nl,Rt;if(200===Ri.status){let Ni;try{Ni=yield Ri.json()}catch(wr){throw ir.create("fetch-client-parse",{originalErrorMessage:wr.message})}nl=Ni.entries,Rt=Ni.state}if("INSTANCE_STATE_UNSPECIFIED"===Rt?Er=500:"NO_CHANGE"===Rt?Er=304:("NO_TEMPLATE"===Rt||"EMPTY_CONFIG"===Rt)&&(nl={}),304!==Er&&200!==Er)throw ir.create("fetch-status",{httpStatus:Er});return{status:Er,eTag:tl,config:nl}})()}}class ms{constructor(x,O){this.client=x,this.storage=O}fetch(x){var O=this;return(0,L.Z)(function*(){const W=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(x,W)})()}attemptFetch(x,{throttleEndTimeMillis:O,backoffCount:W}){var oe=this;return(0,L.Z)(function*(){yield function(I,x){return new Promise((O,W)=>{const oe=Math.max(x-Date.now(),0),_e=setTimeout(O,oe);I.addEventListener(()=>{clearTimeout(_e),W(ir.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,O);try{const _e=yield oe.client.fetch(x);return yield oe.storage.deleteThrottleMetadata(),_e}catch(_e){if(!function(I){if(!(I instanceof J.ZR&&I.customData))return!1;const x=Number(I.customData.httpStatus);return 429===x||500===x||503===x||504===x}(_e))throw _e;const Ue={throttleEndTimeMillis:Date.now()+(0,J.$s)(W),backoffCount:W+1};return yield oe.storage.setThrottleMetadata(Ue),oe.attemptFetch(x,Ue)}})()}}class kg{constructor(x,O,W,oe,_e){this.app=x,this._client=O,this._storageCache=W,this._storage=oe,this._logger=_e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ol(I,x){const O=I.target.error||void 0;return ir.create(x,{originalErrorMessage:O&&O.message})}const Oa="app_namespace_store";class rh{constructor(x,O,W,oe=function(){return new Promise((I,x)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=W=>{x(Ol(W,"storage-open"))},O.onsuccess=W=>{I(W.target.result)},O.onupgradeneeded=W=>{const oe=W.target.result;switch(W.oldVersion){case 0:oe.createObjectStore(Oa,{keyPath:"compositeKey"})}}}catch(O){x(ir.create("storage-open",{originalErrorMessage:O}))}})}()){this.appId=x,this.appName=O,this.namespace=W,this.openDbPromise=oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var O=this;return(0,L.Z)(function*(){const W=yield O.openDbPromise;return new Promise((oe,_e)=>{const Qe=W.transaction([Oa],"readonly").objectStore(Oa),et=O.createCompositeKey(x);try{const Gt=Qe.get(et);Gt.onerror=sn=>{_e(Ol(sn,"storage-get"))},Gt.onsuccess=sn=>{const Ln=sn.target.result;oe(Ln?Ln.value:void 0)}}catch(Gt){_e(ir.create("storage-get",{originalErrorMessage:Gt&&Gt.message}))}})})()}set(x,O){var W=this;return(0,L.Z)(function*(){const oe=yield W.openDbPromise;return new Promise((_e,Ue)=>{const et=oe.transaction([Oa],"readwrite").objectStore(Oa),Gt=W.createCompositeKey(x);try{const sn=et.put({compositeKey:Gt,value:O});sn.onerror=Ln=>{Ue(Ol(Ln,"storage-set"))},sn.onsuccess=()=>{_e()}}catch(sn){Ue(ir.create("storage-set",{originalErrorMessage:sn&&sn.message}))}})})()}delete(x){var O=this;return(0,L.Z)(function*(){const W=yield O.openDbPromise;return new Promise((oe,_e)=>{const Qe=W.transaction([Oa],"readwrite").objectStore(Oa),et=O.createCompositeKey(x);try{const Gt=Qe.delete(et);Gt.onerror=sn=>{_e(Ol(sn,"storage-delete"))},Gt.onsuccess=()=>{oe()}}catch(Gt){_e(ir.create("storage-delete",{originalErrorMessage:Gt&&Gt.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Pa{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,L.Z)(function*(){const O=x.storage.getLastFetchStatus(),W=x.storage.getLastSuccessfulFetchTimestampMillis(),oe=x.storage.getActiveConfig(),_e=yield O;_e&&(x.lastFetchStatus=_e);const Ue=yield W;Ue&&(x.lastSuccessfulFetchTimestampMillis=Ue);const Qe=yield oe;Qe&&(x.activeConfig=Qe)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function lv(){return bo.apply(this,arguments)}function bo(){return(bo=(0,L.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,Y._registerComponent)(new te.wA("remote-config",function(x,{instanceIdentifier:O}){const W=x.getProvider("app").getImmediate(),oe=x.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ir.create("registration-window");if(!(0,J.hl)())throw ir.create("indexed-db-unavailable");const{projectId:_e,apiKey:Ue,appId:Qe}=W.options;if(!_e)throw ir.create("registration-project-id");if(!Ue)throw ir.create("registration-api-key");if(!Qe)throw ir.create("registration-app-id");const et=new rh(Qe,W.name,O=O||"firebase"),Gt=new Pa(et),sn=new Ie.Yd(fs);sn.logLevel=Ie.in.ERROR;const Ln=new Gs(oe,Y.SDK_VERSION,O,_e,Ue,Qe),Ri=new ms(Ln,et),Er=new Na(Ri,et,Gt,sn),tl=new kg(W,Er,Gt,et,sn);return function(I){const x=(0,J.m9)(I);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(tl),tl},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(fs,"0.3.4"),(0,Y.registerVersion)(fs,"0.3.4","esm2017");const gi="/firebase-messaging-sw.js",Pl="/firebase-cloud-messaging-push-scope",Fl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gs="google.c.a.c_id",Nu="google.c.a.c_l",Ou="google.c.a.ts",Qo="google.c.a.e";var _s=(()=>{return(I=_s||(_s={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",_s;var I})();function ys(I){const x=new Uint8Array(I);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ih(I){const O=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),W=atob(O),oe=new Uint8Array(W.length);for(let _e=0;_e<W.length;++_e)oe[_e]=W.charCodeAt(_e);return oe}const Mc="fcm_token_details_db",Pu="fcm_token_object_Store";function _i(I){return La.apply(this,arguments)}function La(){return(La=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(Mc))return null;let x=null;return(yield(0,Q.openDb)(Mc,5,function(){var W=(0,L.Z)(function*(oe){var _e;if(oe.oldVersion<2||!oe.objectStoreNames.contains(Pu))return;const Ue=oe.transaction.objectStore(Pu),Qe=yield Ue.index("fcmSenderId").get(I);if(yield Ue.clear(),Qe)if(2===oe.oldVersion){const et=Qe;if(!et.auth||!et.p256dh||!et.endpoint)return;x={token:et.fcmToken,createTime:null!==(_e=et.createTime)&&void 0!==_e?_e:Date.now(),subscriptionOptions:{auth:et.auth,p256dh:et.p256dh,endpoint:et.endpoint,swScope:et.swScope,vapidKey:"string"==typeof et.vapidKey?et.vapidKey:ys(et.vapidKey)}}}else if(3===oe.oldVersion){const et=Qe;x={token:et.fcmToken,createTime:et.createTime,subscriptionOptions:{auth:ys(et.auth),p256dh:ys(et.p256dh),endpoint:et.endpoint,swScope:et.swScope,vapidKey:ys(et.vapidKey)}}}else if(4===oe.oldVersion){const et=Qe;x={token:et.fcmToken,createTime:et.createTime,subscriptionOptions:{auth:ys(et.auth),p256dh:ys(et.p256dh),endpoint:et.endpoint,swScope:et.swScope,vapidKey:ys(et.vapidKey)}}}});return function(oe){return W.apply(this,arguments)}}())).close(),yield(0,Q.deleteDb)(Mc),yield(0,Q.deleteDb)("fcm_vapid_details_db"),yield(0,Q.deleteDb)("undefined"),Rc(x)?x:null})).apply(this,arguments)}function Rc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:x}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const ts="firebase-messaging-store";let vo=null;function pn(){return vo||(vo=(0,Q.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(ts)}})),vo}function Va(I){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,L.Z)(function*(I){const x=Eo(I),W=yield(yield pn()).transaction(ts).objectStore(ts).get(x);if(W)return W;{const oe=yield _i(I.appConfig.senderId);if(oe)return yield Ua(I,oe),oe}})).apply(this,arguments)}function Ua(I,x){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,L.Z)(function*(I,x){const O=Eo(I),oe=(yield pn()).transaction(ts,"readwrite");return yield oe.objectStore(ts).put(x,O),yield oe.complete,x})).apply(this,arguments)}function Fu(I){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,L.Z)(function*(I){const x=Eo(I),W=(yield pn()).transaction(ts,"readwrite");yield W.objectStore(ts).delete(x),yield W.complete})).apply(this,arguments)}function Eo({appConfig:I}){return I.appId}const zn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Lu(I,x){return zs.apply(this,arguments)}function zs(){return(zs=(0,L.Z)(function*(I,x){const O=yield Xo(I),W=vt(x),oe={method:"POST",headers:O,body:JSON.stringify(W)};let _e;try{_e=yield(yield fetch(bs(I.appConfig),oe)).json()}catch(Ue){throw zn.create("token-subscribe-failed",{errorInfo:Ue})}if(_e.error)throw zn.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw zn.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function br(I,x){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,L.Z)(function*(I,x){const O=yield Xo(I),W=vt(x.subscriptionOptions),oe={method:"PATCH",headers:O,body:JSON.stringify(W)};let _e;try{_e=yield(yield fetch(`${bs(I.appConfig)}/${x.token}`,oe)).json()}catch(Ue){throw zn.create("token-update-failed",{errorInfo:Ue})}if(_e.error)throw zn.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw zn.create("token-update-no-token");return _e.token})).apply(this,arguments)}function Nc(I,x){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,L.Z)(function*(I,x){const W={method:"DELETE",headers:yield Xo(I)};try{const _e=yield(yield fetch(`${bs(I.appConfig)}/${x}`,W)).json();if(_e.error)throw zn.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(oe){throw zn.create("token-unsubscribe-failed",{errorInfo:oe})}})).apply(this,arguments)}function bs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Xo(I){return wo.apply(this,arguments)}function wo(){return(wo=(0,L.Z)(function*({appConfig:I,installations:x}){const O=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function vt({p256dh:I,auth:x,endpoint:O,vapidKey:W}){const oe={web:{endpoint:O,auth:x,p256dh:I}};return W!==Fl&&(oe.web.applicationPubKey=W),oe}const Vu=6048e5;function Og(I){return jl.apply(this,arguments)}function jl(){return(jl=(0,L.Z)(function*(I){const x=yield Oc(I.swRegistration,I.vapidKey),O={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:x.endpoint,auth:ys(x.getKey("auth")),p256dh:ys(x.getKey("p256dh"))},W=yield Va(I.firebaseDependencies);if(W){if(Bu(W.subscriptionOptions,O))return Date.now()>=W.createTime+Vu?Uu(I,{token:W.token,createTime:Date.now(),subscriptionOptions:O}):W.token;try{yield Nc(I.firebaseDependencies,W.token)}catch(oe){console.warn(oe)}return Fe(I.firebaseDependencies,O)}return Fe(I.firebaseDependencies,O)})).apply(this,arguments)}function Ba(I){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,L.Z)(function*(I){const x=yield Va(I.firebaseDependencies);x&&(yield Nc(I.firebaseDependencies,x.token),yield Fu(I.firebaseDependencies));const O=yield I.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function Uu(I,x){return ja.apply(this,arguments)}function ja(){return(ja=(0,L.Z)(function*(I,x){try{const O=yield br(I.firebaseDependencies,x),W=Object.assign(Object.assign({},x),{token:O,createTime:Date.now()});return yield Ua(I.firebaseDependencies,W),O}catch(O){throw yield Ba(I),O}})).apply(this,arguments)}function Fe(I,x){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,L.Z)(function*(I,x){const W={token:yield Lu(I,x),createTime:Date.now(),subscriptionOptions:x};return yield Ua(I,W),W.token})).apply(this,arguments)}function Oc(I,x){return _n.apply(this,arguments)}function _n(){return(_n=(0,L.Z)(function*(I,x){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ih(x)})})).apply(this,arguments)}function Bu(I,x){return x.vapidKey===I.vapidKey&&x.endpoint===I.endpoint&&x.auth===I.auth&&x.p256dh===I.p256dh}function qs(I){const x={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,x){if(!x.notification)return;I.notification={};const O=x.notification.title;O&&(I.notification.title=O);const W=x.notification.body;W&&(I.notification.body=W);const oe=x.notification.image;oe&&(I.notification.image=oe)}(x,I),function(I,x){!x.data||(I.data=x.data)}(x,I),function(I,x){if(!x.fcmOptions)return;I.fcmOptions={};const O=x.fcmOptions.link;O&&(I.fcmOptions.link=O);const W=x.fcmOptions.analytics_label;W&&(I.fcmOptions.analyticsLabel=W)}(x,I),x}function Pg(I){return"object"==typeof I&&!!I&&gs in I}function $l(I,x){const O=[];for(let W=0;W<I.length;W++)O.push(I.charAt(W)),W<x.length&&O.push(x.charAt(W));return O.join("")}function Gl(I){return zn.create("missing-app-config-values",{valueName:I})}$l("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$l("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class On{constructor(x,O,W){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const oe=function(I){if(!I||!I.options)throw Gl("App Configuration Object");if(!I.name)throw Gl("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:O}=I;for(const W of x)if(!O[W])throw Gl(W);return{appName:I.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:oe,installations:O,analyticsProvider:W}}_delete(){return Promise.resolve()}}function yi(I){return zl.apply(this,arguments)}function zl(){return(zl=(0,L.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(gi,{scope:Pl}),I.swRegistration.update().catch(()=>{})}catch(x){throw zn.create("failed-service-worker-registration",{browserErrorMessage:x.message})}})).apply(this,arguments)}function Ha(I,x){return ni.apply(this,arguments)}function ni(){return(ni=(0,L.Z)(function*(I,x){if(!x&&!I.swRegistration&&(yield yi(I)),x||!I.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");I.swRegistration=x}})).apply(this,arguments)}function Qf(I,x){return $a.apply(this,arguments)}function $a(){return($a=(0,L.Z)(function*(I,x){x?I.vapidKey=x:I.vapidKey||(I.vapidKey=Fl)})).apply(this,arguments)}function Wl(){return(Wl=(0,L.Z)(function*(I,x){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield Qf(I,null==x?void 0:x.vapidKey),yield Ha(I,null==x?void 0:x.serviceWorkerRegistration),Og(I)})).apply(this,arguments)}function ql(I,x,O){return Co.apply(this,arguments)}function Co(){return(Co=(0,L.Z)(function*(I,x,O){const W=ah(x);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(W,{message_id:O[gs],message_name:O[Nu],message_time:O[Ou],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ah(I){switch(I){case _s.NOTIFICATION_CLICKED:return"notification_open";case _s.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Pc(){return(Pc=(0,L.Z)(function*(I,x){const O=x.data;if(!O.isFirebaseMessaging)return;I.onMessageHandler&&O.messageType===_s.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(qs(O)):I.onMessageHandler.next(qs(O)));const W=O.data;Pg(W)&&"1"===W[Qo]&&(yield ql(I,O.messageType,W))})).apply(this,arguments)}const Fc="@firebase/messaging";function $u(){return ta.apply(this,arguments)}function ta(){return(ta=(0,L.Z)(function*(){try{yield(0,J.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Y._registerComponent)(new te.wA("messaging",I=>{const x=new On(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function(I,x){return Pc.apply(this,arguments)}(x,O)),x},"PUBLIC")),(0,Y._registerComponent)(new te.wA("messaging-internal",I=>{const x=I.getProvider("messaging").getImmediate();return{getToken:W=>function(I,x){return Wl.apply(this,arguments)}(x,W)}},"PRIVATE")),(0,Y.registerVersion)(Fc,"0.9.9"),(0,Y.registerVersion)(Fc,"0.9.9","esm2017");const Gu="analytics",Yl="firebase_id",Vc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ql="https://www.googletagmanager.com/gtag/js",Wn=new Ie.Yd("@firebase/analytics");function dh(I){return Promise.all(I.map(x=>x.catch(O=>O)))}function hh(I,x){const O=document.createElement("script");O.src=`${Ql}?l=${I}&id=${x}`,O.async=!0,document.head.appendChild(O)}function Jl(I,x,O,W,oe,_e){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,L.Z)(function*(I,x,O,W,oe,_e){const Ue=W[oe];try{if(Ue)yield x[Ue];else{const et=(yield dh(O)).find(Gt=>Gt.measurementId===oe);et&&(yield x[et.appId])}}catch(Qe){Wn.error(Qe)}I("config",oe,_e)})).apply(this,arguments)}function Uc(I,x,O,W,oe){return qa.apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(I,x,O,W,oe){try{let _e=[];if(oe&&oe.send_to){let Ue=oe.send_to;Array.isArray(Ue)||(Ue=[Ue]);const Qe=yield dh(O);for(const et of Ue){const Gt=Qe.find(Ln=>Ln.measurementId===et),sn=Gt&&x[Gt.appId];if(!sn){_e=[];break}_e.push(sn)}}0===_e.length&&(_e=Object.values(x)),yield Promise.all(_e),I("event",W,oe||{})}catch(_e){Wn.error(_e)}})).apply(this,arguments)}function uv(){const I=window.document.getElementsByTagName("script");for(const x of Object.values(I))if(x.src&&x.src.includes(Ql))return x;return null}const or=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ws=new class{constructor(x={},O=1e3){this.throttleMetadata=x,this.intervalMillis=O}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,O){this.throttleMetadata[x]=O}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function Xf(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function qn(I){return ra.apply(this,arguments)}function ra(){return(ra=(0,L.Z)(function*(I){var x;const{appId:O,apiKey:W}=I,oe={method:"GET",headers:Xf(W)},_e=Vc.replace("{app-id}",O),Ue=yield fetch(_e,oe);if(200!==Ue.status&&304!==Ue.status){let Qe="";try{const et=yield Ue.json();(null===(x=et.error)||void 0===x?void 0:x.message)&&(Qe=et.error.message)}catch(et){}throw or.create("config-fetch-failed",{httpStatus:Ue.status,responseMessage:Qe})}return Ue.json()})).apply(this,arguments)}function qu(I){return ia.apply(this,arguments)}function ia(){return(ia=(0,L.Z)(function*(I,x=ws,O){const{appId:W,apiKey:oe,measurementId:_e}=I.options;if(!W)throw or.create("no-app-id");if(!oe){if(_e)return{measurementId:_e,appId:W};throw or.create("no-api-key")}const Ue=x.getThrottleMetadata(W)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new mh;return setTimeout((0,L.Z)(function*(){Qe.abort()}),void 0!==O?O:6e4),Ka({appId:W,apiKey:oe,measurementId:_e},Ue,Qe,x)})).apply(this,arguments)}function Ka(I,x,O){return ec.apply(this,arguments)}function ec(){return(ec=(0,L.Z)(function*(I,{throttleEndTimeMillis:x,backoffCount:O},W,oe=ws){const{appId:_e,measurementId:Ue}=I;try{yield dv(W,x)}catch(Qe){if(Ue)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:_e,measurementId:Ue};throw Qe}try{const Qe=yield qn(I);return oe.deleteThrottleMetadata(_e),Qe}catch(Qe){if(!ph(Qe)){if(oe.deleteThrottleMetadata(_e),Ue)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:_e,measurementId:Ue};throw Qe}const et=503===Number(Qe.customData.httpStatus)?(0,J.$s)(O,oe.intervalMillis,30):(0,J.$s)(O,oe.intervalMillis),Gt={throttleEndTimeMillis:Date.now()+et,backoffCount:O+1};return oe.setThrottleMetadata(_e,Gt),Wn.debug(`Calling attemptFetch again in ${et} millis`),Ka(I,Gt,W,oe)}})).apply(this,arguments)}function dv(I,x){return new Promise((O,W)=>{const oe=Math.max(x-Date.now(),0),_e=setTimeout(O,oe);I.addEventListener(()=>{clearTimeout(_e),W(or.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function ph(I){if(!(I instanceof J.ZR&&I.customData))return!1;const x=Number(I.customData.httpStatus);return 429===x||500===x||503===x||504===x}class mh{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}function Ku(){return yn.apply(this,arguments)}function yn(){return(yn=(0,L.Z)(function*(){if(!(0,J.hl)())return Wn.warn(or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(I){return Wn.warn(or.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Fn(){return(Fn=(0,L.Z)(function*(I,x,O,W,oe,_e,Ue){var Qe;const et=qu(I);et.then(Er=>{O[Er.measurementId]=Er.appId,I.options.measurementId&&Er.measurementId!==I.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Er.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Er=>Wn.error(Er)),x.push(et);const Gt=Ku().then(Er=>{if(Er)return W.getId()}),[sn,Ln]=yield Promise.all([et,Gt]);uv()||hh(_e,sn.measurementId),oe("js",new Date);const Ri=null!==(Qe=null==Ue?void 0:Ue.config)&&void 0!==Qe?Qe:{};return Ri.origin="firebase",Ri.update=!0,null!=Ln&&(Ri[Yl]=Ln),oe("config",sn.measurementId,Ri),sn.measurementId})).apply(this,arguments)}class Bc{constructor(x){this.app=x}_delete(){return delete bn[this.app.options.appId],Promise.resolve()}}let bn={},sa=[];const Za={};let jc,Qa,ar="dataLayer",Mr=!1;function Ja(I,x,O){!function(){const I=[];if((0,J.ru)()&&I.push("This is a browser extension environment."),(0,J.zI)()||I.push("Cookies are not available."),I.length>0){const x=I.map((W,oe)=>`(${oe+1}) ${W}`).join(" "),O=or.create("invalid-analytics-context",{errorInfo:x});Wn.warn(O.message)}}();const W=I.options.appId;if(!W)throw or.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw or.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bn[W])throw or.create("already-exists",{id:W});if(!Mr){!function(I){let x=[];Array.isArray(window[I])?x=window[I]:window[I]=x}(ar);const{wrappedGtag:_e,gtagCore:Ue}=function(I,x,O,W,oe){let _e=function(...Ue){window[W].push(arguments)};return window[oe]&&"function"==typeof window[oe]&&(_e=window[oe]),window[oe]=function(I,x,O,W){function _e(){return(_e=(0,L.Z)(function*(Ue,Qe,et){try{"event"===Ue?yield Uc(I,x,O,Qe,et):"config"===Ue?yield Jl(I,x,O,W,Qe,et):I("set",Qe)}catch(Gt){Wn.error(Gt)}})).apply(this,arguments)}return function(Ue,Qe,et){return _e.apply(this,arguments)}}(_e,I,x,O),{gtagCore:_e,wrappedGtag:window[oe]}}(bn,sa,Za,ar,"gtag");Qa=_e,jc=Ue,Mr=!0}return bn[W]=function(I,x,O,W,oe,_e,Ue){return Fn.apply(this,arguments)}(I,sa,Za,x,jc,ar,O),new Bc(I)}function Hc(){return(Hc=(0,L.Z)(function*(I,x,O,W,oe){if(oe&&oe.global)I("event",O,W);else{const _e=yield x;I("event",O,Object.assign(Object.assign({},W),{send_to:_e}))}})).apply(this,arguments)}function vr(){return lr.apply(this,arguments)}function lr(){return(lr=(0,L.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}const gh="@firebase/analytics";(0,Y._registerComponent)(new te.wA(Gu,(x,{options:O})=>Ja(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,Y._registerComponent)(new te.wA("analytics-internal",function(x){try{const O=x.getProvider(Gu).getImmediate();return{logEvent:(W,oe,_e)=>function(I,x,O,W){I=(0,J.m9)(I),function(I,x,O,W,oe){return Hc.apply(this,arguments)}(Qa,bn[I.app.options.appId],x,O,W).catch(oe=>Wn.error(oe))}(O,W,oe,_e)}}catch(O){throw or.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,Y.registerVersion)(gh,"0.7.5"),(0,Y.registerVersion)(gh,"0.7.5","esm2017");var Io=H(7771),Bg=H(3637),_h=H(3342),Qs=H(3101),yh=H(309);const jg=new R.GfV("7.2.1"),Is="__angularfire_symbol__analyticsIsSupportedValue",tc="__angularfire_symbol__analyticsIsSupported",Js="__angularfire_symbol__remoteConfigIsSupportedValue",Nr="__angularfire_symbol__remoteConfigIsSupported",ln="__angularfire_symbol__messagingIsSupportedValue",ki="__angularfire_symbol__messagingIsSupported";function Ts(I,x,O){if(x){if(1===x.length)return x[0];const _e=x.filter(Ue=>Ue.app===O);if(1===_e.length)return _e[0]}return O.container.getProvider(I).getImmediate({optional:!0})}globalThis[tc]||(globalThis[tc]=vr().then(I=>globalThis[Is]=I).catch(()=>globalThis[Is]=!1)),globalThis[ki]||(globalThis[ki]=$u().then(I=>globalThis[ln]=I).catch(()=>globalThis[ln]=!1)),globalThis[Nr]||(globalThis[Nr]=lv().then(I=>globalThis[Js]=I).catch(()=>globalThis[Js]=!1));const el=(I,x)=>{const O=x?[x]:(0,ee.C6)(),W=[];return O.forEach(oe=>{oe.container.getProvider(I).instances.forEach(Ue=>{W.includes(Ue)||W.push(Ue)})}),W};function ri(){}class Xs{constructor(x,O=Io.N){this.zone=x,this.delegate=O}now(){return this.delegate.now()}schedule(x,O,W){const oe=this.zone;return this.delegate.schedule(function(Ue){oe.runGuarded(()=>{x.apply(this,[Ue])})},O,W)}}class bh{constructor(x){this.zone=x,this.task=null}call(x,O){const W=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ri,{},ri,ri)),O.pipe((0,_h.b)({next:W,complete:W,error:W})).subscribe(x).add(W)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zc=(()=>{class I{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Xs(Zone.current)),this.insideAngular=O.run(()=>new Xs(Zone.current,Bg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(O){return new(O||I)(R.LFG(R.R0b))},I.\u0275prov=R.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function aa(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Wc(I){return aa(),function(I){return function(O){return(O=O.lift(new bh(I.ngZone))).pipe((0,Qs.R)(I.outsideAngular),(0,yh.QV)(I.insideAngular))}}(aa())(I)}},3854:(p,he,H)=>{"use strict";H.d(he,{BH:()=>ce,LL:()=>$e,ZR:()=>Ye,gQ:()=>Di,zI:()=>me,hu:()=>ee,g5:()=>L,US:()=>te,tV:()=>ie,h$:()=>Ie,$s:()=>Wo,r3:()=>an,Sg:()=>ge,ne:()=>An,p$:()=>j,vZ:()=>Qr,ZB:()=>$,gK:()=>Hn,pd:()=>Us,m9:()=>Zt,z$:()=>Ne,GJ:()=>Nn,jU:()=>ue,ru:()=>be,d:()=>Oe,xb:()=>fn,w1:()=>qe,hl:()=>Te,uI:()=>Re,UG:()=>we,Yr:()=>ft,b$:()=>De,G6:()=>st,Mn:()=>Nt,w9:()=>kn,cI:()=>nr,UI:()=>Yr,xO:()=>jr,zd:()=>mo,DV:()=>Sn,ug:()=>xa,dS:()=>Et,Pz:()=>At,Dv:()=>Jr,Wj:()=>$t,lb:()=>Xe,eu:()=>se});const ee=function(ne,K){if(!ne)throw L(K)},L=function(ne){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ne)},Y=function(ne){const K=[];let ae=0;for(let Me=0;Me<ne.length;Me++){let pe=ne.charCodeAt(Me);pe<128?K[ae++]=pe:pe<2048?(K[ae++]=pe>>6|192,K[ae++]=63&pe|128):55296==(64512&pe)&&Me+1<ne.length&&56320==(64512&ne.charCodeAt(Me+1))?(pe=65536+((1023&pe)<<10)+(1023&ne.charCodeAt(++Me)),K[ae++]=pe>>18|240,K[ae++]=pe>>12&63|128,K[ae++]=pe>>6&63|128,K[ae++]=63&pe|128):(K[ae++]=pe>>12|224,K[ae++]=pe>>6&63|128,K[ae++]=63&pe|128)}return K},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ne,K){if(!Array.isArray(ne))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ae=K?this.byteToCharMapWebSafe_:this.byteToCharMap_,Me=[];for(let pe=0;pe<ne.length;pe+=3){const tt=ne[pe],Pe=pe+1<ne.length,Ce=Pe?ne[pe+1]:0,He=pe+2<ne.length,at=He?ne[pe+2]:0;let rn=(15&Ce)<<2|at>>6,Mn=63&at;He||(Mn=64,Pe||(rn=64)),Me.push(ae[tt>>2],ae[(3&tt)<<4|Ce>>4],ae[rn],ae[Mn])}return Me.join("")},encodeString(ne,K){return this.HAS_NATIVE_SUPPORT&&!K?btoa(ne):this.encodeByteArray(Y(ne),K)},decodeString(ne,K){return this.HAS_NATIVE_SUPPORT&&!K?atob(ne):function(ne){const K=[];let ae=0,Me=0;for(;ae<ne.length;){const pe=ne[ae++];if(pe<128)K[Me++]=String.fromCharCode(pe);else if(pe>191&&pe<224){const tt=ne[ae++];K[Me++]=String.fromCharCode((31&pe)<<6|63&tt)}else if(pe>239&&pe<365){const He=((7&pe)<<18|(63&ne[ae++])<<12|(63&ne[ae++])<<6|63&ne[ae++])-65536;K[Me++]=String.fromCharCode(55296+(He>>10)),K[Me++]=String.fromCharCode(56320+(1023&He))}else{const tt=ne[ae++],Pe=ne[ae++];K[Me++]=String.fromCharCode((15&pe)<<12|(63&tt)<<6|63&Pe)}}return K.join("")}(this.decodeStringToByteArray(ne,K))},decodeStringToByteArray(ne,K){this.init_();const ae=K?this.charToByteMapWebSafe_:this.charToByteMap_,Me=[];for(let pe=0;pe<ne.length;){const tt=ae[ne.charAt(pe++)],Ce=pe<ne.length?ae[ne.charAt(pe)]:0;++pe;const at=pe<ne.length?ae[ne.charAt(pe)]:64;++pe;const gt=pe<ne.length?ae[ne.charAt(pe)]:64;if(++pe,null==tt||null==Ce||null==at||null==gt)throw Error();Me.push(tt<<2|Ce>>4),64!==at&&(Me.push(Ce<<4&240|at>>2),64!==gt&&Me.push(at<<6&192|gt))}return Me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ne=0;ne<this.ENCODED_VALS.length;ne++)this.byteToCharMap_[ne]=this.ENCODED_VALS.charAt(ne),this.charToByteMap_[this.byteToCharMap_[ne]]=ne,this.byteToCharMapWebSafe_[ne]=this.ENCODED_VALS_WEBSAFE.charAt(ne),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ne]]=ne,ne>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ne)]=ne,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ne)]=ne)}}},Ie=function(ne){const K=Y(ne);return te.encodeByteArray(K,!0)},Q=function(ne){return Ie(ne).replace(/\./g,"")},ie=function(ne){try{return te.decodeString(ne,!0)}catch(K){console.error("base64Decode failed: ",K)}return null};function j(ne){return $(void 0,ne)}function $(ne,K){if(!(K instanceof Object))return K;switch(K.constructor){case Date:return new Date(K.getTime());case Object:void 0===ne&&(ne={});break;case Array:ne=[];break;default:return K}for(const ae in K)!K.hasOwnProperty(ae)||!z(ae)||(ne[ae]=$(ne[ae],K[ae]));return ne}function z(ne){return"__proto__"!==ne}class ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((K,ae)=>{this.resolve=K,this.reject=ae})}wrapCallback(K){return(ae,Me)=>{ae?this.reject(ae):this.resolve(Me),"function"==typeof K&&(this.promise.catch(()=>{}),1===K.length?K(ae):K(ae,Me))}}}function ge(ne,K){if(ne.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Me=K||"demo-project",pe=ne.iat||0,tt=ne.sub||ne.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${Me}`,aud:Me,iat:pe,exp:pe+3600,auth_time:pe,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},ne);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(Pe)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ne){return!1}}function ue(){return"object"==typeof self&&self.self===self}function be(){const ne="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ne&&void 0!==ne.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Oe(){return Ne().indexOf("Electron/")>=0}function qe(){const ne=Ne();return ne.indexOf("MSIE ")>=0||ne.indexOf("Trident/")>=0}function Nt(){return Ne().indexOf("MSAppHost/")>=0}function ft(){return!1}function st(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Te(){return"object"==typeof indexedDB}function se(){return new Promise((ne,K)=>{try{let ae=!0;const Me="validate-browser-context-for-indexeddb-analytics-module",pe=self.indexedDB.open(Me);pe.onsuccess=()=>{pe.result.close(),ae||self.indexedDB.deleteDatabase(Me),ne(!0)},pe.onupgradeneeded=()=>{ae=!1},pe.onerror=()=>{var tt;K((null===(tt=pe.error)||void 0===tt?void 0:tt.message)||"")}}catch(ae){K(ae)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ye extends Error{constructor(K,ae,Me){super(ae),this.code=K,this.customData=Me,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(K,ae,Me){this.service=K,this.serviceName=ae,this.errors=Me}create(K,...ae){const Me=ae[0]||{},pe=`${this.service}/${K}`,tt=this.errors[K],Pe=tt?function(ne,K){return ne.replace(nn,(ae,Me)=>{const pe=K[Me];return null!=pe?String(pe):`<${Me}?>`})}(tt,Me):"Error";return new Ye(pe,`${this.serviceName}: ${Pe} (${pe}).`,Me)}}const nn=/\{\$([^}]+)}/g;function nr(ne){return JSON.parse(ne)}function At(ne){return JSON.stringify(ne)}const Kt=function(ne){let K={},ae={},Me={},pe="";try{const tt=ne.split(".");K=nr(ie(tt[0])||""),ae=nr(ie(tt[1])||""),pe=tt[2],Me=ae.d||{},delete ae.d}catch(tt){}return{header:K,claims:ae,data:Me,signature:pe}},kn=function(ne){const ae=Kt(ne).claims;return!!ae&&"object"==typeof ae&&ae.hasOwnProperty("iat")},Nn=function(ne){const K=Kt(ne).claims;return"object"==typeof K&&!0===K.admin};function an(ne,K){return Object.prototype.hasOwnProperty.call(ne,K)}function Sn(ne,K){if(Object.prototype.hasOwnProperty.call(ne,K))return ne[K]}function fn(ne){for(const K in ne)if(Object.prototype.hasOwnProperty.call(ne,K))return!1;return!0}function Yr(ne,K,ae){const Me={};for(const pe in ne)Object.prototype.hasOwnProperty.call(ne,pe)&&(Me[pe]=K.call(ae,ne[pe],pe,ne));return Me}function Qr(ne,K){if(ne===K)return!0;const ae=Object.keys(ne),Me=Object.keys(K);for(const pe of ae){if(!Me.includes(pe))return!1;const tt=ne[pe],Pe=K[pe];if(_r(tt)&&_r(Pe)){if(!Qr(tt,Pe))return!1}else if(tt!==Pe)return!1}for(const pe of Me)if(!ae.includes(pe))return!1;return!0}function _r(ne){return null!==ne&&"object"==typeof ne}function jr(ne){const K=[];for(const[ae,Me]of Object.entries(ne))Array.isArray(Me)?Me.forEach(pe=>{K.push(encodeURIComponent(ae)+"="+encodeURIComponent(pe))}):K.push(encodeURIComponent(ae)+"="+encodeURIComponent(Me));return K.length?"&"+K.join("&"):""}function mo(ne){const K={};return ne.replace(/^\?/,"").split("&").forEach(Me=>{if(Me){const[pe,tt]=Me.split("=");K[decodeURIComponent(pe)]=decodeURIComponent(tt)}}),K}function Us(ne){const K=ne.indexOf("?");if(!K)return"";const ae=ne.indexOf("#",K);return ne.substring(K,ae>0?ae:void 0)}class Di{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let K=1;K<this.blockSize;++K)this.pad_[K]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(K,ae){ae||(ae=0);const Me=this.W_;if("string"==typeof K)for(let gt=0;gt<16;gt++)Me[gt]=K.charCodeAt(ae)<<24|K.charCodeAt(ae+1)<<16|K.charCodeAt(ae+2)<<8|K.charCodeAt(ae+3),ae+=4;else for(let gt=0;gt<16;gt++)Me[gt]=K[ae]<<24|K[ae+1]<<16|K[ae+2]<<8|K[ae+3],ae+=4;for(let gt=16;gt<80;gt++){const rn=Me[gt-3]^Me[gt-8]^Me[gt-14]^Me[gt-16];Me[gt]=4294967295&(rn<<1|rn>>>31)}let at,Vt,pe=this.chain_[0],tt=this.chain_[1],Pe=this.chain_[2],Ce=this.chain_[3],He=this.chain_[4];for(let gt=0;gt<80;gt++){gt<40?gt<20?(at=Ce^tt&(Pe^Ce),Vt=1518500249):(at=tt^Pe^Ce,Vt=1859775393):gt<60?(at=tt&Pe|Ce&(tt|Pe),Vt=2400959708):(at=tt^Pe^Ce,Vt=3395469782);const rn=(pe<<5|pe>>>27)+at+He+Vt+Me[gt]&4294967295;He=Ce,Ce=Pe,Pe=4294967295&(tt<<30|tt>>>2),tt=pe,pe=rn}this.chain_[0]=this.chain_[0]+pe&4294967295,this.chain_[1]=this.chain_[1]+tt&4294967295,this.chain_[2]=this.chain_[2]+Pe&4294967295,this.chain_[3]=this.chain_[3]+Ce&4294967295,this.chain_[4]=this.chain_[4]+He&4294967295}update(K,ae){if(null==K)return;void 0===ae&&(ae=K.length);const Me=ae-this.blockSize;let pe=0;const tt=this.buf_;let Pe=this.inbuf_;for(;pe<ae;){if(0===Pe)for(;pe<=Me;)this.compress_(K,pe),pe+=this.blockSize;if("string"==typeof K){for(;pe<ae;)if(tt[Pe]=K.charCodeAt(pe),++Pe,++pe,Pe===this.blockSize){this.compress_(tt),Pe=0;break}}else for(;pe<ae;)if(tt[Pe]=K[pe],++Pe,++pe,Pe===this.blockSize){this.compress_(tt),Pe=0;break}}this.inbuf_=Pe,this.total_+=ae}digest(){const K=[];let ae=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let pe=this.blockSize-1;pe>=56;pe--)this.buf_[pe]=255&ae,ae/=256;this.compress_(this.buf_);let Me=0;for(let pe=0;pe<5;pe++)for(let tt=24;tt>=0;tt-=8)K[Me]=this.chain_[pe]>>tt&255,++Me;return K}}function An(ne,K){const ae=new Bs(ne,K);return ae.subscribe.bind(ae)}class Bs{constructor(K,ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ae,this.task.then(()=>{K(this)}).catch(Me=>{this.error(Me)})}next(K){this.forEachObserver(ae=>{ae.next(K)})}error(K){this.forEachObserver(ae=>{ae.error(K)}),this.close(K)}complete(){this.forEachObserver(K=>{K.complete()}),this.close()}subscribe(K,ae,Me){let pe;if(void 0===K&&void 0===ae&&void 0===Me)throw new Error("Missing Observer.");pe=function(ne,K){if("object"!=typeof ne||null===ne)return!1;for(const ae of["next","error","complete"])if(ae in ne&&"function"==typeof ne[ae])return!0;return!1}(K)?K:{next:K,error:ae,complete:Me},void 0===pe.next&&(pe.next=Qi),void 0===pe.error&&(pe.error=Qi),void 0===pe.complete&&(pe.complete=Qi);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?pe.error(this.finalError):pe.complete()}catch(Pe){}}),this.observers.push(pe),tt}unsubscribeOne(K){void 0===this.observers||void 0===this.observers[K]||(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let ae=0;ae<this.observers.length;ae++)this.sendOne(ae,K)}sendOne(K,ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{ae(this.observers[K])}catch(Me){"undefined"!=typeof console&&console.error&&console.error(Me)}})}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qi(){}const Jr=function(ne,K,ae,Me){let pe;if(Me<K?pe="at least "+K:Me>ae&&(pe=0===ae?"none":"no more than "+ae),pe)throw new Error(ne+" failed: Was called with "+Me+(1===Me?" argument.":" arguments.")+" Expects "+pe+".")};function Hn(ne,K){return`${ne} failed: ${K} argument `}function $t(ne,K,ae,Me){if((!Me||ae)&&"function"!=typeof ae)throw new Error(Hn(ne,K)+"must be a valid function.")}function Xe(ne,K,ae,Me){if((!Me||ae)&&("object"!=typeof ae||null===ae))throw new Error(Hn(ne,K)+"must be a valid context object.")}const Et=function(ne){const K=[];let ae=0;for(let Me=0;Me<ne.length;Me++){let pe=ne.charCodeAt(Me);if(pe>=55296&&pe<=56319){const tt=pe-55296;Me++,ee(Me<ne.length,"Surrogate pair missing trail surrogate."),pe=65536+(tt<<10)+(ne.charCodeAt(Me)-56320)}pe<128?K[ae++]=pe:pe<2048?(K[ae++]=pe>>6|192,K[ae++]=63&pe|128):pe<65536?(K[ae++]=pe>>12|224,K[ae++]=pe>>6&63|128,K[ae++]=63&pe|128):(K[ae++]=pe>>18|240,K[ae++]=pe>>12&63|128,K[ae++]=pe>>6&63|128,K[ae++]=63&pe|128)}return K},xa=function(ne){let K=0;for(let ae=0;ae<ne.length;ae++){const Me=ne.charCodeAt(ae);Me<128?K++:Me<2048?K+=2:Me>=55296&&Me<=56319?(K+=4,ae++):K+=3}return K};function Wo(ne,K=1e3,ae=2){const Me=K*Math.pow(ae,ne),pe=Math.round(.5*Me*(Math.random()-.5)*2);return Math.min(144e5,Me+pe)}function Zt(ne){return ne&&ne._delegate?ne._delegate:ne}},8774:p=>{"use strict";p.exports=function(he){var H=[];return H.toString=function(){return this.map(function(ee){var L=he(ee);return ee[2]?"@media ".concat(ee[2]," {").concat(L,"}"):L}).join("")},H.i=function(R,ee,L){"string"==typeof R&&(R=[[null,R,""]]);var Y={};if(L)for(var J=0;J<this.length;J++){var te=this[J][0];null!=te&&(Y[te]=!0)}for(var Ie=0;Ie<R.length;Ie++){var Q=[].concat(R[Ie]);L&&Y[Q[0]]||(ee&&(Q[2]=Q[2]?"".concat(ee," and ").concat(Q[2]):ee),H.push(Q))}},H}},2329:(p,he,H)=>{"use strict";H.d(he,{Mq:()=>R.getApp,C6:()=>R.getApps});var R=H(8026);(0,R.registerVersion)("firebase","9.6.8","app")},7841:(p,he,H)=>{"use strict";H.d(he,{Z:()=>R.Z});var R=H(3394);R.Z.registerVersion("firebase","9.6.8","app-compat")},1352:(p,he,H)=>{"use strict";H.r(he);var R=H(8239),ee=H(3394),L=H(3854),Y=H(8026),J=H(4762),te=H(5422),Ie=H(3910);const Ne=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Re=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},we=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new te.Yd("@firebase/auth");function De(v,...m){be.logLevel<=te.in.ERROR&&be.error(`Auth (${Y.SDK_VERSION}): ${v}`,...m)}function Oe(v,...m){throw st(v,...m)}function qe(v,...m){return st(v,...m)}function Nt(v,m,g){const w=Object.assign(Object.assign({},Re()),{[m]:g});return new L.LL("auth","Firebase",w).create(m,{appName:v.name})}function ft(v,m,g){if(!(m instanceof g))throw g.name!==m.constructor.name&&Oe(v,"argument-error"),Nt(v,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(v,...m){if("string"!=typeof v){const g=m[0],w=[...m.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return we.create(v,...m)}function Te(v,m,...g){if(!v)throw st(m,...g)}function se(v){const m="INTERNAL ASSERTION FAILED: "+v;throw De(m),new Error(m)}function me(v,m){v||se(m)}const fe=new Map;function Le(v){me(v instanceof Function,"Expected a class definition");let m=fe.get(v);return m?(me(m instanceof v,"Instance stored in cache mismatched with class"),m):(m=new v,fe.set(v,m),m)}function Ct(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function nn(){return"http:"===nr()||"https:"===nr()}function nr(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class bt{constructor(m,g){this.shortDelay=m,this.longDelay=g,me(g>m,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nn()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Wt(v,m){me(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return m?`${g}${m.startsWith("/")?m.slice(1):m}`:g}class kn{static initialize(m,g,w){this.fetchImpl=m,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},an=new bt(3e4,6e4);function Sn(v,m){return v.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:v.tenantId}):m}function fn(v,m,g,w){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,R.Z)(function*(v,m,g,w,M={}){return Qr(v,M,(0,R.Z)(function*(){let F={},re={};w&&("GET"===m?re=w:F={body:JSON.stringify(w)});const ve=(0,L.xO)(Object.assign({key:v.config.apiKey},re)).slice(1),ze=yield v._getAdditionalHeaders();return ze["Content-Type"]="application/json",v.languageCode&&(ze["X-Firebase-Locale"]=v.languageCode),kn.fetch()(Us(v,v.config.apiHost,g,ve),Object.assign({method:m,headers:ze,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Qr(v,m,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,R.Z)(function*(v,m,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Nn),m);try{const M=new Di(v),F=yield Promise.race([g(),M.promise]);M.clearNetworkTimeout();const re=yield F.json();if("needConfirmation"in re)throw An(v,"account-exists-with-different-credential",re);if(F.ok&&!("errorMessage"in re))return re;{const ve=F.ok?re.errorMessage:re.error.message,[ze,rt]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ze)throw An(v,"credential-already-in-use",re);if("EMAIL_EXISTS"===ze)throw An(v,"email-already-in-use",re);const Dt=w[ze]||ze.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Nt(v,Dt,rt);Oe(v,Dt)}}catch(M){if(M instanceof L.ZR)throw M;Oe(v,"network-request-failed")}})).apply(this,arguments)}function jr(v,m,g,w){return mo.apply(this,arguments)}function mo(){return(mo=(0,R.Z)(function*(v,m,g,w,M={}){const F=yield fn(v,m,g,w,M);return"mfaPendingCredential"in F&&Oe(v,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Us(v,m,g,w){const M=`${m}${g}?${w}`;return v.config.emulator?Wt(v.config,M):`${v.config.apiScheme}://${M}`}class Di{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(qe(this.auth,"network-request-failed")),an.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(v,m,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const M=qe(v,m,w);return M.customData._tokenResponse=g,M}function ot(){return(ot=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Si(v,m){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Jr(v,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function js(v){if(v)try{const m=new Date(Number(v));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Et(){return(Et=(0,R.Z)(function*(v,m=!1){const g=(0,L.m9)(v),w=yield g.getIdToken(m),M=tn(w);Te(M&&M.exp&&M.auth_time&&M.iat,g.auth,"internal-error");const F="object"==typeof M.firebase?M.firebase:void 0,re=null==F?void 0:F.sign_in_provider;return{claims:M,token:w,authTime:js(xa(M.auth_time)),issuedAtTime:js(xa(M.iat)),expirationTime:js(xa(M.exp)),signInProvider:re||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function xa(v){return 1e3*Number(v)}function tn(v){const[m,g,w]=v.split(".");if(void 0===m||void 0===g||void 0===w)return De("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,L.tV)(g);return M?JSON.parse(M):(De("Failed to decode base64 JWT payload"),null)}catch(M){return De("Caught error parsing JWT payload as JSON",M),null}}function rr(v,m){return $n.apply(this,arguments)}function $n(){return($n=(0,R.Z)(function*(v,m,g=!1){if(g)return m;try{return yield m}catch(w){throw w instanceof L.ZR&&Wo(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Wo({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class It{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var g;if(m){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(m);this.timerId=setTimeout((0,R.Z)(function*(){yield g.iteration()}),w)}iteration(){var m=this;return(0,R.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&m.schedule(!0))}m.schedule()})()}}class kl{constructor(m,g){this.createdAt=m,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=js(this.lastLoginAt),this.creationTime=js(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zt(v){return ne.apply(this,arguments)}function ne(){return(ne=(0,R.Z)(function*(v){var m;const g=v.auth,w=yield v.getIdToken(),M=yield rr(v,Jr(g,{idToken:w}));Te(null==M?void 0:M.users.length,g,"internal-error");const F=M.users[0];v._notifyReloadListener(F);const re=(null===(m=F.providerUserInfo)||void 0===m?void 0:m.length)?pe(F.providerUserInfo):[],ve=Me(v.providerData,re),Dt=!!v.isAnonymous&&!(v.email&&F.passwordHash||(null==ve?void 0:ve.length)),pt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ve,metadata:new kl(F.createdAt,F.lastLoginAt),isAnonymous:Dt};Object.assign(v,pt)})).apply(this,arguments)}function ae(){return(ae=(0,R.Z)(function*(v){const m=(0,L.m9)(v);yield Zt(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Me(v,m){return[...v.filter(w=>!m.some(M=>M.providerId===w.providerId)),...m]}function pe(v){return v.map(m=>{var{providerId:g}=m,w=(0,J._T)(m,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Pe(){return(Pe=(0,R.Z)(function*(v,m){const g=yield Qr(v,{},(0,R.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:F}=v.config,re=Us(v,M,"/v1/token",`key=${F}`),ve=yield v._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",kn.fetch()(re,{method:"POST",headers:ve,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Te(m.idToken,"internal-error"),Te(void 0!==m.idToken,"internal-error"),Te(void 0!==m.refreshToken,"internal-error");const g="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(v){const m=tn(v);return Te(m,"internal-error"),Te(void 0!==m.exp,"internal-error"),Te(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,g)}getToken(m,g=!1){var w=this;return(0,R.Z)(function*(){return Te(!w.accessToken||w.refreshToken,m,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(m,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,g){var w=this;return(0,R.Z)(function*(){const{accessToken:M,refreshToken:F,expiresIn:re}=yield function(v,m){return Pe.apply(this,arguments)}(m,g);w.updateTokensAndExpiration(M,F,Number(re))})()}updateTokensAndExpiration(m,g,w){this.refreshToken=g||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(m,g){const{refreshToken:w,accessToken:M,expirationTime:F}=g,re=new Ce;return w&&(Te("string"==typeof w,"internal-error",{appName:m}),re.refreshToken=w),M&&(Te("string"==typeof M,"internal-error",{appName:m}),re.accessToken=M),F&&(Te("number"==typeof F,"internal-error",{appName:m}),re.expirationTime=F),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Ce,this.toJSON())}_performRefresh(){return se("not implemented")}}function He(v,m){Te("string"==typeof v||void 0===v,"internal-error",{appName:m})}class at{constructor(m){var{uid:g,auth:w,stsTokenManager:M}=m,F=(0,J._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new It(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new kl(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var g=this;return(0,R.Z)(function*(){const w=yield rr(g,g.stsTokenManager.getToken(g.auth,m));return Te(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(m){return function(v){return Et.apply(this,arguments)}(this,m)}reload(){return function(v){return ae.apply(this,arguments)}(this)}_assign(m){this!==m&&(Te(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(g=>Object.assign({},g)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new at(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,g=!1){var w=this;return(0,R.Z)(function*(){let M=!1;m.idToken&&m.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(m),M=!0),g&&(yield Zt(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var m=this;return(0,R.Z)(function*(){const g=yield m.getIdToken();return yield rr(m,function(v,m){return ot.apply(this,arguments)}(m.auth,{idToken:g})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,g){var w,M,F,re,ve,ze,rt,Dt;const pt=null!==(w=g.displayName)&&void 0!==w?w:void 0,Un=null!==(M=g.email)&&void 0!==M?M:void 0,xs=null!==(F=g.phoneNumber)&&void 0!==F?F:void 0,jh=null!==(re=g.photoURL)&&void 0!==re?re:void 0,m_=null!==(ve=g.tenantId)&&void 0!==ve?ve:void 0,_p=null!==(ze=g._redirectEventId)&&void 0!==ze?ze:void 0,cc=null!==(rt=g.createdAt)&&void 0!==rt?rt:void 0,io=null!==(Dt=g.lastLoginAt)&&void 0!==Dt?Dt:void 0,{uid:g_,emailVerified:Tv,isAnonymous:yp,providerData:bp,stsTokenManager:so}=g;Te(g_&&so,m,"internal-error");const vp=Ce.fromJSON(this.name,so);Te("string"==typeof g_,m,"internal-error"),He(pt,m.name),He(Un,m.name),Te("boolean"==typeof Tv,m,"internal-error"),Te("boolean"==typeof yp,m,"internal-error"),He(xs,m.name),He(jh,m.name),He(m_,m.name),He(_p,m.name),He(cc,m.name),He(io,m.name);const ud=new at({uid:g_,auth:m,email:Un,emailVerified:Tv,displayName:pt,isAnonymous:yp,photoURL:jh,phoneNumber:xs,tenantId:m_,stsTokenManager:vp,createdAt:cc,lastLoginAt:io});return bp&&Array.isArray(bp)&&(ud.providerData=bp.map(Dv=>Object.assign({},Dv))),_p&&(ud._redirectEventId=_p),ud}static _fromIdTokenResponse(m,g,w=!1){return(0,R.Z)(function*(){const M=new Ce;M.updateFromServerResponse(g);const F=new at({uid:g.localId,auth:m,stsTokenManager:M,isAnonymous:w});return yield Zt(F),F})()}}const gt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.Z)(function*(){return!0})()}_set(g,w){var M=this;return(0,R.Z)(function*(){M.storage[g]=w})()}_get(g){var w=this;return(0,R.Z)(function*(){const M=w.storage[g];return void 0===M?null:M})()}_remove(g){var w=this;return(0,R.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function rn(v,m,g){return`firebase:${v}:${m}:${g}`}class Mn{constructor(m,g,w){this.persistence=m,this.auth=g,this.userKey=w;const{config:M,name:F}=this.auth;this.fullUserKey=rn(this.userKey,M.apiKey,F),this.fullPersistenceKey=rn("persistence",M.apiKey,F),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,R.Z)(function*(){const g=yield m.persistence._get(m.fullUserKey);return g?at._fromJSON(m.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var g=this;return(0,R.Z)(function*(){if(g.persistence===m)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=m,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,g,w="authUser"){return(0,R.Z)(function*(){if(!g.length)return new Mn(Le(gt),m,w);const M=(yield Promise.all(g.map(function(){var rt=(0,R.Z)(function*(Dt){if(yield Dt._isAvailable())return Dt});return function(Dt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let F=M[0]||Le(gt);const re=rn(w,m.config.apiKey,m.name);let ve=null;for(const rt of g)try{const Dt=yield rt._get(re);if(Dt){const pt=at._fromJSON(m,Dt);rt!==F&&(ve=pt),F=rt;break}}catch(Dt){}const ze=M.filter(rt=>rt._shouldAllowMigration);return F._shouldAllowMigration&&ze.length?(F=ze[0],ve&&(yield F._set(re,ve.toJSON())),yield Promise.all(g.map(function(){var rt=(0,R.Z)(function*(Dt){if(Dt!==F)try{yield Dt._remove(re)}catch(pt){}});return function(Dt){return rt.apply(this,arguments)}}())),new Mn(F,m,w)):new Mn(F,m,w)})()}}function Ml(v){const m=v.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Ma(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(qo(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Ar(m))return"Blackberry";if(Ji(m))return"Webos";if(xc(m))return"Safari";if((m.includes("chrome/")||ka(m))&&!m.includes("edge/"))return"Chrome";if(Ai(m))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function qo(v=(0,L.z$)()){return/firefox\//i.test(v)}function xc(v=(0,L.z$)()){const m=v.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function ka(v=(0,L.z$)()){return/crios\//i.test(v)}function Ma(v=(0,L.z$)()){return/iemobile/i.test(v)}function Ai(v=(0,L.z$)()){return/android/i.test(v)}function Ar(v=(0,L.z$)()){return/blackberry/i.test(v)}function Ji(v=(0,L.z$)()){return/webos/i.test(v)}function Xr(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Ze(v=(0,L.z$)()){return Xr(v)||Ai(v)||Ji(v)||Ar(v)||/windows phone/i.test(v)||Ma(v)}function dn(v,m=[]){let g;switch(v){case"Browser":g=Ml((0,L.z$)());break;case"Worker":g=`${Ml((0,L.z$)())}-${v}`;break;default:g=v}const w=m.length?m.join(","):"FirebaseCore-web";return`${g}/JsCore/${Y.SDK_VERSION}/${w}`}class xr{constructor(m,g){this.app=m,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gn(this),this.idTokenSubscription=new Gn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(m,g){var w=this;return g&&(this._popupRedirectResolver=Le(g)),this._initializationPromise=this.queue((0,R.Z)(function*(){var M,F;if(!w._deleted&&(w.persistenceManager=yield Mn.create(w,m),!w._deleted)){if(null===(M=w._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(re){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(F=w.currentUser)||void 0===F?void 0:F.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,R.Z)(function*(){if(m._deleted)return;const g=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||g){if(m.currentUser&&g&&m.currentUser.uid===g.uid)return m._currentUser._assign(g),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(g)}})()}initializeCurrentUser(m){var g=this;return(0,R.Z)(function*(){var w;let M=yield g.assertedPersistence.getCurrentUser();if(m&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const F=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,re=null==M?void 0:M._redirectEventId,ve=yield g.tryRedirectSignIn(m);(!F||F===re)&&(null==ve?void 0:ve.user)&&(M=ve.user)}return M?M._redirectEventId?(Te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)):g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var g=this;return(0,R.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,m,!0)}catch(M){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(m){var g=this;return(0,R.Z)(function*(){try{yield Zt(m)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var m=this;return(0,R.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var g=this;return(0,R.Z)(function*(){const w=m?(0,L.m9)(m):null;return w&&Te(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(m){var g=this;return(0,R.Z)(function*(){if(!g._deleted)return m&&Te(g.tenantId===m.tenantId,g,"tenant-id-mismatch"),g.queue((0,R.Z)(function*(){yield g.directlySetCurrentUser(m),g.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,R.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var g=this;return this.queue((0,R.Z)(function*(){yield g.assertedPersistence.setPersistence(Le(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new L.LL("auth","Firebase",m())}onAuthStateChanged(m,g,w){return this.registerStateListener(this.authStateSubscription,m,g,w)}onIdTokenChanged(m,g,w){return this.registerStateListener(this.idTokenSubscription,m,g,w)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,g){var w=this;return(0,R.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(g);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var g=this;return(0,R.Z)(function*(){if(!g.redirectPersistenceManager){const w=m&&Le(m)||g._popupRedirectResolver;Te(w,g,"argument-error"),g.redirectPersistenceManager=yield Mn.create(g,[Le(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(m){var g=this;return(0,R.Z)(function*(){var w,M;return g._isInitialized&&(yield g.queue((0,R.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===m?g._currentUser:(null===(M=g.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?g.redirectUser:null})()}_persistUserIfCurrent(m){var g=this;return(0,R.Z)(function*(){if(m===g.currentUser)return g.queue((0,R.Z)(function*(){return g.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,g,w,M){if(this._deleted)return()=>{};const F="function"==typeof g?g:g.next.bind(g),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(re,this,"internal-error"),re.then(()=>F(this.currentUser)),"function"==typeof g?m.addObserver(g,w,M):m.addObserver(g)}directlySetCurrentUser(m){var g=this;return(0,R.Z)(function*(){g.currentUser&&g.currentUser!==m&&(g._currentUser._stopProactiveRefresh(),m&&g.isProactiveRefreshEnabled&&m._startProactiveRefresh()),g.currentUser=m,m?yield g.assertedPersistence.setCurrentUser(m):yield g.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=dn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,R.Z)(function*(){const g={"X-Client-Version":m.clientVersion};return m.app.options.appId&&(g["X-Firebase-gmpid"]=m.app.options.appId),g})()}}function vn(v){return(0,L.m9)(v)}class Gn{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function En(v){const m=v.indexOf(":");return m<0?"":v.substr(0,m+1)}function Hs(v){if(!v)return null;const m=Number(v);return isNaN(m)?null:m}class $s{constructor(m,g){this.providerId=m,this.signInMethod=g}toJSON(){return se("not implemented")}_getIdTokenResponse(m){return se("not implemented")}_linkToIdToken(m,g){return se("not implemented")}_getReauthenticationResolver(m){return se("not implemented")}}function go(v,m){return ir.apply(this,arguments)}function ir(){return(ir=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:resetPassword",Sn(v,m))})).apply(this,arguments)}function Zo(v,m){return kr.apply(this,arguments)}function kr(){return(kr=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ra(v,m){return ps.apply(this,arguments)}function ps(){return(ps=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:update",Sn(v,m))})).apply(this,arguments)}function qt(){return(qt=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithPassword",Sn(v,m))})).apply(this,arguments)}function ku(v,m){return kc.apply(this,arguments)}function kc(){return(kc=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:sendOobCode",Sn(v,m))})).apply(this,arguments)}function _o(v,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,R.Z)(function*(v,m){return ku(v,m)})).apply(this,arguments)}function Rl(v,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,R.Z)(function*(v,m){return ku(v,m)})).apply(this,arguments)}function Nl(v,m){return sr.apply(this,arguments)}function sr(){return(sr=(0,R.Z)(function*(v,m){return ku(v,m)})).apply(this,arguments)}function Ag(v,m){return es.apply(this,arguments)}function es(){return(es=(0,R.Z)(function*(v,m){return ku(v,m)})).apply(this,arguments)}function Mu(){return(Mu=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithEmailLink",Sn(v,m))})).apply(this,arguments)}function Na(){return(Na=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithEmailLink",Sn(v,m))})).apply(this,arguments)}class Hr extends $s{constructor(m,g,w,M=null){super("password",w),this._email=m,this._password=g,this._tenantId=M}static _fromEmailAndPassword(m,g){return new Hr(m,g,"password")}static _fromEmailAndCode(m,g,w=null){return new Hr(m,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const g="string"==typeof m?JSON.parse(m):m;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(m){var g=this;return(0,R.Z)(function*(){switch(g.signInMethod){case"password":return function(v,m){return qt.apply(this,arguments)}(m,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(v,m){return Mu.apply(this,arguments)}(m,{email:g._email,oobCode:g._password});default:Oe(m,"internal-error")}})()}_linkToIdToken(m,g){var w=this;return(0,R.Z)(function*(){switch(w.signInMethod){case"password":return Zo(m,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(v,m){return Na.apply(this,arguments)}(m,{idToken:g,email:w._email,oobCode:w._password});default:Oe(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Gs(v,m){return eh.apply(this,arguments)}function eh(){return(eh=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithIdp",Sn(v,m))})).apply(this,arguments)}class ms extends $s{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const g=new ms(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(g.idToken=m.idToken),m.accessToken&&(g.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(g.nonce=m.nonce),m.pendingToken&&(g.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(g.accessToken=m.oauthToken,g.secret=m.oauthTokenSecret):Oe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const g="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M}=g,F=(0,J._T)(g,["providerId","signInMethod"]);if(!w||!M)return null;const re=new ms(w,M);return re.idToken=F.idToken||void 0,re.accessToken=F.accessToken||void 0,re.secret=F.secret,re.nonce=F.nonce,re.pendingToken=F.pendingToken||null,re}_getIdTokenResponse(m){return Gs(m,this.buildRequest())}_linkToIdToken(m,g){const w=this.buildRequest();return w.idToken=g,Gs(m,w)}_getReauthenticationResolver(m){const g=this.buildRequest();return g.autoCreate=!1,Gs(m,g)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),m.postBody=(0,L.xO)(g)}return m}}function xg(v,m){return th.apply(this,arguments)}function th(){return(th=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:sendVerificationCode",Sn(v,m))})).apply(this,arguments)}function Ol(){return(Ol=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithPhoneNumber",Sn(v,m))})).apply(this,arguments)}function nh(){return(nh=(0,R.Z)(function*(v,m){const g=yield jr(v,"POST","/v1/accounts:signInWithPhoneNumber",Sn(v,m));if(g.temporaryProof)throw An(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Mg={USER_NOT_FOUND:"user-not-found"};function rh(){return(rh=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithPhoneNumber",Sn(v,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Mg)})).apply(this,arguments)}class Pa extends $s{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,g){return new Pa({verificationId:m,verificationCode:g})}static _fromTokenResponse(m,g){return new Pa({phoneNumber:m,temporaryProof:g})}_getIdTokenResponse(m){return function(v,m){return Ol.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,g){return function(v,m){return nh.apply(this,arguments)}(m,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(v,m){return rh.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:g,verificationId:w,verificationCode:M}=this.params;return m&&g?{temporaryProof:m,phoneNumber:g}:{sessionInfo:w,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:g,verificationCode:w,phoneNumber:M,temporaryProof:F}=m;return w||g||M||F?new Pa({verificationId:g,verificationCode:w,phoneNumber:M,temporaryProof:F}):null}}class Fa{constructor(m){var g,w,M,F,re,ve;const ze=(0,L.zd)((0,L.pd)(m)),rt=null!==(g=ze.apiKey)&&void 0!==g?g:null,Dt=null!==(w=ze.oobCode)&&void 0!==w?w:null,pt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ze.mode)&&void 0!==M?M:null);Te(rt&&Dt&&pt,"argument-error"),this.apiKey=rt,this.operation=pt,this.code=Dt,this.continueUrl=null!==(F=ze.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(re=ze.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(ve=ze.tenantId)&&void 0!==ve?ve:null}static parseLink(m){const g=function(v){const m=(0,L.zd)((0,L.pd)(v)).link,g=m?(0,L.zd)((0,L.pd)(m)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||m||v}(m);try{return new Fa(g)}catch(w){return null}}}let bo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return Hr._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const M=Fa.parseLink(w);return Te(M,"argument-error"),Hr._fromEmailAndCode(g,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class gi{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Pl extends gi{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Fl extends Pl{static credentialFromJSON(m){const g="string"==typeof m?JSON.parse(m):m;return Te("providerId"in g&&"signInMethod"in g,"argument-error"),ms._fromParams(g)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Te(m.idToken||m.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Fl.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Fl.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:F,nonce:re,providerId:ve}=m;if(!w&&!M&&!g&&!F||!ve)return null;try{return new Fl(ve)._credential({idToken:g,accessToken:w,nonce:re,pendingToken:F})}catch(ze){return null}}}let Ru=(()=>{class v extends Pl{constructor(){super("facebook.com")}static credential(g){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),gs=(()=>{class v extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:M}=g;if(!w&&!M)return null;try{return v.credential(w,M)}catch(F){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Nu=(()=>{class v extends Pl{constructor(){super("github.com")}static credential(g){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Qo extends $s{constructor(m,g){super(m,m),this.pendingToken=g}_getIdTokenResponse(m){return Gs(m,this.buildRequest())}_linkToIdToken(m,g){const w=this.buildRequest();return w.idToken=g,Gs(m,w)}_getReauthenticationResolver(m){const g=this.buildRequest();return g.autoCreate=!1,Gs(m,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const g="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:M,pendingToken:F}=g;return w&&M&&F&&w===M?new Qo(w,F):null}static _create(m,g){return new Qo(m,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _s extends gi{constructor(m){Te(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return _s.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return _s.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const g=Qo.fromJSON(m);return Te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:g,providerId:w}=m;if(!g||!w)return null;try{return Qo._create(w,g)}catch(M){return null}}}let ys=(()=>{class v extends Pl{constructor(){super("twitter.com")}static credential(g,w){return ms._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=g;if(!w||!M)return null;try{return v.credential(w,M)}catch(F){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ih(v,m){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signUp",Sn(v,m))})).apply(this,arguments)}class $r{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,g,w,M=!1){return(0,R.Z)(function*(){const F=yield at._fromIdTokenResponse(m,w,M),re=Pu(w);return new $r({user:F,providerId:re,_tokenResponse:w,operationType:g})})()}static _forOperation(m,g,w){return(0,R.Z)(function*(){yield m._updateTokensIfNecessary(w,!0);const M=Pu(w);return new $r({user:m,providerId:M,_tokenResponse:w,operationType:g})})()}}function Pu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function La(){return(La=(0,R.Z)(function*(v){var m;const g=vn(v);if(yield g._initializationPromise,null===(m=g.currentUser)||void 0===m?void 0:m.isAnonymous)return new $r({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield ih(g,{returnSecureToken:!0}),M=yield $r._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class Rc extends L.ZR{constructor(m,g,w,M){var F;super(g.code,g.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(m,g,w,M){return new Rc(m,g,w,M)}}function Ll(v,m,g,w){return("reauthenticate"===m?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Rc._fromErrorAndOperation(v,F,m,w):F})}function sh(v){return new Set(v.map(({providerId:m})=>m).filter(m=>!!m))}function vo(){return(vo=(0,R.Z)(function*(v,m){const g=(0,L.m9)(v);yield Jo(!0,g,m);const{providerUserInfo:w}=yield Si(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[m]}),M=sh(w||[]);return g.providerData=g.providerData.filter(F=>M.has(F.providerId)),M.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function pn(v,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,R.Z)(function*(v,m,g=!1){const w=yield rr(v,m._linkToIdToken(v.auth,yield v.getIdToken()),g);return $r._forOperation(v,"link",w)})).apply(this,arguments)}function Jo(v,m,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,R.Z)(function*(v,m,g){yield Zt(m);const M=!1===v?"provider-already-linked":"no-such-provider";Te(sh(m.providerData).has(g)===v,m.auth,M)})).apply(this,arguments)}function Tn(v,m){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,R.Z)(function*(v,m,g=!1){const{auth:w}=v,M="reauthenticate";try{const F=yield rr(v,Ll(w,M,m,v),g);Te(F.idToken,w,"internal-error");const re=tn(F.idToken);Te(re,w,"internal-error");const{sub:ve}=re;return Te(v.uid===ve,w,"user-mismatch"),$r._forOperation(v,M,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&Oe(w,"user-mismatch"),F}})).apply(this,arguments)}function Vl(v,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,R.Z)(function*(v,m,g=!1){const w="signIn",M=yield Ll(v,w,m),F=yield $r._fromIdTokenResponse(v,w,M);return g||(yield v._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Gr(v,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,R.Z)(function*(v,m){return Vl(vn(v),m)})).apply(this,arguments)}function Lu(v,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,R.Z)(function*(v,m){const g=(0,L.m9)(v);return yield Jo(!1,g,m.providerId),pn(g,m)})).apply(this,arguments)}function br(v,m){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,R.Z)(function*(v,m){return Tn((0,L.m9)(v),m)})).apply(this,arguments)}function Nc(v,m){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,R.Z)(function*(v,m){return jr(v,"POST","/v1/accounts:signInWithCustomToken",Sn(v,m))})).apply(this,arguments)}function Xo(){return(Xo=(0,R.Z)(function*(v,m){const g=vn(v),w=yield Nc(g,{token:m,returnSecureToken:!0}),M=yield $r._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(M.user),M})).apply(this,arguments)}class wo{constructor(m,g){this.factorId=m,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(m,g){return"phoneInfo"in g?vt._fromServerResponse(m,g):Oe(m,"internal-error")}}class vt extends wo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,g){return new vt(g)}}function Vu(v,m,g){var w;Te((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Te(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),m.continueUrl=g.url,m.dynamicLinkDomain=g.dynamicLinkDomain,m.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Te(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),m.iOSBundleId=g.iOS.bundleId),g.android&&(Te(g.android.packageName.length>0,v,"missing-android-pkg-name"),m.androidInstallApp=g.android.installApp,m.androidMinimumVersionCode=g.android.minimumVersion,m.androidPackageName=g.android.packageName)}function jl(){return(jl=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v),M={requestType:"PASSWORD_RESET",email:m};g&&Vu(w,M,g),yield Rl(w,M)})).apply(this,arguments)}function Ws(){return(Ws=(0,R.Z)(function*(v,m,g){yield go((0,L.m9)(v),{oobCode:m,newPassword:g})})).apply(this,arguments)}function ja(){return(ja=(0,R.Z)(function*(v,m){yield Ra((0,L.m9)(v),{oobCode:m})})).apply(this,arguments)}function Fe(v,m){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,R.Z)(function*(v,m){const g=(0,L.m9)(v),w=yield go(g,{oobCode:m}),M=w.requestType;switch(Te(M,g,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(w.mfaInfo,g,"internal-error");default:Te(w.email,g,"internal-error")}let F=null;return w.mfaInfo&&(F=wo._fromServerResponse(vn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:F},operation:M}})).apply(this,arguments)}function _n(){return(_n=(0,R.Z)(function*(v,m){const{data:g}=yield Fe((0,L.m9)(v),m);return g.email})).apply(this,arguments)}function qs(){return(qs=(0,R.Z)(function*(v,m,g){const w=vn(v),M=yield ih(w,{returnSecureToken:!0,email:m,password:g}),F=yield $r._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(F.user),F})).apply(this,arguments)}function Hl(){return(Hl=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v),M={requestType:"EMAIL_SIGNIN",email:m};Te(g.handleCodeInApp,w,"argument-error"),g&&Vu(w,M,g),yield Nl(w,M)})).apply(this,arguments)}function ea(){return(ea=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v),M=bo.credentialWithLink(m,g||Ct());return Te(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Gr(w,M)})).apply(this,arguments)}function Gl(v,m){return On.apply(this,arguments)}function On(){return(On=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:createAuthUri",Sn(v,m))})).apply(this,arguments)}function zl(){return(zl=(0,R.Z)(function*(v,m){const w={identifier:m,continueUri:nn()?Ct():"http://localhost"},{signinMethods:M}=yield Gl((0,L.m9)(v),w);return M||[]})).apply(this,arguments)}function ni(){return(ni=(0,R.Z)(function*(v,m){const g=(0,L.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};m&&Vu(g.auth,M,m);const{email:F}=yield _o(g.auth,M);F!==v.email&&(yield v.reload())})).apply(this,arguments)}function $a(){return($a=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:m};g&&Vu(w.auth,F,g);const{email:re}=yield Ag(w.auth,F);re!==v.email&&(yield v.reload())})).apply(this,arguments)}function oh(v,m){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,R.Z)(function*(v,m){return fn(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Co(){return(Co=(0,R.Z)(function*(v,{displayName:m,photoURL:g}){if(void 0===m&&void 0===g)return;const w=(0,L.m9)(v),F={idToken:yield w.getIdToken(),displayName:m,photoUrl:g,returnSecureToken:!0},re=yield rr(w,oh(w.auth,F));w.displayName=re.displayName||null,w.photoURL=re.photoUrl||null;const ve=w.providerData.find(({providerId:ze})=>"password"===ze);ve&&(ve.displayName=w.displayName,ve.photoURL=w.photoURL),yield w._updateTokensIfNecessary(re)})).apply(this,arguments)}function Pc(v,m,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,R.Z)(function*(v,m,g){const{auth:w}=v,F={idToken:yield v.getIdToken(),returnSecureToken:!0};m&&(F.email=m),g&&(F.password=g);const re=yield rr(v,Zo(w,F));yield v._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Ga{constructor(m,g,w={}){this.isNewUser=m,this.providerId=g,this.profile=w}}class Lc extends Ga{constructor(m,g,w,M){super(m,g,w),this.username=M}}class lh extends Ga{constructor(m,g){super(m,"facebook.com",g)}}class $u extends Lc{constructor(m,g){super(m,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ta extends Ga{constructor(m,g){super(m,"google.com",g)}}class Fg extends Lc{constructor(m,g,w){super(m,"twitter.com",g,w)}}function ch(v){const{user:m,_tokenResponse:g}=v;return m.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(v){var m,g;if(!v)return null;const{providerId:w}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},F=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const re=null===(g=null===(m=tn(v.idToken))||void 0===m?void 0:m.firebase)||void 0===g?void 0:g.sign_in_provider;if(re)return new Ga(F,"anonymous"!==re&&"custom"!==re?re:null)}if(!w)return null;switch(w){case"facebook.com":return new lh(F,M);case"github.com":return new $u(F,M);case"google.com":return new ta(F,M);case"twitter.com":return new Fg(F,M,v.screenName||null);case"custom":case"anonymous":return new Ga(F,null);default:return new Ga(F,w,M)}}(g)}class na{constructor(m,g){this.type=m,this.credential=g}static _fromIdtoken(m){return new na("enroll",m)}static _fromMfaPendingCredential(m){return new na("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var g,w;if(null==m?void 0:m.multiFactorSession){if(null===(g=m.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return na._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(w=m.multiFactorSession)||void 0===w?void 0:w.idToken)return na._fromIdtoken(m.multiFactorSession.idToken)}return null}}class za{constructor(m,g,w){this.session=m,this.hints=g,this.signInResolver=w}static _fromError(m,g){const w=vn(m),M=g.customData._serverResponse,F=(M.mfaInfo||[]).map(ve=>wo._fromServerResponse(w,ve));Te(M.mfaPendingCredential,w,"internal-error");const re=na._fromMfaPendingCredential(M.mfaPendingCredential);return new za(re,F,function(){var ve=(0,R.Z)(function*(ze){const rt=yield ze._process(w,re);delete M.mfaInfo,delete M.mfaPendingCredential;const Dt=Object.assign(Object.assign({},M),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(g.operationType){case"signIn":const pt=yield $r._fromIdTokenResponse(w,g.operationType,Dt);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return Te(g.user,w,"internal-error"),$r._forOperation(g.user,g.operationType,Dt);default:Oe(w,"internal-error")}});return function(ze){return ve.apply(this,arguments)}}())}resolveSignIn(m){var g=this;return(0,R.Z)(function*(){return g.signInResolver(m)})()}}function Ql(v,m){return fn(v,"POST","/v2/accounts/mfaEnrollment:start",Sn(v,m))}class hh{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>wo._fromServerResponse(m.auth,w)))})}static _fromUser(m){return new hh(m)}getSession(){var m=this;return(0,R.Z)(function*(){return na._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,g){var w=this;return(0,R.Z)(function*(){const M=m,F=yield w.getSession(),re=yield rr(w.user,M._process(w.user.auth,F,g));return yield w.user._updateTokensIfNecessary(re),w.user.reload()})()}unenroll(m){var g=this;return(0,R.Z)(function*(){const w="string"==typeof m?m:m.uid,M=yield g.user.getIdToken(),F=yield rr(g.user,function(v,m){return fn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Sn(v,m))}(g.user.auth,{idToken:M,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:re})=>re!==w),yield g.user._updateTokensIfNecessary(F);try{yield g.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Es=new WeakMap,Wa="__sak";class Uc{constructor(m,g){this.storageRetriever=m,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Wa,"1"),this.storage.removeItem(Wa),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,g){return this.storage.setItem(m,JSON.stringify(g)),Promise.resolve()}_get(m){const g=this.storage.getItem(m);return Promise.resolve(g?JSON.parse(g):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wu=(()=>{class v extends Uc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,L.z$)();return xc(v)||Xr(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Ze(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),F=this.localCache[w];M!==F&&g(w,F,M)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ve,ze,rt)=>{this.notifyListeners(ve,rt)});const M=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(M);if(g.newValue!==ve)null!==g.newValue?this.storage.setItem(M,g.newValue):this.storage.removeItem(M);else if(this.localCache[M]===g.newValue&&!w)return}const F=()=>{const ve=this.storage.getItem(M);!w&&this.localCache[M]===ve||this.notifyListeners(M,ve)},re=this.storage.getItem(M);(0,L.w1)()&&10===document.documentMode&&re!==g.newValue&&g.newValue!==g.oldValue?setTimeout(F,10):F()}notifyListeners(g,w){this.localCache[g]=w;const M=this.listeners[g];if(M)for(const F of Array.from(M))F(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var M=()=>super._set,F=this;return(0,R.Z)(function*(){yield M().call(F,g,w),F.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,M=this;return(0,R.Z)(function*(){const F=yield w().call(M,g);return M.localCache[g]=JSON.stringify(F),F})()}_remove(g){var w=()=>super._remove,M=this;return(0,R.Z)(function*(){yield w().call(M,g),delete M.localCache[g]})()}}return v.type="LOCAL",v})(),ns=(()=>{class v extends Uc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let Xl=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(F=>F.isListeningto(g));if(w)return w;const M=new v(g);return this.receivers.push(M),M}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,R.Z)(function*(){const M=g,{eventId:F,eventType:re,data:ve}=M.data,ze=w.handlersMap[re];if(!(null==ze?void 0:ze.size))return;M.ports[0].postMessage({status:"ack",eventId:F,eventType:re});const rt=Array.from(ze).map(function(){var pt=(0,R.Z)(function*(Un){return Un(M.origin,ve)});return function(Un){return pt.apply(this,arguments)}}()),Dt=yield function(v){return Promise.all(v.map(function(){var m=(0,R.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return m.apply(this,arguments)}}()))}(rt);M.ports[0].postMessage({status:"done",eventId:F,eventType:re,response:Dt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ws(v="",m=10){let g="";for(let w=0;w<m;w++)g+=Math.floor(10*Math.random());return v+g}class Xf{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,g,w=50){var M=this;return(0,R.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let re,ve;return new Promise((ze,rt)=>{const Dt=ws("",20);F.port1.start();const pt=setTimeout(()=>{rt(new Error("unsupported_event"))},w);ve={messageChannel:F,onMessage(Un){const xs=Un;if(xs.data.eventId===Dt)switch(xs.data.status){case"ack":clearTimeout(pt),re=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),ze(xs.data.response);break;default:clearTimeout(pt),clearTimeout(re),rt(new Error("invalid_response"))}}},M.handlers.add(ve),F.port1.addEventListener("message",ve.onMessage),M.target.postMessage({eventType:m,eventId:Dt,data:g},[F.port2])}).finally(()=>{ve&&M.removeMessageHandler(ve)})})()}}function qn(){return window}function qu(){return void 0!==qn().WorkerGlobalScope&&"function"==typeof qn().importScripts}function Ka(){return(Ka=(0,R.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const ph="firebaseLocalStorageDb",Ku="firebaseLocalStorage",yn="fbase_key";class lt{constructor(m){this.request=m}toPromise(){return new Promise((m,g)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Fn(v,m){return v.transaction([Ku],m?"readwrite":"readonly").objectStore(Ku)}function bn(){const v=indexedDB.open(ph,1);return new Promise((m,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Ku,{keyPath:yn})}catch(M){g(M)}}),v.addEventListener("success",(0,R.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Ku)?m(w):(w.close(),yield function(){const v=indexedDB.deleteDatabase(ph);return new lt(v).toPromise()}(),m(yield bn()))}))})}function sa(v,m,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,R.Z)(function*(v,m,g){const w=Fn(v,!0).put({[yn]:m,value:g});return new lt(w).toPromise()})).apply(this,arguments)}function Ya(){return(Ya=(0,R.Z)(function*(v,m){const g=Fn(v,!1).get(m),w=yield new lt(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function jc(v,m){const g=Fn(v,!0).delete(m);return new lt(g).toPromise()}const Ks=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,R.Z)(function*(){return g.db||(g.db=yield bn()),g.db})()}_withRetries(g){var w=this;return(0,R.Z)(function*(){let M=0;for(;;)try{const F=yield w._openDb();return yield g(F)}catch(F){if(M++>3)throw F;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,R.Z)(function*(){return qu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,R.Z)(function*(){g.receiver=Xl._getInstance(qu()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,R.Z)(function*(M,F){return{keyProcessed:(yield g._poll()).includes(F.key)}});return function(M,F){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,R.Z)(function*(M,F){return["keyChanged"]});return function(M,F){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,R.Z)(function*(){var w,M;if(g.activeServiceWorker=yield function(){return Ka.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Xf(g.activeServiceWorker);const F=yield g.sender._send("ping",{},800);!F||(null===(w=F[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=F[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,R.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,R.Z)(function*(){try{if(!indexedDB)return!1;const g=yield bn();return yield sa(g,Wa,"1"),yield jc(g,Wa),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,R.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var M=this;return(0,R.Z)(function*(){return M._withPendingWrite((0,R.Z)(function*(){return yield M._withRetries(F=>sa(F,g,w)),M.localCache[g]=w,M.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,R.Z)(function*(){const M=yield w._withRetries(F=>function(v,m){return Ya.apply(this,arguments)}(F,g));return w.localCache[g]=M,M})()}_remove(g){var w=this;return(0,R.Z)(function*(){return w._withPendingWrite((0,R.Z)(function*(){return yield w._withRetries(M=>jc(M,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,R.Z)(function*(){const w=yield g._withRetries(re=>{const ve=Fn(re,!1).getAll();return new lt(ve).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const M=[],F=new Set;for(const{fbase_key:re,value:ve}of w)F.add(re),JSON.stringify(g.localCache[re])!==JSON.stringify(ve)&&(g.notifyListeners(re,ve),M.push(re));for(const re of Object.keys(g.localCache))g.localCache[re]&&!F.has(re)&&(g.notifyListeners(re,null),M.push(re));return M})()}notifyListeners(g,w){this.localCache[g]=w;const M=this.listeners[g];if(M)for(const F of Array.from(M))F(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,R.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ja(v,m){return fn(v,"POST","/v2/accounts/mfaSignIn:start",Sn(v,m))}function $c(){return($c=(0,R.Z)(function*(v){return(yield fn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xa(v){return new Promise((m,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=m,w.onerror=M=>{const F=qe("internal-error");F.customData=M,g(F)},w.type="text/javascript",w.charset="UTF-8",function(){var v,m;return null!==(m=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==m?m:document}().appendChild(w)})}function Zs(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Rr=1e12;class Ys{constructor(m){this.auth=m,this.counter=Rr,this._widgets=new Map}render(m,g){const w=this.counter;return this._widgets.set(w,new Gc(m,this.auth.name,g||{})),this.counter++,w}reset(m){var g;const w=m||Rr;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(m){var g;return(null===(g=this._widgets.get(m||Rr))||void 0===g?void 0:g.getResponse())||""}execute(m){var g=this;return(0,R.Z)(function*(){var w;return null===(w=g._widgets.get(m||Rr))||void 0===w||w.execute(),""})()}}class Gc{constructor(m,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;Te(M,"argument-error",{appName:g}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const m=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)m.push(g.charAt(Math.floor(Math.random()*g.length)));return m.join("")}();const{callback:m,"expired-callback":g}=this.params;if(m)try{m(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vr=Zs("rcb"),lr=new bt(3e4,6e4);class Ug{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qn().grecaptcha}load(m,g=""){return Te((v=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),m,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(qn().grecaptcha):new Promise((w,M)=>{const F=qn().setTimeout(()=>{M(qe(m,"network-request-failed"))},lr.get());qn()[vr]=()=>{qn().clearTimeout(F),delete qn()[vr];const ve=qn().grecaptcha;if(!ve)return void M(qe(m,"internal-error"));const ze=ve.render;ve.render=(rt,Dt)=>{const pt=ze(rt,Dt);return this.counter++,pt},this.hostLanguage=g,w(ve)},Xa(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:vr,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(F),M(qe(m,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!qn().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tp{load(m){return(0,R.Z)(function*(){return new Ys(m)})()}clearedOneInstance(){}}const mn="recaptcha",gh={theme:"light",type:"image"};class Yu{constructor(m,g=Object.assign({},gh),w){this.parameters=g,this.type=mn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(w),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;Te(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tp:new Ug,this.validateStartingState()}verify(){var m=this;return(0,R.Z)(function*(){m.assertNotDestroyed();const g=yield m.render(),w=m.getAssertedRecaptcha();return w.getResponse(g)||new Promise(F=>{const re=ve=>{!ve||(m.tokenChangeListeners.delete(re),F(ve))};m.tokenChangeListeners.add(re),m.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof m)m(g);else if("string"==typeof m){const w=qn()[m];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,R.Z)(function*(){if(yield m.init(),!m.widgetId){let g=m.container;if(!m.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}m.widgetId=m.getAssertedRecaptcha().render(g,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,R.Z)(function*(){Te(nn()&&!qu(),m.auth,"internal-error"),yield function(){let v=null;return new Promise(m=>{"complete"!==document.readyState?(v=()=>m(),window.addEventListener("load",v)):m()}).catch(m=>{throw v&&window.removeEventListener("load",v),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const g=yield function(v){return $c.apply(this,arguments)}(m.auth);Te(g,m.auth,"internal-error"),m.parameters.sitekey=g})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Io{constructor(m,g){this.verificationId=m,this.onConfirmation=g}confirm(m){const g=Pa._fromVerification(this.verificationId,m);return this.onConfirmation(g)}}function _h(){return(_h=(0,R.Z)(function*(v,m,g){const w=vn(v),M=yield tc(w,m,(0,L.m9)(g));return new Io(M,F=>Gr(w,F))})).apply(this,arguments)}function yh(){return(yh=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v);yield Jo(!1,w,"phone");const M=yield tc(w.auth,m,(0,L.m9)(g));return new Io(M,F=>Lu(w,F))})).apply(this,arguments)}function Is(){return(Is=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v),M=yield tc(w.auth,m,(0,L.m9)(g));return new Io(M,F=>br(w,F))})).apply(this,arguments)}function tc(v,m,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,R.Z)(function*(v,m,g){var w;const M=yield g.verify();try{let F;if(Te("string"==typeof M,v,"argument-error"),Te(g.type===mn,v,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const re=F.session;if("phoneNumber"in F)return Te("enroll"===re.type,v,"internal-error"),(yield Ql(v,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Te("signin"===re.type,v,"internal-error");const ve=(null===(w=F.multiFactorHint)||void 0===w?void 0:w.uid)||F.multiFactorUid;return Te(ve,v,"missing-multi-factor-info"),(yield Ja(v,{mfaPendingCredential:re.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield xg(v,{phoneNumber:F.phoneNumber,recaptchaToken:M});return re}}finally{g._reset()}})).apply(this,arguments)}function ln(){return(ln=(0,R.Z)(function*(v,m){yield pn((0,L.m9)(v),m)})).apply(this,arguments)}let ki=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=vn(g)}verifyPhoneNumber(g,w){return tc(this.auth,g,(0,L.m9)(w))}static credential(g,w){return Pa._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:M}=g;return w&&M?Pa._fromTokenResponse(w,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Mi(v,m){return m?Le(m):(Te(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class np extends $s{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Gs(m,this._buildIdpRequest())}_linkToIdToken(m,g){return Gs(m,this._buildIdpRequest(g))}_getReauthenticationResolver(m){return Gs(m,this._buildIdpRequest())}_buildIdpRequest(m){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(g.idToken=m),g}}function rp(v){return Vl(v.auth,new np(v),v.bypassAuthState)}function rs(v){const{auth:m,user:g}=v;return Te(g,m,"internal-error"),Tn(g,new np(v),v.bypassAuthState)}function Ts(v){return el.apply(this,arguments)}function el(){return(el=(0,R.Z)(function*(v){const{auth:m,user:g}=v;return Te(g,m,"internal-error"),pn(g,new np(v),v.bypassAuthState)})).apply(this,arguments)}class ri{constructor(m,g,w,M,F=!1){this.auth=m,this.resolver=w,this.user=M,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var m=this;return new Promise(function(){var g=(0,R.Z)(function*(w,M){m.pendingPromise={resolve:w,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(w,M){return g.apply(this,arguments)}}())}onAuthEvent(m){var g=this;return(0,R.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:F,tenantId:re,error:ve,type:ze}=m;if(ve)return void g.reject(ve);const rt={auth:g.auth,requestUri:w,sessionId:M,tenantId:re||void 0,postBody:F||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ze)(rt))}catch(Dt){g.reject(Dt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return rp;case"linkViaPopup":case"linkViaRedirect":return Ts;case"reauthViaPopup":case"reauthViaRedirect":return rs;default:Oe(this.auth,"internal-error")}}resolve(m){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xs=new bt(2e3,1e4);function zc(){return(zc=(0,R.Z)(function*(v,m,g){const w=vn(v);ft(v,m,gi);const M=Mi(w,g);return new zr(w,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function To(){return(To=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v);ft(w.auth,m,gi);const M=Mi(w.auth,g);return new zr(w.auth,"reauthViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}function Ju(){return(Ju=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v);ft(w.auth,m,gi);const M=Mi(w.auth,g);return new zr(w.auth,"linkViaPopup",m,M,w).executeNotNull()})).apply(this,arguments)}let zr=(()=>{class v extends ri{constructor(g,w,M,F,re){super(g,w,F,re),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,R.Z)(function*(){const w=yield g.execute();return Te(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,R.Z)(function*(){me(1===g.filter.length,"Popup operations only handle one event");const w=ws();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(M=>{g.reject(M)}),g.resolver._isIframeWebStorageSupported(g.auth,M=>{M||g.reject(qe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,M;this.pollId=(null===(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Xs.get())};g()}}return v.currentPopupAction=null,v})();const eo=new Map;class Hg extends ri{constructor(m,g,w=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var m=()=>super.execute,g=this;return(0,R.Z)(function*(){let w=eo.get(g.auth._key());if(!w){try{const F=(yield function(v,m){return I.apply(this,arguments)}(g.resolver,g.auth))?yield m().call(g):null;w=()=>Promise.resolve(F)}catch(M){w=()=>Promise.reject(M)}eo.set(g.auth._key(),w)}return g.bypassAuthState||eo.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(m){var g=()=>super.onAuthEvent,w=this;return(0,R.Z)(function*(){if("signInViaRedirect"===m.type)return g().call(w,m);if("unknown"!==m.type){if(m.eventId){const M=yield w.auth._redirectUserForId(m.eventId);if(M)return w.user=M,g().call(w,m);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,R.Z)(function*(){})()}cleanUp(){}}function I(){return(I=(0,R.Z)(function*(v,m){const g=_e(m),w=oe(v);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(g));return yield w._remove(g),M})).apply(this,arguments)}function x(v,m){return O.apply(this,arguments)}function O(){return(O=(0,R.Z)(function*(v,m){return oe(v)._set(_e(m),"true")})).apply(this,arguments)}function oe(v){return Le(v._redirectPersistence)}function _e(v){return rn("pendingRedirect",v.config.apiKey,v.name)}function et(){return(et=(0,R.Z)(function*(v,m,g){const w=vn(v);ft(v,m,gi);const M=Mi(w,g);return yield x(M,w),M._openRedirect(w,m,"signInViaRedirect")})).apply(this,arguments)}function Ln(){return(Ln=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v);ft(w.auth,m,gi);const M=Mi(w.auth,g);yield x(M,w.auth);const F=yield no(w);return M._openRedirect(w.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function tl(){return(tl=(0,R.Z)(function*(v,m,g){const w=(0,L.m9)(v);ft(w.auth,m,gi);const M=Mi(w.auth,g);yield Jo(!1,w,m.providerId),yield x(M,w.auth);const F=yield no(w);return M._openRedirect(w.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function Rt(){return(Rt=(0,R.Z)(function*(v,m){return yield vn(v)._initializationPromise,Ni(v,m,!1)})).apply(this,arguments)}function Ni(v,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,R.Z)(function*(v,m,g=!1){const w=vn(v),M=Mi(w,m),re=yield new Hg(w,M,g).execute();return re&&!g&&(delete re.user._redirectEventId,yield w._persistUserIfCurrent(re.user),yield w._setRedirectUser(null,m)),re})).apply(this,arguments)}function no(v){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,R.Z)(function*(v){const m=ws(`${v.uid}:::`);return v._redirectEventId=m,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),m})).apply(this,arguments)}class ip{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(m,w)&&(g=!0,this.sendToConsumer(m,w),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(v);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=m,g=!0)),g}sendToConsumer(m,g){var w;if(m.error&&!Wr(m)){const M=(null===(w=m.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(qe(this.auth,M))}else g.onAuthEvent(m)}isEventForConsumer(m,g){const w=null===g.eventId||!!m.eventId&&m.eventId===g.eventId;return g.filter.includes(m.type)&&w}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($g(m))}saveEventToCache(m){this.cachedEventUids.add($g(m)),this.lastProcessedEventTime=Date.now()}}function $g(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(m=>m).join("-")}function Wr({type:v,error:m}){return"unknown"===v&&"auth/no-auth-event"===(null==m?void 0:m.code)}function sp(v){return ed.apply(this,arguments)}function ed(){return(ed=(0,R.Z)(function*(v,m={}){return fn(v,"GET","/v1/projects",m)})).apply(this,arguments)}const fv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ii=/^https?/;function ro(){return(ro=(0,R.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:m}=yield sp(v);for(const g of m)try{if(vh(g))return}catch(w){}Oe(v,"unauthorized-domain")})).apply(this,arguments)}function vh(v){const m=Ct(),{protocol:g,hostname:w}=new URL(m);if(v.startsWith("chrome-extension://")){const re=new URL(v);return""===re.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===g&&re.hostname===w}if(!ii.test(g))return!1;if(fv.test(v))return w===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const la=new bt(3e4,6e4);function op(){const v=qn().___jsl;if(null==v?void 0:v.H)for(const m of Object.keys(v.H))if(v.H[m].r=v.H[m].r||[],v.H[m].L=v.H[m].L||[],v.H[m].r=[...v.H[m].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let nc=null;function Eh(v){return nc=nc||function(v){return new Promise((m,g)=>{var w,M,F;function re(){op(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{op(),g(qe(v,"network-request-failed"))},timeout:la.get()})}if(null===(M=null===(w=qn().gapi)||void 0===w?void 0:w.iframes)||void 0===M?void 0:M.Iframe)m(gapi.iframes.getContext());else{if(!(null===(F=qn().gapi)||void 0===F?void 0:F.load)){const ve=Zs("iframefcb");return qn()[ve]=()=>{gapi.load?re():g(qe(v,"network-request-failed"))},Xa(`https://apis.google.com/js/api.js?onload=${ve}`).catch(ze=>g(ze))}re()}}).catch(m=>{throw nc=null,m})}(v),nc}const ap=new bt(5e3,15e3),Ds={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ht=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function td(v){const m=v.config;Te(m.authDomain,v,"auth-domain-config-required");const g=m.emulator?Wt(m,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:m.apiKey,appName:v.name,v:Y.SDK_VERSION},M=Ht.get(v.config.apiHost);M&&(w.eid=M);const F=v._getFrameworks();return F.length&&(w.fw=F.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function Do(){return(Do=(0,R.Z)(function*(v){const m=yield Eh(v),g=qn().gapi;return Te(g,v,"internal-error"),m.open({where:document.body,url:td(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ds,dontclear:!0},w=>new Promise(function(){var M=(0,R.Z)(function*(F,re){yield w.restyle({setHideOnLeave:!1});const ve=qe(v,"network-request-failed"),ze=qn().setTimeout(()=>{re(ve)},ap.get());function rt(){qn().clearTimeout(ze),F(w)}w.ping(rt).then(rt,()=>{re(ve)})});return function(F,re){return M.apply(this,arguments)}}()))})).apply(this,arguments)}const pv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ca{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function nd(v,m,g,w,M,F){Te(v.config.authDomain,v,"auth-domain-config-required"),Te(v.config.apiKey,v,"invalid-api-key");const re={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:Y.SDK_VERSION,eventId:M};if(m instanceof gi){m.setDefaultLanguage(v.languageCode),re.providerId=m.providerId||"",(0,L.xb)(m.getCustomParameters())||(re.customParameters=JSON.stringify(m.getCustomParameters()));for(const[ze,rt]of Object.entries(F||{}))re[ze]=rt}if(m instanceof Pl){const ze=m.getScopes().filter(rt=>""!==rt);ze.length>0&&(re.scopes=ze.join(","))}v.tenantId&&(re.tid=v.tenantId);const ve=re;for(const ze of Object.keys(ve))void 0===ve[ze]&&delete ve[ze];return`${function({config:v}){return v.emulator?Wt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(ve).slice(1)}`}const Kc="webStorageSupport";class Ss extends class{constructor(m){this.factorId=m}_process(m,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(m,g.credential,w);case"signin":return this._finalizeSignIn(m,g.credential);default:return se("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Ss(m)}_finalizeEnroll(m,g,w){return function(v,m){return fn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Sn(v,m))}(m,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,g){return function(v,m){return fn(v,"POST","/v2/accounts/mfaSignIn:finalize",Sn(v,m))}(m,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _v=(()=>{class v{constructor(){}static assertion(g){return Ss._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v,Yg="@firebase/auth";class yv{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var g=this;return(0,R.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const g=this.auth.onIdTokenChanged(w=>{var M;m((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,g),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const g=this.internalListeners.get(m);!g||(this.internalListeners.delete(m),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ao(){return window}function Th(){return(Th=(0,R.Z)(function*(v,m,g){var w;const{BuildInfo:M}=Ao();me(m.sessionId,"AuthEvent did not contain a session ID");const F=yield e_(m.sessionId),re={};return Xr()?re.ibi=M.packageName:Ai()?re.apn=M.packageName:Oe(v,"operation-not-supported-in-this-environment"),M.displayName&&(re.appDisplayName=M.displayName),re.sessionId=F,nd(v,g,m.type,void 0,null!==(w=m.eventId)&&void 0!==w?w:void 0,re)})).apply(this,arguments)}function up(){return(up=(0,R.Z)(function*(v){const{BuildInfo:m}=Ao(),g={};Xr()?g.iosBundleId=m.packageName:Ai()?g.androidPackageName=m.packageName:Oe(v,"operation-not-supported-in-this-environment"),yield sp(v,g)})).apply(this,arguments)}function dp(){return(dp=(0,R.Z)(function*(v,m,g){const{cordova:w}=Ao();let M=()=>{};try{yield new Promise((F,re)=>{let ve=null;function ze(){var pt;F();const Un=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof Un&&Un(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function rt(){ve||(ve=window.setTimeout(()=>{re(qe(v,"redirect-cancelled-by-user"))},2e3))}function Dt(){"visible"===(null==document?void 0:document.visibilityState)&&rt()}m.addPassiveListener(ze),document.addEventListener("resume",rt,!1),Ai()&&document.addEventListener("visibilitychange",Dt,!1),M=()=>{m.removePassiveListener(ze),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Dt,!1),ve&&window.clearTimeout(ve)}})}finally{M()}})).apply(this,arguments)}function e_(v){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,R.Z)(function*(v){const m=t_(v),g=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(g)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function t_(v){if(me(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const m=new ArrayBuffer(v.length),g=new Uint8Array(m);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}v="Browser",(0,Y._registerComponent)(new Ie.wA("auth",(m,{options:g})=>{const w=m.getProvider("app").getImmediate(),{apiKey:M,authDomain:F}=w.options;return(re=>{Te(M&&!M.includes(":"),"invalid-api-key",{appName:re.name}),Te(!(null==F?void 0:F.includes(":")),"argument-error",{appName:re.name});const ve={apiKey:M,authDomain:F,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dn(v)},ze=new xr(re,ve);return function(v,m){const g=(null==m?void 0:m.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Le);(null==m?void 0:m.errorMap)&&v._updateErrorMap(m.errorMap),v._initializeWithPersistence(w,null==m?void 0:m.popupRedirectResolver)}(ze,g),ze})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,g,w)=>{m.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new Ie.wA("auth-internal",m=>{const g=vn(m.getProvider("auth").getImmediate());return new yv(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(Yg,"0.19.9",void 0),(0,Y.registerVersion)(Yg,"0.19.9","esm2017");class Ah extends ip{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(m)),super.onEvent(m)}initialized(){var m=this;return(0,R.Z)(function*(){yield m.initPromise})()}}function xh(v){return kh.apply(this,arguments)}function kh(){return(kh=(0,R.Z)(function*(v){const m=yield sd()._get(Zc(v));return m&&(yield sd()._remove(Zc(v))),m})).apply(this,arguments)}function WC(){const v=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*m.length);v.push(m.charAt(w))}return v.join("")}function sd(){return Le(Wu)}function Zc(v){return rn("authEvent",v.config.apiKey,v.name)}function sc(v){if(!(null==v?void 0:v.includes("?")))return{};const[m,...g]=v.split("?");return(0,L.zd)(g.join("?"))}function s_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qe("no-auth-event")}}function ha(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function ad(v=(0,L.z$)()){return!("file:"!==ha()&&"ionic:"!==ha()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nh(){try{const v=self.localStorage,m=ws();if(v)return v.setItem(m,"1"),v.removeItem(m),!function(v=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Yc()&&(0,L.hl)()}return!1}function Yc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ko(){return("http:"===ha()||"https:"===ha()||(0,L.ru)()||ad())&&!((0,L.b$)()||(0,L.UG)())&&Nh()&&!Yc()}function d_(){return ad()&&"undefined"!=typeof document}function hp(){return(hp=(0,R.Z)(function*(){return!!d_()&&new Promise(v=>{const m=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),v(!0)})})})).apply(this,arguments)}const As={LOCAL:"local",NONE:"none",SESSION:"session"},Oh=Te,Mo="persistence";function Qc(v){return ld.apply(this,arguments)}function ld(){return(ld=(0,R.Z)(function*(v){yield v._initializationPromise;const m=qr(),g=rn(Mo,v.config.apiKey,v.name);m&&m.setItem(g,v._getPersistence())})).apply(this,arguments)}function qr(){var v;try{return(null===(v="undefined"!=typeof window?window:null)||void 0===v?void 0:v.sessionStorage)||null}catch(m){return null}}const ac=Te;class Zn{constructor(){this.browserResolver=Le(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ns,this._completeRedirectFn=Ni}_openPopup(m,g,w,M){var F=this;return(0,R.Z)(function*(){var re;me(null===(re=F.eventManagers[m._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const ve=nd(m,g,w,Ct(),M);return function(v,m,g,w=500,M=600){const F=Math.max((window.screen.availHeight-M)/2,0).toString(),re=Math.max((window.screen.availWidth-w)/2,0).toString();let ve="";const ze=Object.assign(Object.assign({},pv),{width:w.toString(),height:M.toString(),top:F,left:re}),rt=(0,L.z$)().toLowerCase();g&&(ve=ka(rt)?"_blank":g),qo(rt)&&(m=m||"http://localhost",ze.scrollbars="yes");const Dt=Object.entries(ze).reduce((Un,[xs,jh])=>`${Un}${xs}=${jh},`,"");if(function(v=(0,L.z$)()){var m;return Xr(v)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(rt)&&"_self"!==ve)return function(v,m){const g=document.createElement("a");g.href=v,g.target=m;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(m||"",ve),new ca(null);const pt=window.open(m||"",ve,Dt);Te(pt,v,"popup-blocked");try{pt.focus()}catch(Un){}return new ca(pt)}(m,ve,ws())})()}_openRedirect(m,g,w,M){var F=this;return(0,R.Z)(function*(){return yield F._originValidation(m),v=nd(m,g,w,Ct(),M),qn().location.href=v,new Promise(()=>{});var v})()}_initialize(m){const g=m._key();if(this.eventManagers[g]){const{manager:M,promise:F}=this.eventManagers[g];return M?Promise.resolve(M):(me(F,"If manager is not set, promise should be"),F)}const w=this.initAndGetManager(m);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(m){var g=this;return(0,R.Z)(function*(){const w=yield function(v){return Do.apply(this,arguments)}(m),M=new ip(m);return w.register("authEvent",F=>(Te(null==F?void 0:F.authEvent,m,"invalid-auth-event"),{status:M.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[m._key()]={manager:M},g.iframes[m._key()]=w,M})()}_isIframeWebStorageSupported(m,g){this.iframes[m._key()].send(Kc,{type:Kc},M=>{var F;const re=null===(F=null==M?void 0:M[0])||void 0===F?void 0:F[Kc];void 0!==re&&g(!!re),Oe(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const g=m._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return ro.apply(this,arguments)}(m)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ze()||xc()||Xr()}}),this.cordovaResolver=Le(class{constructor(){this._redirectPersistence=ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ni}_initialize(m){var g=this;return(0,R.Z)(function*(){const w=m._key();let M=g.eventManagers.get(w);return M||(M=new Ah(m),g.eventManagers.set(w,M),g.attachCallbackListeners(m,M)),M})()}_openPopup(m){Oe(m,"operation-not-supported-in-this-environment")}_openRedirect(m,g,w,M){var F=this;return(0,R.Z)(function*(){!function(v){var m,g,w,M,F,re,ve,ze,rt,Dt;const pt=Ao();Te("function"==typeof(null===(m=null==pt?void 0:pt.universalLinks)||void 0===m?void 0:m.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(g=null==pt?void 0:pt.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(F=null===(M=null===(w=null==pt?void 0:pt.cordova)||void 0===w?void 0:w.plugins)||void 0===M?void 0:M.browsertab)||void 0===F?void 0:F.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(ze=null===(ve=null===(re=null==pt?void 0:pt.cordova)||void 0===re?void 0:re.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===ze?void 0:ze.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Dt=null===(rt=null==pt?void 0:pt.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Dt?void 0:Dt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const re=yield F._initialize(m);yield re.initialized(),re.resetRedirect(),eo.clear(),yield F._originValidation(m);const ve=function(v,m,g=null){return{type:m,eventId:g,urlResponse:null,sessionId:WC(),postBody:null,tenantId:v.tenantId,error:qe(v,"no-auth-event")}}(m,w,M);yield function(v,m){return sd()._set(Zc(v),m)}(m,ve);const ze=yield function(v,m,g){return Th.apply(this,arguments)}(m,ve,g),rt=yield function(v){const{cordova:m}=Ao();return new Promise(g=>{m.plugins.browsertab.isAvailable(w=>{let M=null;w?m.plugins.browsertab.openUrl(v):M=m.InAppBrowser.open(v,function(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(M)})})}(ze);return function(v,m,g){return dp.apply(this,arguments)}(m,re,rt)})()}_isIframeWebStorageSupported(m,g){throw new Error("Method not implemented.")}_originValidation(m){const g=m._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return up.apply(this,arguments)}(m)),this.originValidationPromises[g]}attachCallbackListeners(m,g){const{universalLinks:w,handleOpenURL:M,BuildInfo:F}=Ao(),re=setTimeout((0,R.Z)(function*(){yield xh(m),g.onEvent(s_())}),500),ve=function(){var Dt=(0,R.Z)(function*(pt){clearTimeout(re);const Un=yield xh(m);let xs=null;Un&&(null==pt?void 0:pt.url)&&(xs=function(v,m){var g,w;const M=function(v){const m=sc(v),g=m.link?decodeURIComponent(m.link):void 0,w=sc(g).link,M=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return sc(M).link||M||w||g||v}(m);if(M.includes("/__/auth/callback")){const F=sc(M),re=F.firebaseError?function(v){try{return JSON.parse(v)}catch(m){return null}}(decodeURIComponent(F.firebaseError)):null,ve=null===(w=null===(g=null==re?void 0:re.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],ze=ve?qe(ve):null;return ze?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:ze,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(Un,pt.url)),g.onEvent(xs||s_())});return function(Un){return Dt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ve);const ze=M,rt=`${F.packageName.toLowerCase()}://`;Ao().handleOpenURL=function(){var Dt=(0,R.Z)(function*(pt){if(pt.toLowerCase().startsWith(rt)&&ve({url:pt}),"function"==typeof ze)try{ze(pt)}catch(Un){console.error(Un)}});return function(pt){return Dt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ns,this._completeRedirectFn=Ni}_initialize(m){var g=this;return(0,R.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,g,w,M){var F=this;return(0,R.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(m,g,w,M)})()}_openRedirect(m,g,w,M){var F=this;return(0,R.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(m,g,w,M)})()}_isIframeWebStorageSupported(m,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,g)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return d_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ac(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,R.Z)(function*(){if(m.underlyingResolver)return;const g=yield function(){return hp.apply(this,arguments)}();m.underlyingResolver=g?m.cordovaResolver:m.browserResolver})()}}function fp(v){return v.unwrap()}function cd(v){return pp(v)}function pp(v){const{_tokenResponse:m}=v instanceof L.ZR?v.customData:v;if(!m)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return ki.credentialFromResult(v);const g=m.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=gs;break;case"facebook.com":w=Ru;break;case"github.com":w=Nu;break;case"twitter.com":w=ys;break;default:const{oauthIdToken:M,oauthAccessToken:F,oauthTokenSecret:re,pendingToken:ve,nonce:ze}=m;return F||re||M||ve?ve?g.startsWith("saml.")?Qo._create(g,ve):ms._fromParams({providerId:g,signInMethod:g,pendingToken:ve,idToken:M,accessToken:F}):new Fl(g).credential({idToken:M,accessToken:F,rawNonce:ze}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Oi(v,m){return m.catch(g=>{throw g instanceof L.ZR&&function(v,m){var g;const w=null===(g=m.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===m.code)m.resolver=new Lh(v,function(v,m){var g;const w=(0,L.m9)(v),M=m;return Te(m.customData.operationType,w,"argument-error"),Te(null===(g=M.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),za._fromError(w,M)}(v,m));else if(w){const M=pp(m),F=m;M&&(F.credential=M,F.tenantId=w.tenantId||void 0,F.email=w.email||void 0,F.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const M=g.user;return{operationType:g.operationType,credential:cd(g),additionalUserInfo:ch(g),user:Ro.getOrCreate(M)}})}function Fh(v,m){return mp.apply(this,arguments)}function mp(){return(mp=(0,R.Z)(function*(v,m){const g=yield m;return{verificationId:g.verificationId,confirm:w=>Oi(v,g.confirm(w))}})).apply(this,arguments)}class Lh{constructor(m,g){this.resolver=g,this.auth=function(v){return v.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Oi(fp(this.auth),this.resolver.resolveSignIn(m))}}class Ro{constructor(m){this._delegate=m,this.multiFactor=function(v){const m=(0,L.m9)(v);return Es.has(m)||Es.set(m,hh._fromUser(m)),Es.get(m)}(m)}static getOrCreate(m){return Ro.USER_MAP.has(m)||Ro.USER_MAP.set(m,new Ro(m)),Ro.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var g=this;return(0,R.Z)(function*(){return Oi(g.auth,Lu(g._delegate,m))})()}linkWithPhoneNumber(m,g){var w=this;return(0,R.Z)(function*(){return Fh(w.auth,function(v,m,g){return yh.apply(this,arguments)}(w._delegate,m,g))})()}linkWithPopup(m){var g=this;return(0,R.Z)(function*(){return Oi(g.auth,function(v,m,g){return Ju.apply(this,arguments)}(g._delegate,m,Zn))})()}linkWithRedirect(m){var g=this;return(0,R.Z)(function*(){return yield Qc(vn(g.auth)),function(v,m,g){return function(v,m,g){return tl.apply(this,arguments)}(v,m,g)}(g._delegate,m,Zn)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var g=this;return(0,R.Z)(function*(){return Oi(g.auth,br(g._delegate,m))})()}reauthenticateWithPhoneNumber(m,g){return Fh(this.auth,function(v,m,g){return Is.apply(this,arguments)}(this._delegate,m,g))}reauthenticateWithPopup(m){return Oi(this.auth,function(v,m,g){return To.apply(this,arguments)}(this._delegate,m,Zn))}reauthenticateWithRedirect(m){var g=this;return(0,R.Z)(function*(){return yield Qc(vn(g.auth)),function(v,m,g){return function(v,m,g){return Ln.apply(this,arguments)}(v,m,g)}(g._delegate,m,Zn)})()}sendEmailVerification(m){return function(v,m){return ni.apply(this,arguments)}(this._delegate,m)}unlink(m){var g=this;return(0,R.Z)(function*(){return yield function(v,m){return vo.apply(this,arguments)}(g._delegate,m),g})()}updateEmail(m){return function(v,m){return Pc((0,L.m9)(v),m,null)}(this._delegate,m)}updatePassword(m){return function(v,m){return Pc((0,L.m9)(v),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function(v,m){return ln.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function(v,m){return Co.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,g){return function(v,m,g){return $a.apply(this,arguments)}(this._delegate,m,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ro.USER_MAP=new WeakMap;const lc=Te;let sl=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=g.options;lc(M,"invalid-api-key",{appName:g.name}),lc(M,"invalid-api-key",{appName:g.name});const F="undefined"!=typeof window?Zn:void 0;this._delegate=w.initialize({options:{persistence:Uh(M,g.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(v,m,g){const w=vn(v);Te(w._canInitEmulator,w,"emulator-config-failed"),Te(/^https?:\/\//.test(m),w,"invalid-emulator-scheme");const M=!!(null==g?void 0:g.disableWarnings),F=En(m),{host:re,port:ve}=function(v){const m=En(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(m.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const F=M[1];return{host:F,port:Hs(w.substr(F.length+1))}}{const[F,re]=w.split(":");return{host:F,port:Hs(re)}}}(m);w.config.emulator={url:`${F}//${re}${null===ve?"":`:${ve}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:re,port:ve,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function(){function v(){const m=document.createElement("p"),g=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function(v,m){return ja.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Fe(this._delegate,g)}confirmPasswordReset(g,w){return function(v,m,g){return Ws.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var M=this;return(0,R.Z)(function*(){return Oi(M._delegate,function(v,m,g){return qs.apply(this,arguments)}(M._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(v,m){return zl.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(v,m){const g=Fa.parseLink(m);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,R.Z)(function*(){lc(ko(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(v,m){return Rt.apply(this,arguments)}(g._delegate,Zn);return w?Oi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(v,m){vn(v)._logFramework(m)}(this._delegate,g)}onAuthStateChanged(g,w,M){const{next:F,error:re,complete:ve}=Vh(g,w,M);return this._delegate.onAuthStateChanged(F,re,ve)}onIdTokenChanged(g,w,M){const{next:F,error:re,complete:ve}=Vh(g,w,M);return this._delegate.onIdTokenChanged(F,re,ve)}sendSignInLinkToEmail(g,w){return function(v,m,g){return Hl.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(v,m,g){return jl.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,R.Z)(function*(){let M;switch(function(v,m){Oh(Object.values(As).includes(m),v,"invalid-persistence-type"),(0,L.b$)()?Oh(m!==As.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Oh(m===As.NONE,v,"unsupported-persistence-type"):Yc()?Oh(m===As.NONE||m===As.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Oh(m===As.NONE||Nh(),v,"unsupported-persistence-type")}(w._delegate,g),g){case As.SESSION:M=ns;break;case As.LOCAL:M=(yield Le(Ks)._isAvailable())?Ks:Wu;break;case As.NONE:M=gt;break;default:return Oe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Oi(this._delegate,function(v){return La.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Oi(this._delegate,Gr(this._delegate,g))}signInWithCustomToken(g){return Oi(this._delegate,function(v,m){return Xo.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Oi(this._delegate,function(v,m,g){return Gr((0,L.m9)(v),bo.credential(m,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Oi(this._delegate,function(v,m,g){return ea.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Fh(this._delegate,function(v,m,g){return _h.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,R.Z)(function*(){return lc(ko(),w._delegate,"operation-not-supported-in-this-environment"),Oi(w._delegate,function(v,m,g){return zc.apply(this,arguments)}(w._delegate,g,Zn))})()}signInWithRedirect(g){var w=this;return(0,R.Z)(function*(){return lc(ko(),w._delegate,"operation-not-supported-in-this-environment"),yield Qc(w._delegate),function(v,m,g){return function(v,m,g){return et.apply(this,arguments)}(v,m,g)}(w._delegate,g,Zn)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(v,m){return _n.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=As,v})();function Vh(v,m,g){let w=v;"function"!=typeof v&&({next:w,error:m,complete:g}=v);const M=w;return{next:re=>M(re&&Ro.getOrCreate(re)),error:m,complete:g}}function Uh(v,m){const g=function(v,m){const g=qr();if(!g)return[];const w=rn(Mo,v,m);switch(g.getItem(w)){case As.NONE:return[gt];case As.LOCAL:return[Ks,ns];case As.SESSION:return[ns];default:return[]}}(v,m);if("undefined"!=typeof self&&!g.includes(Ks)&&g.push(Ks),"undefined"!=typeof window)for(const w of[Wu,ns])g.includes(w)||g.push(w);return g.includes(gt)||g.push(gt),g}class gp{constructor(){this.providerId="phone",this._delegate=new ki(fp(ee.Z.auth()))}static credential(m,g){return ki.credential(m,g)}verifyPhoneNumber(m,g){return this._delegate.verifyPhoneNumber(m,g)}unwrap(){return this._delegate}}gp.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,gp.PROVIDER_ID=ki.PROVIDER_ID;const p_=Te;class Bh{constructor(m,g,w=ee.Z.app()){var M;p_(null===(M=w.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Yu(m,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Ie.wA("auth-compat",m=>{const g=m.getProvider("app-compat").getImmediate(),w=m.getProvider("auth");return new sl(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bo,FacebookAuthProvider:Ru,GithubAuthProvider:Nu,GoogleAuthProvider:gs,OAuthProvider:Fl,SAMLAuthProvider:_s,PhoneAuthProvider:gp,PhoneMultiFactorGenerator:_v,RecaptchaVerifier:Bh,TwitterAuthProvider:ys,Auth:sl,AuthCredential:$s,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.9")}(ee.Z)},6676:function(p,he){!function(H){"use strict";function R(we){return Array.prototype.slice.call(we)}function ee(we){return new Promise(function(ue,be){we.onsuccess=function(){ue(we.result)},we.onerror=function(){be(we.error)}})}function L(we,ue,be){var De,Oe=new Promise(function(qe,Nt){ee(De=we[ue].apply(we,be)).then(qe,Nt)});return Oe.request=De,Oe}function Y(we,ue,be){var De=L(we,ue,be);return De.then(function(Oe){if(Oe)return new j(Oe,De.request)})}function J(we,ue,be){be.forEach(function(De){Object.defineProperty(we.prototype,De,{get:function(){return this[ue][De]},set:function(Oe){this[ue][De]=Oe}})})}function te(we,ue,be,De){De.forEach(function(Oe){Oe in be.prototype&&(we.prototype[Oe]=function(){return L(this[ue],Oe,arguments)})})}function Ie(we,ue,be,De){De.forEach(function(Oe){Oe in be.prototype&&(we.prototype[Oe]=function(){return this[ue][Oe].apply(this[ue],arguments)})})}function Q(we,ue,be,De){De.forEach(function(Oe){Oe in be.prototype&&(we.prototype[Oe]=function(){return Y(this[ue],Oe,arguments)})})}function ie(we){this._index=we}function j(we,ue){this._cursor=we,this._request=ue}function $(we){this._store=we}function z(we){this._tx=we,this.complete=new Promise(function(ue,be){we.oncomplete=function(){ue()},we.onerror=function(){be(we.error)},we.onabort=function(){be(we.error)}})}function ce(we,ue,be){this._db=we,this.oldVersion=ue,this.transaction=new z(be)}function ge(we){this._db=we}J(ie,"_index",["name","keyPath","multiEntry","unique"]),te(ie,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),Q(ie,"_index",IDBIndex,["openCursor","openKeyCursor"]),J(j,"_cursor",["direction","key","primaryKey","value"]),te(j,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(we){we in IDBCursor.prototype&&(j.prototype[we]=function(){var ue=this,be=arguments;return Promise.resolve().then(function(){return ue._cursor[we].apply(ue._cursor,be),ee(ue._request).then(function(De){if(De)return new j(De,ue._request)})})})}),$.prototype.createIndex=function(){return new ie(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new ie(this._store.index.apply(this._store,arguments))},J($,"_store",["name","keyPath","indexNames","autoIncrement"]),te($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),Q($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Ie($,"_store",IDBObjectStore,["deleteIndex"]),z.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},J(z,"_tx",["objectStoreNames","mode"]),Ie(z,"_tx",IDBTransaction,["abort"]),ce.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},J(ce,"_db",["name","version","objectStoreNames"]),Ie(ce,"_db",IDBDatabase,["deleteObjectStore","close"]),ge.prototype.transaction=function(){return new z(this._db.transaction.apply(this._db,arguments))},J(ge,"_db",["name","version","objectStoreNames"]),Ie(ge,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(we){[$,ie].forEach(function(ue){we in ue.prototype&&(ue.prototype[we.replace("open","iterate")]=function(){var be=R(arguments),De=be[be.length-1],Oe=this._store||this._index,qe=Oe[we].apply(Oe,be.slice(0,-1));qe.onsuccess=function(){De(qe.result)}})})}),[ie,$].forEach(function(we){we.prototype.getAll||(we.prototype.getAll=function(ue,be){var De=this,Oe=[];return new Promise(function(qe){De.iterateCursor(ue,function(Nt){Nt?(Oe.push(Nt.value),void 0===be||Oe.length!=be?Nt.continue():qe(Oe)):qe(Oe)})})})}),H.openDb=function(we,ue,be){var De=L(indexedDB,"open",[we,ue]),Oe=De.request;return Oe&&(Oe.onupgradeneeded=function(qe){be&&be(new ce(Oe.result,qe.oldVersion,Oe.transaction))}),De.then(function(qe){return new ge(qe)})},H.deleteDb=function(we){return L(indexedDB,"deleteDatabase",[we])},Object.defineProperty(H,"__esModule",{value:!0})}(he)},7574:(p,he,H)=>{"use strict";H.d(he,{y:()=>$});var R=H(7393),L=H(9181),Y=H(6490),te=H(6554),Ie=H(4487);var j=H(2494);let $=(()=>{class ce{constructor(Ne){this._isScalar=!1,Ne&&(this._subscribe=Ne)}lift(Ne){const Re=new ce;return Re.source=this,Re.operator=Ne,Re}subscribe(Ne,Re,we){const{operator:ue}=this,be=function(ce,ge,Ne){if(ce){if(ce instanceof R.L)return ce;if(ce[L.b])return ce[L.b]()}return ce||ge||Ne?new R.L(ce,ge,Ne):new R.L(Y.c)}(Ne,Re,we);if(be.add(ue?ue.call(be,this.source):this.source||j.v.useDeprecatedSynchronousErrorHandling&&!be.syncErrorThrowable?this._subscribe(be):this._trySubscribe(be)),j.v.useDeprecatedSynchronousErrorHandling&&be.syncErrorThrowable&&(be.syncErrorThrowable=!1,be.syncErrorThrown))throw be.syncErrorValue;return be}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Re){j.v.useDeprecatedSynchronousErrorHandling&&(Ne.syncErrorThrown=!0,Ne.syncErrorValue=Re),function(ce){for(;ce;){const{closed:ge,destination:Ne,isStopped:Re}=ce;if(ge||Re)return!1;ce=Ne&&Ne instanceof R.L?Ne:null}return!0}(Ne)?Ne.error(Re):console.warn(Re)}}forEach(Ne,Re){return new(Re=z(Re))((we,ue)=>{let be;be=this.subscribe(De=>{try{Ne(De)}catch(Oe){ue(Oe),be&&be.unsubscribe()}},ue,we)})}_subscribe(Ne){const{source:Re}=this;return Re&&Re.subscribe(Ne)}[te.L](){return this}pipe(...Ne){return 0===Ne.length?this:function(ce){return 0===ce.length?Ie.y:1===ce.length?ce[0]:function(Ne){return ce.reduce((Re,we)=>we(Re),Ne)}}(Ne)(this)}toPromise(Ne){return new(Ne=z(Ne))((Re,we)=>{let ue;this.subscribe(be=>ue=be,be=>we(be),()=>Re(ue))})}}return ce.create=ge=>new ce(ge),ce})();function z(ce){if(ce||(ce=j.v.Promise||Promise),!ce)throw new Error("no Promise impl found");return ce}},6490:(p,he,H)=>{"use strict";H.d(he,{c:()=>L});var R=H(2494),ee=H(4449);const L={closed:!0,next(Y){},error(Y){if(R.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,ee.z)(Y)},complete(){}}},9765:(p,he,H)=>{"use strict";H.d(he,{Yc:()=>Ie,xQ:()=>Q});var R=H(7574),ee=H(7393),L=H(5319),Y=H(7971),J=H(8858),te=H(9181);class Ie extends ee.L{constructor($){super($),this.destination=$}}let Q=(()=>{class j extends R.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[te.b](){return new Ie(this)}lift(z){const ce=new ie(this,this);return ce.operator=z,ce}next(z){if(this.closed)throw new Y.N;if(!this.isStopped){const{observers:ce}=this,ge=ce.length,Ne=ce.slice();for(let Re=0;Re<ge;Re++)Ne[Re].next(z)}}error(z){if(this.closed)throw new Y.N;this.hasError=!0,this.thrownError=z,this.isStopped=!0;const{observers:ce}=this,ge=ce.length,Ne=ce.slice();for(let Re=0;Re<ge;Re++)Ne[Re].error(z);this.observers.length=0}complete(){if(this.closed)throw new Y.N;this.isStopped=!0;const{observers:z}=this,ce=z.length,ge=z.slice();for(let Ne=0;Ne<ce;Ne++)ge[Ne].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(z){if(this.closed)throw new Y.N;return super._trySubscribe(z)}_subscribe(z){if(this.closed)throw new Y.N;return this.hasError?(z.error(this.thrownError),L.w.EMPTY):this.isStopped?(z.complete(),L.w.EMPTY):(this.observers.push(z),new J.W(this,z))}asObservable(){const z=new R.y;return z.source=this,z}}return j.create=($,z)=>new ie($,z),j})();class ie extends Q{constructor($,z){super(),this.destination=$,this.source=z}next($){const{destination:z}=this;z&&z.next&&z.next($)}error($){const{destination:z}=this;z&&z.error&&this.destination.error($)}complete(){const{destination:$}=this;$&&$.complete&&this.destination.complete()}_subscribe($){const{source:z}=this;return z?this.source.subscribe($):L.w.EMPTY}}},8858:(p,he,H)=>{"use strict";H.d(he,{W:()=>ee});var R=H(5319);class ee extends R.w{constructor(Y,J){super(),this.subject=Y,this.subscriber=J,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Y=this.subject,J=Y.observers;if(this.subject=null,!J||0===J.length||Y.isStopped||Y.closed)return;const te=J.indexOf(this.subscriber);-1!==te&&J.splice(te,1)}}},7393:(p,he,H)=>{"use strict";H.d(he,{L:()=>Ie});var R=H(9105),ee=H(6490),L=H(5319),Y=H(9181),J=H(2494),te=H(4449);class Ie extends L.w{constructor(j,$,z){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ee.c;break;case 1:if(!j){this.destination=ee.c;break}if("object"==typeof j){j instanceof Ie?(this.syncErrorThrowable=j.syncErrorThrowable,this.destination=j,j.add(this)):(this.syncErrorThrowable=!0,this.destination=new Q(this,j));break}default:this.syncErrorThrowable=!0,this.destination=new Q(this,j,$,z)}}[Y.b](){return this}static create(j,$,z){const ce=new Ie(j,$,z);return ce.syncErrorThrowable=!1,ce}next(j){this.isStopped||this._next(j)}error(j){this.isStopped||(this.isStopped=!0,this._error(j))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(j){this.destination.next(j)}_error(j){this.destination.error(j),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:j}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=j,this}}class Q extends Ie{constructor(j,$,z,ce){super(),this._parentSubscriber=j;let ge,Ne=this;(0,R.m)($)?ge=$:$&&(ge=$.next,z=$.error,ce=$.complete,$!==ee.c&&(Ne=Object.create($),(0,R.m)(Ne.unsubscribe)&&this.add(Ne.unsubscribe.bind(Ne)),Ne.unsubscribe=this.unsubscribe.bind(this))),this._context=Ne,this._next=ge,this._error=z,this._complete=ce}next(j){if(!this.isStopped&&this._next){const{_parentSubscriber:$}=this;J.v.useDeprecatedSynchronousErrorHandling&&$.syncErrorThrowable?this.__tryOrSetError($,this._next,j)&&this.unsubscribe():this.__tryOrUnsub(this._next,j)}}error(j){if(!this.isStopped){const{_parentSubscriber:$}=this,{useDeprecatedSynchronousErrorHandling:z}=J.v;if(this._error)z&&$.syncErrorThrowable?(this.__tryOrSetError($,this._error,j),this.unsubscribe()):(this.__tryOrUnsub(this._error,j),this.unsubscribe());else if($.syncErrorThrowable)z?($.syncErrorValue=j,$.syncErrorThrown=!0):(0,te.z)(j),this.unsubscribe();else{if(this.unsubscribe(),z)throw j;(0,te.z)(j)}}}complete(){if(!this.isStopped){const{_parentSubscriber:j}=this;if(this._complete){const $=()=>this._complete.call(this._context);J.v.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable?(this.__tryOrSetError(j,$),this.unsubscribe()):(this.__tryOrUnsub($),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(j,$){try{j.call(this._context,$)}catch(z){if(this.unsubscribe(),J.v.useDeprecatedSynchronousErrorHandling)throw z;(0,te.z)(z)}}__tryOrSetError(j,$,z){if(!J.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{$.call(this._context,z)}catch(ce){return J.v.useDeprecatedSynchronousErrorHandling?(j.syncErrorValue=ce,j.syncErrorThrown=!0,!0):((0,te.z)(ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:j}=this;this._context=null,this._parentSubscriber=null,j.unsubscribe()}}},5319:(p,he,H)=>{"use strict";H.d(he,{w:()=>te});var R=H(9796),ee=H(1555),L=H(9105);const J=(()=>{function Q(ie){return Error.call(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((j,$)=>`${$+1}) ${j.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie,this}return Q.prototype=Object.create(Error.prototype),Q})();class te{constructor(ie){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ie&&(this._ctorUnsubscribe=!0,this._unsubscribe=ie)}unsubscribe(){let ie;if(this.closed)return;let{_parentOrParents:j,_ctorUnsubscribe:$,_unsubscribe:z,_subscriptions:ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,j instanceof te)j.remove(this);else if(null!==j)for(let ge=0;ge<j.length;++ge)j[ge].remove(this);if((0,L.m)(z)){$&&(this._unsubscribe=void 0);try{z.call(this)}catch(ge){ie=ge instanceof J?Ie(ge.errors):[ge]}}if((0,R.k)(ce)){let ge=-1,Ne=ce.length;for(;++ge<Ne;){const Re=ce[ge];if((0,ee.K)(Re))try{Re.unsubscribe()}catch(we){ie=ie||[],we instanceof J?ie=ie.concat(Ie(we.errors)):ie.push(we)}}}if(ie)throw new J(ie)}add(ie){let j=ie;if(!ie)return te.EMPTY;switch(typeof ie){case"function":j=new te(ie);case"object":if(j===this||j.closed||"function"!=typeof j.unsubscribe)return j;if(this.closed)return j.unsubscribe(),j;if(!(j instanceof te)){const ce=j;j=new te,j._subscriptions=[ce]}break;default:throw new Error("unrecognized teardown "+ie+" added to Subscription.")}let{_parentOrParents:$}=j;if(null===$)j._parentOrParents=this;else if($ instanceof te){if($===this)return j;j._parentOrParents=[$,this]}else{if(-1!==$.indexOf(this))return j;$.push(this)}const z=this._subscriptions;return null===z?this._subscriptions=[j]:z.push(j),j}remove(ie){const j=this._subscriptions;if(j){const $=j.indexOf(ie);-1!==$&&j.splice($,1)}}}var Q;function Ie(Q){return Q.reduce((ie,j)=>ie.concat(j instanceof J?j.errors:j),[])}te.EMPTY=((Q=new te).closed=!0,Q)},2494:(p,he,H)=>{"use strict";H.d(he,{v:()=>ee});let R=!1;const ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const Y=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Y.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=L},get useDeprecatedSynchronousErrorHandling(){return R}}},5345:(p,he,H)=>{"use strict";H.d(he,{IY:()=>Y,Ds:()=>te,ft:()=>Q});var R=H(7393),ee=H(7574),L=H(7444);class Y extends R.L{constructor(j){super(),this.parent=j}_next(j){this.parent.notifyNext(j)}_error(j){this.parent.notifyError(j),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class te extends R.L{notifyNext(j){this.destination.next(j)}notifyError(j){this.destination.error(j)}notifyComplete(){this.destination.complete()}}function Q(ie,j){if(j.closed)return;if(ie instanceof ee.y)return ie.subscribe(j);let $;try{$=(0,L.s)(ie)(j)}catch(z){j.error(z)}return $}},2441:(p,he,H)=>{"use strict";H.d(he,{c:()=>J,N:()=>te});var R=H(9765),ee=H(7574),L=H(5319),Y=H(1307);class J extends ee.y{constructor($,z){super(),this.source=$,this.subjectFactory=z,this._refCount=0,this._isComplete=!1}_subscribe($){return this.getSubject().subscribe($)}getSubject(){const $=this._subject;return(!$||$.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let $=this._connection;return $||(this._isComplete=!1,$=this._connection=new L.w,$.add(this.source.subscribe(new Ie(this.getSubject(),this))),$.closed&&(this._connection=null,$=L.w.EMPTY)),$}refCount(){return(0,Y.x)()(this)}}const te=(()=>{const j=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:j._subscribe},_isComplete:{value:j._isComplete,writable:!0},getSubject:{value:j.getSubject},connect:{value:j.connect},refCount:{value:j.refCount}}})();class Ie extends R.Yc{constructor($,z){super($),this.connectable=z}_error($){this._unsubscribe(),super._error($)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const $=this.connectable;if($){this.connectable=null;const z=$._connection;$._refCount=0,$._subject=null,$._connection=null,z&&z.unsubscribe()}}}},9193:(p,he,H)=>{"use strict";H.d(he,{E:()=>ee,c:()=>L});var R=H(7574);const ee=new R.y(J=>J.complete());function L(J){return J?function(J){return new R.y(te=>J.schedule(()=>te.complete()))}(J):ee}},4402:(p,he,H)=>{"use strict";H.d(he,{D:()=>Ne});var R=H(7574),ee=H(7444),L=H(5319),Y=H(6554),Ie=H(4087),Q=H(377),$=H(4072),z=H(9489);function Ne(Re,we){return we?function(Re,we){if(null!=Re){if(function(Re){return Re&&"function"==typeof Re[Y.L]}(Re))return function(Re,we){return new R.y(ue=>{const be=new L.w;return be.add(we.schedule(()=>{const De=Re[Y.L]();be.add(De.subscribe({next(Oe){be.add(we.schedule(()=>ue.next(Oe)))},error(Oe){be.add(we.schedule(()=>ue.error(Oe)))},complete(){be.add(we.schedule(()=>ue.complete()))}}))})),be})}(Re,we);if((0,$.t)(Re))return function(Re,we){return new R.y(ue=>{const be=new L.w;return be.add(we.schedule(()=>Re.then(De=>{be.add(we.schedule(()=>{ue.next(De),be.add(we.schedule(()=>ue.complete()))}))},De=>{be.add(we.schedule(()=>ue.error(De)))}))),be})}(Re,we);if((0,z.z)(Re))return(0,Ie.r)(Re,we);if(function(Re){return Re&&"function"==typeof Re[Q.hZ]}(Re)||"string"==typeof Re)return function(Re,we){if(!Re)throw new Error("Iterable cannot be null");return new R.y(ue=>{const be=new L.w;let De;return be.add(()=>{De&&"function"==typeof De.return&&De.return()}),be.add(we.schedule(()=>{De=Re[Q.hZ](),be.add(we.schedule(function(){if(ue.closed)return;let Oe,qe;try{const Nt=De.next();Oe=Nt.value,qe=Nt.done}catch(Nt){return void ue.error(Nt)}qe?ue.complete():(ue.next(Oe),this.schedule())}))})),be})}(Re,we)}throw new TypeError((null!==Re&&typeof Re||Re)+" is not observable")}(Re,we):Re instanceof R.y?Re:new R.y((0,ee.s)(Re))}},6693:(p,he,H)=>{"use strict";H.d(he,{n:()=>Y});var R=H(7574),ee=H(5015),L=H(4087);function Y(J,te){return te?(0,L.r)(J,te):new R.y((0,ee.V)(J))}},6682:(p,he,H)=>{"use strict";H.d(he,{T:()=>J});var R=H(7574),ee=H(4869),L=H(3282),Y=H(6693);function J(...te){let Ie=Number.POSITIVE_INFINITY,Q=null,ie=te[te.length-1];return(0,ee.K)(ie)?(Q=te.pop(),te.length>1&&"number"==typeof te[te.length-1]&&(Ie=te.pop())):"number"==typeof ie&&(Ie=te.pop()),null===Q&&1===te.length&&te[0]instanceof R.y?te[0]:(0,L.J)(Ie)((0,Y.n)(te,Q))}},5917:(p,he,H)=>{"use strict";H.d(he,{of:()=>Y});var R=H(4869),ee=H(6693),L=H(4087);function Y(...J){let te=J[J.length-1];return(0,R.K)(te)?(J.pop(),(0,L.r)(J,te)):(0,ee.n)(J)}},8002:(p,he,H)=>{"use strict";H.d(he,{U:()=>ee});var R=H(7393);function ee(J,te){return function(Q){if("function"!=typeof J)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Q.lift(new L(J,te))}}class L{constructor(te,Ie){this.project=te,this.thisArg=Ie}call(te,Ie){return Ie.subscribe(new Y(te,this.project,this.thisArg))}}class Y extends R.L{constructor(te,Ie,Q){super(te),this.project=Ie,this.count=0,this.thisArg=Q||this}_next(te){let Ie;try{Ie=this.project.call(this.thisArg,te,this.count++)}catch(Q){return void this.destination.error(Q)}this.destination.next(Ie)}}},3282:(p,he,H)=>{"use strict";H.d(he,{J:()=>L});var R=H(9773),ee=H(4487);function L(Y=Number.POSITIVE_INFINITY){return(0,R.zg)(ee.y,Y)}},9773:(p,he,H)=>{"use strict";H.d(he,{zg:()=>Y});var R=H(8002),ee=H(4402),L=H(5345);function Y(Q,ie,j=Number.POSITIVE_INFINITY){return"function"==typeof ie?$=>$.pipe(Y((z,ce)=>(0,ee.D)(Q(z,ce)).pipe((0,R.U)((ge,Ne)=>ie(z,ge,ce,Ne))),j)):("number"==typeof ie&&(j=ie),$=>$.lift(new J(Q,j)))}class J{constructor(ie,j=Number.POSITIVE_INFINITY){this.project=ie,this.concurrent=j}call(ie,j){return j.subscribe(new te(ie,this.project,this.concurrent))}}class te extends L.Ds{constructor(ie,j,$=Number.POSITIVE_INFINITY){super(ie),this.project=j,this.concurrent=$,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ie){this.active<this.concurrent?this._tryNext(ie):this.buffer.push(ie)}_tryNext(ie){let j;const $=this.index++;try{j=this.project(ie,$)}catch(z){return void this.destination.error(z)}this.active++,this._innerSub(j)}_innerSub(ie){const j=new L.IY(this),$=this.destination;$.add(j);const z=(0,L.ft)(ie,j);z!==j&&$.add(z)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ie){this.destination.next(ie)}notifyComplete(){const ie=this.buffer;this.active--,ie.length>0?this._next(ie.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(p,he,H)=>{"use strict";H.d(he,{ht:()=>$,QV:()=>ie});var R=H(7393),ee=H(9193),L=H(5917),Y=H(7574);class Q{constructor(ge,Ne,Re){this.kind=ge,this.value=Ne,this.error=Re,this.hasValue="N"===ge}observe(ge){switch(this.kind){case"N":return ge.next&&ge.next(this.value);case"E":return ge.error&&ge.error(this.error);case"C":return ge.complete&&ge.complete()}}do(ge,Ne,Re){switch(this.kind){case"N":return ge&&ge(this.value);case"E":return Ne&&Ne(this.error);case"C":return Re&&Re()}}accept(ge,Ne,Re){return ge&&"function"==typeof ge.next?this.observe(ge):this.do(ge,Ne,Re)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return ce=this.error,new Y.y(Ne=>Ne.error(ce));case"C":return(0,ee.c)()}var ce;throw new Error("unexpected notification kind value")}static createNext(ge){return void 0!==ge?new Q("N",ge):Q.undefinedValueNotification}static createError(ge){return new Q("E",void 0,ge)}static createComplete(){return Q.completeNotification}}function ie(ce,ge=0){return function(Re){return Re.lift(new j(ce,ge))}}Q.completeNotification=new Q("C"),Q.undefinedValueNotification=new Q("N",void 0);class j{constructor(ge,Ne=0){this.scheduler=ge,this.delay=Ne}call(ge,Ne){return Ne.subscribe(new $(ge,this.scheduler,this.delay))}}class $ extends R.L{constructor(ge,Ne,Re=0){super(ge),this.scheduler=Ne,this.delay=Re}static dispatch(ge){const{notification:Ne,destination:Re}=ge;Ne.observe(Re),this.unsubscribe()}scheduleMessage(ge){this.destination.add(this.scheduler.schedule($.dispatch,this.delay,new z(ge,this.destination)))}_next(ge){this.scheduleMessage(Q.createNext(ge))}_error(ge){this.scheduleMessage(Q.createError(ge)),this.unsubscribe()}_complete(){this.scheduleMessage(Q.createComplete()),this.unsubscribe()}}class z{constructor(ge,Ne){this.notification=ge,this.destination=Ne}}},1307:(p,he,H)=>{"use strict";H.d(he,{x:()=>ee});var R=H(7393);function ee(){return function(te){return te.lift(new L(te))}}class L{constructor(te){this.connectable=te}call(te,Ie){const{connectable:Q}=this;Q._refCount++;const ie=new Y(te,Q),j=Ie.subscribe(ie);return ie.closed||(ie.connection=Q.connect()),j}}class Y extends R.L{constructor(te,Ie){super(te),this.connectable=Ie}_unsubscribe(){const{connectable:te}=this;if(!te)return void(this.connection=null);this.connectable=null;const Ie=te._refCount;if(Ie<=0)return void(this.connection=null);if(te._refCount=Ie-1,Ie>1)return void(this.connection=null);const{connection:Q}=this,ie=te._connection;this.connection=null,ie&&(!Q||ie===Q)&&ie.unsubscribe()}}},8819:(p,he,H)=>{"use strict";H.d(he,{B:()=>Ie});var R=H(2441);var Y=H(1307),J=H(9765);function te(){return new J.xQ}function Ie(){return Q=>(0,Y.x)()(function(Q,ie){return function($){let z;z="function"==typeof Q?Q:function(){return Q};const ce=Object.create($,R.N);return ce.source=$,ce.subjectFactory=z,ce}}(te)(Q))}},3101:(p,he,H)=>{"use strict";H.d(he,{R:()=>we});var R=H(7574);let ee=1;const L=Promise.resolve(),Y={};function J(be){return be in Y&&(delete Y[be],!0)}const te={setImmediate(be){const De=ee++;return Y[De]=!0,L.then(()=>J(De)&&be()),De},clearImmediate(be){J(be)}};var Q=H(6465),j=H(6102);const ce=new class extends j.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:Oe}=this;let qe,Nt=-1,ft=Oe.length;De=De||Oe.shift();do{if(qe=De.execute(De.state,De.delay))break}while(++Nt<ft&&(De=Oe.shift()));if(this.active=!1,qe){for(;++Nt<ft&&(De=Oe.shift());)De.unsubscribe();throw qe}}}(class extends Q.o{constructor(De,Oe){super(De,Oe),this.scheduler=De,this.work=Oe}requestAsyncId(De,Oe,qe=0){return null!==qe&&qe>0?super.requestAsyncId(De,Oe,qe):(De.actions.push(this),De.scheduled||(De.scheduled=te.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,Oe,qe=0){if(null!==qe&&qe>0||null===qe&&this.delay>0)return super.recycleAsyncId(De,Oe,qe);0===De.actions.length&&(te.clearImmediate(Oe),De.scheduled=void 0)}});var ge=H(9796);class Re extends R.y{constructor(De,Oe=0,qe=ce){var be;super(),this.source=De,this.delayTime=Oe,this.scheduler=qe,(!(!(0,ge.k)(be=Oe)&&be-parseFloat(be)+1>=0)||Oe<0)&&(this.delayTime=0),(!qe||"function"!=typeof qe.schedule)&&(this.scheduler=ce)}static create(De,Oe=0,qe=ce){return new Re(De,Oe,qe)}static dispatch(De){const{source:Oe,subscriber:qe}=De;return this.add(Oe.subscribe(qe))}_subscribe(De){return this.scheduler.schedule(Re.dispatch,this.delayTime,{source:this.source,subscriber:De})}}function we(be,De=0){return function(qe){return qe.lift(new ue(be,De))}}class ue{constructor(De,Oe){this.scheduler=De,this.delay=Oe}call(De,Oe){return new Re(Oe,this.delay,this.scheduler).subscribe(De)}}},3342:(p,he,H)=>{"use strict";H.d(he,{b:()=>Y});var R=H(7393);function ee(){}var L=H(9105);function Y(Ie,Q,ie){return function($){return $.lift(new J(Ie,Q,ie))}}class J{constructor(Q,ie,j){this.nextOrObserver=Q,this.error=ie,this.complete=j}call(Q,ie){return ie.subscribe(new te(Q,this.nextOrObserver,this.error,this.complete))}}class te extends R.L{constructor(Q,ie,j,$){super(Q),this._tapNext=ee,this._tapError=ee,this._tapComplete=ee,this._tapError=j||ee,this._tapComplete=$||ee,(0,L.m)(ie)?(this._context=this,this._tapNext=ie):ie&&(this._context=ie,this._tapNext=ie.next||ee,this._tapError=ie.error||ee,this._tapComplete=ie.complete||ee)}_next(Q){try{this._tapNext.call(this._context,Q)}catch(ie){return void this.destination.error(ie)}this.destination.next(Q)}_error(Q){try{this._tapError.call(this._context,Q)}catch(ie){return void this.destination.error(ie)}this.destination.error(Q)}_complete(){try{this._tapComplete.call(this._context)}catch(Q){return void this.destination.error(Q)}return this.destination.complete()}}},4087:(p,he,H)=>{"use strict";H.d(he,{r:()=>L});var R=H(7574),ee=H(5319);function L(Y,J){return new R.y(te=>{const Ie=new ee.w;let Q=0;return Ie.add(J.schedule(function(){Q!==Y.length?(te.next(Y[Q++]),te.closed||Ie.add(this.schedule())):te.complete()})),Ie})}},6465:(p,he,H)=>{"use strict";H.d(he,{o:()=>L});var R=H(5319);class ee extends R.w{constructor(J,te){super()}schedule(J,te=0){return this}}class L extends ee{constructor(J,te){super(J,te),this.scheduler=J,this.work=te,this.pending=!1}schedule(J,te=0){if(this.closed)return this;this.state=J;const Ie=this.id,Q=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Q,Ie,te)),this.pending=!0,this.delay=te,this.id=this.id||this.requestAsyncId(Q,this.id,te),this}requestAsyncId(J,te,Ie=0){return setInterval(J.flush.bind(J,this),Ie)}recycleAsyncId(J,te,Ie=0){if(null!==Ie&&this.delay===Ie&&!1===this.pending)return te;clearInterval(te)}execute(J,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ie=this._execute(J,te);if(Ie)return Ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(J,te){let Q,Ie=!1;try{this.work(J)}catch(ie){Ie=!0,Q=!!ie&&ie||new Error(ie)}if(Ie)return this.unsubscribe(),Q}_unsubscribe(){const J=this.id,te=this.scheduler,Ie=te.actions,Q=Ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Q&&Ie.splice(Q,1),null!=J&&(this.id=this.recycleAsyncId(te,J,null)),this.delay=null}}},6102:(p,he,H)=>{"use strict";H.d(he,{v:()=>ee});let R=(()=>{class L{constructor(J,te=L.now){this.SchedulerAction=J,this.now=te}schedule(J,te=0,Ie){return new this.SchedulerAction(this,J).schedule(Ie,te)}}return L.now=()=>Date.now(),L})();class ee extends R{constructor(Y,J=R.now){super(Y,()=>ee.delegate&&ee.delegate!==this?ee.delegate.now():J()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Y,J=0,te){return ee.delegate&&ee.delegate!==this?ee.delegate.schedule(Y,J,te):super.schedule(Y,J,te)}flush(Y){const{actions:J}=this;if(this.active)return void J.push(Y);let te;this.active=!0;do{if(te=Y.execute(Y.state,Y.delay))break}while(Y=J.shift());if(this.active=!1,te){for(;Y=J.shift();)Y.unsubscribe();throw te}}}},3637:(p,he,H)=>{"use strict";H.d(he,{z:()=>L,P:()=>Y});var R=H(6465);const L=new(H(6102).v)(R.o),Y=L},7771:(p,he,H)=>{"use strict";H.d(he,{c:()=>te,N:()=>J});var R=H(6465),L=H(6102);const J=new class extends L.v{}(class extends R.o{constructor(Q,ie){super(Q,ie),this.scheduler=Q,this.work=ie}schedule(Q,ie=0){return ie>0?super.schedule(Q,ie):(this.delay=ie,this.state=Q,this.scheduler.flush(this),this)}execute(Q,ie){return ie>0||this.closed?super.execute(Q,ie):this._execute(Q,ie)}requestAsyncId(Q,ie,j=0){return null!==j&&j>0||null===j&&this.delay>0?super.requestAsyncId(Q,ie,j):Q.flush(this)}}),te=J},377:(p,he,H)=>{"use strict";H.d(he,{hZ:()=>ee});const ee="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(p,he,H)=>{"use strict";H.d(he,{L:()=>R});const R="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(p,he,H)=>{"use strict";H.d(he,{b:()=>R});const R="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(p,he,H)=>{"use strict";H.d(he,{N:()=>ee});const ee=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(p,he,H)=>{"use strict";function R(ee){setTimeout(()=>{throw ee},0)}H.d(he,{z:()=>R})},4487:(p,he,H)=>{"use strict";function R(ee){return ee}H.d(he,{y:()=>R})},9796:(p,he,H)=>{"use strict";H.d(he,{k:()=>R});const R=Array.isArray||(ee=>ee&&"number"==typeof ee.length)},9489:(p,he,H)=>{"use strict";H.d(he,{z:()=>R});const R=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},9105:(p,he,H)=>{"use strict";function R(ee){return"function"==typeof ee}H.d(he,{m:()=>R})},1555:(p,he,H)=>{"use strict";function R(ee){return null!==ee&&"object"==typeof ee}H.d(he,{K:()=>R})},4072:(p,he,H)=>{"use strict";function R(ee){return!!ee&&"function"!=typeof ee.subscribe&&"function"==typeof ee.then}H.d(he,{t:()=>R})},4869:(p,he,H)=>{"use strict";function R(ee){return ee&&"function"==typeof ee.schedule}H.d(he,{K:()=>R})},7444:(p,he,H)=>{"use strict";H.d(he,{s:()=>$});var R=H(5015),ee=H(4449),Y=H(377),te=H(6554),Q=H(9489),ie=H(4072),j=H(1555);const $=z=>{if(z&&"function"==typeof z[te.L])return(z=>ce=>{const ge=z[te.L]();if("function"!=typeof ge.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ge.subscribe(ce)})(z);if((0,Q.z)(z))return(0,R.V)(z);if((0,ie.t)(z))return(z=>ce=>(z.then(ge=>{ce.closed||(ce.next(ge),ce.complete())},ge=>ce.error(ge)).then(null,ee.z),ce))(z);if(z&&"function"==typeof z[Y.hZ])return(z=>ce=>{const ge=z[Y.hZ]();for(;;){let Ne;try{Ne=ge.next()}catch(Re){return ce.error(Re),ce}if(Ne.done){ce.complete();break}if(ce.next(Ne.value),ce.closed)break}return"function"==typeof ge.return&&ce.add(()=>{ge.return&&ge.return()}),ce})(z);{const ge=`You provided ${(0,j.K)(z)?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ge)}}},5015:(p,he,H)=>{"use strict";H.d(he,{V:()=>R});const R=ee=>L=>{for(let Y=0,J=ee.length;Y<J&&!L.closed;Y++)L.next(ee[Y]);L.complete()}},4762:(p,he,H)=>{"use strict";function Y(se,me){var fe={};for(var Le in se)Object.prototype.hasOwnProperty.call(se,Le)&&me.indexOf(Le)<0&&(fe[Le]=se[Le]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Ye=0;for(Le=Object.getOwnPropertySymbols(se);Ye<Le.length;Ye++)me.indexOf(Le[Ye])<0&&Object.prototype.propertyIsEnumerable.call(se,Le[Ye])&&(fe[Le[Ye]]=se[Le[Ye]])}return fe}function Q(se,me,fe,Le){return new(fe||(fe=Promise))(function($e,Ct){function nn(Kt){try{At(Le.next(Kt))}catch(bt){Ct(bt)}}function nr(Kt){try{At(Le.throw(Kt))}catch(bt){Ct(bt)}}function At(Kt){Kt.done?$e(Kt.value):function($e){return $e instanceof fe?$e:new fe(function(Ct){Ct($e)})}(Kt.value).then(nn,nr)}At((Le=Le.apply(se,me||[])).next())})}H.d(he,{_T:()=>Y,mG:()=>Q})},269:(p,he,H)=>{"use strict";H.d(he,{Z:()=>Y});var R=H(8774),L=H.n(R)()(function(J){return J[1]});L.push([p.id,'.mat-badge-content{font-weight:600;font-size:12px;font-family:Roboto, "Helvetica Neue", sans-serif}.mat-badge-small .mat-badge-content{font-size:9px}.mat-badge-large .mat-badge-content{font-size:24px}.mat-h1,.mat-headline,.mat-typography h1{font:400 24px/32px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h2,.mat-title,.mat-typography h2{font:500 20px/32px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h3,.mat-subheading-2,.mat-typography h3{font:400 16px/28px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h4,.mat-subheading-1,.mat-typography h4{font:400 15px/24px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal;margin:0 0 16px}.mat-h5,.mat-typography h5{font:400 calc(14px * 0.83)/20px Roboto, "Helvetica Neue", sans-serif;margin:0 0 12px}.mat-h6,.mat-typography h6{font:400 calc(14px * 0.67)/20px Roboto, "Helvetica Neue", sans-serif;margin:0 0 12px}.mat-body-strong,.mat-body-2{font:500 14px/24px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-body,.mat-body-1,.mat-typography{font:400 14px/20px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-body p,.mat-body-1 p,.mat-typography p{margin:0 0 12px}.mat-small,.mat-caption{font:400 12px/20px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-display-4,.mat-typography .mat-display-4{font:300 112px/112px Roboto, "Helvetica Neue", sans-serif;letter-spacing:-0.05em;margin:0 0 56px}.mat-display-3,.mat-typography .mat-display-3{font:400 56px/56px Roboto, "Helvetica Neue", sans-serif;letter-spacing:-0.02em;margin:0 0 64px}.mat-display-2,.mat-typography .mat-display-2{font:400 45px/48px Roboto, "Helvetica Neue", sans-serif;letter-spacing:-0.005em;margin:0 0 64px}.mat-display-1,.mat-typography .mat-display-1{font:400 34px/40px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal;margin:0 0 64px}.mat-bottom-sheet-container{font:400 14px/20px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-button,.mat-raised-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button,.mat-fab,.mat-mini-fab{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:14px;font-weight:500}.mat-button-toggle{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-card{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-card-title{font-size:24px;font-weight:500}.mat-card-header .mat-card-title{font-size:20px}.mat-card-subtitle,.mat-card-content{font-size:14px}.mat-checkbox{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-checkbox-layout .mat-checkbox-label{line-height:24px}.mat-chip{font-size:14px;font-weight:500}.mat-chip .mat-chip-trailing-icon.mat-icon,.mat-chip .mat-chip-remove.mat-icon{font-size:18px}.mat-table{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-header-cell{font-size:12px;font-weight:500}.mat-cell,.mat-footer-cell{font-size:14px}.mat-calendar{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-calendar-body{font-size:13px}.mat-calendar-body-label,.mat-calendar-period-button{font-size:14px;font-weight:500}.mat-calendar-table-header th{font-size:11px;font-weight:400}.mat-dialog-title{font:500 20px/32px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-expansion-panel-header{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content{font:400 14px/20px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-form-field{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-form-field-wrapper{padding-bottom:1.34375em}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{font-size:150%;line-height:1.125}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{height:1.5em;width:1.5em}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{height:1.125em;line-height:1.125}.mat-form-field-infix{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.34375em) scale(0.75);width:133.3333333333%}.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.34374em) scale(0.75);width:133.3333433333%}.mat-form-field-label-wrapper{top:-0.84375em;padding-top:.84375em}.mat-form-field-label{top:1.34375em}.mat-form-field-underline{bottom:1.34375em}.mat-form-field-subscript-wrapper{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:1.25em}.mat-form-field-appearance-legacy .mat-form-field-infix{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.28125em) scale(0.75) perspective(100px) translateZ(0.001px);-ms-transform:translateY(-1.28125em) scale(0.75);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.28125em) scale(0.75) perspective(100px) translateZ(0.00101px);-ms-transform:translateY(-1.28124em) scale(0.75);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.28125em) scale(0.75) perspective(100px) translateZ(0.00102px);-ms-transform:translateY(-1.28123em) scale(0.75);width:133.3333533333%}.mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em}.mat-form-field-appearance-legacy .mat-form-field-underline{bottom:1.25em}.mat-form-field-appearance-legacy .mat-form-field-subscript-wrapper{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.28122em) scale(0.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.28121em) scale(0.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.2812em) scale(0.75)}}.mat-form-field-appearance-fill .mat-form-field-infix{padding:.25em 0 .75em 0}.mat-form-field-appearance-fill .mat-form-field-label{top:1.09375em;margin-top:-0.5em}.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-appearance-fill.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-0.59375em) scale(0.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-0.59374em) scale(0.75);width:133.3333433333%}.mat-form-field-appearance-outline .mat-form-field-infix{padding:1em 0 1em 0}.mat-form-field-appearance-outline .mat-form-field-label{top:1.84375em;margin-top:-0.25em}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-appearance-outline.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.59375em) scale(0.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{transform:translateY(-1.59374em) scale(0.75);width:133.3333433333%}.mat-grid-tile-header,.mat-grid-tile-footer{font-size:14px}.mat-grid-tile-header .mat-line,.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2),.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:12px}input.mat-input-element{margin-top:-0.0625em}.mat-menu-item{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:14px;font-weight:400}.mat-paginator,.mat-paginator-page-size .mat-select-trigger{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:12px}.mat-radio-button{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-select{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-select-trigger{height:1.125em}.mat-slide-toggle-content{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-slider-thumb-label-text{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:12px;font-weight:500}.mat-stepper-vertical,.mat-stepper-horizontal{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-step-label{font-size:14px;font-weight:400}.mat-step-sub-label-error{font-weight:normal}.mat-step-label-error{font-size:14px}.mat-step-label-selected{font-size:14px;font-weight:500}.mat-tab-group{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-tab-label,.mat-tab-link{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:14px;font-weight:500}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font:500 20px/32px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal;margin:0}.mat-tooltip{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-list-option{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-list-base .mat-list-item{font-size:16px}.mat-list-base .mat-list-item .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base .mat-list-item .mat-line:nth-child(n+2){font-size:14px}.mat-list-base .mat-list-option{font-size:16px}.mat-list-base .mat-list-option .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base .mat-list-option .mat-line:nth-child(n+2){font-size:14px}.mat-list-base .mat-subheader{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense] .mat-list-item{font-size:12px}.mat-list-base[dense] .mat-list-item .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense] .mat-list-item .mat-line:nth-child(n+2){font-size:12px}.mat-list-base[dense] .mat-list-option{font-size:12px}.mat-list-base[dense] .mat-list-option .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense] .mat-list-option .mat-line:nth-child(n+2){font-size:12px}.mat-list-base[dense] .mat-subheader{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:12px;font-weight:500}.mat-option{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:16px}.mat-optgroup-label{font:500 14px/24px Roboto, "Helvetica Neue", sans-serif;letter-spacing:normal}.mat-simple-snackbar{font-family:Roboto, "Helvetica Neue", sans-serif;font-size:14px}.mat-simple-snackbar-action{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree{font-family:Roboto, "Helvetica Neue", sans-serif}.mat-tree-node,.mat-nested-tree-node{font-weight:400;font-size:14px}.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(0)}.cdk-high-contrast-active .mat-ripple-element{display:none}.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none}.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}.cdk-high-contrast-active .cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop,.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}.mat-focus-indicator{position:relative}.mat-mdc-focus-indicator{position:relative}.mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-option{color:#fff}.mat-option:hover:not(.mat-option-disabled),.mat-option:focus:not(.mat-option-disabled){background:rgba(255,255,255,.04)}.mat-option.mat-selected:not(.mat-option-multiple):not(.mat-option-disabled){background:rgba(255,255,255,.04)}.mat-option.mat-active{background:rgba(255,255,255,.04);color:#fff}.mat-option.mat-option-disabled{color:rgba(255,255,255,.5)}.mat-primary .mat-option.mat-selected:not(.mat-option-disabled){color:#c2185b}.mat-accent .mat-option.mat-selected:not(.mat-option-disabled){color:#b0bec5}.mat-warn .mat-option.mat-selected:not(.mat-option-disabled){color:#f44336}.mat-optgroup-label{color:rgba(255,255,255,.7)}.mat-optgroup-disabled .mat-optgroup-label{color:rgba(255,255,255,.5)}.mat-pseudo-checkbox{color:rgba(255,255,255,.7)}.mat-pseudo-checkbox::after{color:#303030}.mat-pseudo-checkbox-disabled{color:#686868}.mat-primary .mat-pseudo-checkbox-checked,.mat-primary .mat-pseudo-checkbox-indeterminate{background:#c2185b}.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-indeterminate,.mat-accent .mat-pseudo-checkbox-checked,.mat-accent .mat-pseudo-checkbox-indeterminate{background:#b0bec5}.mat-warn .mat-pseudo-checkbox-checked,.mat-warn .mat-pseudo-checkbox-indeterminate{background:#f44336}.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background:#686868}.mat-app-background{background-color:#303030;color:#fff}.mat-elevation-z0{box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z1{box-shadow:0px 2px 1px -1px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 1px 3px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z2{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z3{box-shadow:0px 3px 3px -2px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 1px 8px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z4{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z5{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z6{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-elevation-z7{box-shadow:0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12)}.mat-elevation-z8{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-elevation-z9{box-shadow:0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12)}.mat-elevation-z10{box-shadow:0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12)}.mat-elevation-z11{box-shadow:0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12)}.mat-elevation-z12{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-elevation-z13{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12)}.mat-elevation-z14{box-shadow:0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12)}.mat-elevation-z15{box-shadow:0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12)}.mat-elevation-z16{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)}.mat-elevation-z17{box-shadow:0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12)}.mat-elevation-z18{box-shadow:0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12)}.mat-elevation-z19{box-shadow:0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12)}.mat-elevation-z20{box-shadow:0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12)}.mat-elevation-z21{box-shadow:0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12)}.mat-elevation-z22{box-shadow:0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12)}.mat-elevation-z23{box-shadow:0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12)}.mat-elevation-z24{box-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)}.mat-theme-loaded-marker{display:none}.mat-autocomplete-panel{background:#424242;color:#fff}.mat-autocomplete-panel:not([class*=mat-elevation-z]){box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)}.mat-autocomplete-panel .mat-option.mat-selected:not(.mat-active):not(:hover){background:#424242}.mat-autocomplete-panel .mat-option.mat-selected:not(.mat-active):not(:hover):not(.mat-option-disabled){color:#fff}.mat-badge{position:relative}.mat-badge-hidden .mat-badge-content{display:none}.mat-badge-content{position:absolute;text-align:center;display:inline-block;border-radius:50%;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;pointer-events:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:16px;height:16px;line-height:16px}.mat-badge-small.mat-badge-above .mat-badge-content{top:-8px}.mat-badge-small.mat-badge-below .mat-badge-content{bottom:-8px}.mat-badge-small.mat-badge-before .mat-badge-content{left:-16px}[dir=rtl] .mat-badge-small.mat-badge-before .mat-badge-content{left:auto;right:-16px}.mat-badge-small.mat-badge-after .mat-badge-content{right:-16px}[dir=rtl] .mat-badge-small.mat-badge-after .mat-badge-content{right:auto;left:-16px}.mat-badge-small.mat-badge-overlap.mat-badge-before .mat-badge-content{left:-8px}[dir=rtl] .mat-badge-small.mat-badge-overlap.mat-badge-before .mat-badge-content{left:auto;right:-8px}.mat-badge-small.mat-badge-overlap.mat-badge-after .mat-badge-content{right:-8px}[dir=rtl] .mat-badge-small.mat-badge-overlap.mat-badge-after .mat-badge-content{right:auto;left:-8px}.mat-badge-medium .mat-badge-content{width:22px;height:22px;line-height:22px}.mat-badge-medium.mat-badge-above .mat-badge-content{top:-11px}.mat-badge-medium.mat-badge-below .mat-badge-content{bottom:-11px}.mat-badge-medium.mat-badge-before .mat-badge-content{left:-22px}[dir=rtl] .mat-badge-medium.mat-badge-before .mat-badge-content{left:auto;right:-22px}.mat-badge-medium.mat-badge-after .mat-badge-content{right:-22px}[dir=rtl] .mat-badge-medium.mat-badge-after .mat-badge-content{right:auto;left:-22px}.mat-badge-medium.mat-badge-overlap.mat-badge-before .mat-badge-content{left:-11px}[dir=rtl] .mat-badge-medium.mat-badge-overlap.mat-badge-before .mat-badge-content{left:auto;right:-11px}.mat-badge-medium.mat-badge-overlap.mat-badge-after .mat-badge-content{right:-11px}[dir=rtl] .mat-badge-medium.mat-badge-overlap.mat-badge-after .mat-badge-content{right:auto;left:-11px}.mat-badge-large .mat-badge-content{width:28px;height:28px;line-height:28px}.mat-badge-large.mat-badge-above .mat-badge-content{top:-14px}.mat-badge-large.mat-badge-below .mat-badge-content{bottom:-14px}.mat-badge-large.mat-badge-before .mat-badge-content{left:-28px}[dir=rtl] .mat-badge-large.mat-badge-before .mat-badge-content{left:auto;right:-28px}.mat-badge-large.mat-badge-after .mat-badge-content{right:-28px}[dir=rtl] .mat-badge-large.mat-badge-after .mat-badge-content{right:auto;left:-28px}.mat-badge-large.mat-badge-overlap.mat-badge-before .mat-badge-content{left:-14px}[dir=rtl] .mat-badge-large.mat-badge-overlap.mat-badge-before .mat-badge-content{left:auto;right:-14px}.mat-badge-large.mat-badge-overlap.mat-badge-after .mat-badge-content{right:-14px}[dir=rtl] .mat-badge-large.mat-badge-overlap.mat-badge-after .mat-badge-content{right:auto;left:-14px}.mat-badge-content{color:#fff;background:#c2185b}.cdk-high-contrast-active .mat-badge-content{outline:solid 1px;border-radius:0}.mat-badge-accent .mat-badge-content{background:#b0bec5;color:rgba(0,0,0,.87)}.mat-badge-warn .mat-badge-content{color:#fff;background:#f44336}.mat-badge-disabled .mat-badge-content{background:#6e6e6e;color:rgba(255,255,255,.5)}.mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12);background:#424242;color:#fff}.mat-button,.mat-icon-button,.mat-stroked-button{color:inherit;background:transparent}.mat-button.mat-primary,.mat-icon-button.mat-primary,.mat-stroked-button.mat-primary{color:#c2185b}.mat-button.mat-accent,.mat-icon-button.mat-accent,.mat-stroked-button.mat-accent{color:#b0bec5}.mat-button.mat-warn,.mat-icon-button.mat-warn,.mat-stroked-button.mat-warn{color:#f44336}.mat-button.mat-primary.mat-button-disabled,.mat-button.mat-accent.mat-button-disabled,.mat-button.mat-warn.mat-button-disabled,.mat-button.mat-button-disabled.mat-button-disabled,.mat-icon-button.mat-primary.mat-button-disabled,.mat-icon-button.mat-accent.mat-button-disabled,.mat-icon-button.mat-warn.mat-button-disabled,.mat-icon-button.mat-button-disabled.mat-button-disabled,.mat-stroked-button.mat-primary.mat-button-disabled,.mat-stroked-button.mat-accent.mat-button-disabled,.mat-stroked-button.mat-warn.mat-button-disabled,.mat-stroked-button.mat-button-disabled.mat-button-disabled{color:rgba(255,255,255,.3)}.mat-button.mat-primary .mat-button-focus-overlay,.mat-icon-button.mat-primary .mat-button-focus-overlay,.mat-stroked-button.mat-primary .mat-button-focus-overlay{background-color:#c2185b}.mat-button.mat-accent .mat-button-focus-overlay,.mat-icon-button.mat-accent .mat-button-focus-overlay,.mat-stroked-button.mat-accent .mat-button-focus-overlay{background-color:#b0bec5}.mat-button.mat-warn .mat-button-focus-overlay,.mat-icon-button.mat-warn .mat-button-focus-overlay,.mat-stroked-button.mat-warn .mat-button-focus-overlay{background-color:#f44336}.mat-button.mat-button-disabled .mat-button-focus-overlay,.mat-icon-button.mat-button-disabled .mat-button-focus-overlay,.mat-stroked-button.mat-button-disabled .mat-button-focus-overlay{background-color:transparent}.mat-button .mat-ripple-element,.mat-icon-button .mat-ripple-element,.mat-stroked-button .mat-ripple-element{opacity:.1;background-color:currentColor}.mat-button-focus-overlay{background:#fff}.mat-stroked-button:not(.mat-button-disabled){border-color:rgba(255,255,255,.12)}.mat-flat-button,.mat-raised-button,.mat-fab,.mat-mini-fab{color:#fff;background-color:#424242}.mat-flat-button.mat-primary,.mat-raised-button.mat-primary,.mat-fab.mat-primary,.mat-mini-fab.mat-primary{color:#fff}.mat-flat-button.mat-accent,.mat-raised-button.mat-accent,.mat-fab.mat-accent,.mat-mini-fab.mat-accent{color:rgba(0,0,0,.87)}.mat-flat-button.mat-warn,.mat-raised-button.mat-warn,.mat-fab.mat-warn,.mat-mini-fab.mat-warn{color:#fff}.mat-flat-button.mat-primary.mat-button-disabled,.mat-flat-button.mat-accent.mat-button-disabled,.mat-flat-button.mat-warn.mat-button-disabled,.mat-flat-button.mat-button-disabled.mat-button-disabled,.mat-raised-button.mat-primary.mat-button-disabled,.mat-raised-button.mat-accent.mat-button-disabled,.mat-raised-button.mat-warn.mat-button-disabled,.mat-raised-button.mat-button-disabled.mat-button-disabled,.mat-fab.mat-primary.mat-button-disabled,.mat-fab.mat-accent.mat-button-disabled,.mat-fab.mat-warn.mat-button-disabled,.mat-fab.mat-button-disabled.mat-button-disabled,.mat-mini-fab.mat-primary.mat-button-disabled,.mat-mini-fab.mat-accent.mat-button-disabled,.mat-mini-fab.mat-warn.mat-button-disabled,.mat-mini-fab.mat-button-disabled.mat-button-disabled{color:rgba(255,255,255,.3)}.mat-flat-button.mat-primary,.mat-raised-button.mat-primary,.mat-fab.mat-primary,.mat-mini-fab.mat-primary{background-color:#c2185b}.mat-flat-button.mat-accent,.mat-raised-button.mat-accent,.mat-fab.mat-accent,.mat-mini-fab.mat-accent{background-color:#b0bec5}.mat-flat-button.mat-warn,.mat-raised-button.mat-warn,.mat-fab.mat-warn,.mat-mini-fab.mat-warn{background-color:#f44336}.mat-flat-button.mat-primary.mat-button-disabled,.mat-flat-button.mat-accent.mat-button-disabled,.mat-flat-button.mat-warn.mat-button-disabled,.mat-flat-button.mat-button-disabled.mat-button-disabled,.mat-raised-button.mat-primary.mat-button-disabled,.mat-raised-button.mat-accent.mat-button-disabled,.mat-raised-button.mat-warn.mat-button-disabled,.mat-raised-button.mat-button-disabled.mat-button-disabled,.mat-fab.mat-primary.mat-button-disabled,.mat-fab.mat-accent.mat-button-disabled,.mat-fab.mat-warn.mat-button-disabled,.mat-fab.mat-button-disabled.mat-button-disabled,.mat-mini-fab.mat-primary.mat-button-disabled,.mat-mini-fab.mat-accent.mat-button-disabled,.mat-mini-fab.mat-warn.mat-button-disabled,.mat-mini-fab.mat-button-disabled.mat-button-disabled{background-color:rgba(255,255,255,.12)}.mat-flat-button.mat-primary .mat-ripple-element,.mat-raised-button.mat-primary .mat-ripple-element,.mat-fab.mat-primary .mat-ripple-element,.mat-mini-fab.mat-primary .mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-flat-button.mat-accent .mat-ripple-element,.mat-raised-button.mat-accent .mat-ripple-element,.mat-fab.mat-accent .mat-ripple-element,.mat-mini-fab.mat-accent .mat-ripple-element{background-color:rgba(0,0,0,.1)}.mat-flat-button.mat-warn .mat-ripple-element,.mat-raised-button.mat-warn .mat-ripple-element,.mat-fab.mat-warn .mat-ripple-element,.mat-mini-fab.mat-warn .mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-stroked-button:not([class*=mat-elevation-z]),.mat-flat-button:not([class*=mat-elevation-z]){box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-raised-button:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-raised-button.mat-button-disabled:not([class*=mat-elevation-z]){box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-fab:not(.mat-button-disabled):active:not([class*=mat-elevation-z]),.mat-mini-fab:not(.mat-button-disabled):active:not([class*=mat-elevation-z]){box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-fab.mat-button-disabled:not([class*=mat-elevation-z]),.mat-mini-fab.mat-button-disabled:not([class*=mat-elevation-z]){box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-button-toggle-standalone,.mat-button-toggle-group{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{box-shadow:none}.mat-button-toggle{color:rgba(255,255,255,.5)}.mat-button-toggle .mat-button-toggle-focus-overlay{background-color:rgba(255,255,255,.12)}.mat-button-toggle-appearance-standard{color:#fff;background:#424242}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:#fff}.mat-button-toggle-group-appearance-standard .mat-button-toggle+.mat-button-toggle{border-left:solid 1px rgba(255,255,255,.12)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle+.mat-button-toggle{border-left:none;border-right:solid 1px rgba(255,255,255,.12)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle+.mat-button-toggle{border-left:none;border-right:none;border-top:solid 1px rgba(255,255,255,.12)}.mat-button-toggle-checked{background-color:#212121;color:rgba(255,255,255,.7)}.mat-button-toggle-checked.mat-button-toggle-appearance-standard{color:#fff}.mat-button-toggle-disabled{color:rgba(255,255,255,.3);background-color:#000}.mat-button-toggle-disabled.mat-button-toggle-appearance-standard{background:#424242}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:#424242}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border:solid 1px rgba(255,255,255,.12)}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:48px}.mat-card{background:#424242;color:#fff}.mat-card:not([class*=mat-elevation-z]){box-shadow:0px 2px 1px -1px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 1px 3px 0px rgba(0, 0, 0, 0.12)}.mat-card.mat-card-flat:not([class*=mat-elevation-z]){box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2),0px 0px 0px 0px rgba(0, 0, 0, 0.14),0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-card-subtitle{color:rgba(255,255,255,.7)}.mat-checkbox-frame{border-color:rgba(255,255,255,.7)}.mat-checkbox-checkmark{fill:#303030}.mat-checkbox-checkmark-path{stroke:#303030 !important}.mat-checkbox-mixedmark{background-color:#303030}.mat-checkbox-indeterminate.mat-primary .mat-checkbox-background,.mat-checkbox-checked.mat-primary .mat-checkbox-background{background-color:#c2185b}.mat-checkbox-indeterminate.mat-accent .mat-checkbox-background,.mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#b0bec5}.mat-checkbox-indeterminate.mat-warn .mat-checkbox-background,.mat-checkbox-checked.mat-warn .mat-checkbox-background{background-color:#f44336}.mat-checkbox-disabled.mat-checkbox-checked .mat-checkbox-background,.mat-checkbox-disabled.mat-checkbox-indeterminate .mat-checkbox-background{background-color:#686868}.mat-checkbox-disabled:not(.mat-checkbox-checked) .mat-checkbox-frame{border-color:#686868}.mat-checkbox-disabled .mat-checkbox-label{color:rgba(255,255,255,.7)}.mat-checkbox .mat-ripple-element{background-color:#fff}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-primary .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-primary .mat-ripple-element{background:#c2185b}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element{background:#b0bec5}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-warn .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-warn .mat-ripple-element{background:#f44336}.mat-chip.mat-standard-chip{background-color:#616161;color:#fff}.mat-chip.mat-standard-chip .mat-chip-remove{color:#fff;opacity:.4}.mat-chip.mat-standard-chip:not(.mat-chip-disabled):active{box-shadow:0px 3px 3px -2px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 1px 8px 0px rgba(0, 0, 0, 0.12)}.mat-chip.mat-standard-chip:not(.mat-chip-disabled) .mat-chip-remove:hover{opacity:.54}.mat-chip.mat-standard-chip.mat-chip-disabled{opacity:.4}.mat-chip.mat-standard-chip::after{background:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary{background-color:#c2185b;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary .mat-chip-remove{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-primary .mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn{background-color:#f44336;color:#fff}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn .mat-chip-remove{color:#fff;opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-warn .mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent{background-color:#b0bec5;color:rgba(0,0,0,.87)}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent .mat-chip-remove{color:rgba(0,0,0,.87);opacity:.4}.mat-chip.mat-standard-chip.mat-chip-selected.mat-accent .mat-ripple-element{background-color:rgba(0,0,0,.1)}.mat-table{background:#424242}.mat-table thead,.mat-table tbody,.mat-table tfoot,mat-header-row,mat-row,mat-footer-row,[mat-header-row],[mat-row],[mat-footer-row],.mat-table-sticky{background:inherit}mat-row,mat-header-row,mat-footer-row,th.mat-header-cell,td.mat-cell,td.mat-footer-cell{border-bottom-color:rgba(255,255,255,.12)}.mat-header-cell{color:rgba(255,255,255,.7)}.mat-cell,.mat-footer-cell{color:#fff}.mat-calendar-arrow{border-top-color:#fff}.mat-datepicker-toggle,.mat-datepicker-content .mat-calendar-next-button,.mat-datepicker-content .mat-calendar-previous-button{color:#fff}.mat-calendar-table-header-divider::after{background:rgba(255,255,255,.12)}.mat-calendar-table-header,.mat-calendar-body-label{color:rgba(255,255,255,.7)}.mat-calendar-body-cell-content,.mat-date-range-input-separator{color:#fff;border-color:transparent}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:rgba(255,255,255,.5)}.mat-form-field-disabled .mat-date-range-input-separator{color:rgba(255,255,255,.5)}.mat-calendar-body-in-preview{color:rgba(255,255,255,.24)}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:rgba(255,255,255,.5)}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:rgba(255,255,255,.3)}.mat-calendar-body-in-range::before{background:rgba(194,24,91,.2)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:rgba(249,171,0,.2)}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, rgba(194, 24, 91, 0.2) 50%, rgba(249, 171, 0, 0.2) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, rgba(194, 24, 91, 0.2) 50%, rgba(249, 171, 0, 0.2) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:#a8dab5}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:#46a35e}.mat-calendar-body-selected{background-color:#c2185b;color:#fff}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:rgba(194,24,91,.4)}.mat-calendar-body-today.mat-calendar-body-selected{box-shadow:inset 0 0 0 1px #fff}.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:rgba(194,24,91,.3)}.mat-datepicker-content{box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12);background-color:#424242;color:#fff}.mat-datepicker-content.mat-accent .mat-calendar-body-in-range::before{background:rgba(176,190,197,.2)}.mat-datepicker-content.mat-accent .mat-calendar-body-comparison-identical,.mat-datepicker-content.mat-accent .mat-calendar-body-in-comparison-range::before{background:rgba(249,171,0,.2)}.mat-datepicker-content.mat-accent .mat-calendar-body-comparison-bridge-start::before,.mat-datepicker-content.mat-accent [dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, rgba(176, 190, 197, 0.2) 50%, rgba(249, 171, 0, 0.2) 50%)}.mat-datepicker-content.mat-accent .mat-calendar-body-comparison-bridge-end::before,.mat-datepicker-content.mat-accent [dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, rgba(176, 190, 197, 0.2) 50%, rgba(249, 171, 0, 0.2) 50%)}.mat-datepicker-content.mat-accent .mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-datepicker-content.mat-accent .mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:#a8dab5}.mat-datepicker-content.mat-accent .mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-datepicker-content.mat-accent .mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:#46a35e}.mat-datepicker-content.mat-accent .mat-calendar-body-selected{background-color:#b0bec5;color:rgba(0,0,0,.87)}.mat-datepicker-content.mat-accent .mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:rgba(176,190,197,.4)}.mat-datepicker-content.mat-accent .mat-calendar-body-today.mat-calendar-body-selected{box-shadow:inset 0 0 0 1px rgba(0,0,0,.87)}.mat-datepicker-content.mat-accent .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.mat-datepicker-content.mat-accent .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.mat-datepicker-content.mat-accent .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:rgba(176,190,197,.3)}.mat-datepicker-content.mat-warn .mat-calendar-body-in-range::before{background:rgba(244,67,54,.2)}.mat-datepicker-content.mat-warn .mat-calendar-body-comparison-identical,.mat-datepicker-content.mat-warn .mat-calendar-body-in-comparison-range::before{background:rgba(249,171,0,.2)}.mat-datepicker-content.mat-warn .mat-calendar-body-comparison-bridge-start::before,.mat-datepicker-content.mat-warn [dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, rgba(244, 67, 54, 0.2) 50%, rgba(249, 171, 0, 0.2) 50%)}.mat-datepicker-content.mat-warn .mat-calendar-body-comparison-bridge-end::before,.mat-datepicker-content.mat-warn [dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, rgba(244, 67, 54, 0.2) 50%, rgba(249, 171, 0, 0.2) 50%)}.mat-datepicker-content.mat-warn .mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-datepicker-content.mat-warn .mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:#a8dab5}.mat-datepicker-content.mat-warn .mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-datepicker-content.mat-warn .mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:#46a35e}.mat-datepicker-content.mat-warn .mat-calendar-body-selected{background-color:#f44336;color:#fff}.mat-datepicker-content.mat-warn .mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:rgba(244,67,54,.4)}.mat-datepicker-content.mat-warn .mat-calendar-body-today.mat-calendar-body-selected{box-shadow:inset 0 0 0 1px #fff}.mat-datepicker-content.mat-warn .mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.mat-datepicker-content.mat-warn .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.mat-datepicker-content.mat-warn .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:rgba(244,67,54,.3)}.mat-datepicker-content-touch{box-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12)}.mat-datepicker-toggle-active{color:#c2185b}.mat-datepicker-toggle-active.mat-accent{color:#b0bec5}.mat-datepicker-toggle-active.mat-warn{color:#f44336}.mat-date-range-input-inner[disabled]{color:rgba(255,255,255,.5)}.mat-dialog-container{box-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12);background:#424242;color:#fff}.mat-divider{border-top-color:rgba(255,255,255,.12)}.mat-divider-vertical{border-right-color:rgba(255,255,255,.12)}.mat-expansion-panel{background:#424242;color:#fff}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-action-row{border-top-color:rgba(255,255,255,.12)}.mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true]),.mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true]),.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true]){background:rgba(255,255,255,.04)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background:#424242}}.mat-expansion-panel-header-title{color:#fff}.mat-expansion-panel-header-description,.mat-expansion-indicator::after{color:rgba(255,255,255,.7)}.mat-expansion-panel-header[aria-disabled=true]{color:rgba(255,255,255,.3)}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header{height:48px}.mat-expansion-panel-header.mat-expanded{height:64px}.mat-form-field-label{color:rgba(255,255,255,.7)}.mat-hint{color:rgba(255,255,255,.7)}.mat-form-field.mat-focused .mat-form-field-label{color:#c2185b}.mat-form-field.mat-focused .mat-form-field-label.mat-accent{color:#b0bec5}.mat-form-field.mat-focused .mat-form-field-label.mat-warn{color:#f44336}.mat-focused .mat-form-field-required-marker{color:#b0bec5}.mat-form-field-ripple{background-color:#fff}.mat-form-field.mat-focused .mat-form-field-ripple{background-color:#c2185b}.mat-form-field.mat-focused .mat-form-field-ripple.mat-accent{background-color:#b0bec5}.mat-form-field.mat-focused .mat-form-field-ripple.mat-warn{background-color:#f44336}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid) .mat-form-field-infix::after{color:#c2185b}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid).mat-accent .mat-form-field-infix::after{color:#b0bec5}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid).mat-warn .mat-form-field-infix::after{color:#f44336}.mat-form-field.mat-form-field-invalid .mat-form-field-label{color:#f44336}.mat-form-field.mat-form-field-invalid .mat-form-field-label.mat-accent,.mat-form-field.mat-form-field-invalid .mat-form-field-label .mat-form-field-required-marker{color:#f44336}.mat-form-field.mat-form-field-invalid .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple.mat-accent{background-color:#f44336}.mat-error{color:#f44336}.mat-form-field-appearance-legacy .mat-form-field-label{color:rgba(255,255,255,.7)}.mat-form-field-appearance-legacy .mat-hint{color:rgba(255,255,255,.7)}.mat-form-field-appearance-legacy .mat-form-field-underline{background-color:rgba(255,255,255,.7)}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-image:linear-gradient(to right, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.7) 33%, transparent 0%);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-standard .mat-form-field-underline{background-color:rgba(255,255,255,.7)}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-image:linear-gradient(to right, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.7) 33%, transparent 0%);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-fill .mat-form-field-flex{background-color:rgba(255,255,255,.1)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{background-color:rgba(255,255,255,.05)}.mat-form-field-appearance-fill .mat-form-field-underline::before{background-color:rgba(255,255,255,.5)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-label{color:rgba(255,255,255,.5)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-underline::before{background-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline{color:rgba(255,255,255,.3)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{color:#fff}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#c2185b}.mat-form-field-appearance-outline.mat-focused.mat-accent .mat-form-field-outline-thick{color:#b0bec5}.mat-form-field-appearance-outline.mat-focused.mat-warn .mat-form-field-outline-thick{color:#f44336}.mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:#f44336}.mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-label{color:rgba(255,255,255,.5)}.mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:rgba(255,255,255,.15)}.mat-icon.mat-primary{color:#c2185b}.mat-icon.mat-accent{color:#b0bec5}.mat-icon.mat-warn{color:#f44336}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{color:rgba(255,255,255,.7)}.mat-input-element:disabled,.mat-form-field-type-mat-native-select.mat-form-field-disabled .mat-form-field-infix::after{color:rgba(255,255,255,.5)}.mat-input-element{caret-color:#c2185b}.mat-input-element::placeholder{color:rgba(255,255,255,.5)}.mat-input-element::-moz-placeholder{color:rgba(255,255,255,.5)}.mat-input-element::-webkit-input-placeholder{color:rgba(255,255,255,.5)}.mat-input-element:-ms-input-placeholder{color:rgba(255,255,255,.5)}.mat-input-element:not(.mat-native-select-inline) option{color:rgba(0,0,0,.87)}.mat-input-element:not(.mat-native-select-inline) option:disabled{color:rgba(0,0,0,.38)}.mat-form-field.mat-accent .mat-input-element{caret-color:#b0bec5}.mat-form-field.mat-warn .mat-input-element,.mat-form-field-invalid .mat-input-element{caret-color:#f44336}.mat-form-field-type-mat-native-select.mat-form-field-invalid .mat-form-field-infix::after{color:#f44336}.mat-list-base .mat-list-item{color:#fff}.mat-list-base .mat-list-option{color:#fff}.mat-list-base .mat-subheader{color:rgba(255,255,255,.7)}.mat-list-item-disabled{background-color:#000}.mat-list-option:hover,.mat-list-option:focus,.mat-nav-list .mat-list-item:hover,.mat-nav-list .mat-list-item:focus,.mat-action-list .mat-list-item:hover,.mat-action-list .mat-list-item:focus{background:rgba(255,255,255,.04)}.mat-list-single-selected-option,.mat-list-single-selected-option:hover,.mat-list-single-selected-option:focus{background:rgba(255,255,255,.12)}.mat-menu-panel{background:#424242}.mat-menu-panel:not([class*=mat-elevation-z]){box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)}.mat-menu-item{background:transparent;color:#fff}.mat-menu-item[disabled],.mat-menu-item[disabled] .mat-menu-submenu-icon,.mat-menu-item[disabled] .mat-icon-no-color{color:rgba(255,255,255,.5)}.mat-menu-item .mat-icon-no-color,.mat-menu-submenu-icon{color:#fff}.mat-menu-item:hover:not([disabled]),.mat-menu-item.cdk-program-focused:not([disabled]),.mat-menu-item.cdk-keyboard-focused:not([disabled]),.mat-menu-item-highlighted:not([disabled]){background:rgba(255,255,255,.04)}.mat-paginator{background:#424242}.mat-paginator,.mat-paginator-page-size .mat-select-trigger{color:rgba(255,255,255,.7)}.mat-paginator-decrement,.mat-paginator-increment{border-top:2px solid #fff;border-right:2px solid #fff}.mat-paginator-first,.mat-paginator-last{border-top:2px solid #fff}.mat-icon-button[disabled] .mat-paginator-decrement,.mat-icon-button[disabled] .mat-paginator-increment,.mat-icon-button[disabled] .mat-paginator-first,.mat-icon-button[disabled] .mat-paginator-last{border-color:rgba(255,255,255,.5)}.mat-paginator-container{min-height:56px}.mat-progress-bar-background{fill:#552a3b}.mat-progress-bar-buffer{background-color:#552a3b}.mat-progress-bar-fill::after{background-color:#c2185b}.mat-progress-bar.mat-accent .mat-progress-bar-background{fill:#505455}.mat-progress-bar.mat-accent .mat-progress-bar-buffer{background-color:#505455}.mat-progress-bar.mat-accent .mat-progress-bar-fill::after{background-color:#b0bec5}.mat-progress-bar.mat-warn .mat-progress-bar-background{fill:#613532}.mat-progress-bar.mat-warn .mat-progress-bar-buffer{background-color:#613532}.mat-progress-bar.mat-warn .mat-progress-bar-fill::after{background-color:#f44336}.mat-progress-spinner circle,.mat-spinner circle{stroke:#c2185b}.mat-progress-spinner.mat-accent circle,.mat-spinner.mat-accent circle{stroke:#b0bec5}.mat-progress-spinner.mat-warn circle,.mat-spinner.mat-warn circle{stroke:#f44336}.mat-radio-outer-circle{border-color:rgba(255,255,255,.7)}.mat-radio-button.mat-primary.mat-radio-checked .mat-radio-outer-circle{border-color:#c2185b}.mat-radio-button.mat-primary .mat-radio-inner-circle,.mat-radio-button.mat-primary .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple),.mat-radio-button.mat-primary.mat-radio-checked .mat-radio-persistent-ripple,.mat-radio-button.mat-primary:active .mat-radio-persistent-ripple{background-color:#c2185b}.mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#b0bec5}.mat-radio-button.mat-accent .mat-radio-inner-circle,.mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple),.mat-radio-button.mat-accent.mat-radio-checked .mat-radio-persistent-ripple,.mat-radio-button.mat-accent:active .mat-radio-persistent-ripple{background-color:#b0bec5}.mat-radio-button.mat-warn.mat-radio-checked .mat-radio-outer-circle{border-color:#f44336}.mat-radio-button.mat-warn .mat-radio-inner-circle,.mat-radio-button.mat-warn .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple),.mat-radio-button.mat-warn.mat-radio-checked .mat-radio-persistent-ripple,.mat-radio-button.mat-warn:active .mat-radio-persistent-ripple{background-color:#f44336}.mat-radio-button.mat-radio-disabled.mat-radio-checked .mat-radio-outer-circle,.mat-radio-button.mat-radio-disabled .mat-radio-outer-circle{border-color:rgba(255,255,255,.5)}.mat-radio-button.mat-radio-disabled .mat-radio-ripple .mat-ripple-element,.mat-radio-button.mat-radio-disabled .mat-radio-inner-circle{background-color:rgba(255,255,255,.5)}.mat-radio-button.mat-radio-disabled .mat-radio-label-content{color:rgba(255,255,255,.5)}.mat-radio-button .mat-ripple-element{background-color:#fff}.mat-select-value{color:#fff}.mat-select-placeholder{color:rgba(255,255,255,.5)}.mat-select-disabled .mat-select-value{color:rgba(255,255,255,.5)}.mat-select-arrow{color:rgba(255,255,255,.7)}.mat-select-panel{background:#424242}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12)}.mat-select-panel .mat-option.mat-selected:not(.mat-option-multiple){background:rgba(255,255,255,.12)}.mat-form-field.mat-focused.mat-primary .mat-select-arrow{color:#c2185b}.mat-form-field.mat-focused.mat-accent .mat-select-arrow{color:#b0bec5}.mat-form-field.mat-focused.mat-warn .mat-select-arrow{color:#f44336}.mat-form-field .mat-select.mat-select-invalid .mat-select-arrow{color:#f44336}.mat-form-field .mat-select.mat-select-disabled .mat-select-arrow{color:rgba(255,255,255,.5)}.mat-drawer-container{background-color:#303030;color:#fff}.mat-drawer{background-color:#424242;color:#fff}.mat-drawer.mat-drawer-push{background-color:#424242}.mat-drawer:not(.mat-drawer-side){box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12)}.mat-drawer-side{border-right:solid 1px rgba(255,255,255,.12)}.mat-drawer-side.mat-drawer-end{border-left:solid 1px rgba(255,255,255,.12);border-right:none}[dir=rtl] .mat-drawer-side{border-left:solid 1px rgba(255,255,255,.12);border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-left:none;border-right:solid 1px rgba(255,255,255,.12)}.mat-drawer-backdrop.mat-drawer-shown{background-color:rgba(189,189,189,.6)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#b0bec5}.mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:rgba(176,190,197,.54)}.mat-slide-toggle.mat-checked .mat-ripple-element{background-color:#b0bec5}.mat-slide-toggle.mat-primary.mat-checked .mat-slide-toggle-thumb{background-color:#c2185b}.mat-slide-toggle.mat-primary.mat-checked .mat-slide-toggle-bar{background-color:rgba(194,24,91,.54)}.mat-slide-toggle.mat-primary.mat-checked .mat-ripple-element{background-color:#c2185b}.mat-slide-toggle.mat-warn.mat-checked .mat-slide-toggle-thumb{background-color:#f44336}.mat-slide-toggle.mat-warn.mat-checked .mat-slide-toggle-bar{background-color:rgba(244,67,54,.54)}.mat-slide-toggle.mat-warn.mat-checked .mat-ripple-element{background-color:#f44336}.mat-slide-toggle:not(.mat-checked) .mat-ripple-element{background-color:#fff}.mat-slide-toggle-thumb{box-shadow:0px 2px 1px -1px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 1px 3px 0px rgba(0, 0, 0, 0.12);background-color:#bdbdbd}.mat-slide-toggle-bar{background-color:rgba(255,255,255,.5)}.mat-slider-track-background{background-color:rgba(255,255,255,.3)}.mat-primary .mat-slider-track-fill,.mat-primary .mat-slider-thumb,.mat-primary .mat-slider-thumb-label{background-color:#c2185b}.mat-primary .mat-slider-thumb-label-text{color:#fff}.mat-primary .mat-slider-focus-ring{background-color:rgba(194,24,91,.2)}.mat-accent .mat-slider-track-fill,.mat-accent .mat-slider-thumb,.mat-accent .mat-slider-thumb-label{background-color:#b0bec5}.mat-accent .mat-slider-thumb-label-text{color:rgba(0,0,0,.87)}.mat-accent .mat-slider-focus-ring{background-color:rgba(176,190,197,.2)}.mat-warn .mat-slider-track-fill,.mat-warn .mat-slider-thumb,.mat-warn .mat-slider-thumb-label{background-color:#f44336}.mat-warn .mat-slider-thumb-label-text{color:#fff}.mat-warn .mat-slider-focus-ring{background-color:rgba(244,67,54,.2)}.mat-slider:hover .mat-slider-track-background,.mat-slider.cdk-focused .mat-slider-track-background{background-color:rgba(255,255,255,.3)}.mat-slider-disabled .mat-slider-track-background,.mat-slider-disabled .mat-slider-track-fill,.mat-slider-disabled .mat-slider-thumb{background-color:rgba(255,255,255,.3)}.mat-slider-disabled:hover .mat-slider-track-background{background-color:rgba(255,255,255,.3)}.mat-slider-min-value .mat-slider-focus-ring{background-color:rgba(255,255,255,.12)}.mat-slider-min-value.mat-slider-thumb-label-showing .mat-slider-thumb,.mat-slider-min-value.mat-slider-thumb-label-showing .mat-slider-thumb-label{background-color:#fff}.mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused .mat-slider-thumb,.mat-slider-min-value.mat-slider-thumb-label-showing.cdk-focused .mat-slider-thumb-label{background-color:rgba(255,255,255,.3)}.mat-slider-min-value:not(.mat-slider-thumb-label-showing) .mat-slider-thumb{border-color:rgba(255,255,255,.3);background-color:transparent}.mat-slider-min-value:not(.mat-slider-thumb-label-showing):hover .mat-slider-thumb,.mat-slider-min-value:not(.mat-slider-thumb-label-showing).cdk-focused .mat-slider-thumb{border-color:rgba(255,255,255,.3)}.mat-slider-min-value:not(.mat-slider-thumb-label-showing):hover.mat-slider-disabled .mat-slider-thumb,.mat-slider-min-value:not(.mat-slider-thumb-label-showing).cdk-focused.mat-slider-disabled .mat-slider-thumb{border-color:rgba(255,255,255,.3)}.mat-slider-has-ticks .mat-slider-wrapper::after{border-color:rgba(255,255,255,.7)}.mat-slider-horizontal .mat-slider-ticks{background-image:repeating-linear-gradient(to right, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7) 2px, transparent 0, transparent);background-image:-moz-repeating-linear-gradient(0.0001deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7) 2px, transparent 0, transparent)}.mat-slider-vertical .mat-slider-ticks{background-image:repeating-linear-gradient(to bottom, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7) 2px, transparent 0, transparent)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused,.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:rgba(255,255,255,.04)}.mat-step-header:hover[aria-disabled=true]{cursor:default}@media(hover: none){.mat-step-header:hover{background:none}}.mat-step-header .mat-step-label,.mat-step-header .mat-step-optional{color:rgba(255,255,255,.7)}.mat-step-header .mat-step-icon{background-color:rgba(255,255,255,.7);color:#fff}.mat-step-header .mat-step-icon-selected,.mat-step-header .mat-step-icon-state-done,.mat-step-header .mat-step-icon-state-edit{background-color:#c2185b;color:#fff}.mat-step-header.mat-accent .mat-step-icon{color:rgba(0,0,0,.87)}.mat-step-header.mat-accent .mat-step-icon-selected,.mat-step-header.mat-accent .mat-step-icon-state-done,.mat-step-header.mat-accent .mat-step-icon-state-edit{background-color:#b0bec5;color:rgba(0,0,0,.87)}.mat-step-header.mat-warn .mat-step-icon{color:#fff}.mat-step-header.mat-warn .mat-step-icon-selected,.mat-step-header.mat-warn .mat-step-icon-state-done,.mat-step-header.mat-warn .mat-step-icon-state-edit{background-color:#f44336;color:#fff}.mat-step-header .mat-step-icon-state-error{background-color:transparent;color:#f44336}.mat-step-header .mat-step-label.mat-step-label-active{color:#fff}.mat-step-header .mat-step-label.mat-step-label-error{color:#f44336}.mat-stepper-horizontal,.mat-stepper-vertical{background-color:#424242}.mat-stepper-vertical-line::before{border-left-color:rgba(255,255,255,.12)}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after,.mat-stepper-horizontal-line{border-top-color:rgba(255,255,255,.12)}.mat-horizontal-stepper-header{height:72px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header,.mat-vertical-stepper-header{padding:24px 24px}.mat-stepper-vertical-line::before{top:-16px;bottom:-16px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before{top:36px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{top:36px}.mat-sort-header-arrow{color:#c6c6c6}.mat-tab-nav-bar,.mat-tab-header{border-bottom:1px solid rgba(255,255,255,.12)}.mat-tab-group-inverted-header .mat-tab-nav-bar,.mat-tab-group-inverted-header .mat-tab-header{border-top:1px solid rgba(255,255,255,.12);border-bottom:none}.mat-tab-label,.mat-tab-link{color:#fff}.mat-tab-label.mat-tab-disabled,.mat-tab-link.mat-tab-disabled{color:rgba(255,255,255,.5)}.mat-tab-header-pagination-chevron{border-color:#fff}.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron{border-color:rgba(255,255,255,.5)}.mat-tab-group[class*=mat-background-]>.mat-tab-header,.mat-tab-nav-bar[class*=mat-background-]{border-bottom:none;border-top:none}.mat-tab-group.mat-primary .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-primary .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-group.mat-primary .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-primary .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-primary .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-primary .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-primary .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-primary .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled){background-color:rgba(233,30,99,.3)}.mat-tab-group.mat-primary .mat-ink-bar,.mat-tab-nav-bar.mat-primary .mat-ink-bar{background-color:#c2185b}.mat-tab-group.mat-primary.mat-background-primary>.mat-tab-header .mat-ink-bar,.mat-tab-group.mat-primary.mat-background-primary>.mat-tab-link-container .mat-ink-bar,.mat-tab-nav-bar.mat-primary.mat-background-primary>.mat-tab-header .mat-ink-bar,.mat-tab-nav-bar.mat-primary.mat-background-primary>.mat-tab-link-container .mat-ink-bar{background-color:#fff}.mat-tab-group.mat-accent .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-accent .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-group.mat-accent .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-accent .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-accent .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-accent .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-accent .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-accent .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled){background-color:rgba(207,216,220,.3)}.mat-tab-group.mat-accent .mat-ink-bar,.mat-tab-nav-bar.mat-accent .mat-ink-bar{background-color:#b0bec5}.mat-tab-group.mat-accent.mat-background-accent>.mat-tab-header .mat-ink-bar,.mat-tab-group.mat-accent.mat-background-accent>.mat-tab-link-container .mat-ink-bar,.mat-tab-nav-bar.mat-accent.mat-background-accent>.mat-tab-header .mat-ink-bar,.mat-tab-nav-bar.mat-accent.mat-background-accent>.mat-tab-link-container .mat-ink-bar{background-color:rgba(0,0,0,.87)}.mat-tab-group.mat-warn .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-warn .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-group.mat-warn .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-warn .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-warn .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-warn .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-warn .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-warn .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled){background-color:rgba(255,205,210,.3)}.mat-tab-group.mat-warn .mat-ink-bar,.mat-tab-nav-bar.mat-warn .mat-ink-bar{background-color:#f44336}.mat-tab-group.mat-warn.mat-background-warn>.mat-tab-header .mat-ink-bar,.mat-tab-group.mat-warn.mat-background-warn>.mat-tab-link-container .mat-ink-bar,.mat-tab-nav-bar.mat-warn.mat-background-warn>.mat-tab-header .mat-ink-bar,.mat-tab-nav-bar.mat-warn.mat-background-warn>.mat-tab-link-container .mat-ink-bar{background-color:#fff}.mat-tab-group.mat-background-primary .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-primary .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-primary .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-primary .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-primary .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-primary .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-primary .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-primary .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled){background-color:rgba(233,30,99,.3)}.mat-tab-group.mat-background-primary>.mat-tab-header,.mat-tab-group.mat-background-primary>.mat-tab-link-container,.mat-tab-group.mat-background-primary>.mat-tab-header-pagination,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header,.mat-tab-nav-bar.mat-background-primary>.mat-tab-link-container,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header-pagination{background-color:#c2185b}.mat-tab-group.mat-background-primary>.mat-tab-header .mat-tab-label,.mat-tab-group.mat-background-primary>.mat-tab-link-container .mat-tab-link,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header .mat-tab-label,.mat-tab-nav-bar.mat-background-primary>.mat-tab-link-container .mat-tab-link{color:#fff}.mat-tab-group.mat-background-primary>.mat-tab-header .mat-tab-label.mat-tab-disabled,.mat-tab-group.mat-background-primary>.mat-tab-link-container .mat-tab-link.mat-tab-disabled,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header .mat-tab-label.mat-tab-disabled,.mat-tab-nav-bar.mat-background-primary>.mat-tab-link-container .mat-tab-link.mat-tab-disabled{color:rgba(255,255,255,.4)}.mat-tab-group.mat-background-primary>.mat-tab-header .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-primary>.mat-tab-header-pagination .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-primary>.mat-tab-link-container .mat-focus-indicator::before,.mat-tab-group.mat-background-primary>.mat-tab-header .mat-focus-indicator::before,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header-pagination .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-primary>.mat-tab-link-container .mat-focus-indicator::before,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header .mat-focus-indicator::before{border-color:#fff}.mat-tab-group.mat-background-primary>.mat-tab-header .mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-primary>.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header .mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-primary>.mat-tab-header .mat-ripple-element,.mat-tab-group.mat-background-primary>.mat-tab-link-container .mat-ripple-element,.mat-tab-group.mat-background-primary>.mat-tab-header-pagination .mat-ripple-element,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header .mat-ripple-element,.mat-tab-nav-bar.mat-background-primary>.mat-tab-link-container .mat-ripple-element,.mat-tab-nav-bar.mat-background-primary>.mat-tab-header-pagination .mat-ripple-element{background-color:#fff;opacity:.12}.mat-tab-group.mat-background-accent .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-accent .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-accent .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-accent .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-accent .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-accent .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-accent .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-accent .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled){background-color:rgba(207,216,220,.3)}.mat-tab-group.mat-background-accent>.mat-tab-header,.mat-tab-group.mat-background-accent>.mat-tab-link-container,.mat-tab-group.mat-background-accent>.mat-tab-header-pagination,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header,.mat-tab-nav-bar.mat-background-accent>.mat-tab-link-container,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header-pagination{background-color:#b0bec5}.mat-tab-group.mat-background-accent>.mat-tab-header .mat-tab-label,.mat-tab-group.mat-background-accent>.mat-tab-link-container .mat-tab-link,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header .mat-tab-label,.mat-tab-nav-bar.mat-background-accent>.mat-tab-link-container .mat-tab-link{color:rgba(0,0,0,.87)}.mat-tab-group.mat-background-accent>.mat-tab-header .mat-tab-label.mat-tab-disabled,.mat-tab-group.mat-background-accent>.mat-tab-link-container .mat-tab-link.mat-tab-disabled,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header .mat-tab-label.mat-tab-disabled,.mat-tab-nav-bar.mat-background-accent>.mat-tab-link-container .mat-tab-link.mat-tab-disabled{color:rgba(0,0,0,.4)}.mat-tab-group.mat-background-accent>.mat-tab-header .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-accent>.mat-tab-header-pagination .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-accent>.mat-tab-link-container .mat-focus-indicator::before,.mat-tab-group.mat-background-accent>.mat-tab-header .mat-focus-indicator::before,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header-pagination .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-accent>.mat-tab-link-container .mat-focus-indicator::before,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header .mat-focus-indicator::before{border-color:rgba(0,0,0,.87)}.mat-tab-group.mat-background-accent>.mat-tab-header .mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-accent>.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header .mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron{border-color:#000;opacity:.4}.mat-tab-group.mat-background-accent>.mat-tab-header .mat-ripple-element,.mat-tab-group.mat-background-accent>.mat-tab-link-container .mat-ripple-element,.mat-tab-group.mat-background-accent>.mat-tab-header-pagination .mat-ripple-element,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header .mat-ripple-element,.mat-tab-nav-bar.mat-background-accent>.mat-tab-link-container .mat-ripple-element,.mat-tab-nav-bar.mat-background-accent>.mat-tab-header-pagination .mat-ripple-element{background-color:#000;opacity:.12}.mat-tab-group.mat-background-warn .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-warn .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-warn .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-group.mat-background-warn .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-warn .mat-tab-label.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-warn .mat-tab-label.cdk-program-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-warn .mat-tab-link.cdk-keyboard-focused:not(.mat-tab-disabled),.mat-tab-nav-bar.mat-background-warn .mat-tab-link.cdk-program-focused:not(.mat-tab-disabled){background-color:rgba(255,205,210,.3)}.mat-tab-group.mat-background-warn>.mat-tab-header,.mat-tab-group.mat-background-warn>.mat-tab-link-container,.mat-tab-group.mat-background-warn>.mat-tab-header-pagination,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header,.mat-tab-nav-bar.mat-background-warn>.mat-tab-link-container,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header-pagination{background-color:#f44336}.mat-tab-group.mat-background-warn>.mat-tab-header .mat-tab-label,.mat-tab-group.mat-background-warn>.mat-tab-link-container .mat-tab-link,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header .mat-tab-label,.mat-tab-nav-bar.mat-background-warn>.mat-tab-link-container .mat-tab-link{color:#fff}.mat-tab-group.mat-background-warn>.mat-tab-header .mat-tab-label.mat-tab-disabled,.mat-tab-group.mat-background-warn>.mat-tab-link-container .mat-tab-link.mat-tab-disabled,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header .mat-tab-label.mat-tab-disabled,.mat-tab-nav-bar.mat-background-warn>.mat-tab-link-container .mat-tab-link.mat-tab-disabled{color:rgba(255,255,255,.4)}.mat-tab-group.mat-background-warn>.mat-tab-header .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-warn>.mat-tab-header-pagination .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-warn>.mat-tab-link-container .mat-focus-indicator::before,.mat-tab-group.mat-background-warn>.mat-tab-header .mat-focus-indicator::before,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header-pagination .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-warn>.mat-tab-link-container .mat-focus-indicator::before,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header .mat-focus-indicator::before{border-color:#fff}.mat-tab-group.mat-background-warn>.mat-tab-header .mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-group.mat-background-warn>.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header .mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron{border-color:#fff;opacity:.4}.mat-tab-group.mat-background-warn>.mat-tab-header .mat-ripple-element,.mat-tab-group.mat-background-warn>.mat-tab-link-container .mat-ripple-element,.mat-tab-group.mat-background-warn>.mat-tab-header-pagination .mat-ripple-element,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header .mat-ripple-element,.mat-tab-nav-bar.mat-background-warn>.mat-tab-link-container .mat-ripple-element,.mat-tab-nav-bar.mat-background-warn>.mat-tab-header-pagination .mat-ripple-element{background-color:#fff;opacity:.12}.mat-toolbar{background:#212121;color:#fff}.mat-toolbar.mat-primary{background:#c2185b;color:#fff}.mat-toolbar.mat-accent{background:#b0bec5;color:rgba(0,0,0,.87)}.mat-toolbar.mat-warn{background:#f44336;color:#fff}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}.mat-tooltip{background:rgba(97,97,97,.9)}.mat-tree{background:#424242}.mat-tree-node,.mat-nested-tree-node{color:#fff}.mat-tree-node{min-height:48px}.mat-snack-bar-container{color:rgba(0,0,0,.87);background:#fafafa;box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-simple-snackbar-action{color:inherit}\n',""]);const Y=L},5791:(p,he,H)=>{"use strict";H.d(he,{Z:()=>Y});var R=H(8774),L=H.n(R)()(function(J){return J[1]});L.push([p.id,'/* You can add global styles to this file, and also import other style files */\nhtml, body {\n  height: 100%;\n}\nbody {\n  margin: 0;\n  font-family: Roboto, "Helvetica Neue", sans-serif;\n}',""]);const Y=L},3379:p=>{"use strict";var he=[];function H(L){for(var Y=-1,J=0;J<he.length;J++)if(he[J].identifier===L){Y=J;break}return Y}function R(L,Y){for(var J={},te=[],Ie=0;Ie<L.length;Ie++){var Q=L[Ie],ie=Y.base?Q[0]+Y.base:Q[0],j=J[ie]||0,$="".concat(ie," ").concat(j);J[ie]=j+1;var z=H($),ce={css:Q[1],media:Q[2],sourceMap:Q[3],supports:Q[4],layer:Q[5]};if(-1!==z)he[z].references++,he[z].updater(ce);else{var ge=ee(ce,Y);Y.byIndex=Ie,he.splice(Ie,0,{identifier:$,updater:ge,references:1})}te.push($)}return te}function ee(L,Y){var J=Y.domAPI(Y);return J.update(L),function(Q){if(Q){if(Q.css===L.css&&Q.media===L.media&&Q.sourceMap===L.sourceMap&&Q.supports===L.supports&&Q.layer===L.layer)return;J.update(L=Q)}else J.remove()}}p.exports=function(L,Y){var J=R(L=L||[],Y=Y||{});return function(Ie){Ie=Ie||[];for(var Q=0;Q<J.length;Q++){var j=H(J[Q]);he[j].references--}for(var $=R(Ie,Y),z=0;z<J.length;z++){var ge=H(J[z]);0===he[ge].references&&(he[ge].updater(),he.splice(ge,1))}J=$}}},569:p=>{"use strict";var he={};p.exports=function(ee,L){var Y=function(ee){if(void 0===he[ee]){var L=document.querySelector(ee);if(window.HTMLIFrameElement&&L instanceof window.HTMLIFrameElement)try{L=L.contentDocument.head}catch(Y){L=null}he[ee]=L}return he[ee]}(ee);if(!Y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");Y.appendChild(L)}},9216:p=>{"use strict";p.exports=function(H){var R=document.createElement("style");return H.setAttributes(R,H.attributes),H.insert(R,H.options),R}},3565:(p,he,H)=>{"use strict";p.exports=function(ee){var L=H.nc;L&&ee.setAttribute("nonce",L)}},7795:p=>{"use strict";p.exports=function(ee){var L=ee.insertStyleElement(ee);return{update:function(J){!function(ee,L,Y){var J="";Y.supports&&(J+="@supports (".concat(Y.supports,") {")),Y.media&&(J+="@media ".concat(Y.media," {"));var te=void 0!==Y.layer;te&&(J+="@layer".concat(Y.layer.length>0?" ".concat(Y.layer):""," {")),J+=Y.css,te&&(J+="}"),Y.media&&(J+="}"),Y.supports&&(J+="}");var Ie=Y.sourceMap;Ie&&"undefined"!=typeof btoa&&(J+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(Ie))))," */")),L.styleTagTransform(J,ee,L.options)}(L,ee,J)},remove:function(){!function(ee){if(null===ee.parentNode)return!1;ee.parentNode.removeChild(ee)}(L)}}}},4589:p=>{"use strict";p.exports=function(H,R){if(R.styleSheet)R.styleSheet.cssText=H;else{for(;R.firstChild;)R.removeChild(R.firstChild);R.appendChild(document.createTextNode(H))}}},3394:(p,he,H)=>{"use strict";H.d(he,{Z:()=>Ne});var R=H(3854),ee=H(3910),L=H(8026),Y=H(5422);class J{constructor(we,ue){this._delegate=we,this.firebase=ue,(0,L._addComponent)(we,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(we,ue=L._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(we);return!De.isInitialized()&&"EXPLICIT"===(null===(be=De.getComponent())||void 0===be?void 0:be.instantiationMode)&&De.initialize(),De.getImmediate({identifier:ue})}_removeServiceInstance(we,ue=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(ue)}_addComponent(we){(0,L._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,L._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new R.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ie(){const Re=function(Re){const we={},ue={__esModule:!0,initializeApp:function(st,Te={}){const se=L.initializeApp(st,Te);if((0,R.r3)(we,se.name))return we[se.name];const me=new Re(se,ue);return we[se.name]=me,me},app:De,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(st){const Te=st.name,se=Te.replace("-compat","");if(L._registerComponent(st)&&"PUBLIC"===st.type){const me=(fe=De())=>{if("function"!=typeof fe[se])throw Ie.create("invalid-app-argument",{appName:Te});return fe[se]()};void 0!==st.serviceProps&&(0,R.ZB)(me,st.serviceProps),ue[se]=me,Re.prototype[se]=function(...fe){return this._getService.bind(this,Te).apply(this,st.multipleInstances?fe:[])}}return"PUBLIC"===st.type?ue[se]:null},removeApp:function(st){delete we[st]},useAsService:function(st,Te){return"serverAuth"===Te?null:Te},modularAPIs:L}};function De(st){if(!(0,R.r3)(we,st=st||L._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:st});return we[st]}return ue.default=ue,Object.defineProperty(ue,"apps",{get:function(){return Object.keys(we).map(st=>we[st])}}),De.App=Re,ue}(J);return Re.INTERNAL=Object.assign(Object.assign({},Re.INTERNAL),{createFirebaseNamespace:ie,extendNamespace:function(ue){(0,R.ZB)(Re,ue)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),Re}(),$=new Y.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Re=self.firebase.SDK_VERSION;Re&&Re.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=j;(0,L.registerVersion)("@firebase/app-compat","0.1.19",undefined)},8026:(p,he,H)=>{"use strict";H.r(he),H.d(he,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>mo,_DEFAULT_ENTRY_NAME:()=>At,_addComponent:()=>kn,_addOrOverwriteComponent:()=>Nn,_apps:()=>bt,_clearComponents:()=>Yr,_components:()=>Wt,_getProvider:()=>Sn,_registerComponent:()=>an,_removeServiceInstance:()=>fn,deleteApp:()=>Bs,getApp:()=>Di,getApps:()=>An,initializeApp:()=>Us,onLog:()=>Qi,registerVersion:()=>Si,setLogLevel:()=>Jr});var R=H(8239),ee=H(3910),L=H(5422),Y=H(3854),J=H(6676);class te{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(He=>{if(function(Pe){const Ce=Pe.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(He)){const at=He.getImmediate();return`${at.library}/${at.version}`}return null}).filter(He=>He).join(" ")}}const Q="@firebase/app",j=new L.Yd("@firebase/app"),At="[DEFAULT]",Kt={[Q]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bt=new Map,Wt=new Map;function kn(Pe,Ce){try{Pe.container.addComponent(Ce)}catch(He){j.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Pe.name}`,He)}}function Nn(Pe,Ce){Pe.container.addOrOverwriteComponent(Ce)}function an(Pe){const Ce=Pe.name;if(Wt.has(Ce))return j.debug(`There were multiple attempts to register component ${Ce}.`),!1;Wt.set(Ce,Pe);for(const He of bt.values())kn(He,Pe);return!0}function Sn(Pe,Ce){const He=Pe.container.getProvider("heartbeat").getImmediate({optional:!0});return He&&He.triggerHeartbeat(),Pe.container.getProvider(Ce)}function fn(Pe,Ce,He=At){Sn(Pe,Ce).clearInstance(He)}function Yr(){Wt.clear()}const _r=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class jr{constructor(Ce,He,at){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},He),this._name=He.name,this._automaticDataCollectionEnabled=He.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const mo="9.6.8";function Us(Pe,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const He=Object.assign({name:At,automaticDataCollectionEnabled:!1},Ce),at=He.name;if("string"!=typeof at||!at)throw _r.create("bad-app-name",{appName:String(at)});const Vt=bt.get(at);if(Vt){if((0,Y.vZ)(Pe,Vt.options)&&(0,Y.vZ)(He,Vt.config))return Vt;throw _r.create("duplicate-app",{appName:at})}const gt=new ee.H0(at);for(const Mn of Wt.values())gt.addComponent(Mn);const rn=new jr(Pe,He,gt);return bt.set(at,rn),rn}function Di(Pe=At){const Ce=bt.get(Pe);if(!Ce)throw _r.create("no-app",{appName:Pe});return Ce}function An(){return Array.from(bt.values())}function Bs(Pe){return ot.apply(this,arguments)}function ot(){return(ot=(0,R.Z)(function*(Pe){const Ce=Pe.name;bt.has(Ce)&&(bt.delete(Ce),yield Promise.all(Pe.container.getProviders().map(He=>He.delete())),Pe.isDeleted=!0)})).apply(this,arguments)}function Si(Pe,Ce,He){var at;let Vt=null!==(at=Kt[Pe])&&void 0!==at?at:Pe;He&&(Vt+=`-${He}`);const gt=Vt.match(/\s|\//),rn=Ce.match(/\s|\//);if(gt||rn){const Mn=[`Unable to register library "${Vt}" with version "${Ce}":`];return gt&&Mn.push(`library name "${Vt}" contains illegal characters (whitespace or "/")`),gt&&rn&&Mn.push("and"),rn&&Mn.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void j.warn(Mn.join(" "))}an(new ee.wA(`${Vt}-version`,()=>({library:Vt,version:Ce}),"VERSION"))}function Qi(Pe,Ce){if(null!==Pe&&"function"!=typeof Pe)throw _r.create("invalid-log-argument");(0,L.Am)(Pe,Ce)}function Jr(Pe){(0,L.Ub)(Pe)}const $t="firebase-heartbeat-store";let Xe=null;function Et(){return Xe||(Xe=(0,J.openDb)("firebase-heartbeat-database",1,Pe=>{switch(Pe.oldVersion){case 0:Pe.createObjectStore($t)}}).catch(Pe=>{throw _r.create("storage-open",{originalErrorMessage:Pe.message})})),Xe}function tn(){return(tn=(0,R.Z)(function*(Pe){try{return(yield Et()).transaction($t).objectStore($t).get(It(Pe))}catch(Ce){throw _r.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function yr(Pe,Ce){return rr.apply(this,arguments)}function rr(){return(rr=(0,R.Z)(function*(Pe,Ce){try{const at=(yield Et()).transaction($t,"readwrite");return yield at.objectStore($t).put(Ce,It(Pe)),at.complete}catch(He){throw _r.create("storage-set",{originalErrorMessage:He.message})}})).apply(this,arguments)}function Wo(){return(Wo=(0,R.Z)(function*(Pe){try{const He=(yield Et()).transaction($t,"readwrite");return yield He.objectStore($t).delete(It(Pe)),He.complete}catch(Ce){throw _r.create("storage-delete",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function It(Pe){return`${Pe.name}!${Pe.options.appId}`}class ne{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const He=this.container.getProvider("app").getImmediate();this._storage=new Me(He),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var Ce=this;return(0,R.Z)(function*(){const at=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Vt=(new Date).toISOString().substring(0,10);if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),!Ce._heartbeatsCache.some(gt=>gt.date===Vt))return Ce._heartbeatsCache.push({date:Vt,userAgent:at}),Ce._heartbeatsCache=Ce._heartbeatsCache.filter(gt=>{const rn=new Date(gt.date).valueOf();return Date.now()-rn<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,R.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache)return"";const{heartbeatsToSend:He,unsentEntries:at}=function(Pe,Ce=1024){const He=[];let at=Pe.slice();for(const Vt of Pe){const gt=He.find(rn=>rn.userAgent===Vt.userAgent);if(gt){if(gt.dates.push(Vt.date),pe(He)>Ce){gt.dates.pop();break}}else if(He.push({userAgent:Vt.userAgent,dates:[Vt.date]}),pe(He)>Ce){He.pop();break}at=at.slice(1)}return{heartbeatsToSend:He,unsentEntries:at}}(Ce._heartbeatsCache),Vt=(0,Y.h$)(JSON.stringify({version:2,heartbeats:He}));return at.length>0?(Ce._heartbeatsCache=at,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache=null,Ce._storage.deleteAll()),Vt})()}}class Me{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,R.Z)(function*(){if(yield Ce._canUseIndexedDBPromise){const at=yield function(Pe){return tn.apply(this,arguments)}(Ce.app);return(null==at?void 0:at.heartbeats)||[]}return[]})()}overwrite(Ce){var He=this;return(0,R.Z)(function*(){if(yield He._canUseIndexedDBPromise)return yr(He.app,{heartbeats:Ce})})()}add(Ce){var He=this;return(0,R.Z)(function*(){if(yield He._canUseIndexedDBPromise){const Vt=yield He.read();return yr(He.app,{heartbeats:[...Vt,...Ce]})}})()}delete(Ce){var He=this;return(0,R.Z)(function*(){if(yield He._canUseIndexedDBPromise){const Vt=yield He.read();return yr(He.app,{heartbeats:Vt.filter(gt=>!Ce.includes(gt))})}})()}deleteAll(){var Ce=this;return(0,R.Z)(function*(){if(yield Ce._canUseIndexedDBPromise)return function(Pe){return Wo.apply(this,arguments)}(Ce.app)})()}}function pe(Pe){return(0,Y.h$)(JSON.stringify({version:2,heartbeats:Pe})).length}an(new ee.wA("platform-logger",Ce=>new te(Ce),"PRIVATE")),an(new ee.wA("heartbeat",Ce=>new ne(Ce),"PRIVATE")),Si(Q,"0.7.18",""),Si(Q,"0.7.18","esm2017"),Si("fire-js","")},3910:(p,he,H)=>{"use strict";H.d(he,{wA:()=>L,H0:()=>Q,zt:()=>J});var R=H(8239),ee=H(3854);class L{constructor(j,$,z){this.name=j,this.instanceFactory=$,this.type=z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const Y="[DEFAULT]";class J{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const z=new ee.BH;if(this.instancesDeferred.set($,z),this.isInitialized($)||this.shouldAutoInitialize())try{const ce=this.getOrInitializeService({instanceIdentifier:$});ce&&z.resolve(ce)}catch(ce){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const z=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),ce=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(z)&&!this.shouldAutoInitialize()){if(ce)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:z})}catch(ge){if(ce)return null;throw ge}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if("EAGER"===j.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Y})}catch($){}for(const[$,z]of this.instancesDeferred.entries()){const ce=this.normalizeInstanceIdentifier($);try{const ge=this.getOrInitializeService({instanceIdentifier:ce});z.resolve(ge)}catch(ge){}}}}clearInstance(j=Y){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,R.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(z=>"INTERNAL"in z).map(z=>z.INTERNAL.delete()),...$.filter(z=>"_delete"in z).map(z=>z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=Y){return this.instances.has(j)}getOptions(j=Y){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,z=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(z))throw Error(`${this.name}(${z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ce=this.getOrInitializeService({instanceIdentifier:z,options:$});for(const[ge,Ne]of this.instancesDeferred.entries())z===this.normalizeInstanceIdentifier(ge)&&Ne.resolve(ce);return ce}onInit(j,$){var z;const ce=this.normalizeInstanceIdentifier($),ge=null!==(z=this.onInitCallbacks.get(ce))&&void 0!==z?z:new Set;ge.add(j),this.onInitCallbacks.set(ce,ge);const Ne=this.instances.get(ce);return Ne&&j(Ne,ce),()=>{ge.delete(j)}}invokeOnInitCallbacks(j,$){const z=this.onInitCallbacks.get($);if(z)for(const ce of z)try{ce(j,$)}catch(ge){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let z=this.instances.get(j);if(!z&&this.component&&(z=this.component.instanceFactory(this.container,{instanceIdentifier:(ie=j,ie===Y?void 0:ie),options:$}),this.instances.set(j,z),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(z,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,z)}catch(ce){}var ie;return z||null}normalizeInstanceIdentifier(j=Y){return this.component?this.component.multipleInstances?j:Y:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Q{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new J(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},5422:(p,he,H)=>{"use strict";H.d(he,{in:()=>ee,Yd:()=>Ie,Ub:()=>Q,Am:()=>ie});const R=[];var ee=(()=>{return(j=ee||(ee={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",ee;var j})();const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Y=ee.INFO,J={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},te=(j,$,...z)=>{if($<j.logLevel)return;const ce=(new Date).toISOString(),ge=J[$];if(!ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[ge](`[${ce}]  ${j.name}:`,...z)};class Ie{constructor($){this.name=$,this._logLevel=Y,this._logHandler=te,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?L[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function Q(j){R.forEach($=>{$.setLogLevel(j)})}function ie(j,$){for(const z of R){let ce=null;$&&$.level&&(ce=L[$.level]),z.userLogHandler=null===j?null:(ge,Ne,...Re)=>{const we=Re.map(ue=>{if(null==ue)return null;if("string"==typeof ue)return ue;if("number"==typeof ue||"boolean"==typeof ue)return ue.toString();if(ue instanceof Error)return ue.message;try{return JSON.stringify(ue)}catch(be){return null}}).filter(ue=>ue).join(" ");Ne>=(null!=ce?ce:ge.logLevel)&&j({level:ee[Ne].toLowerCase(),message:we,args:Re,type:ge.name})}}}},8239:(p,he,H)=>{"use strict";function R(L,Y,J,te,Ie,Q,ie){try{var j=L[Q](ie),$=j.value}catch(z){return void J(z)}j.done?Y($):Promise.resolve($).then(te,Ie)}function ee(L){return function(){var Y=this,J=arguments;return new Promise(function(te,Ie){var Q=L.apply(Y,J);function ie($){R(Q,te,Ie,ie,j,"next",$)}function j($){R(Q,te,Ie,ie,j,"throw",$)}ie(void 0)})}}H.d(he,{Z:()=>ee})}},$C={};function Ge(p){var he=$C[p];if(void 0!==he)return he.exports;var H=$C[p]={id:p,loaded:!1,exports:{}};return BF[p].call(H.exports,H,H.exports,Ge),H.loaded=!0,H.exports}Ge.n=p=>{var he=p&&p.__esModule?()=>p.default:()=>p;return Ge.d(he,{a:he}),he},Ge.d=(p,he)=>{for(var H in he)Ge.o(he,H)&&!Ge.o(p,H)&&Object.defineProperty(p,H,{enumerable:!0,get:he[H]})},Ge.hmd=p=>((p=Object.create(p)).children||(p.children=[]),Object.defineProperty(p,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+p.id)}}),p),Ge.o=(p,he)=>Object.prototype.hasOwnProperty.call(p,he),Ge.r=p=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})};var Cx={};return(()=>{"use strict";var p=Ge(3379),he=Ge.n(p),H=Ge(7795),R=Ge.n(H),ee=Ge(569),L=Ge.n(ee),Y=Ge(3565),J=Ge.n(Y),te=Ge(9216),Ie=Ge.n(te),Q=Ge(4589),ie=Ge.n(Q),j=Ge(269),$={};$.styleTagTransform=ie(),$.setAttributes=J(),$.insert=L().bind(null,"head"),$.domAPI=R(),$.insertStyleElement=Ie(),he()(j.Z,$)})(),(()=>{"use strict";var p=Ge(3379),he=Ge.n(p),H=Ge(7795),R=Ge.n(H),ee=Ge(569),L=Ge.n(ee),Y=Ge(3565),J=Ge.n(Y),te=Ge(9216),Ie=Ge.n(te),Q=Ge(4589),ie=Ge.n(Q),j=Ge(5791),$={};$.styleTagTransform=ie(),$.setAttributes=J(),$.insert=L().bind(null,"head"),$.domAPI=R(),$.insertStyleElement=Ie(),he()(j.Z,$)})(),(()=>{"use strict";Ge.r(Cx),Ge.d(Cx,{bootstrap:()=>gK,mount:()=>_K,unmount:()=>yK});var p=Ge(7716);let he=null;function H(){return he}const Y=new p.OlP("DocumentToken");let J=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:te,token:n,providedIn:"platform"}),n})();function te(){return(0,p.LFG)(Q)}const Ie=new p.OlP("Location Initialized");let Q=(()=>{class n extends J{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(t){const r=H().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=H().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Y))},n.\u0275prov=(0,p.Yz7)({factory:j,token:n,providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function j(){return new Q((0,p.LFG)(Y))}function $(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ce(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:Ne,token:n,providedIn:"root"}),n})();function Ne(n){const e=(0,p.LFG)(Y).location;return new we((0,p.LFG)(J),e&&e.origin||"")}const Re=new p.OlP("appBaseHref");let we=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ce(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,l){const u=this.prepareExternalUrl(i+ce(l));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){const u=this.prepareExternalUrl(i+ce(l));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(J),p.LFG(Re,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ue=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,l){let u=this.prepareExternalUrl(i+ce(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){let u=this.prepareExternalUrl(i+ce(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(J),p.LFG(Re,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=z(qe(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ce(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ce(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ce(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ge),p.LFG(J))},n.normalizeQueryParams=ce,n.joinWithSlash=$,n.stripTrailingSlash=z,n.\u0275prov=(0,p.Yz7)({factory:De,token:n,providedIn:"root"}),n})();function De(){return new be((0,p.LFG)(ge),(0,p.LFG)(J))}function qe(n){return n.replace(/\/index.html$/,"")}var st=(()=>((st=st||{})[st.Zero=0]="Zero",st[st.One=1]="One",st[st.Two=2]="Two",st[st.Few=3]="Few",st[st.Many=4]="Many",st[st.Other=5]="Other",st))();const _r=p.kL8;class fs{}let Pt=(()=>{class n extends fs{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(_r(r||this.locale)(t)){case st.Zero:return"zero";case st.One:return"one";case st.Two:return"two";case st.Few:return"few";case st.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function go(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(l)}return null}class kr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ra=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,l,u)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new kr(null,this._ngForOf,-1,-1),null===u?void 0:u),y=new ps(i,f);r.push(y)}else if(null==u)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const f=this._viewContainer.get(l);this._viewContainer.move(f,u);const y=new ps(i,f);r.push(y)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,l=this._viewContainer.length;i<l;i++){const u=this._viewContainer.get(i);u.context.index=i,u.context.count=l,u.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class ps{constructor(e,t){this.record=e,this.view=t}}let qt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ku,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ku{constructor(){this.$implicit=null,this.ngIf=null}}function kc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Ru=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:fs,useClass:Pt}]}),n})();function _s(n){return"server"===n}let $r=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Pu((0,p.LFG)(Y),window)}),n})();class Pu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const u=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_i(this.window.history)||_i(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function _i(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ll{}class ts extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ts,he||(he=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(vo=vo||document.querySelector("base"),vo?vo.getAttribute("href"):null);return null==t?null:function(n){Va=Va||document.createElement("a"),Va.setAttribute("href",n);const e=Va.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return go(document.cookie,e)}}let Va,vo=null;const Ua=new p.OlP("TRANSITION_ID"),Fu=[{provide:p.ip1,useFactory:function(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=H(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Ua,Y,p.zs3],multi:!0}];class Vl{static init(){(0,p.VLi)(new Vl)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let l=i.length,u=!1;const f=function(y){u=u||y,l--,0==l&&r(u)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?H().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Eo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ba=new p.OlP("EventManagerPlugins");let Ws=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const u=i[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ba),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Uu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=H().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ja=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends ja{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ut),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ut))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Y))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ut(n){H().remove(n)}const Oc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_n=/%COMP%/g;function $l(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?$l(n,i,t):(i=i.replace(_n,n),t.push(i))}return t}function ea(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let On=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new yi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Qf(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new $a(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=$l(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ws),p.LFG(Fe),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class yi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Oc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=Oc[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Oc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ea(r)):this.eventManager.addEventListener(e,t,ea(r))}}class Qf extends yi{constructor(e,t,r,i){super(e),this.component=r;const l=$l(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(_n,i+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(_n,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class $a extends yi{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=$l(i.id,i.styles,[]);for(let u=0;u<l.length;u++){const f=document.createElement("style");f.textContent=l[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let oh=(()=>{class n extends Uu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Y))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Lc=["alt","control","meta","shift"],$u={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ta={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let uh=(()=>{class n extends Uu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),u=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>H().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let u="";if(Lc.forEach(y=>{const E=r.indexOf(y);E>-1&&(r.splice(E,1),u+=y+".")}),u+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=u,f}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ta.hasOwnProperty(e)&&(e=ta[e]))}return $u[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lc.forEach(l=>{l!=i&&Pn[l](t)&&(r+=l+".")}),r+=i,r}static eventCallback(t,r,i){return l=>{n.getEventFullKey(l)===t&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Y))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Jl=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function(){ts.makeCurrent(),Vl.init()},multi:!0},{provide:Y,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),Wa=[[],{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:Ba,useClass:oh,multi:!0,deps:[Y,p.R0b,p.Lbi]},{provide:Ba,useClass:uh,multi:!0,deps:[Y]},[],{provide:On,useClass:On,deps:[Ws,Fe,p.AFp]},{provide:p.FYo,useExisting:On},{provide:ja,useExisting:Fe},{provide:Fe,useClass:Fe,deps:[Y]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Ws,useClass:Ws,deps:[Ba,p.R0b]},{provide:Ll,useClass:Eo,deps:[]},[]];let Uc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Ua,useExisting:p.AFp},Fu]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Wa,imports:[Ru,p.hGG]}),n})();"undefined"!=typeof window&&window;var yn=Ge(4402),lt=Ge(5917),Fn=Ge(9765),Bc=Ge(7971);class bn extends Fn.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Bc.N;return this._value}next(e){super.next(this._value=e)}}var sa=Ge(4869),Za=Ge(9796),ar=Ge(7393);class Ya extends ar.L{notifyNext(e,t,r,i,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class jc extends ar.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Qa=Ge(7444),Mr=Ge(7574);function Vg(n,e,t,r,i=new jc(n,t,r)){if(!i.closed)return e instanceof Mr.y?e.subscribe(i):(0,Qa.s)(e)(i)}var Ks=Ge(6693);const Ja={};class Hc{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new $c(e,this.resultSelector))}}class $c extends Ya{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Ja),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Vg(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,u=this.toRespond?i[r]===Ja?--this.toRespond:this.toRespond:0;i[r]=t,0===u&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Xa=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Zs=Ge(3282);function Cs(...n){return(0,Zs.J)(1)((0,lt.of)(...n))}var Rr=Ge(9193);function Ys(n){return new Mr.y(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?(0,yn.D)(t):(0,Rr.c)()).subscribe(e)})}var Gc=Ge(2441),_t=Ge(8002),vr=Ge(5345);function lr(n,e){return"function"==typeof e?t=>t.pipe(lr((r,i)=>(0,yn.D)(n(r,i)).pipe((0,_t.U)((l,u)=>e(r,l,i,u))))):t=>t.lift(new hv(n))}class hv{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ug(e,this.project))}}class Ug extends vr.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new vr.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,vr.ft)(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const tp=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function mn(n){return e=>0===n?(0,Rr.c)():e.lift(new gh(n))}class gh{constructor(e){if(this.total=e,this.total<0)throw new tp}call(e,t){return t.subscribe(new Yu(e,this.total))}}class Yu extends ar.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Qu(...n){const e=n[n.length-1];return(0,sa.K)(e)?(n.pop(),t=>Cs(n,t,e)):t=>Cs(n,t)}function Io(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new Bg(n,e,t))}}class Bg{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new _h(e,this.accumulator,this.seed,this.hasSeed))}}class _h extends ar.L{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Qs(n,e){return function(r){return r.lift(new yh(n,e))}}class yh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new jg(e,this.predicate,this.thisArg))}}class jg extends ar.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Is(n){return function(t){const r=new tc(n),i=t.lift(r);return r.caught=i}}class tc{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Js(e,this.selector,this.caught))}}class Js extends vr.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new vr.IY(this);this.add(r);const i=(0,vr.ft)(t,r);i!==r&&this.add(i)}}}var Nr=Ge(9773);function ln(n,e){return(0,Nr.zg)(n,e,1)}function ki(n){return function(t){return 0===n?(0,Rr.c)():t.lift(new Mi(n))}}class Mi{constructor(e){if(this.total=e,this.total<0)throw new tp}call(e,t){return t.subscribe(new np(e,this.total))}}class np extends ar.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let l=0;l<r;l++){const u=t++%r;e.next(i[u])}}e.complete()}}function rp(n=el){return e=>e.lift(new rs(n))}class rs{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Ts(e,this.errorFactory))}}class Ts extends ar.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function el(){return new Xa}function ri(n=null){return e=>e.lift(new Xs(n))}class Xs{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new bh(e,this.defaultValue))}}class bh extends ar.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var zc=Ge(4487);function To(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qs((i,l)=>n(i,l,r)):zc.y,mn(1),t?ri(e):rp(()=>new Xa))}var cr=Ge(3342),Ju=Ge(1307),zr=Ge(5319);class eo{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Hg(e,this.callback))}}class Hg extends ar.L{constructor(e,t){super(e),this.add(new zr.w(t))}}class to{constructor(e,t){this.id=e,this.url=t}}class I extends to{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class x extends to{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class O extends to{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class W extends to{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oe extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _e extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ue extends to{constructor(e,t,r,i,l){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qe extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class et extends to{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gt{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sn{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ln{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ri{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Er{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class Ni{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function wr(n){return new Ni(n)}const no="ngNavigationCancelingError";function Xu(n){const e=Error("NavigationCancelingError: "+n);return e[no]=!0,e}function ip(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const u=r[l],f=n[l];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Wr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let l=0;l<t.length;l++)if(i=t[l],!qc(n[i],e[i]))return!1;return!0}function qc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,l)=>r[l]===i)}return n===e}function sp(n){return Array.prototype.concat.apply([],n)}function ed(n){return n.length>0?n[n.length-1]:null}function ii(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function vi(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,yn.D)(Promise.resolve(n)):(0,lt.of)(n)}const vh={exact:function nc(n,e,t){if(!Do(n.segments,e.segments)||!wh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nc(n.children[r],e.children[r],t))return!1;return!0},subset:ap},la={exact:function(n,e){return Wr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qc(n[t],e[t]))},ignored:()=>!0};function op(n,e,t){return vh[t.paths](n.root,e.root,t.matrixParams)&&la[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ap(n,e,t){return zg(n,e,e.segments,t)}function zg(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Do(i,t)||e.hasChildren()||!wh(i,t,r))}if(n.segments.length===t.length){if(!Do(n.segments,t)||!wh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ap(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(Do(n.segments,i)&&wh(n.segments,i,r)&&n.children[Rt])&&zg(n.children[Rt],e,l,r)}}function wh(n,e,t){return e.every((r,i)=>la[t](n[i].parameters,r.parameters))}class Ds{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wr(this.queryParams)),this._queryParamMap}toString(){return mv.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ii(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ch(this)}}class td{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=wr(this.parameters)),this._parameterMap}toString(){return Kc(this)}}function Do(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Wg{}class qg{parse(e){const t=new bv(e);return new Ds(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${ca(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ua(t)}=${ua(i)}`).join("&"):`${ua(t)}=${ua(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const mv=new qg;function Ch(n){return n.segments.map(e=>Kc(e)).join("/")}function ca(n,e){if(!n.hasChildren())return Ch(n);if(e){const t=n.children[Rt]?ca(n.children[Rt],!1):"",r=[];return ii(n.children,(i,l)=>{l!==Rt&&r.push(`${l}:${ca(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return ii(n.children,(r,i)=>{i===Rt&&(t=t.concat(e(r,i)))}),ii(n.children,(r,i)=>{i!==Rt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Rt?[ca(n.children[Rt],!1)]:[`${i}:${ca(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${Ch(n)}/${t[0]}`:`${Ch(n)}/(${t.join("//")})`}}function Ih(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ua(n){return Ih(n).replace(/%3B/gi,";")}function lp(n){return Ih(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nd(n){return decodeURIComponent(n)}function rd(n){return nd(n.replace(/\+/g,"%20"))}function Kc(n){return`${lp(n.path)}${function(n){return Object.keys(n).map(e=>`;${lp(e)}=${lp(n[e])}`).join("")}(n.parameters)}`}const Zg=/^[^\/()?;=#]+/;function Ss(n){const e=n.match(Zg);return e?e[0]:""}const _v=/^[^=?&#]+/,Qg=/^[^?&#]+/;class bv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Ht(e,t)),r}parseSegment(){const e=Ss(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new td(nd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ss(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ss(this.remaining);i&&(r=i,this.capture(r))}e[nd(t)]=nd(r)}parseQueryParam(e){const t=function(n){const e=n.match(_v);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(Qg);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=rd(t),l=rd(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(l)}else e[i]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ss(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Rt);const u=this.parseChildren();t[l]=1===Object.keys(u).length?u[Rt]:new Ht([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class So{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=rc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=rc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ao(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ao(e,this._root).map(t=>t.value)}}function rc(n,e){if(n===e.value)return e;for(const t of e.children){const r=rc(n,t);if(r)return r}return null}function Ao(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ao(n,t);if(r.length)return r.unshift(e),r}return[]}class da{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function id(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Th extends So{constructor(e,t){super(e),this.snapshot=t,Sh(this,e)}toString(){return this.snapshot.toString()}}function Jg(n,e){const t=function(n,e){const u=new Dh([],{},{},"",{},Rt,e,null,n.root,-1,{});return new e_("",new da(u,[]))}(n,e),r=new bn([new td("",{})]),i=new bn({}),l=new bn({}),u=new bn({}),f=new bn(""),y=new rl(r,i,u,f,l,Rt,e,t.root);return y.snapshot=t.root,new Th(new da(y,[]),t)}class rl{constructor(e,t,r,i,l,u,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>wr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>wr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],l=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Dh{constructor(e,t,r,i,l,u,f,y,E,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this.routeConfig=y,this._urlSegment=E,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class e_ extends So{constructor(e,t){super(t),this.url=e,Sh(this,t)}toString(){return t_(this._root)}}function Sh(n,e){e.value._routerState=n,e.children.forEach(t=>Sh(n,t))}function t_(n){const e=n.children.length>0?` { ${n.children.map(t_).join(", ")} } `:"";return`${n.value}${e}`}function ic(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ah(n,e){return Wr(n.params,e.params)&&function(n,e){return Do(n,e)&&n.every((t,r)=>Wr(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Ah(n.parent,e.parent))}function il(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return il(n,r,i);return il(n,r)})}(n,e,t);return new da(r,i)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const u=l.route;return xh(e,u),u}}const r=function(n){return new rl(new bn(n.url),new bn(n.params),new bn(n.queryParams),new bn(n.fragment),new bn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(l=>il(n,l));return new da(r,i)}}function xh(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)xh(n.children[t],e.children[t])}function sd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Zc(n){return"object"==typeof n&&null!=n&&n.outlets}function od(n,e,t,r,i){let l={};return r&&ii(r,(u,f)=>{l[f]=Array.isArray(u)?u.map(y=>`${y}`):`${u}`}),new Ds(t.root===n?e:Mh(t.root,n,e),l,i)}function Mh(n,e,t){const r={};return ii(n.children,(i,l)=>{r[l]=i===e?t:Mh(i,e,t)}),new Ht(n.segments,r)}class sc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Zc);if(i&&i!==ed(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class r_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function o_(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return Rh(n,e,t);const r=function(n,e,t){let r=0,i=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return l;const u=n.segments[i],f=t[r];if(Zc(f))break;const y=`${f}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&E&&"object"==typeof E&&void 0===E.outlets){if(!c_(y,E,u))return l;r+=2}else{if(!c_(y,{},u))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Ht(n.segments.slice(0,r.pathIndex),{});return l.children[Rt]=new Ht(n.segments.slice(r.pathIndex),n.children),Rh(l,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?ha(n,e,t):r.match?Rh(n,0,i):ha(n,e,t)}function Rh(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function(n){return Zc(n[0])?n[0].outlets:{[Rt]:n}}(t),i={};return ii(r,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[u]=o_(n.children[u],e,l))}),ii(n.children,(l,u)=>{void 0===r[u]&&(i[u]=l)}),new Ht(n.segments,i)}}function ha(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const l=t[i];if(Zc(l)){const y=l_(l.outlets);return new Ht(r,y)}if(0===i&&sd(t[0])){r.push(new td(n.segments[e].path,ad(t[0]))),i++;continue}const u=Zc(l)?l.outlets[Rt]:`${l}`,f=i<t.length-1?t[i+1]:null;u&&f&&sd(f)?(r.push(new td(u,ad(f))),i+=2):(r.push(new td(u,{})),i++)}return new Ht(r,{})}function l_(n){const e={};return ii(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ha(new Ht([],{}),0,t))}),e}function ad(n){const e={};return ii(n,(t,r)=>e[r]=`${t}`),e}function c_(n,e,t){return n==t.path&&Wr(e,t.parameters)}class Ev{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ic(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=id(t);e.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,i[u],r),delete i[u]}),ii(i,(l,u)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(i===l)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=id(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=id(t);e.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new tl(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Ri(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(ic(i),i===l)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),u_(f.route)}else{const f=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=f?f.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=y,u.outlet&&u.outlet.activateWith(i,y),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}function u_(n){ic(n.value),n.children.forEach(u_)}class Yc{constructor(e,t){this.routes=e,this.module=t}}function ko(n){return"function"==typeof n}function oc(n){return n instanceof Ds}const Mo=Symbol("INITIAL_VALUE");function Cr(){return lr(n=>function(...n){let e,t;return(0,sa.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Za.k)(n[0])&&(n=n[0]),(0,Ks.n)(n,t).lift(new Hc(e))}(n.map(e=>e.pipe(mn(1),Qu(Mo)))).pipe(Io((e,t)=>{let r=!1;return t.reduce((i,l,u)=>i!==Mo?i:(l===Mo&&(r=!0),r||!1!==l&&u!==t.length-1&&!oc(l)?i:l),e)},Mo),Qs(e=>e!==Mo),(0,_t.U)(e=>oc(e)?e:!0===e),mn(1)))}let Qc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:function(){return[b_]},encapsulation:2}),n})();function ld(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];h_(r,qr(e,r))}}function h_(n,e){n.children&&ld(n.children,e)}function qr(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ac(n){const e=n.children&&n.children.map(ac),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Qc),t}function Zn(n){return n.outlet||Rt}function fp(n,e){const t=n.filter(r=>Zn(r)===e);return t.push(...n.filter(r=>Zn(r)!==e)),t}const f_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function cd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},f_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||ip)(t,n,e);if(!l)return Object.assign({},f_);const u={};ii(l.posParams,(y,E)=>{u[E]=y.path});const f=l.consumed.length>0?Object.assign(Object.assign({},u),l.consumed[l.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function Ph(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Lh(n,e,r)&&Zn(r)!==Rt)}(n,t,r)){const u=new Ht(e,function(n,e,t,r){const i={};i[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Zn(l)!==Rt){const u=new Ht([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Zn(l)]=u}return i}(n,e,r,new Ht(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Lh(n,e,r))}(n,t,r)){const u=new Ht(n.segments,function(n,e,t,r,i,l){const u={};for(const f of r)if(Lh(n,t,f)&&!i[Zn(f)]){const y=new Ht([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===l?n.segments.length:e.length,u[Zn(f)]=y}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const l=new Ht(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function Lh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ro(n,e,t,r){return!!(Zn(n)===r||r!==Rt&&Lh(e,t,n))&&("**"===n.path||cd(e,n,t).matched)}function lc(n,e,t){return 0===e.length&&!n.children[t]}class sl{constructor(e){this.segmentGroup=e||null}}class Vh{constructor(e){this.urlTree=e}}function Uh(n){return new Mr.y(e=>e.error(new sl(n)))}function gp(n){return new Mr.y(e=>e.error(new Vh(n)))}function p_(n){return new Mr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Iv{constructor(e,t,r,i,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Ph(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,_t.U)(l=>this.createUrlTree(m(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Is(l=>{if(l instanceof Vh)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof sl?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,_t.U)(i=>this.createUrlTree(m(i),e.queryParams,e.fragment))).pipe(Is(i=>{throw i instanceof sl?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Ht([],{[Rt]:e}):e;return new Ds(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(l=>new Ht([],l))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,yn.D)(i).pipe(ln(l=>{const u=r.children[l],f=fp(t,l);return this.expandSegmentGroup(e,f,u,l).pipe((0,_t.U)(y=>({segment:y,outlet:l})))}),Io((l,u)=>(l[u.outlet]=u.segment,l),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qs((i,l)=>n(i,l,r)):zc.y,ki(1),t?ri(e):rp(()=>new Xa))}())}expandSegment(e,t,r,i,l,u){return(0,yn.D)(r).pipe(ln(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,l,u).pipe(Is(E=>{if(E instanceof sl)return(0,lt.of)(null);throw E}))),To(f=>!!f),Is((f,y)=>{if(f instanceof Xa||"EmptyError"===f.name){if(lc(t,i,l))return(0,lt.of)(new Ht([],{}));throw new sl(t)}throw f}))}expandSegmentAgainstRoute(e,t,r,i,l,u,f){return Ro(i,t,l,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,l,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u):Uh(t):Uh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?gp(l):this.lineralizeSegments(r,l).pipe((0,Nr.zg)(u=>{const f=new Ht(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){const{matched:f,consumedSegments:y,lastChild:E,positionalParamSegments:D}=cd(t,i,l);if(!f)return Uh(t);const S=this.applyRedirectCommands(y,i.redirectTo,D);return i.redirectTo.startsWith("/")?gp(S):this.lineralizeSegments(i,S).pipe((0,Nr.zg)(N=>this.expandSegment(e,t,r,N.concat(l.slice(E)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,lt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,_t.U)(N=>(r._loadedConfig=N,new Ht(i,{})))):(0,lt.of)(new Ht(i,{}));const{matched:u,consumedSegments:f,lastChild:y}=cd(t,r,i);if(!u)return Uh(t);const E=i.slice(y);return this.getChildConfig(e,r,i).pipe((0,Nr.zg)(S=>{const N=S.module,B=S.routes,{segmentGroup:G,slicedSegments:de}=Ph(t,f,E,B),Ae=new Ht(G.segments,G.children);if(0===de.length&&Ae.hasChildren())return this.expandChildren(N,B,Ae).pipe((0,_t.U)(mt=>new Ht(f,mt)));if(0===B.length&&0===de.length)return(0,lt.of)(new Ht(f,{}));const We=Zn(r)===l;return this.expandSegment(N,Ae,B,de,We?Rt:l,!0).pipe((0,_t.U)(Mt=>new Ht(f.concat(Mt.segments),Mt.children)))}))}getChildConfig(e,t,r){return t.children?(0,lt.of)(new Yc(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,lt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Nr.zg)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,_t.U)(l=>(t._loadedConfig=l,l))):(n=t,new Mr.y(e=>e.error(Xu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,lt.of)(new Yc([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return(0,lt.of)(!0);const l=i.map(u=>{const f=e.get(u);let y;if((n=f)&&ko(n.canLoad))y=f.canLoad(t,r);else{if(!ko(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}var n;return vi(y)});return(0,lt.of)(l).pipe(Cr(),(0,cr.b)(u=>{if(!oc(u))return;const f=Xu(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw f.url=u,f}),(0,_t.U)(u=>!0===u))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,lt.of)(r);if(i.numberOfChildren>1||!i.children[Rt])return p_(e.redirectTo);i=i.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const l=this.createSegmentGroup(e,t.root,r,i);return new Ds(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ii(e,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=t[f]}else r[l]=i}),r}createSegmentGroup(e,t,r,i){const l=this.createSegments(e,t.segments,r,i);let u={};return ii(t.children,(f,y)=>{u[y]=this.createSegmentGroup(e,f,r,i)}),new Ht(l,u)}createSegments(e,t,r,i){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,i):this.findOrReturn(l,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function m(n){const e={};for(const r of Object.keys(n.children)){const l=m(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}class w{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class M{constructor(e,t){this.component=e,this.route=t}}function F(n,e,t){const r=n._root;return rt(r,e?e._root:null,t,[r.value])}function ve(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function rt(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=id(e);return n.children.forEach(u=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Do(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Do(n.url,e.url)||!Wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ah(n,e)||!Wr(n.queryParams,e.queryParams);case"paramsChange":default:return!Ah(n,e)}}(u,l,l.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new w(r)):(l.data=u.data,l._resolvedData=u._resolvedData),rt(n,e,l.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new M(f.outlet.component,u))}else u&&Un(e,f,i),i.canActivateChecks.push(new w(r)),rt(n,null,l.component?f?f.children:null:t,r,i)})(u,l[u.value.outlet],t,r.concat([u.value]),i),delete l[u.value.outlet]}),ii(l,(u,f)=>Un(u,t.getContext(f),i)),i}function Un(n,e,t){const r=id(n),i=n.value;ii(r,(l,u)=>{Un(l,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new M(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class yp{}function bp(n){return new Mr.y(e=>e.error(n))}class vp{constructor(e,t,r,i,l,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=u}recognize(){const e=Ph(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new Dh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new da(r,t),l=new e_(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Xg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const u=t.children[l],f=fp(e,l),y=this.processSegmentGroup(f,u,l);if(null===y)return null;r.push(...y)}const i=Hh(r);return i.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const l of e){const u=this.processSegmentAgainstRoute(l,t,r,i);if(null!==u)return u}return lc(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ro(e,t,r,i))return null;let l,u=[],f=[];if("**"===e.path){const B=r.length>0?ed(r).parameters:{};l=new Dh(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y_(e),Zn(e),e.component,e,Sv(t),__(t)+r.length,Av(e))}else{const B=cd(t,e,r);if(!B.matched)return null;u=B.consumedSegments,f=r.slice(B.lastChild),l=new Dh(u,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y_(e),Zn(e),e.component,e,Sv(t),__(t)+u.length,Av(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:E,slicedSegments:D}=Ph(t,u,f,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&E.hasChildren()){const B=this.processChildren(y,E);return null===B?null:[new da(l,B)]}if(0===y.length&&0===D.length)return[new da(l,[])];const S=Zn(e)===i,N=this.processSegment(y,E,D,S?Rt:i);return null===N?null:[new da(l,N)]}}function KC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Hh(n){const e=[],t=new Set;for(const r of n){if(!KC(r)){e.push(r);continue}const i=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Hh(r.children);e.push(new da(r.value,i))}return e.filter(r=>!t.has(r))}function Sv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function __(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y_(n){return n.data||{}}function Av(n){return n.resolve||{}}function Ep(n){return lr(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,_t.U)(()=>e)):(0,lt.of)(e)})}class Ax extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const kv=new p.OlP("ROUTES");class YC{constructor(e,t,r,i){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,_t.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=l.create(e);return new Yc(sp(u.injector.get(kv,void 0,p.XFs.Self|p.XFs.Optional)).map(ac),u)}),Is(l=>{throw t._loader$=void 0,l}));return t._loader$=new Gc.c(i,()=>new Fn.xQ).pipe((0,Ju.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,yn.D)(this.loader.load(e)):vi(e()).pipe((0,Nr.zg)(t=>t instanceof p.YKP?(0,lt.of)(t):(0,yn.D)(this.compiler.compileModuleAsync(t))))}}class xx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new dd,this.attachRef=null}}class dd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new xx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class QC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Rv(n){throw n}function kx(n,e,t){return e.parse("/")}function JC(n,e){return(0,lt.of)(null)}const XC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yn=(()=>{class n{constructor(t,r,i,l,u,f,y,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fn.xQ,this.errorHandler=Rv,this.malformedUriErrorHandler=kx,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:JC,afterPreactivation:JC},this.urlHandlingStrategy=new QC,this.routeReuseStrategy=new Ax,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(p.h0i),this.console=u.get(p.c2e);const N=u.get(p.R0b);this.isNgZoneEnabled=N instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=new Ds(new Ht([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new YC(f,y,B=>this.triggerEvent(new Gt(B)),B=>this.triggerEvent(new sn(B))),this.routerState=Jg(this.currentUrlTree,this.rootComponentType),this.transitions=new bn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qs(i=>0!==i.id),(0,_t.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),lr(i=>{let l=!1,u=!1;return(0,lt.of)(i).pipe((0,cr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),lr(f=>{const y=this.browserUrlTree.toString(),E=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return wp(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,lt.of)(f).pipe(lr(S=>{const N=this.transitions.getValue();return r.next(new I(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Rr.E:Promise.resolve(S)}),function(n,e,t,r){return lr(i=>function(n,e,t,r,i){return new Iv(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,cr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Nr.zg)(l=>function(n,e,t,r,i="emptyOnly",l="legacy"){try{const u=new vp(n,e,t,r,i,l).recognize();return null===u?bp(new yp):(0,lt.of)(u)}catch(u){return bp(u)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,i).pipe((0,_t.U)(u=>Object.assign(Object.assign({},l),{targetSnapshot:u}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,cr.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const N=new oe(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(N)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:B,source:G,restoredState:de,extras:Ae}=f,We=new I(N,this.serializeUrl(B),G,de);r.next(We);const nt=Jg(B,this.rootComponentType).snapshot;return(0,lt.of)(Object.assign(Object.assign({},f),{targetSnapshot:nt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},Ae),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),Rr.E}),Ep(f=>{const{targetSnapshot:y,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:B}}=f;return this.hooks.beforePreactivation(y,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!B})}),(0,cr.b)(f=>{const y=new _e(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,_t.U)(f=>Object.assign(Object.assign({},f),{guards:F(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Nr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:u}}=t;return 0===u.length&&0===l.length?(0,lt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,yn.D)(n).pipe((0,Nr.zg)(i=>function(n,e,t,r,i){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,lt.of)(!0);const u=l.map(f=>{const y=ve(f,e,i);let E;if(function(n){return n&&ko(n.canDeactivate)}(y))E=vi(y.canDeactivate(n,e,t,r));else{if(!ko(y))throw new Error("Invalid CanDeactivate guard");E=vi(y(n,e,t,r))}return E.pipe(To())});return(0,lt.of)(u).pipe(Cr())}(i.component,i.route,t,e,r)),To(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Nr.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,e,t,r){return(0,yn.D)(e).pipe(ln(i=>Cs(function(n,e){return null!==n&&e&&e(new Ln(n)),(0,lt.of)(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new Er(n)),(0,lt.of)(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Ys(()=>{const f=u.guards.map(y=>{const E=ve(y,u.node,t);let D;if(function(n){return n&&ko(n.canActivateChild)}(E))D=vi(E.canActivateChild(r,n));else{if(!ko(E))throw new Error("Invalid CanActivateChild guard");D=vi(E(r,n))}return D.pipe(To())});return(0,lt.of)(f).pipe(Cr())}));return(0,lt.of)(l).pipe(Cr())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,lt.of)(!0);const i=r.map(l=>Ys(()=>{const u=ve(l,e,t);let f;if(function(n){return n&&ko(n.canActivate)}(u))f=vi(u.canActivate(e,n));else{if(!ko(u))throw new Error("Invalid CanActivate guard");f=vi(u(e,n))}return f.pipe(To())}));return(0,lt.of)(i).pipe(Cr())}(n,i.route,t))),To(i=>!0!==i,!0))}(r,l,n,e):(0,lt.of)(f)),(0,_t.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,cr.b)(f=>{if(oc(f.guardsResult)){const E=Xu(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw E.url=f.guardsResult,E}const y=new Ue(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Qs(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Ep(f=>{if(f.guards.canActivateChecks.length)return(0,lt.of)(f).pipe((0,cr.b)(y=>{const E=new Qe(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}),lr(y=>{let E=!1;return(0,lt.of)(y).pipe(function(n,e){return(0,Nr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,lt.of)(t);let l=0;return(0,yn.D)(i).pipe(ln(u=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return(0,lt.of)({});const l={};return(0,yn.D)(i).pipe((0,Nr.zg)(u=>function(n,e,t,r){const i=ve(n,e,r);return vi(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,cr.b)(f=>{l[u]=f}))),ki(1),(0,Nr.zg)(()=>Object.keys(l).length===i.length?(0,lt.of)(l):Rr.E))}(n._resolve,n,e,r).pipe((0,_t.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Xg(n,t).resolve),null)))}(u.route,r,n,e)),(0,cr.b)(()=>l++),ki(1),(0,Nr.zg)(u=>l===i.length?(0,lt.of)(t):Rr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,cr.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,cr.b)(y=>{const E=new et(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(E)}))}),Ep(f=>{const{targetSnapshot:y,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:B}}=f;return this.hooks.afterPreactivation(y,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!B})}),(0,_t.U)(f=>{const y=function(n,e,t){const r=il(n,e._root,t?t._root:void 0);return new Th(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,cr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new Ev(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,cr.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new eo(n))}(()=>{var f;if(!l&&!u){const y=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,y)):this.cancelNavigationTransition(i,y)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Is(f=>{if(u=!0,function(n){return n&&n[no]}(f)){const y=oc(f.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const E=new O(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(E),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wp(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new W(i.id,this.serializeUrl(i.extractedUrl),f);r.next(y);try{i.resolve(this.errorHandler(f))}catch(E){i.reject(E)}}return Rr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:l,urlTree:u}=r,f={replaceUrl:!0};if(l){const y=Object.assign({},l);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(f.state=y)}this.scheduleNavigation(u,i,l,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const i=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!i||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ld(t),this.config=t.map(ac),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:l,fragment:u,queryParamsHandling:f,preserveFragment:y}=r,E=i||this.routerState.root,D=y?this.currentUrlTree.fragment:u;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=l||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,i){if(0===t.length)return od(e.root,e.root,e,r,i);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return ii(l.outlets,(y,E)=>{f[E]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===u?(l.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new sc(t,e,r)}(t);if(l.toRoot())return od(e.root,new Ht([],{}),e,r,i);const u=function(n,e,t){if(n.isAbsolute)return new r_(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new r_(l,l===e.root,0)}const r=sd(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,l=t;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new r_(r,!1,i-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),f=u.processChildren?Rh(u.segmentGroup,u.index,l.commands):o_(u.segmentGroup,u.index,l.commands);return od(u.segmentGroup,f,e,r,i)}(E,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=oc(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},XC):!1===r?Object.assign({},eI):r,oc(t))return op(this.currentUrlTree,t,i);const l=this.parseUrl(t);return op(this.currentUrlTree,l,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const l=t[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new x(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,l,u){var f,y;if(this.disposed)return Promise.resolve(!1);const E=this.getTransition(),D=wp(r)&&E&&!wp(E.source),B=(this.lastSuccessfulId===E.id||this.currentNavigation?E.rawUrl:E.urlAfterRedirects).toString()===t.toString();if(D&&B)return Promise.resolve(!0);let G,de,Ae;u?(G=u.resolve,de=u.reject,Ae=u.promise):Ae=new Promise((Mt,mt)=>{G=Mt,de=mt});const We=++this.navigationId;let nt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),nt=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):nt=0,this.setTransition({id:We,targetPageId:nt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:G,reject:de,promise:Ae,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ae.catch(Mt=>Promise.reject(Mt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(t,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new O(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.DyG),p.LFG(Wg),p.LFG(dd),p.LFG(be),p.LFG(p.zs3),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function wp(n){return"imperative"!==n}let Gh=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.route=r,this.commands=[],this.onChanges=new Fn.xQ,null==i&&l.setAttribute(u.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Wh(this.skipLocationChange),replaceUrl:Wh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Yn),p.Y36(rl),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[p.TTD]}),n})();function Wh(n){return""===n||!!n}let b_=(()=>{class n{constructor(t,r,i,l,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.name=l||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new Nv(t,f,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(dd),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Nv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===rl?this.route:e===dd?this.childContexts:this.parent.get(e,t)}}class Ov{}class Cp{preload(e,t){return(0,lt.of)(null)}}let Pv=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.injector=l,this.preloadingStrategy=u,this.loader=new YC(r,i,E=>t.triggerEvent(new Gt(E)),E=>t.triggerEvent(new sn(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qs(t=>t instanceof x),ln(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const u=l._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(t,l)):l.children&&i.push(this.processRoutes(t,l.children));return(0,yn.D)(i).pipe((0,Zs.J)(),(0,_t.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,lt.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Nr.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Yn),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Ov))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ip=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof I?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof x&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new nl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Yn),p.LFG($r),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const uc=new p.OlP("ROUTER_CONFIGURATION"),qh=new p.OlP("ROUTER_FORROOT_GUARD"),iI=[be,{provide:Wg,useClass:qg},{provide:Yn,useFactory:function(n,e,t,r,i,l,u,f={},y,E){const D=new Yn(null,n,e,t,r,i,l,sp(u));return y&&(D.urlHandlingStrategy=y),E&&(D.routeReuseStrategy=E),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(f,D),f.enableTracing&&D.events.subscribe(S=>{var N,B;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(B=console.groupEnd)||void 0===B||B.call(console)}),D},deps:[Wg,dd,be,p.zs3,p.v3s,p.Sil,kv,uc,[class{},new p.FiY],[class{},new p.FiY]]},dd,{provide:rl,useFactory:function(n){return n.routerState.root},deps:[Yn]},{provide:p.v3s,useClass:p.EAV},Pv,Cp,class{preload(e,t){return t().pipe(Is(()=>(0,lt.of)(null)))}},{provide:uc,useValue:{enableTracing:!1}}];function Nx(){return new p.PXZ("Router",Yn)}let sI=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[iI,Ox(t),{provide:qh,useFactory:aI,deps:[[Yn,new p.FiY,new p.tp0]]},{provide:uc,useValue:r||{}},{provide:ge,useFactory:Fv,deps:[J,[new p.tBr(Re),new p.FiY],uc]},{provide:Ip,useFactory:oI,deps:[Yn,$r,uc]},{provide:Ov,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Cp},{provide:p.PXZ,multi:!0,useFactory:Nx},[Lv,{provide:p.ip1,multi:!0,useFactory:Fx,deps:[Lv]},{provide:uI,useFactory:fa,deps:[Lv]},{provide:p.tb,multi:!0,useExisting:uI}]]}}static forChild(t){return{ngModule:n,providers:[Ox(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(qh,8),p.LFG(Yn,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function oI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ip(n,e,t)}function Fv(n,e,t={}){return t.useHash?new ue(n,e):new we(n,e)}function aI(n){return"guarded"}function Ox(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:kv,multi:!0,useValue:n}]}let Lv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fn.xQ}appInitializer(){return this.injector.get(Ie,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(Yn),u=this.injector.get(uc);return"disabled"===u.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,lt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(uc),i=this.injector.get(Pv),l=this.injector.get(Ip),u=this.injector.get(Yn),f=this.injector.get(p.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),l.init(),u.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Fx(n){return n.appInitializer.bind(n)}function fa(n){return n.bootstrapListener.bind(n)}const uI=new p.OlP("Router Initializer");var hI=Ge(4762);let Vv=(()=>{class n extends Q{constructor(){super(...arguments),this.skipNextPopState=!1,this.source="Window.addEventListener:popstate"}pushState(t,r,i){this.skipNextPopState=!0,super.pushState(t,r,i)}replaceState(t,r,i){this.skipNextPopState=!0,super.replaceState(t,r,i)}onPopState(t){return t=Zone.current.wrap(t,this.source),super.onPopState(l=>{this.skipNextPopState&&l.singleSpa?this.skipNextPopState=!1:t(l)})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ft={NgZone:null,bootstrapFunction:null,template:null,Router:void 0,domElementGetter:void 0,updateFunction:()=>Promise.resolve(),bootstrappedModule:null};function mI(n,e){return(0,hI.mG)(this,void 0,void 0,function*(){"noop"!==n.NgZone&&(n.zoneIdentifier=`single-spa-angular:${e.name||e.appName}`,n.NgZone.isInAngularZone=()=>!0===window.Zone.current._properties[n.zoneIdentifier],n.routingEventListener=()=>{n.bootstrappedNgZone.run(()=>{})})})}function E_(n,e){return(0,hI.mG)(this,void 0,void 0,function*(){!function(n,e){const t=function(n,e){var t;return(e=null!==(t=null==e?void 0:e.customProps)&&void 0!==t?t:e).domElement?()=>e.domElement:e.domElementGetter?e.domElementGetter:n.domElementGetter?n.domElementGetter:function(n){return function(){const t=`single-spa-application:${n}`;let r=document.getElementById(t);return r||(r=document.createElement("div"),r.id=t,document.body.appendChild(r)),r}}(e.name)}(n,e);if(!t)throw Error(`Cannot mount angular application '${e.name||e.appName}' without a domElementGetter provided either as an opt or a prop`);const r=function(n){const e=n();if(!e)throw Error("domElementGetter did not return a valid dom element");return e}(t);r.innerHTML=n.template}(n,e);const t=n.bootstrapFunction(e);if(!(t instanceof Promise))throw Error(`single-spa-angular: the options.bootstrapFunction must return a promise, but instead returned a '${typeof t}' that is not a Promise`);const r=yield t;if(!r||"function"!=typeof r.destroy)throw Error("single-spa-angular: the options.bootstrapFunction returned a promise that did not resolve with a valid Angular module. Did you call platformBrowserDynamic().bootstrapModule() correctly?");const i=r.injector.get(Vv,null),l="noop"!==n.NgZone;if(l&&n.Router&&null===i)throw new Error("\n      single-spa-angular: could not retrieve extra providers from the platform injector. Did you call platformBrowserDynamic(getSingleSpaExtraProviders()).bootstrapModule()?\n    ");const u=n;if(l){const f=r.injector.get(n.NgZone),y=u.zoneIdentifier;null!==i&&function(n,e){if(!e.NavigationStart)return;const t=n.injector.get(e.Router),r=t.events.subscribe(i=>{if(i instanceof e.NavigationStart){const l=t.getCurrentNavigation();"imperative"!==l.trigger&&(l.extras.skipLocationChange=!0,l.extras.replaceUrl=!1)}});n.onDestroy(()=>{r.unsubscribe()})}(r,n),u.bootstrappedNgZone=f,u.bootstrappedNgZone._inner._properties[y]=!0,window.addEventListener("single-spa:routing-event",u.routingEventListener)}return u.bootstrappedModule=r,r})}function pa(n){return Promise.resolve().then(()=>{n.routingEventListener&&window.removeEventListener("single-spa:routing-event",n.routingEventListener),n.bootstrappedModule.destroy(),n.bootstrappedModule=null})}let Uv=(()=>{class n{constructor(){}getToken(){return sessionStorage.getItem("token")}setToken(t){sessionStorage.setItem("token",t)}removeToken(t){sessionStorage.removeItem(t),sessionStorage.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Bv{constructor(e,t={}){this.idDecision=e,this.name=t.name,this.iduser=t.iduser}}class ol{}class w_{}class al{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),l=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(u):this.headers.set(l,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof al?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new al;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof al?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const l=e.value;if(l){let u=this.headers.get(t);if(!u)return;u=u.filter(f=>-1===l.indexOf(f)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class jv{encodeKey(e){return ll(e)}encodeValue(e){return ll(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const _I=/%(\d[a-f0-9])/gi,GF={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ll(n){return encodeURIComponent(n).replace(_I,(e,t)=>{var r;return null!==(r=GF[t])&&void 0!==r?r:e})}function Tp(n){return`${n}`}class ma{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[u,f]=-1==l?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,l)),e.decodeValue(i.slice(l+1))],y=t.get(u)||[];y.push(f),t.set(u,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ma({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Tp(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Tp(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zF{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function Hv(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Hx(n){return"undefined"!=typeof Blob&&n instanceof Blob}function bI(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Kh{constructor(e,t,r,i){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new al),this.context||(this.context=new zF),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+u}}else this.params=new ma,this.urlWithParams=t}serializeBody(){return null===this.body?null:Hv(this.body)||Hx(this.body)||bI(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ma?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bI(this.body)?null:Hx(this.body)?this.body.type||null:Hv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ma?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,l=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((N,B)=>N.set(B,e.setHeaders[B]),E)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,B)=>N.set(B,e.setParams[B]),D)),new Kh(r,i,u,{params:D,headers:E,context:S,reportProgress:y,responseType:l,withCredentials:f})}}var Ir=(()=>((Ir=Ir||{})[Ir.Sent=0]="Sent",Ir[Ir.UploadProgress=1]="UploadProgress",Ir[Ir.ResponseHeader=2]="ResponseHeader",Ir[Ir.DownloadProgress=3]="DownloadProgress",Ir[Ir.Response=4]="Response",Ir[Ir.User=5]="User",Ir))();class $v{constructor(e,t=200,r="OK"){this.headers=e.headers||new al,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Dp extends $v{constructor(e={}){super(e),this.type=Ir.ResponseHeader}clone(e={}){return new Dp({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gv extends $v{constructor(e={}){super(e),this.type=Ir.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class $x extends $v{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function vI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let EI=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let l;if(t instanceof Kh)l=t;else{let y,E;y=i.headers instanceof al?i.headers:new al(i.headers),i.params&&(E=i.params instanceof ma?i.params:new ma({fromObject:i.params})),l=new Kh(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=(0,lt.of)(l).pipe(ln(y=>this.handler.handle(y)));if(t instanceof Kh||"events"===i.observe)return u;const f=u.pipe(Qs(y=>y instanceof Gv));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,_t.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,_t.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,_t.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));case"json":default:return f.pipe((0,_t.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ma).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,vI(i,r))}post(t,r,i={}){return this.request("POST",t,vI(i,r))}put(t,r,i={}){return this.request("PUT",t,vI(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ol))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Gx{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const zx=new p.OlP("HTTP_INTERCEPTORS");let qF=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const CI=/^\)\]\}',?\n/;let Wv=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Mr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((B,G)=>i.setRequestHeader(B,G.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&i.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();i.responseType="json"!==B?B:"text"}const l=t.serializeBody();let u=null;const f=()=>{if(null!==u)return u;const B=1223===i.status?204:i.status,G=i.statusText||"OK",de=new al(i.getAllResponseHeaders()),Ae=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new Dp({headers:de,status:B,statusText:G,url:Ae}),u},y=()=>{let{headers:B,status:G,statusText:de,url:Ae}=f(),We=null;204!==G&&(We=void 0===i.response?i.responseText:i.response),0===G&&(G=We?200:0);let nt=G>=200&&G<300;if("json"===t.responseType&&"string"==typeof We){const Mt=We;We=We.replace(CI,"");try{We=""!==We?JSON.parse(We):null}catch(mt){We=Mt,nt&&(nt=!1,We={error:mt,text:We})}}nt?(r.next(new Gv({body:We,headers:B,status:G,statusText:de,url:Ae||void 0})),r.complete()):r.error(new $x({error:We,headers:B,status:G,statusText:de,url:Ae||void 0}))},E=B=>{const{url:G}=f(),de=new $x({error:B,status:i.status||0,statusText:i.statusText||"Unknown Error",url:G||void 0});r.error(de)};let D=!1;const S=B=>{D||(r.next(f()),D=!0);let G={type:Ir.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),"text"===t.responseType&&!!i.responseText&&(G.partialText=i.responseText),r.next(G)},N=B=>{let G={type:Ir.UploadProgress,loaded:B.loaded};B.lengthComputable&&(G.total=B.total),r.next(G)};return i.addEventListener("load",y),i.addEventListener("error",E),i.addEventListener("timeout",E),i.addEventListener("abort",E),t.reportProgress&&(i.addEventListener("progress",S),null!==l&&i.upload&&i.upload.addEventListener("progress",N)),i.send(l),r.next({type:Ir.Sent}),()=>{i.removeEventListener("error",E),i.removeEventListener("abort",E),i.removeEventListener("load",y),i.removeEventListener("timeout",E),t.reportProgress&&(i.removeEventListener("progress",S),null!==l&&i.upload&&i.upload.removeEventListener("progress",N)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ll))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Sp=new p.OlP("XSRF_COOKIE_NAME"),qv=new p.OlP("XSRF_HEADER_NAME");class dc{}let II=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=go(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Y),p.LFG(p.Lbi),p.LFG(Sp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Kv=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(dc),p.LFG(qv))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ZF=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(zx,[]);this.chain=r.reduceRight((i,l)=>new Gx(i,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(w_),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),DI=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Kv,useClass:qF}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Sp,useValue:t.cookieName}:[],t.headerName?{provide:qv,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Kv,{provide:zx,useExisting:Kv,multi:!0},{provide:dc,useClass:II},{provide:Sp,useValue:"XSRF-TOKEN"},{provide:qv,useValue:"X-XSRF-TOKEN"}]}),n})(),Wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[EI,{provide:ol,useClass:ZF},Wv,{provide:w_,useExisting:Wv}],imports:[[DI.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Jc=(()=>{class n{constructor(t){this.httpClient=t,this.URL_USUARIO="https://auth-pd-service.herokuapp.com/users/"}listar(){return this.httpClient.get(this.URL_USUARIO)}inserir(t){return this.httpClient.post(this.URL_USUARIO,t)}remover(t){return this.httpClient.delete(`${this.URL_USUARIO}${t}`)}pesquisarPorId(t){return this.httpClient.get(`${this.URL_USUARIO}${t}`)}getUserByNome(t){return this.httpClient.get(this.URL_USUARIO).pipe((0,_t.U)(r=>r.filter(i=>i.name===t.name)))}atualizar(t){return this.httpClient.put(`${this.URL_USUARIO}${t.iduser}`,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(EI))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zv=(()=>{class n{constructor(t){this.httpClient=t,this.URL_DECISAO="https://decision-pd-service.herokuapp.com/decisions/"}listar(){return this.httpClient.get(this.URL_DECISAO)}inserir(t){return this.httpClient.post(this.URL_DECISAO,t)}remover(t){return this.httpClient.delete(`${this.URL_DECISAO}${t}`)}pesquisarPorId(t){return this.httpClient.get(`${this.URL_DECISAO}${t}`)}atualizar(t){return this.httpClient.put(`${this.URL_DECISAO}${t.idDecision}`,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(EI))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zh(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",4),p.NdJ("click",function(){return p.CHM(t),p.oxw(),p.MAs(1).click()}),p._uU(1,"+"),p.qZA()}}function Ap(n,e){1&n&&(p.TgZ(0,"div",5),p._uU(1,"+"),p.qZA())}let Yh=(()=>{class n{constructor(){}ngOnInit(){}ngOnChanges(){}onFileSelected(t){this.selectedFile=t.target.files[0];const r=new FileReader;try{r.readAsDataURL(this.selectedFile),r.onload=i=>{this.url=r.result}}catch(i){}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-upload-image"]],inputs:{usuario:"usuario"},features:[p.TTD],decls:5,vars:2,consts:[["type","file",2,"display","none",3,"change"],["pickFile",""],["class","imagemUser",3,"click",4,"ngIf","ngIfElse"],["noUser",""],[1,"imagemUser",3,"click"],[1,"imagemUser"]],template:function(t,r){if(1&t&&(p.TgZ(0,"input",0,1),p.NdJ("change",function(l){return r.onFileSelected(l)}),p.qZA(),p.YNc(2,Zh,2,0,"div",2),p.YNc(3,Ap,2,0,"ng-template",null,3,p.W1O)),2&t){const i=p.MAs(4);p.xp6(2),p.Q6J("ngIf",null!=r.usuario)("ngIfElse",i)}},directives:[qt],styles:[".imagemUser[_ngcontent-%COMP%]{margin-top:10px;width:200px;height:180px;background-color:#fff;display:flex;justify-content:center;align-items:center;font-size:50px;cursor:pointer}"]}),n})();function qx(n,e){if(1&n&&(p.TgZ(0,"div",11),p._uU(1),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Oqu(t.usuario.name)}}function SI(n,e){1&n&&(p.TgZ(0,"a",12),p._uU(1,"edit"),p.qZA())}function AI(n,e){1&n&&(p.TgZ(0,"div",11),p._uU(1,".\xa0\xa0.\xa0\xa0."),p.qZA())}function Yv(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",14),p.TgZ(1,"div"),p.TgZ(2,"b"),p._uU(3,"-"),p.qZA(),p._uU(4,"\xa0\xa0\xa0 "),p.TgZ(5,"input",15),p.NdJ("keyup",function(i){const u=p.CHM(t).index;return p.oxw(2).saveEdit(i,u)}),p.qZA(),p.qZA(),p.TgZ(6,"div",16),p.NdJ("click",function(){const l=p.CHM(t).index;return p.oxw(2).removerDecisao(l)}),p._uU(7,"x"),p.qZA(),p.qZA()}if(2&n){const t=e.$implicit;p.xp6(5),p.Q6J("value",t.name)}}function Qv(n,e){if(1&n&&(p.TgZ(0,"div"),p.YNc(1,Yv,8,1,"div",13),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngForOf",t.decisoes)}}function xI(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",17),p.NdJ("click",function(){return p.CHM(t),p.oxw().addDecisao()}),p._uU(1,"+"),p.qZA()}}let Op,I_=(()=>{class n{constructor(t,r,i,l){this.rotaAtual=t,this.accountService=r,this.usuarioService=i,this.deciaoService=l,this.decisoes=new Array,this.timeout=null}ngOnInit(){}ngOnChanges(){null!=this.tokenId?this.usuarioService.pesquisarPorId(this.tokenId).subscribe(t=>{if(this.usuario=t,null!=t.decisions)for(let r of t.decisions)this.deciaoService.pesquisarPorId(r.toString()).subscribe(i=>{this.decisoes.push(i)})}):(this.usuario=void 0,this.decisoes=new Array)}saveEdit(t,r){clearTimeout(this.timeout);var i=this;this.timeout=setTimeout(function(){13!=t.keyCode&&i.executeListing(t.target.value,r)},300)}executeListing(t,r){if(""!=t&&null!=this.decisoes&&0!=this.decisoes.length){const i=this.decisoes[r];null!=i.idDecision&&this.deciaoService.pesquisarPorId(i.idDecision).subscribe(l=>{l.name=t,this.deciaoService.atualizar(l).subscribe(u=>console.log("Decis\xe3o Atualizada!"))})}}addDecisao(){const t=new Bv;t.name="New";const r=this.usuario.iduser;null!=r&&(t.iduser=parseInt(r)),this.deciaoService.inserir(t).subscribe(i=>{this.decisoes.push(i)})}removerDecisao(t){const r=this.decisoes[t].idDecision;null!=r&&this.deciaoService.remover(r).subscribe(i=>{this.decisoes.splice(t,1)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(rl),p.Y36(Uv),p.Y36(Jc),p.Y36(Zv))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-usuario"]],inputs:{tokenId:"tokenId"},features:[p.TTD],decls:14,vars:6,consts:[["id","mainLayout"],[3,"usuario"],["id","userName"],["style","background-color: #2b2114;",4,"ngIf","ngIfElse"],[2,"margin-top","7px"],["href","/react",4,"ngIf"],["noUser",""],["id","decisoes",2,"overflow-y","scroll"],["id","noDecision"],[4,"ngIf"],["style","margin-left: 10px; margin-top: 10px; width: 94%;",3,"click",4,"ngIf"],[2,"background-color","#2b2114"],["href","/react"],["class","decisao",4,"ngFor","ngForOf"],[1,"decisao"],["spellcheck","false","size","30",3,"value","keyup"],[2,"margin-right","10px","cursor","pointer",3,"click"],[2,"margin-left","10px","margin-top","10px","width","94%",3,"click"]],template:function(t,r){if(1&t&&(p.TgZ(0,"div",0),p._UZ(1,"app-upload-image",1),p.TgZ(2,"div",2),p.YNc(3,qx,2,1,"div",3),p.TgZ(4,"div",4),p.YNc(5,SI,2,0,"a",5),p.qZA(),p.YNc(6,AI,2,0,"ng-template",null,6,p.W1O),p.qZA(),p.TgZ(8,"div",7),p.TgZ(9,"div",8),p.TgZ(10,"div"),p._uU(11,"Decisions"),p.qZA(),p.qZA(),p.YNc(12,Qv,2,1,"div",9),p.YNc(13,xI,2,0,"button",10),p.qZA(),p.qZA()),2&t){const i=p.MAs(7);p.xp6(1),p.Q6J("usuario",r.usuario),p.xp6(2),p.Q6J("ngIf",null!=r.usuario)("ngIfElse",i),p.xp6(2),p.Q6J("ngIf",null!=r.tokenId),p.xp6(7),p.Q6J("ngIf",null!=r.decisoes),p.xp6(1),p.Q6J("ngIf",null!=r.usuario)}},directives:[Yh,qt,Ra],styles:["#mainLayout[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}#signIn[_ngcontent-%COMP%]{background-color:#081d1d;color:#fff}#signUp[_ngcontent-%COMP%]{margin-left:10px;background-color:#064e4e;color:#fff}.decisao[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-left:10px;margin-top:10px;padding-left:10px;background-color:#0c0c0c;width:92%;color:#fff}.decisao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}#noDecision[_ngcontent-%COMP%]{text-align:center;width:100%;background-color:#000;color:#fff}#decisoes[_ngcontent-%COMP%]{margin-top:20px;width:500px;height:300px;background-color:#fff}#userName[_ngcontent-%COMP%]{width:200px;text-align:center;color:#fff}#userName[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-top:2px solid gray;text-decoration:none;padding-inline:86px;color:#fff;background-color:#2b2114;border-left:2px solid #d1caca}"]}),n})();class e0{constructor(e){this.total=e}call(e,t){return t.subscribe(new Ak(e,this.total))}}class Ak extends ar.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}function A_(n,e){return t=>t.lift(new WI(n,e))}class WI{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new zL(e,this.compare,this.keySelector))}}class zL extends ar.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class WL{constructor(e){this.notifier=e}call(e,t){const r=new qL(e),i=(0,vr.ft)(this.notifier,new vr.IY(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class qL extends vr.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Rp(n){return null!=n&&"false"!=`${n}`}function Np(n){return n instanceof p.SBq?n.nativeElement:n}try{Op="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Op=!1}let Fp,pd,cl=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function(n){return"browser"===n}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Op)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({factory:function(){return new n(p.LFG(p.Lbi))},token:n,providedIn:"root"}),n})(),Pp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function t0(n){return function(){if(null==Fp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fp=!0}))}finally{Fp=Fp||!1}return Fp}()?n:!!n.capture}function ks(n){return n.composedPath?n.composedPath()[0]:n.target}var si=Ge(3637);function Zk(n){return 0===n.offsetX&&0===n.offsetY}function iT(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const l0=new p.OlP("cdk-input-modality-detector-options"),s2={ignoreKeys:[18,17,224,91,16]},_a=t0({passive:!0,capture:!0});let oT=(()=>{class n{constructor(t,r,i,l){this._platform=t,this._mostRecentTarget=null,this._modality=new bn(null),this._lastTouchMs=0,this._onKeydown=u=>{var f,y;(null===(y=null===(f=this._options)||void 0===f?void 0:f.ignoreKeys)||void 0===y?void 0:y.some(E=>E===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ks(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Zk(u)?"keyboard":"mouse"),this._mostRecentTarget=ks(u))},this._onTouchstart=u=>{iT(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ks(u))},this._options=Object.assign(Object.assign({},s2),l),this.modalityDetected=this._modality.pipe(e=>e.lift(new e0(1))),this.modalityChanged=this.modalityDetected.pipe(A_()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,_a),i.addEventListener("mousedown",this._onMousedown,_a),i.addEventListener("touchstart",this._onTouchstart,_a)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,_a),document.removeEventListener("mousedown",this._onMousedown,_a),document.removeEventListener("touchstart",this._onTouchstart,_a))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(cl),p.LFG(p.R0b),p.LFG(Y),p.LFG(l0,8))},n.\u0275prov=p.Yz7({factory:function(){return new n(p.LFG(cl),p.LFG(p.R0b),p.LFG(Y),p.LFG(l0,8))},token:n,providedIn:"root"}),n})();const d0=new p.OlP("cdk-focus-monitor-default-options"),M_=t0({passive:!0,capture:!0});let h0=(()=>{class n{constructor(t,r,i,l,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Fn.xQ,this._rootNodeFocusAndBlurListener=f=>{const y=ks(f),E="focus"===f.type?this._onFocus:this._onBlur;for(let D=y;D;D=D.parentElement)E.call(this,f,D)},this._document=l,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=Np(t);if(!this._platform.isBrowser||1!==i.nodeType)return(0,lt.of)(null);const l=function(n){if(function(){if(null==pd){const n="undefined"!=typeof document?document.head:null;pd=!(!n||!n.createShadowRoot&&!n.attachShadow)}return pd}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const f={checkChildren:r,subject:new Fn.xQ,rootNode:l};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=Np(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const l=Np(t);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(([f,y])=>this._originChanged(f,r,y)):(this._setOrigin(r),"function"==typeof l.focus&&l.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,r,i){i?t.classList.add(r):t.classList.remove(r)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){this._toggleClass(t,"cdk-focused",!!r),this._toggleClass(t,"cdk-touch-focused","touch"===r),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(t,"cdk-mouse-focused","mouse"===r),this._toggleClass(t,"cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),l=ks(t);!i||!i.checkChildren&&r!==l||this._originChanged(r,this._getFocusOrigin(l),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,M_),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,M_)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(function(n){return e=>e.lift(new WL(n))}(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,M_),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,M_),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,l)=>{(l===t||i.checkChildren&&l.contains(t))&&r.push([l,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.R0b),p.LFG(cl),p.LFG(oT),p.LFG(Y,8),p.LFG(d0,8))},n.\u0275prov=p.Yz7({factory:function(){return new n(p.LFG(p.R0b),p.LFG(cl),p.LFG(oT),p.LFG(Y,8),p.LFG(d0,8))},token:n,providedIn:"root"}),n})();const aT="cdk-high-contrast-black-on-white",lT="cdk-high-contrast-white-on-black",R_="cdk-high-contrast-active";let cT=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,l=(i&&i.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),l){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(R_),t.remove(aT),t.remove(lT),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(R_),t.add(aT)):2===r&&(t.add(R_),t.add(lT))}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(cl),p.LFG(Y))},n.\u0275prov=p.Yz7({factory:function(){return new n(p.LFG(cl),p.LFG(Y))},token:n,providedIn:"root"}),n})(),dT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Jk=new p.GfV("12.2.13");function y0(){return"undefined"!=typeof window&&void 0!==window.document}function P_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let U_=(n,e)=>!1,B_=(n,e)=>!1,E0=(n,e,t)=>[];const w0=P_();(w0||"undefined"!=typeof Element)&&(U_=y0()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),B_=(()=>{if(w0||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):B_}})(),E0=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let l=0;l<i.length;l++)r.push(i[l])}else{const i=n.querySelector(e);i&&r.push(i)}return r});const Cd=new p.OlP("AnimationModuleType"),eD=new p.GfV("12.2.13"),sR=new p.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Id,pc=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!(0,p.X6Q)()||"undefined"!=typeof __karma__&&__karma__||"undefined"!=typeof jasmine&&jasmine||"undefined"!=typeof jest&&jest||"undefined"!=typeof Mocha&&Mocha)&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&eD.full!==Jk.full&&console.warn("The Angular Material version ("+eD.full+") does not match the Angular CDK version ("+Jk.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(cT),p.LFG(sR,8),p.LFG(Y))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[dT],dT]}),n})();function Z0(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Rp(e)}}}function nD(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function I2(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Rp(e)}}}try{Id="undefined"!=typeof Intl}catch(n){Id=!1}class N2{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const aD={enterDuration:225,exitDuration:150},Q0=t0({passive:!0}),J0=["mousedown","touchstart"],X0=["mouseup","mouseleave","touchend","touchcancel"];class lD{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Np(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l=Object.assign(Object.assign({},aD),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),f=e-i.left,y=t-i.top,E=l.enterDuration,D=document.createElement("div");D.classList.add("mat-ripple-element"),D.style.left=f-u+"px",D.style.top=y-u+"px",D.style.height=2*u+"px",D.style.width=2*u+"px",null!=r.color&&(D.style.backgroundColor=r.color),D.style.transitionDuration=`${E}ms`,this._containerElement.appendChild(D),window.getComputedStyle(D).getPropertyValue("opacity"),D.style.transform="scale(1)";const S=new N2(this,D,r);return S.state=0,this._activeRipples.add(S),r.persistent||(this._mostRecentTransientRipple=S),this._runTimeoutOutsideZone(()=>{const N=S===this._mostRecentTransientRipple;S.state=1,!r.persistent&&(!N||!this._isPointerDown)&&S.fadeOut()},E),S}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},aD),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.parentNode.removeChild(r)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Np(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(J0))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(X0),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=Zk(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!iT(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Q0)})})}_removeTriggerEvents(){this._triggerElement&&(J0.forEach(e=>{this._triggerElement.removeEventListener(e,this,Q0)}),this._pointerUpEventsRegistered&&X0.forEach(e=>{this._triggerElement.removeEventListener(e,this,Q0)}))}}const cD=new p.OlP("mat-ripple-global-options");let Dd=(()=>{class n{constructor(t,r,i,l,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=l||{},this._rippleRenderer=new lD(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(cl),p.Y36(cD,8),p.Y36(Cd,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&p.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),uD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[pc,Pp],pc]}),n})();const fD=["mat-button",""],yR=["*"],bR=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],vR=nD(Z0(I2(class{constructor(n){this._elementRef=n}})));let mD=(()=>{class n extends vR{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const l of bR)this._hasHostAttributes(l)&&this._getHostElement().classList.add(l);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(h0),p.Y36(Cd,8))},n.\u0275cmp=p.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&p.Gf(Dd,5),2&t){let i;p.iGM(i=p.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(p.uIk("disabled",r.disabled||null),p.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[p.qOj],attrs:fD,ngContentSelectors:yR,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"span",0),p.Hsn(1),p.qZA(),p._UZ(2,"span",1),p._UZ(3,"span",2)),2&t&&(p.xp6(2),p.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),p.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Dd],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),Sd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[uD,pc],pc]}),n})();const gD=function(){return["/login"]},ER=function(){return["/cadastro"]};function U2(n,e){1&n&&(p.TgZ(0,"div",4),p.TgZ(1,"button",5),p._uU(2,"Sign in"),p.qZA(),p.TgZ(3,"button",6),p._uU(4,"Sign up"),p.qZA(),p.qZA()),2&n&&(p.xp6(1),p.Q6J("routerLink",p.DdM(2,gD)),p.xp6(2),p.Q6J("routerLink",p.DdM(3,ER)))}function wR(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"button",7),p.NdJ("click",function(){return p.CHM(t),p.oxw().removeToken()}),p._uU(1,"Sign Out"),p.qZA()}}let fy=(()=>{class n{constructor(t){this.accountService=t}ngOnInit(){const t=this.accountService.getToken();null!=t&&(this.token=t)}removeToken(){this.token=void 0,this.accountService.removeToken("token")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Uv))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-main-screen"]],decls:6,vars:3,consts:[[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["style","display: flex; justify-content: space-around; width: 200px",4,"ngIf"],["mat-button","","style","background-color: #ea1212; color: white; width: 200px",3,"click",4,"ngIf"],[3,"tokenId"],[2,"display","flex","justify-content","space-around","width","200px"],["mat-button","","id","signIn",3,"routerLink"],["mat-button","","id","signUp",3,"routerLink"],["mat-button","",2,"background-color","#ea1212","color","white","width","200px",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h1"),p._uU(2,"Make Your Decision"),p.qZA(),p.YNc(3,U2,5,4,"div",1),p.YNc(4,wR,2,0,"button",2),p._UZ(5,"app-usuario",3),p.qZA()),2&t&&(p.xp6(3),p.Q6J("ngIf",null==r.token||null==r.token),p.xp6(1),p.Q6J("ngIf",null!=r.token||null!=r.token),p.xp6(1),p.Q6J("tokenId",r.token))},directives:[qt,I_,mD,Gh],styles:["#signIn[_ngcontent-%COMP%]{background-color:#081d1d;color:#fff}#signUp[_ngcontent-%COMP%]{margin-left:10px;background-color:#064e4e;color:#fff}"]}),n})();class _D{constructor(e,t={}){this.iduser=e,this.name=t.name,this.password=t.password,this.email=t.email,this.decisions=t.decisions}}var CR=Ge(1555);function cm(n,e){return new Mr.y(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let l=0,u=0;for(let f=0;f<r;f++){const y=(0,yn.D)(n[f]);let E=!1;t.add(y.subscribe({next:D=>{E||(E=!0,u++),i[f]=D},error:D=>t.error(D),complete:()=>{l++,(l===r||!E)&&(u===r&&t.next(e?e.reduce((D,S,N)=>(D[S]=i[N],D),{}):i),t.complete())}}))}})}let py=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),iu=(()=>{class n extends py{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const ba=new p.OlP("NgValueAccessor"),vD={provide:ba,useExisting:(0,p.Gpc)(()=>su),multi:!0},ED=new p.OlP("CompositionEventMode");let su=(()=>{class n extends py{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=H()?H().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ED,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[p._Bn([vD]),p.qOj]}),n})();const Or=new p.OlP("NgValidators"),Yt=new p.OlP("NgAsyncValidators");function xR(n){return null!=n}function wD(n){const e=(0,p.QGY)(n)?(0,yn.D)(n):n;return(0,p.CqO)(e),e}function CD(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function lo(n,e){return e.map(t=>t(n))}function Vo(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function rE(n){return null!=n?function(n){if(!n)return null;const e=n.filter(xR);return 0==e.length?null:function(t){return CD(lo(t,e))}}(Vo(n)):null}function dm(n){return null!=n?function(n){if(!n)return null;const e=n.filter(xR);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Za.k)(e))return cm(e,null);if((0,CR.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return cm(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return cm(n=1===n.length&&(0,Za.k)(n[0])?n[0]:n,null).pipe((0,_t.U)(t=>e(...t)))}return cm(n,null)}(lo(t,e).map(wD)).pipe((0,_t.U)(CD))}}(Vo(n)):null}function Ad(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gc(n){return n?Array.isArray(n)?n:[n]:[]}function gy(n,e){return Array.isArray(n)?n.includes(e):n===e}function sE(n,e){const t=gc(e);return gc(n).forEach(i=>{gy(t,i)||t.push(i)}),t}function _y(n,e){return gc(e).filter(t=>!gy(n,t))}let df=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=rE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=dm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n}),n})(),Ei=(()=>{class n extends df{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();class _c extends df{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let yy=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_c,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})();function wy(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Ad(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Ad(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Cy(e._rawValidators,i),Cy(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&DD(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&DD(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Cy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ty(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const pm="VALID",Dy="INVALID",hf="PENDING",mm="DISABLED";function pE(n){return(Sy(n)?n.validators:n)||null}function ff(n){return Array.isArray(n)?rE(n):n||null}function mE(n,e){return(Sy(e)?e.asyncValidators:n)||null}function AD(n){return Array.isArray(n)?dm(n):n||null}function Sy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Md{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ff(this._rawValidators),this._composedAsyncValidatorFn=AD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pm}get invalid(){return this.status===Dy}get pending(){return this.status==hf}get disabled(){return this.status===mm}get enabled(){return this.status!==mm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ff(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=AD(e)}addValidators(e){this.setValidators(sE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_y(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_y(e,this._rawAsyncValidators))}hasValidator(e){return gy(this._rawValidators,e)}hasAsyncValidator(e){return gy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mm,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pm,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pm||this.status===hf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mm:pm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hf,this._hasOwnPendingAsyncValidator=!0;const t=wD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof Ay?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof LR&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?mm:this.errors?Dy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hf)?hf:this._anyControlsHaveStatus(Dy)?Dy:pm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class gE extends Md{constructor(e=null,t,r){super(pE(t),mE(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ty(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ty(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ay extends Md{constructor(e,t,r){super(pE(t),mE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof gE?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,l)=>{r=t(r,i,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class LR extends Md{constructor(e,t,r){super(pE(t),mE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof gE?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const UR={provide:_c,useExisting:(0,p.Gpc)(()=>ky)},xD=(()=>Promise.resolve(null))();let ky=(()=>{class n extends _c{constructor(t,r,i,l){super(),this.control=new gE,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(l=>{l.constructor===su?t=l:function(n){return Object.getPrototypeOf(n.constructor)===iu}(l)?r=l:i=l}),i||r||t||null}(0,l)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){wy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;xD.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ei,9),p.Y36(Or,10),p.Y36(Yt,10),p.Y36(ba,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([UR]),p.qOj,p.TTD]}),n})(),Rd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),mf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Rd]]}),n})(),XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[mf]}),n})();const eN=function(){return[""]},X2=function(){return[""]},ZD=[{path:"",component:fy},{path:"login",component:(()=>{class n{constructor(t,r,i){this.usuarioService=t,this.accountService=r,this.roteador=i}ngOnInit(){this.usuario=new _D}validarUsuario(){null!=this.usuario.name&&null!=this.usuario.password&&this.usuarioService.getUserByNome(this.usuario).subscribe(t=>{try{const r=t[0].iduser;null!=r&&this.usuarioService.pesquisarPorId(r).subscribe(i=>{i.password==this.usuario.password?(this.accountService.setToken(r.toString()),this.roteador.navigate([""])):this.invalidUser()})}catch(r){this.invalidUser()}})}invalidUser(){this.usuario.name="",this.usuario.password="",console.log("Usuario n\xe3o cadastrado!")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jc),p.Y36(Uv),p.Y36(Yn))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:16,vars:4,consts:[["id","login"],["size","30",3,"ngModel","ngModelChange"],[2,"margin-top","5px"],["type","password","size","30","autocomplete","new-password",3,"ngModel","ngModelChange"],[2,"margin-top","10px","width","250px","display","flex","justify-content","flex-end"],[3,"click"],[2,"margin-left","10px","margin-right","2px",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h1"),p._uU(2,"Login"),p.qZA(),p.TgZ(3,"div"),p.TgZ(4,"div"),p._uU(5,"Username: "),p.qZA(),p.TgZ(6,"input",1),p.NdJ("ngModelChange",function(l){return r.usuario.name=l}),p.qZA(),p.qZA(),p.TgZ(7,"div",2),p.TgZ(8,"div"),p._uU(9,"Password: "),p.qZA(),p.TgZ(10,"input",3),p.NdJ("ngModelChange",function(l){return r.usuario.password=l}),p.qZA(),p.qZA(),p.TgZ(11,"div",4),p.TgZ(12,"button",5),p.NdJ("click",function(){return r.validarUsuario()}),p._uU(13,"Confirmar"),p.qZA(),p.TgZ(14,"button",6),p._uU(15,"Cancelar"),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("ngModel",r.usuario.name),p.xp6(4),p.Q6J("ngModel",r.usuario.password),p.xp6(4),p.Q6J("routerLink",p.DdM(3,eN)))},directives:[su,yy,ky,Gh],styles:["#login[_ngcontent-%COMP%]{width:350px;height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),n})()},{path:"cadastro",component:(()=>{class n{constructor(t,r){this.usuarioService=t,this.roteador=r,this.usuario=new _D,this.usuario.decisions=new Array}ngOnInit(){}cadastrarUsuario(){try{this.usuarioService.inserir(this.usuario).subscribe(t=>{this.roteador.navigate(["/login"])})}catch(t){console.log("Dados em falta!")}}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jc),p.Y36(Yn))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-cadastro"]],decls:20,vars:5,consts:[["id","cadastro"],["size","30",3,"ngModel","ngModelChange"],[2,"margin-top","5px"],["type","password","size","30","autocomplete","new-password",3,"ngModel","ngModelChange"],[2,"margin-top","10px","width","250px","display","flex","justify-content","flex-end"],[3,"click"],[2,"margin-left","10px","margin-right","2px",3,"routerLink"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h1"),p._uU(2,"Cadastro"),p.qZA(),p.TgZ(3,"div"),p.TgZ(4,"div"),p._uU(5,"Username: "),p.qZA(),p.TgZ(6,"input",1),p.NdJ("ngModelChange",function(l){return r.usuario.name=l}),p.qZA(),p.qZA(),p.TgZ(7,"div",2),p.TgZ(8,"div"),p._uU(9,"Password: "),p.qZA(),p.TgZ(10,"input",3),p.NdJ("ngModelChange",function(l){return r.usuario.password=l}),p.qZA(),p.qZA(),p.TgZ(11,"div",2),p.TgZ(12,"div"),p._uU(13,"Email: "),p.qZA(),p.TgZ(14,"input",1),p.NdJ("ngModelChange",function(l){return r.usuario.email=l}),p.qZA(),p.qZA(),p.TgZ(15,"div",4),p.TgZ(16,"button",5),p.NdJ("click",function(){return r.cadastrarUsuario()}),p._uU(17,"Confirmar"),p.qZA(),p.TgZ(18,"button",6),p._uU(19,"Cancelar"),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("ngModel",r.usuario.name),p.xp6(4),p.Q6J("ngModel",r.usuario.password),p.xp6(4),p.Q6J("ngModel",r.usuario.email),p.xp6(4),p.Q6J("routerLink",p.DdM(4,X2)))},directives:[su,yy,ky,Gh],styles:["#cadastro[_ngcontent-%COMP%]{width:350px;height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),n})()},{path:"**",component:(()=>{class n{ngOnInit(){console.log("Not Working")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-empty-route"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})()}];let NE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:Re,useValue:"/"}],imports:[[sI.forRoot(ZD)],sI]}),n})(),OE=(()=>{class n{constructor(){this.title="MakingDecision"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"],["http-equiv","X-UA-Compatible","content","ie=edge"],["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap","rel","stylesheet"],["id","body"],["id","layout"]],template:function(t,r){1&t&&(p.TgZ(0,"html",0),p.TgZ(1,"head"),p._UZ(2,"meta",1),p._UZ(3,"meta",2),p._UZ(4,"meta",3),p.TgZ(5,"title"),p._uU(6,"Document"),p.qZA(),p._UZ(7,"link",4),p._UZ(8,"link",5),p._UZ(9,"link",6),p.qZA(),p.TgZ(10,"body"),p.TgZ(11,"div",7),p.TgZ(12,"div",8),p._UZ(13,"router-outlet"),p.qZA(),p.qZA(),p.qZA(),p.qZA())},directives:[b_],styles:["#layout[_ngcontent-%COMP%]{display:flex;width:60vw;height:100vh;flex-direction:column;justify-content:center;align-items:center;background-color:#f5f5f5}#body[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;justify-content:center;background-image:url(http://localhost:4200/img1.png)}"]}),n})();var ss=Ge(8939);const nN_firebase={apiKey:"AIzaSyDKTgBWJBKjJpzT_U2FsEmelU6FtgxyleI",authDomain:"making-decision.firebaseapp.com",projectId:"making-decision",storageBucket:"making-decision.appspot.com",messagingSenderId:"6217389530",appId:"1:6217389530:web:4fd711629e8eb088ca1ce3",measurementId:"${config.measurementId}"};var xn=Ge(1537);function PE(){return n=>n.lift(new YD)}class YD{call(e,t){return t.subscribe(new FE(e))}}class FE extends ar.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}Ge(1352);var it,LE=Ge(3394),xe=Ge(8239),Uo=Ge(8026),bc=Ge(3910),Bo=Ge(5422),U=Ge(3854),iN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ml={},QD=QD||{},ht=iN||self;function vc(){}function VE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ym(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Nd="closure_uid_"+(1e9*Math.random()>>>0),sN=0;function UE(n,e,t){return n.call.apply(n.bind,arguments)}function oN(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UE:oN).apply(null,arguments)}function Oy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function wi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function gl(){this.s=this.s,this.o=this.o}var XD={};gl.prototype.s=!1,gl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Nd)&&n[Nd]||(n[Nd]=++sN)}(this);delete XD[n]}},gl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bm=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Py=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&e.call(t,i[l],l,n)};function BE(n){return Array.prototype.concat.apply([],arguments)}function jE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vm(n){return/^[\s\xa0]*$/.test(n)}var Ci,Em=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Vi(n,e){return-1!=n.indexOf(e)}function HE(n,e){return n<e?-1:n>e?1:0}e:{var Fy=ht.navigator;if(Fy){var eS=Fy.userAgent;if(eS){Ci=eS;break e}}Ci=""}function $E(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function GE(n){const e={};for(const t in n)e[t]=n[t];return e}var zE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<zE.length;l++)t=zE[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qE(n){return qE[" "](n),n}qE[" "]=vc;var wm,n,nS=Vi(Ci,"Opera"),gf=Vi(Ci,"Trident")||Vi(Ci,"MSIE"),rS=Vi(Ci,"Edge"),Ly=rS||gf,iS=Vi(Ci,"Gecko")&&!(Vi(Ci.toLowerCase(),"webkit")&&!Vi(Ci,"Edge"))&&!(Vi(Ci,"Trident")||Vi(Ci,"MSIE"))&&!Vi(Ci,"Edge"),sS=Vi(Ci.toLowerCase(),"webkit")&&!Vi(Ci,"Edge");function KE(){var n=ht.document;return n?n.documentMode:void 0}e:{var Vy="",ZE=(n=Ci,iS?/rv:([^\);]+)(\)|;)/.exec(n):rS?/Edge\/([\d\.]+)/.exec(n):gf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sS?/WebKit\/(\S+)/.exec(n):nS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ZE&&(Vy=ZE?ZE[1]:""),gf){var YE=KE();if(null!=YE&&YE>parseFloat(Vy)){wm=String(YE);break e}}wm=Vy}var aN={};function oS(){return e=aN,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Em(String(wm)).split("."),t=Em("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",l=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=HE(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||HE(0==i[2].length,0==l[2].length)||HE(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n}();var e}var nV=ht.document&&gf&&(KE()||parseInt(wm,10))||void 0,rV=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ht.addEventListener("test",vc,e),ht.removeEventListener("test",vc,e)}catch(t){}return n}();function os(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Uy(n,e){if(os.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(iS){e:{try{qE(e.nodeName);var i=!0;break e}catch(l){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:iV[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Uy.Z.h.call(this)}}os.prototype.h=function(){this.defaultPrevented=!0},wi(Uy,os);var iV={2:"touch",3:"pen",4:"mouse"};Uy.prototype.h=function(){Uy.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var By="closure_listenable_"+(1e6*Math.random()|0),sV=0;function oV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++sV,this.ca=this.fa=!1}function QE(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function JE(n){this.src=n,this.g={},this.h=0}function lS(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=bm(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(QE(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cS(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return i}return-1}JE.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=cS(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new oV(e,this.src,l,!!r,i)).fa=t,n.push(e)),e};var uS="closure_lm_"+(1e6*Math.random()|0),dS={};function cN(n,e,t,r,i){if(r&&r.once)return fS(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)cN(n,e[l],t,r,i);return null}return t=mS(t),n&&n[By]?n.N(e,t,ym(r)?!!r.capture:!!r,i):hS(n,e,t,!1,r,i)}function hS(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var u=ym(i)?!!i.capture:!!i,f=XE(n);if(f||(n[uS]=f=new JE(n)),(t=f.add(e,t,r,u,l)).proxy)return t;if(r=function(){var e=fN;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)rV||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function fS(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)fS(n,e[l],t,r,i);return null}return t=mS(t),n&&n[By]?n.O(e,t,ym(r)?!!r.capture:!!r,i):hS(n,e,t,!0,r,i)}function dN(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)dN(n,e[l],t,r,i);else r=ym(r)?!!r.capture:!!r,t=mS(t),n&&n[By]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cS(l=n.g[e],t,r,i))&&(QE(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=XE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cS(e,t,r,i)),(t=-1<n?e[n]:null)&&pS(t))}function pS(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[By])lS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=XE(e))?(lS(t,n),0==t.h&&(t.src=null,e[uS]=null)):QE(n)}}}function hN(n){return n in dS?dS[n]:dS[n]="on"+n}function fN(n,e){if(n.ca)n=!0;else{e=new Uy(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pS(n),n=t.call(r,e)}return n}function XE(n){return(n=n[uS])instanceof JE?n:null}var ew="__closure_events_fn_"+(1e9*Math.random()>>>0);function mS(n){return"function"==typeof n?n:(n[ew]||(n[ew]=function(e){return n.handleEvent(e)}),n[ew])}function Ii(){gl.call(this),this.i=new JE(this),this.P=this,this.I=null}function Ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new os(e,n);else if(e instanceof os)e.target=e.target||n;else{var i=e;WE(e=new os(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];i=tw(u,r,!0,e)&&i}if(i=tw(u=e.g=n,r,!0,e)&&i,i=tw(u,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=tw(u=e.g=t[l],r,!1,e)&&i}function tw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.ca&&u.capture==t){var f=u.listener,y=u.ia||u.src;u.fa&&lS(n.i,u),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}wi(Ii,gl),Ii.prototype[By]=!0,Ii.prototype.removeEventListener=function(n,e,t,r){dN(this,n,e,t,r)},Ii.prototype.M=function(){if(Ii.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)QE(t[r]);delete n.g[e],n.h--}}this.I=null},Ii.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nw=ht.JSON.stringify;function aV(){var n=ow;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var iw,jy=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new _f,n=>n.reset());class _f{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gS(n){ht.setTimeout(()=>{throw n},0)}function rw(n,e){iw||function(){var n=ht.Promise.resolve(void 0);iw=function(){n.then(_S)}}(),Hy||(iw(),Hy=!0),ow.add(n,e)}var Hy=!1,ow=new class{constructor(){this.h=this.g=null}add(e,t){const r=jy.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function _S(){for(var n;n=aV();){try{n.h.call(n.g)}catch(t){gS(t)}var e=jy;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Hy=!1}function aw(n,e){Ii.call(this),this.h=n||1,this.g=e||ht,this.j=ai(this.kb,this),this.l=Date.now()}function $y(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function yf(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:ht.setTimeout(n,e||0)}function lw(n){n.g=yf(()=>{n.g=null,n.i&&(n.i=!1,lw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}wi(aw,Ii),(it=aw.prototype).da=!1,it.S=null,it.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ui(this,"tick"),this.da&&($y(this),this.start()))}},it.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){aw.Z.M.call(this),$y(this),delete this.g};class lV extends gl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lw(this)}M(){super.M(),this.g&&(ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gy(n){gl.call(this),this.h=n,this.g={}}wi(Gy,gl);var mN=[];function yS(n,e,t,r){Array.isArray(t)||(t&&(mN[0]=t.toString()),t=mN);for(var i=0;i<t.length;i++){var l=cN(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function gN(n){$E(n.g,function(e,t){this.g.hasOwnProperty(t)&&pS(e)},n),n.g={}}function Od(){this.g=!0}function Cm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<i.length;u++)i[u]=""}}}return nw(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Gy.prototype.M=function(){Gy.Z.M.call(this),gN(this)},Gy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Od.prototype.Aa=function(){this.g=!1},Od.prototype.info=function(){};var bf={},bN=null;function zy(){return bN=bN||new Ii}function vN(n){os.call(this,bf.Ma,n)}function vf(n){const e=zy();Ui(e,new vN(e,n))}function bS(n,e){os.call(this,bf.STAT_EVENT,n),this.stat=e}function Ns(n){const e=zy();Ui(e,new bS(e,n))}function EN(n,e){os.call(this,bf.Na,n),this.size=e}function Im(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ht.setTimeout(function(){n()},e)}bf.Ma="serverreachability",wi(vN,os),bf.STAT_EVENT="statevent",wi(bS,os),bf.Na="timingevent",wi(EN,os);var lu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vS={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function uw(){}function Wy(){}uw.prototype.h=null;var Dm,Tm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function as(){os.call(this,"d")}function dw(){os.call(this,"c")}function qy(){}function Sm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Gy(this),this.P=wS,this.W=new aw(n=Ly?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ky}function Ky(){this.i=null,this.g="",this.h=!1}wi(as,os),wi(dw,os),wi(qy,uw),qy.prototype.g=function(){return new XMLHttpRequest},qy.prototype.i=function(){return{}},Dm=new qy;var wS=45e3,Zy={},Yy={};function Qy(n,e,t){n.K=1,n.v=Mm(_l(e)),n.s=t,n.U=!0,hw(n,null)}function hw(n,e){n.F=Date.now(),Ef(n),n.A=_l(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),xS(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ky,n.g=BS(n.l,t?e:null,!n.s),0<n.O&&(n.L=new lV(ai(n.Ia,n,n.g),n.O)),yS(n.V,n.g,"readystatechange",n.gb),e=n.H?GE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),vf(1),function(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var u="",f=l.split("&"),y=0;y<f.length;y++){var E=f[y].split("=");if(1<E.length){var D=E[0];E=E[1];var S=D.split("_");u=2<=S.length&&"type"==S[1]?u+(D+"=")+E+"&":u+(D+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function CS(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function IS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=fw(n,t),i==Yy){4==e&&(n.o=4,Ns(14),r=!1),Cm(n.j,n.m,null,"[Incomplete Response]");break}if(i==Zy){n.o=4,Ns(15),Cm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Cm(n.j,n.m,i,null),mw(n,i)}CS(n)&&i!=Yy&&i!=Zy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Sw(e),e.L=!0,Ns(11))):(Cm(n.j,n.m,t,"[Invalid Chunked Response]"),Ti(n),Am(n))}function fw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yy:(t=Number(e.substring(t,r)),isNaN(t)?Zy:(r+=1)+t>e.length?Yy:(e=e.substr(r,t),n.C=r+t,e))}function Ef(n){n.Y=Date.now()+n.P,pw(n,n.P)}function pw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Im(ai(n.eb,n),e)}function wf(n){n.B&&(ht.clearTimeout(n.B),n.B=null)}function Am(n){0==n.l.G||n.I||LS(n.l,n)}function Ti(n){wf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,$y(n.W),gN(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function mw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Om(t.i,n)))if(t.I=n.N,!n.J&&Om(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Im(ai(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;db(t),Iw(t)}Dw(t),Ns(18)}if(1>=kS(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else Ud(t,11)}else if((n.J||t.g==n)&&db(t),!vm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const D=E[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const N=E[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var l=r.i;!l.g&&(Vi(G,"spdy")||Vi(G,"quic")||Vi(G,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Pr(l,l.h),l.h=null))}if(r.D){const de=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;de&&(r.sa=de,Xn(r.F,r.D,de))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=US(r,r.H?r.la:null,r.W),u.J){AN(r.i,u);var f=u,y=r.K;y&&f.setTimeout(y),f.B&&(wf(f),Ef(f)),r.g=u}else FS(r);0<t.l.length&&ub(t)}else"stop"!=E[0]&&"close"!=E[0]||Ud(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Ud(t,7):Cw(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}vf(4)}catch(E){}}function gw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(VE(n)||"string"==typeof n)Py(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(VE(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(VE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}}function xm(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xm)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function _w(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Pd(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Pd(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Pd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(it=Sm.prototype).setTimeout=function(n){this.P=n},it.gb=function(n){n=n.target;const e=this.L;e&&3==cu(n)?e.l():this.Ia(n)},it.Ia=function(n){try{if(n==this.g)e:{const D=cu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||Ly||this.g&&(this.h.h||this.g.ga()||ON(this.g)))){this.I||4!=D||7==e||vf(8==e||0>=S?3:2),wf(this);var t=this.g.ba();this.N=t;t:if(CS(this)){var r=ON(this.g);n="";var i=r.length,l=4==cu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ti(this),Am(this);var u="";break t}this.h.i=new ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,l,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vm(f)){var E=f;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ns(12),Ti(this),Am(this);break e}Cm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mw(this,t)}this.U?(IS(this,D,u),Ly&&this.i&&3==D&&(yS(this.V,this.W,"tick",this.fb),this.W.start())):(Cm(this.j,this.m,u,null),mw(this,u)),4==D&&Ti(this),this.i&&!this.I&&(4==D?LS(this.l,this):(this.i=!1,Ef(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ns(12)):(this.o=0,Ns(13)),Ti(this),Am(this)}}}catch(D){}},it.fb=function(){if(this.g){var n=cu(this.g),e=this.g.ga();this.C<e.length&&(wf(this),IS(this,n,e),this.i&&4!=n&&Ef(this))}},it.cancel=function(){this.I=!0,Ti(this)},it.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(vf(3),Ns(17)),Ti(this),this.o=2,Am(this)):pw(this,this.Y-n)},(it=xm.prototype).R=function(){_w(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},it.T=function(){return _w(this),this.g.concat()},it.get=function(n,e){return Pd(this.h,n)?this.h[n]:e},it.set=function(n,e){Pd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},it.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],l=this.get(i);n.call(e,l,i,this)}};var TS=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Fd){this.g=void 0!==e?e:n.g,Jy(this,n.j),this.s=n.s,Xy(this,n.i),km(this,n.m),this.l=n.l,e=n.h;var t=new tb;t.i=e.i,e.g&&(t.g=new xm(e.g),t.h=e.h),DS(this,t),this.o=n.o}else n&&(t=String(n).match(TS))?(this.g=!!e,Jy(this,t[1]||"",!0),this.s=Rm(t[2]||""),Xy(this,t[3]||"",!0),km(this,t[4]),this.l=Rm(t[5]||"",!0),DS(this,t[6]||"",!0),this.o=Rm(t[7]||"")):(this.g=!!e,this.h=new tb(null,this.g))}function _l(n){return new Fd(n)}function Jy(n,e,t){n.j=t?Rm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xy(n,e,t){n.i=t?Rm(e,!0):e}function km(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function DS(n,e,t){e instanceof tb?(n.h=e,function(n,e){e&&!n.j&&(Ld(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(yw(this,r),xS(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Cf(e,IN)),n.h=new tb(e,n.g))}function Xn(n,e,t){n.h.set(e,t)}function Mm(n){return Xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Rm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Cf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Nm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Nm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Cf(e,eb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Cf(e,eb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Cf(t,"/"==t.charAt(0)?CN:AS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Cf(t,hV)),n.join("")};var eb=/[#\/\?@]/g,AS=/[#\?:]/g,CN=/[#\?]/g,IN=/[#\?@]/g,hV=/#/g;function tb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ld(n){n.g||(n.g=new xm,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yw(n,e){Ld(n),e=If(n,e),Pd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Pd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&_w(n)))}function bw(n,e){return Ld(n),e=If(n,e),Pd(n.g.h,e)}function xS(n,e,t){yw(n,e),0<t.length&&(n.i=null,n.g.set(If(n,e),jE(t)),n.h+=t.length)}function If(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function vw(n){this.l=n||fV,n=ht.PerformanceNavigationTiming?0<(n=ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ht.g&&ht.g.Ea&&ht.g.Ea()&&ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=tb.prototype).add=function(n,e){Ld(this),this.i=null,n=If(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Ld(this),this.g.forEach(function(t,r){Py(t,function(i){n.call(e,i,r,this)},this)},this)},it.T=function(){Ld(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],l=0;l<i.length;l++)t.push(e[r]);return t},it.R=function(n){Ld(this);var e=[];if("string"==typeof n)bw(this,n)&&(e=BE(e,this.g.get(If(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=BE(e,n[t])}return e},it.set=function(n,e){return Ld(this),this.i=null,bw(this,n=If(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var u=i;""!==r[l]&&(u+="="+encodeURIComponent(String(r[l]))),n.push(u)}}return this.i=n.join("&")};var fV=10;function SN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kS(n){return n.h?1:n.g?n.g.size:0}function Om(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Pr(n,e){n.g?n.g.add(e):n.h=e}function AN(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ew(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return jE(n.i)}function nb(){}function xN(){this.g=new nb}function rb(n,e,t){const r=t||"";try{gw(n,function(i,l){let u=i;ym(i)&&(u=nw(i)),e.push(r+l+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ib(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(l){}}function Tf(n){this.l=n.$b||null,this.j=n.ib||!1}function yl(n,e){Ii.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=sb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vw.prototype.cancel=function(){if(this.i=Ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},nb.prototype.stringify=function(n){return ht.JSON.stringify(n,void 0)},nb.prototype.parse=function(n){return ht.JSON.parse(n,void 0)},wi(Tf,uw),Tf.prototype.g=function(){return new yl(this.l,this.j)},Tf.prototype.i=function(n){return function(){return n}}({}),wi(yl,Ii);var sb=0;function ob(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Vd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Pm(n)}function Pm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=yl.prototype).open=function(n,e){if(this.readyState!=sb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Pm(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ht).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vd(this)),this.readyState=sb},it.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Pm(this)),this.g&&(this.readyState=3,Pm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ob(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},it.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vd(this):Pm(this),3==this.readyState&&ob(this)}},it.Ua=function(n){this.g&&(this.response=this.responseText=n,Vd(this))},it.Ta=function(n){this.g&&(this.response=n,Vd(this))},it.ha=function(){this.g&&Vd(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ab=ht.JSON.parse;function Fr(n){Ii.call(this),this.headers=new xm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lb,this.K=this.L=!1}wi(Fr,Ii);var lb="",MS=/^https?$/i,li=["POST","PUT"];function MN(n){return"content-type"==n.toLowerCase()}function RS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,RN(n),cb(n)}function RN(n){n.D||(n.D=!0,Ui(n,"complete"),Ui(n,"error"))}function Fm(n){if(n.h&&void 0!==QD&&(!n.C[1]||4!=cu(n)||2!=n.ba()))if(n.v&&4==cu(n))yf(n.Fa,0,n);else if(Ui(n,"readystatechange"),4==cu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(TS)[1]||null;if(!i&&ht.self&&ht.self.location){var l=ht.self.location.protocol;i=l.substr(0,l.length-1)}r=!MS.test(i?i.toLowerCase():"")}t=r}if(t)Ui(n,"complete"),Ui(n,"success");else{n.m=6;try{var u=2<cu(n)?n.g.statusText:""}catch(y){u=""}n.j=u+" ["+n.ba()+"]",RN(n)}}finally{cb(n)}}}function cb(n,e){if(n.g){NN(n);const t=n.g,r=n.C[0]?vc:null;n.g=null,n.C=null,e||Ui(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function NN(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ht.clearTimeout(n.A),n.A=null)}function cu(n){return n.g?n.g.readyState:0}function ON(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case lb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ww(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return $E(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xn(n,e,t))}function Lm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NS(n){this.za=0,this.l=[],this.h=new Od,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Lm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Lm("baseRetryDelayMs",5e3,n),this.$a=Lm("retryDelaySeedMs",1e4,n),this.Ya=Lm("forwardChannelMaxRetries",2,n),this.ra=Lm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new vw(n&&n.concurrentRequestLimit),this.Ca=new xN,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Cw(n){if(OS(n),3==n.G){var e=n.V++,t=_l(n.F);Xn(t,"SID",n.J),Xn(t,"RID",e),Xn(t,"TYPE","terminate"),Vm(n,t),(e=new Sm(n,n.h,e,void 0)).K=2,e.v=Mm(_l(t)),t=!1,ht.navigator&&ht.navigator.sendBeacon&&(t=ht.navigator.sendBeacon(e.v.toString(),"")),!t&&ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=BS(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ef(e)}LN(n)}function Iw(n){n.g&&(Sw(n),n.g.cancel(),n.g=null)}function OS(n){Iw(n),n.u&&(ht.clearTimeout(n.u),n.u=null),db(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ht.clearTimeout(n.m),n.m=null)}function Tw(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ub(n)}function ub(n){SN(n.i)||n.m||(n.m=!0,rw(n.Ha,n),n.C=0)}function FN(n,e){var t;t=e?e.m:n.V++;const r=_l(n.F);Xn(r,"SID",n.J),Xn(r,"RID",t),Xn(r,"AID",n.U),Vm(n,r),n.o&&n.s&&ww(r,n.o,n.s),t=new Sm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=PS(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Pr(n.i,t),Qy(t,r,e)}function Vm(n,e){n.j&&gw({},function(t,r){Xn(e,r,t)})}function PS(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ai(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=i[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let f=!0;for(let y=0;y<t;y++){let E=i[y].h;const D=i[y].g;if(E-=l,0>E)l=Math.max(0,i[y].h-100),f=!1;else try{rb(D,u,"req"+E+"_")}catch(S){r&&r(D)}}if(f){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function FS(n){n.g||n.u||(n.Y=1,rw(n.Ga,n),n.A=0)}function Dw(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Im(ai(n.Ga,n),VS(n,n.A)),n.A++,0))}function Sw(n){null!=n.B&&(ht.clearTimeout(n.B),n.B=null)}function jo(n){n.g=new Sm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_l(n.oa);Xn(e,"RID","rpc"),Xn(e,"SID",n.J),Xn(e,"CI",n.N?"0":"1"),Xn(e,"AID",n.U),Vm(n,e),Xn(e,"TYPE","xmlhttp"),n.o&&n.s&&ww(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Mm(_l(e)),t.s=null,t.U=!0,hw(t,n)}function db(n){null!=n.v&&(ht.clearTimeout(n.v),n.v=null)}function LS(n,e){var t=null;if(n.g==e){db(n),Sw(n),n.g=null;var r=2}else{if(!Om(n.i,e))return;t=e.D,AN(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ui(r=zy(),new EN(r,t,e,i)),ub(n)}else FS(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(kS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Im(ai(n.Ha,n,e),VS(n,n.C)),n.C++,0)))}(n,e)||2==r&&Dw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ud(n,5);break;case 4:Ud(n,10);break;case 3:Ud(n,6);break;default:Ud(n,2)}}function VS(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ud(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ai(n.jb,n);t||(t=new Fd("//www.google.com/images/cleardot.gif"),ht.location&&"http"==ht.location.protocol||Jy(t,"https"),Mm(t)),function(n,e){const t=new Od;if(ht.Image){const r=new Image;r.onload=Oy(ib,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Oy(ib,t,r,"TestLoadImage: error",!1,e),r.onabort=Oy(ib,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oy(ib,t,r,"TestLoadImage: timeout",!1,e),ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ns(2);n.G=0,n.j&&n.j.va(e),LN(n),OS(n)}function LN(n){n.G=0,n.I=-1,n.j&&((0!=Ew(n.i).length||0!=n.l.length)&&(n.i.i.length=0,jE(n.l),n.l.length=0),n.j.ua())}function US(n,e,t){let r=function(n){return n instanceof Fd?_l(n):new Fd(n,void 0)}(t);if(""!=r.i)e&&Xy(r,e+"."+r.i),km(r,r.m);else{const i=ht.location;r=function(n,e,t,r){var i=new Fd(null,void 0);return n&&Jy(i,n),e&&Xy(i,e),t&&km(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&$E(n.aa,function(i,l){Xn(r,l,i)}),t=n.sa,(e=n.D)&&t&&Xn(r,e,t),Xn(r,"VER",n.ma),Vm(n,r),r}function BS(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fr(t&&n.Ba&&!n.qa?new Tf({ib:!0}):n.qa)).L=n.H,e}function jS(){}function uu(){if(gf&&!(10<=Number(nV)))throw Error("Environmental error: no available transport.")}function Os(n,e){Ii.call(this),this.g=new NS(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!vm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Um(this)}function VN(n){as.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function HS(){dw.call(this),this.status=1}function Um(n){this.g=n}(it=Fr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dm.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Dm),this.g.onreadystatechange=ai(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void RS(this,l)}n=t||"";const i=new xm(this.headers);r&&gw(r,function(l,u){i.set(u,l)}),r=function(n){e:{var e=MN;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=ht.FormData&&n instanceof ht.FormData,!(0<=bm(li,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{NN(this),0<this.B&&((this.K=function(n){return gf&&oS()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.pa,this)):this.A=yf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){RS(this,l)}},it.pa=function(){void 0!==QD&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ui(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ui(this,"complete"),Ui(this,"abort"),cb(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cb(this,!0)),Fr.Z.M.call(this)},it.Fa=function(){this.s||(this.F||this.v||this.l?Fm(this):this.cb())},it.cb=function(){Fm(this)},it.ba=function(){try{return 2<cu(this)?this.g.status:-1}catch(n){return-1}},it.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},it.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ab(e)}},it.Da=function(){return this.m},it.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=NS.prototype).ma=8,it.G=1,it.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},it.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Sm(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=GE(l),WE(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=PS(this,i,e),Xn(t=_l(this.F),"RID",n),Xn(t,"CVER",22),this.D&&Xn(t,"X-HTTP-Session-Id",this.D),Vm(this,t),this.o&&l&&ww(t,this.o,l),Pr(this.i,i),this.Ra&&Xn(t,"TYPE","init"),this.ja?(Xn(t,"$req",e),Xn(t,"SID","null"),i.$=!0,Qy(i,t,null)):Qy(i,t,e),this.G=2}}else 3==this.G&&(n?FN(this,n):0==this.l.length||SN(this.i)||FN(this))},it.Ga=function(){if(this.u=null,jo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Im(ai(this.bb,this),n)}},it.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ns(10),Iw(this),jo(this))},it.ab=function(){null!=this.v&&(this.v=null,Iw(this),Dw(this),Ns(19))},it.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ns(2)):(this.h.info("Failed to ping google.com"),Ns(1))},(it=jS.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Oa=function(){},uu.prototype.g=function(n,e){return new Os(n,e)},wi(Os,Ii),Os.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),rw(ai(n.hb,n,e))),Ns(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=US(n,null,n.W),ub(n)},Os.prototype.close=function(){Cw(this.g)},Os.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Tw(this.g,e)}else this.v?((e={}).__data__=nw(n),Tw(this.g,e)):Tw(this.g,n)},Os.prototype.M=function(){this.g.j=null,delete this.j,Cw(this.g),delete this.g,Os.Z.M.call(this)},wi(VN,as),wi(HS,dw),wi(Um,jS),Um.prototype.xa=function(){Ui(this.g,"a")},Um.prototype.wa=function(n){Ui(this.g,new VN(n))},Um.prototype.va=function(n){Ui(this.g,new HS(n))},Um.prototype.ua=function(){Ui(this.g,"b")},uu.prototype.createWebChannel=uu.prototype.g,Os.prototype.send=Os.prototype.u,Os.prototype.open=Os.prototype.m,Os.prototype.close=Os.prototype.close,lu.NO_ERROR=0,lu.TIMEOUT=8,lu.HTTP_ERROR=6,vS.COMPLETE="complete",Wy.EventType=Tm,Tm.OPEN="a",Tm.CLOSE="b",Tm.ERROR="c",Tm.MESSAGE="d",Ii.prototype.listen=Ii.prototype.N,Fr.prototype.listenOnce=Fr.prototype.O,Fr.prototype.getLastError=Fr.prototype.La,Fr.prototype.getLastErrorCode=Fr.prototype.Da,Fr.prototype.getStatus=Fr.prototype.ba,Fr.prototype.getResponseJson=Fr.prototype.Qa,Fr.prototype.getResponseText=Fr.prototype.ga,Fr.prototype.send=Fr.prototype.ea;var gV=ml.createWebChannelTransport=function(){return new uu},_V=ml.getStatEventTarget=function(){return zy()},Bm=ml.ErrorCode=lu,UN=ml.EventType=vS,BN=ml.Event=bf,$S=ml.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yV=ml.FetchXmlHttpFactory=Tf,hb=ml.WebChannel=Wy,jN=ml.XhrIo=Fr;const GS="@firebase/firestore";class Dn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");let jm="9.6.7";const Ec=new Bo.Yd("@firebase/firestore");function Aw(){return Ec.logLevel}function je(n,...e){if(Ec.logLevel<=Bo.in.DEBUG){const t=e.map(Hm);Ec.debug(`Firestore (${jm}): ${n}`,...t)}}function Dr(n,...e){if(Ec.logLevel<=Bo.in.ERROR){const t=e.map(Hm);Ec.error(`Firestore (${jm}): ${n}`,...t)}}function Bd(n,...e){if(Ec.logLevel<=Bo.in.WARN){const t=e.map(Hm);Ec.warn(`Firestore (${jm}): ${n}`,...t)}}function Hm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${jm}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function St(n,e){n||ct()}function Ke(n,e){return n}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dn.UNAUTHENTICATED))}shutdown(){}}class $N{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GN{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let u=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ci,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const E=u;e.enqueueRetryable((0,xe.Z)(function*(){yield E.promise,yield l(r.currentUser)}))},y=E=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(E=>y(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ci)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new xw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Dn(e)}}class kw{constructor(e,t,r){this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zN{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $m{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.p;return this.p=l.token,je("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.p=t.token,new Bi(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ps{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function pb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ps.A=-1;class mb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=pb(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function Qt(n,e){return n<e?-1:n>e?1:0}function wc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function WS(n){return n+"\0"}class ui{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ui.fromMillis(Date.now())}static fromDate(e){return ui.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ui(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new ui(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function qS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function du(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Gm{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),u=t.get(i);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Gm{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const hu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends Gm{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return hu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ve(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ve(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(l(),i++)}if(l(),u)throw new Ve(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class fu{constructor(e){this.fields=e,e.sort(dr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Kr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new Kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kr.EMPTY_BYTE_STRING=new Kr("");const qN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(n){if(St(!!n),"string"==typeof n){let e=0;const t=qN.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hr(n.seconds),nanos:hr(n.nanos)}}function hr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pu(n){return"string"==typeof n?Kr.fromBase64String(n):Kr.fromUint8Array(n)}function gb(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ZS(n){const e=n.mapValue.fields.__previous_value__;return gb(e)?ZS(e):e}function zm(n){const e=bl(n.mapValue.fields.__local_write_time__.timestampValue);return new ui(e.seconds,e.nanos)}class KN{constructor(e,t,r,i,l,u,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class ls{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ls("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ls&&e.projectId===this.projectId&&e.database===this.database}}function wa(n){return null==n}function vl(n){return 0===n&&1/n==-1/0}function Wm(n){return"number"==typeof n&&Number.isInteger(n)&&!vl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(cn.fromString(e))}static fromName(e){return new Je(cn.fromString(e).popFirst(5))}static empty(){return new Je(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new cn(e.slice()))}}const ZN={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function jd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gb(n)?4:10:ct()}function Ca(n,e){if(n===e)return!0;const t=jd(n);if(t!==jd(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zm(n).isEqual(zm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=bl(r.timestampValue),u=bl(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,pu(n.bytesValue).isEqual(pu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hr(r.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(r.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hr(r.integerValue)===hr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=hr(r.doubleValue),u=hr(i.doubleValue);return l===u?vl(l)===vl(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return wc(n.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:return function(r,i){const l=r.mapValue.fields||{},u=i.mapValue.fields||{};if(qS(l)!==qS(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===u[f]||!Ca(l[f],u[f])))return!1;return!0}(n,e);default:return ct()}var i}function Df(n,e){return void 0!==(n.values||[]).find(t=>Ca(t,e))}function Hd(n,e){if(n===e)return 0;const t=jd(n),r=jd(e);if(t!==r)return Qt(t,r);switch(t){case 0:return 0;case 1:return Qt(n.booleanValue,e.booleanValue);case 2:return function(i,l){const u=hr(i.integerValue||i.doubleValue),f=hr(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return Rw(n.timestampValue,e.timestampValue);case 4:return Rw(zm(n),zm(e));case 5:return Qt(n.stringValue,e.stringValue);case 6:return function(i,l){const u=pu(i),f=pu(l);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const u=i.split("/"),f=l.split("/");for(let y=0;y<u.length&&y<f.length;y++){const E=Qt(u[y],f[y]);if(0!==E)return E}return Qt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const u=Qt(hr(i.latitude),hr(l.latitude));return 0!==u?u:Qt(hr(i.longitude),hr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const u=i.values||[],f=l.values||[];for(let y=0;y<u.length&&y<f.length;++y){const E=Hd(u[y],f[y]);if(E)return E}return Qt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){const u=i.fields||{},f=Object.keys(u),y=l.fields||{},E=Object.keys(y);f.sort(),E.sort();for(let D=0;D<f.length&&D<E.length;++D){const S=Qt(f[D],E[D]);if(0!==S)return S;const N=Hd(u[f[D]],y[E[D]]);if(0!==N)return N}return Qt(f.length,E.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Rw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Qt(n,e);const t=bl(n),r=bl(e),i=Qt(t.seconds,r.seconds);return 0!==i?i:Qt(t.nanos,r.nanos)}function $d(n){return qm(n)}function qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=bl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pu(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const u of r.values||[])l?l=!1:i+=",",i+=qm(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const f of i)u?u=!1:l+=",",l+=`${f}:${qm(r.fields[f])}`;return l+"}"}(n.mapValue):ct();var e}function _b(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Nw(n){return!!n&&"integerValue"in n}function Km(n){return!!n&&"arrayValue"in n}function mu(n){return!!n&&"nullValue"in n}function yb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bb(n){return!!n&&"mapValue"in n}function Zm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return du(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zm(n.arrayValue.values[t]);return e}return Object.assign({},n)}class cs{constructor(e){this.value=e}static empty(){return new cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zm(t)}setAll(e){let t=dr.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=Zm(u):i.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());bb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];bb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){du(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new cs(Zm(this.value))}}function YN(n){const e=[];return du(n.fields,(t,r)=>{const i=new dr([t]);if(bb(r)){const l=YN(r.mapValue).fields;if(0===l.length)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new fu(e)}class fr{constructor(e,t,r,i,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=l,this.documentState=u}static newInvalidDocument(e){return new fr(e,0,xt.min(),xt.min(),cs.empty(),0)}static newFoundDocument(e,t,r){return new fr(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new fr(e,2,t,xt.min(),cs.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,xt.min(),cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let YS=(()=>{class n{constructor(t,r,i,l){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=l}}return n.UNKNOWN_ID=-1,n})();class vb{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ym{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ym(0,Ow.min())}}class Ow{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ow(xt.min(),Je.empty(),-1)}}class bV{constructor(e,t=null,r=[],i=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=u,this.endAt=f,this.P=null}}function QN(n,e=null,t=[],r=[],i=null,l=null,u=null){return new bV(n,e,t,r,i,l,u)}function Eb(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+$d(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),wa(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$d(r)).join(",")),e.P=t}return e.P}function Pw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!T(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P(n.startAt,e.startAt)&&P(n.endAt,e.endAt)}function Fw(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Fs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new vV(e,t,r):"array-contains"===t?new c(e,r):"in"===t?new d(e,r):"not-in"===t?new h(e,r):"array-contains-any"===t?new _(e,r):new Fs(e,t,r)}static v(e,t,r){return"in"===t?new s(e,r):new o(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Hd(t,this.value)):null!==t&&jd(this.value)===jd(t)&&this.V(Hd(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class vV extends Fs{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.V(t)}}class s extends Fs{constructor(e,t){super(e,"in",t),this.keys=a(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class o extends Fs{constructor(e,t){super(e,"not-in",t),this.keys=a(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class c extends Fs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Km(t)&&Df(t.arrayValue,this.value)}}class d extends Fs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Df(this.value.arrayValue,t)}}class h extends Fs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Df(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Df(this.value.arrayValue,t)}}class _ extends Fs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Km(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Df(this.value.arrayValue,r))}}class b{constructor(e,t){this.position=e,this.inclusive=t}}class C{constructor(e,t="asc"){this.field=e,this.dir=t}}function T(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function k(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(r=l.field.isKeyField()?Je.comparator(Je.fromName(u.referenceValue),t.key):Hd(u,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function P(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ca(n.position[t],e.position[t]))return!1;return!0}class V{constructor(e,t=null,r=[],i=[],l=null,u="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=y,this.D=null,this.C=null}}function q(n,e,t,r,i,l,u,f){return new V(n,e,t,r,i,l,u,f)}function X(n){return new V(n)}function ye(n){return!wa(n.limit)&&"F"===n.limitType}function le(n){return!wa(n.limit)&&"L"===n.limitType}function Be(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ke(n){for(const e of n.filters)if(e.S())return e.field;return null}function ut(n){return null!==n.collectionGroup}function yt(n){const e=Ke(n);if(null===e.D){e.D=[];const t=ke(e),r=Be(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new C(t)),e.D.push(new C(dr.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new C(dr.keyField(),l))}}}return e.D}function kt(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=QN(e.path,e.collectionGroup,yt(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of yt(e))t.push(new C(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new b(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new b(e.startAt.position,!e.startAt.inclusive):null;e.C=QN(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Lr(n,e,t){return new V(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ji(n,e){return Pw(kt(n),kt(e))&&n.limitType===e.limitType}function Sf(n){return`${Eb(kt(n))}|lt:${n.limitType}`}function gu(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$d(r.value)}`;var r}).join(", ")}]`),wa(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$d(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$d(t)).join(",")),`Target(${e})`}(kt(n))}; limitType=${n.limitType})`}function _u(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,u){const f=k(i,l,u);return i.inclusive?f<=0:f<0}(t.startAt,yt(t),r)||t.endAt&&!function(i,l,u){const f=k(i,l,u);return i.inclusive?f>=0:f>0}(t.endAt,yt(t),r)));var t,r}function Gd(n){return(e,t)=>{let r=!1;for(const i of yt(n)){const l=Lw(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function Lw(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,l,u){const f=l.data.field(i),y=u.data.field(i);return null!==f&&null!==y?Hd(f,y):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function wb(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function Cb(n){return{integerValue:""+n}}function Ib(n,e){return Wm(e)?Cb(e):wb(n,e)}class Af{constructor(){this._=void 0}}function EH(n,e,t){return n instanceof Tb?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Qm?wV(n,e):n instanceof Jm?CV(n,e):function(r,i){const l=EV(r,i),u=IV(l)+IV(r.k);return Nw(l)&&Nw(r.k)?Cb(u):wb(r.O,u)}(n,e)}function wH(n,e,t){return n instanceof Qm?wV(n,e):n instanceof Jm?CV(n,e):t}function EV(n,e){return n instanceof Db?Nw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Tb extends Af{}class Qm extends Af{constructor(e){super(),this.elements=e}}function wV(n,e){const t=TV(e);for(const r of n.elements)t.some(i=>Ca(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jm extends Af{constructor(e){super(),this.elements=e}}function CV(n,e){let t=TV(e);for(const r of n.elements)t=t.filter(i=>!Ca(i,r));return{arrayValue:{values:t}}}class Db extends Af{constructor(e,t){super(),this.O=e,this.k=t}}function IV(n){return hr(n.integerValue||n.doubleValue)}function TV(n){return Km(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vw{constructor(e,t){this.field=e,this.transform=t}}class IH{constructor(e,t){this.version=e,this.transformResults=t}}class di{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function QS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class JS{}function TH(n,e,t){n instanceof Uw?function(r,i,l){const u=r.value.clone(),f=xV(r.fieldTransforms,i,l.transformResults);u.setAll(f),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Xm?function(r,i,l){if(!QS(r.precondition,i))return void i.convertToUnknownDocument(l.version);const u=xV(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(AV(r)),f.setAll(u),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function XN(n,e,t){var i;n instanceof Uw?function(r,i,l){if(!QS(r.precondition,i))return;const u=r.value.clone(),f=kV(r.fieldTransforms,l,i);u.setAll(f),i.convertToFoundDocument(SV(i),u).setHasLocalMutations()}(n,e,t):n instanceof Xm?function(r,i,l){if(!QS(r.precondition,i))return;const u=kV(r.fieldTransforms,l,i),f=i.data;f.setAll(AV(r)),f.setAll(u),i.convertToFoundDocument(SV(i),f).setHasLocalMutations()}(n,e,t):QS(n.precondition,i=e)&&i.convertToNoDocument(xt.min())}function DH(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=EV(r.transform,i||null);null!=l&&(null==t&&(t=cs.empty()),t.set(r.field,l))}return t||null}function DV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wc(t,r,(i,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qm&&r instanceof Qm||t instanceof Jm&&r instanceof Jm?wc(t.elements,r.elements,Ca):t instanceof Db&&r instanceof Db?Ca(t.k,r.k):t instanceof Tb&&r instanceof Tb);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function SV(n){return n.isFoundDocument()?n.version:xt.min()}class Uw extends JS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Xm extends JS{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function AV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xV(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,f=e.data.field(l.field);r.set(l.field,wH(u,f,t[i]))}return r}function kV(n,e,t){const r=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);r.set(i.field,EH(l,u,e))}return r}class Bw extends JS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class eO extends JS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class SH{constructor(e){this.count=e}}var hi,un;function MV(n){switch(n){default:return ct();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0}}function RV(n){if(void 0===n)return Dr("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case hi.OK:return Ee.OK;case hi.CANCELLED:return Ee.CANCELLED;case hi.UNKNOWN:return Ee.UNKNOWN;case hi.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case hi.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case hi.INTERNAL:return Ee.INTERNAL;case hi.UNAVAILABLE:return Ee.UNAVAILABLE;case hi.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case hi.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case hi.NOT_FOUND:return Ee.NOT_FOUND;case hi.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case hi.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case hi.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case hi.ABORTED:return Ee.ABORTED;case hi.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case hi.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case hi.DATA_LOSS:return Ee.DATA_LOSS;default:return ct()}}(un=hi||(hi={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Zr{constructor(e,t){this.comparator=e,this.root=t||us.EMPTY}insert(e,t){return new Zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,us.BLACK,null,null))}remove(e){return new Zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new XS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new XS(this.root,e,this.comparator,!1)}getReverseIterator(){return new XS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new XS(this.root,e,this.comparator,!0)}}class XS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class us{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=null!=r?r:us.RED,this.left=null!=i?i:us.EMPTY,this.right=null!=l?l:us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new us(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return us.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}us.EMPTY=null,us.RED=!0,us.BLACK=!1,us.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new us(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pr{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NV(this.data.getIterator())}getIteratorFrom(e){return new NV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pr(this.comparator);return t.data=e,t}}class NV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sb(n){return n.hasNext()?n.getNext():void 0}const AH=new Zr(Je.comparator);function El(){return AH}const xH=new Zr(Je.comparator);function tO(){return xH}const kH=new Zr(Je.comparator),MH=new pr(Je.comparator);function wn(...n){let e=MH;for(const t of n)e=e.add(t);return e}const RH=new pr(Qt);function eA(){return RH}class jw{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Hw.createSynthesizedTargetChangeForCurrentChange(e,t)),new jw(xt.min(),r,eA(),El(),wn())}}class Hw{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Hw(Kr.EMPTY_BYTE_STRING,t,wn(),wn(),wn())}}class tA{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class OV{constructor(e,t){this.targetId=e,this.F=t}}class PV{constructor(e,t,r=Kr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class FV{constructor(){this.B=0,this.L=VV(),this.U=Kr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=wn(),t=wn(),r=wn();return this.L.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new Hw(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=VV()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class NH{constructor(e){this.nt=e,this.st=new Map,this.it=El(),this.rt=LV(),this.ot=new pr(Qt)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const l=i.target;if(Fw(l))if(0===r){const u=new Je(l.path);this.at(t,u,fr.newNoDocument(u,xt.min()))}else St(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,u)=>{const f=this.wt(u);if(f){if(l.current&&Fw(f.target)){const y=new Je(f.target.path);null!==this.it.get(y)||this.It(u,y)||this.at(u,y,fr.newNoDocument(y,e))}l.j&&(t.set(u,l.H()),l.J())}});let r=wn();this.rt.forEach((l,u)=>{let f=!0;u.forEachWhile(y=>{const E=this.wt(y);return!E||2===E.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,u)=>u.setReadTime(e));const i=new jw(e,t,this.ot,this.it,r);return this.it=El(),this.rt=LV(),this.ot=new pr(Qt),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new FV,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new pr(Qt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new FV),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function LV(){return new Zr(Je.comparator)}function VV(){return new Zr(Je.comparator)}const OH={asc:"ASCENDING",desc:"DESCENDING"},PH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FH{constructor(e,t){this.databaseId=e,this.N=t}}function $w(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UV(n,e){return n.N?e.toBase64():e.toUint8Array()}function LH(n,e){return $w(n,e.toTimestamp())}function Hi(n){return St(!!n),xt.fromTimestamp(function(e){const t=bl(e);return new ui(t.seconds,t.nanos)}(n))}function nO(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BV(n){const e=cn.fromString(n);return St(ZV(e)),e}function Gw(n,e){return nO(n.databaseId,e.path)}function yu(n,e){const t=BV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(HV(t))}function rO(n,e){return nO(n.databaseId,e)}function jV(n){const e=BV(n);return 4===e.length?cn.emptyPath():HV(e)}function zw(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HV(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $V(n,e,t){return{name:Gw(n,e),fields:t.value.mapValue.fields}}function GV(n,e,t){const r=yu(n,e.name),i=Hi(e.updateTime),l=new cs({mapValue:{fields:e.fields}}),u=fr.newFoundDocument(r,i,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Ww(n,e){let t;if(e instanceof Uw)t={update:$V(n,e.key,e.value)};else if(e instanceof Bw)t={delete:Gw(n,e.key)};else if(e instanceof Xm)t={update:$V(n,e.key,e.data),updateMask:WH(e.fieldMask)};else{if(!(e instanceof eO))return ct();t={verify:Gw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const u=l.transform;if(u instanceof Tb)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Qm)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Jm)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Db)return{fieldPath:l.field.canonicalString(),increment:u.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:LH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function iO(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?di.updateTime(Hi(i.updateTime)):void 0!==i.exists?di.exists(i.exists):di.none():di.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,u){let f=null;"setToServerValue"in u?(St("REQUEST_TIME"===u.setToServerValue),f=new Tb):"appendMissingElements"in u?f=new Qm(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Jm(u.removeAllFromArray.values||[]):"increment"in u?f=new Db(l,u.increment):ct();const y=dr.fromServerFormat(u.fieldPath);return new Vw(y,f)}(n,i)):[];var i;if(e.update){const i=yu(n,e.update.name),l=new cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new fu((e.updateMask.fieldPaths||[]).map(E=>dr.fromServerFormat(E)));return new Xm(i,l,u,t,r)}return new Uw(i,l,t,r)}if(e.delete){const i=yu(n,e.delete);return new Bw(i,t)}if(e.verify){const i=yu(n,e.verify);return new eO(i,t)}return ct()}function zV(n,e){return{documents:[rO(n,e.path)]}}function WV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=rO(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=rO(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const E=y.map(D=>function(S){if("=="===S.op){if(yb(S.value))return{unaryFilter:{field:Ab(S.field),op:"IS_NAN"}};if(mu(S.value))return{unaryFilter:{field:Ab(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(yb(S.value))return{unaryFilter:{field:Ab(S.field),op:"IS_NOT_NAN"}};if(mu(S.value))return{unaryFilter:{field:Ab(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ab(S.field),op:$H(S.op),value:S.value}}}(D));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const l=function(y){if(0!==y.length)return y.map(E=>{return{field:Ab((D=E).field),direction:HH(D.dir)};var D})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=(E=e.limit,n.N||wa(E)?E:{value:E});var E,f,y;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function qV(n){let e=jV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let l=[];t.where&&(l=KV(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(D=>{return new C(xb((S=D).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(D){let S;return S="object"==typeof D?D.value:D,wa(S)?null:S}(t.limit));let y=null;var D;t.startAt&&(y=new b((D=t.startAt).values||[],!!D.before));let E=null;return t.endAt&&(E=function(D){return new b(D.values||[],!D.before)}(t.endAt)),q(e,i,u,l,f,"F",y,E)}function KV(n){return n?void 0!==n.unaryFilter?[zH(n)]:void 0!==n.fieldFilter?[GH(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>KV(e)).reduce((e,t)=>e.concat(t)):ct():[]}function HH(n){return OH[n]}function $H(n){return PH[n]}function Ab(n){return{fieldPath:n.canonicalString()}}function xb(n){return dr.fromServerFormat(n.fieldPath)}function GH(n){return Fs.create(xb(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function zH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=xb(n.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=xb(n.unaryFilter.field);return Fs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xb(n.unaryFilter.field);return Fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xb(n.unaryFilter.field);return Fs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function WH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function $i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YV(e)),e=qH(n.get(t),e);return YV(e)}function qH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function YV(n){return n+"\x01\x01"}function bu(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&ct(),n.charAt(u+1)){case"\x01":const f=n.substring(l,u);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(l,u),i+="\0";break;case"\x11":i+=n.substring(l,u+1);break;default:ct()}l=u+2}return new cn(r)}class KH{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Ia{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Ia.store="owner",Ia.key="owner";class xf{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}xf.store="mutationQueues",xf.keyPath="userId";class er{constructor(e,t,r,i,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=l}}er.store="mutations",er.keyPath="batchId",er.userMutationsIndex="userMutationsIndex",er.userMutationsKeyPath=["userId","batchId"];class Ls{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,$i(t)]}static key(e,t,r){return[e,$i(t),r]}}Ls.store="documentMutations",Ls.PLACEHOLDER=new Ls;class ZH{constructor(e,t){this.path=e,this.readTime=t}}class YH{constructor(e,t){this.path=e,this.version=t}}class Vr{constructor(e,t,r,i,l,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=l,this.parentPath=u}}Vr.store="remoteDocuments",Vr.readTimeIndex="readTimeIndex",Vr.readTimeIndexPath="readTime",Vr.collectionReadTimeIndex="collectionReadTimeIndex",Vr.collectionReadTimeIndexPath=["parentPath","readTime"];class vu{constructor(e){this.byteSize=e}}vu.store="remoteDocumentGlobal",vu.key="remoteDocumentGlobalKey";class Ho{constructor(e,t,r,i,l,u,f){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=u,this.query=f}}Ho.store="targets",Ho.keyPath="targetId",Ho.queryTargetsIndexName="queryTargetsIndex",Ho.queryTargetsKeyPath=["canonicalId","targetId"];class ds{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}ds.store="targetDocuments",ds.keyPath=["targetId","path"],ds.documentTargetsIndex="documentTargetsIndex",ds.documentTargetsKeyPath=["path","targetId"];class Ta{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Ta.key="targetGlobalKey",Ta.store="targetGlobal";class eg{constructor(e,t){this.collectionId=e,this.parent=t}}eg.store="collectionParents",eg.keyPath=["collectionId","parent"];class zd{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}zd.store="clientMetadata",zd.keyPath="clientId";class kb{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}kb.store="bundles",kb.keyPath="bundleId";class Mb{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Mb.store="namedQueries",Mb.keyPath="name";class Da{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}Da.store="indexConfiguration",Da.keyPath="indexId",Da.collectionGroupIndex="collectionGroupIndex",Da.collectionGroupIndexPath="collectionGroup";class wl{constructor(e,t,r,i,l,u){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=l,this.largestBatchId=u}}wl.store="indexState",wl.keyPath=["indexId","uid"],wl.sequenceNumberIndex="sequenceNumberIndex",wl.sequenceNumberIndexPath=["uid","sequenceNumber"];class Cl{constructor(e,t,r,i,l){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=l}}Cl.store="indexEntries",Cl.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Cl.documentKeyIndex="documentKeyIndex",Cl.documentKeyIndexPath=["indexId","uid","documentKey"];class Gi{constructor(e,t,r,i,l,u){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=l,this.overlayMutation=u}}Gi.store="documentOverlays",Gi.keyPath=["userId","collectionPath","documentId"],Gi.collectionPathOverlayIndex="collectionPathOverlayIndex",Gi.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Gi.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Gi.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const QV=[xf.store,er.store,Ls.store,Vr.store,Ho.store,Ia.store,Ta.store,ds.store,zd.store,vu.store,eg.store,kb.store,Mb.store],JV=[...QV,Gi.store],QH=[...JV,Da.store,wl.store,Cl.store],XV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let i=0,l=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++l,u&&l===i&&t()},y=>r(y))}),u=!0,l===i&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(i=>i?Se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}}class nA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ci,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new qw(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=sO(r.target.error);this.At.reject(new qw(e,i))}}static open(e,t,r,i){try{return new nA(t,e.transaction(i,r))}catch(l){throw new qw(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XH(t)}}class Cc{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Cc.vt((0,U.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),ng(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,U.hl)())return!1;if(Cc.St())return!0;const e=(0,U.z$)(),t=Cc.vt(e),r=0<t&&t<10,i=Cc.Dt(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,xe.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{r(u.target.result)},l.onblocked=()=>{i(new qw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Ve(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ve(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new qw(e,f))},l.onupgradeneeded=u=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.bt.kt(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,xe.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{l.db=yield l.xt(e);const y=nA.open(l.db,e,u?"readonly":"readwrite",r),E=i(y).next(D=>(y.Pt(),D)).catch(D=>(y.abort(D),Se.reject(D))).toPromise();return E.catch(()=>{}),yield y.Rt,E}catch(y){const E="FirebaseError"!==y.name&&f<3;if(je("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),l.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class JH{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return ng(this.$t.delete())}}class qw extends Ve{constructor(e,t){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tg(n){return"IndexedDbTransactionError"===n.name}class XH{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ng(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),ng(this.store.add(e))}get(e){return ng(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),ng(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),ng(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(u,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new Se((l,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,u,f)=>f.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new Se((r,i)=>{t.onerror=l=>{const u=sO(l.target.error);i(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new Se((i,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const y=new JH(f),E=t(f.primaryKey,f.value,y);if(E instanceof Se){const D=E.catch(S=>(y.done(),Se.reject(S)));r.push(D)}y.isDone?i():null===y.Lt?f.continue():f.continue(y.Lt)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ng(n){return new Se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=sO(r.target.error);t(i)}})}let tU=!1;function sO(n){const e=Cc.vt((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tU||(tU=!0,setTimeout(()=>{throw r},0)),r}}return n}class nU extends eU{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function zi(n,e){const t=Ke(n);return Cc.Nt(t.zt,e)}class oO{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&TH(l,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&XN(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&XN(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),wn())}isEqual(e){return this.batchId===e.batchId&&wc(this.mutations,e.mutations,(t,r)=>DV(t,r))&&wc(this.baseMutations,e.baseMutations,(t,r)=>DV(t,r))}}class aO{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=kH;const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,r[u].version);return new aO(e,t,r,i)}}class lO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kf{constructor(e,t,r,i,l=xt.min(),u=xt.min(),f=Kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new kf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rU{constructor(e){this.Ht=e}}function iU(n,e){let t;if(e.document)t=GV(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=ig(e.noDocument.readTime);t=fr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Je.fromSegments(e.unknownDocument.path),i=ig(e.unknownDocument.version);t=fr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(uO(e.readTime)),t}function sU(n,e){const t=cO(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:Gw(u=n.Ht,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:$w(u,f.version.toTimestamp())};return new Vr(null,null,i,e.hasCommittedMutations,t,r)}var u,f;if(e.isNoDocument()){const i=e.key.path.toArray(),l=rg(e.version),u=e.hasCommittedMutations;return new Vr(null,new ZH(i,l),null,u,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),l=rg(e.version);return new Vr(new YH(i,l),null,null,!0,t,r)}return ct()}function cO(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function uO(n){const e=new ui(n[0],n[1]);return xt.fromTimestamp(e)}function rg(n){const e=n.toTimestamp();return new KH(e.seconds,e.nanoseconds)}function ig(n){const e=new ui(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function Rb(n,e){const t=(e.baseMutations||[]).map(l=>iO(n.Ht,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>iO(n.Ht,l)),i=ui.fromMillis(e.localWriteTimeMs);return new oO(e.batchId,i,t,r)}function Kw(n){const e=ig(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ig(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=kt(X(jV(i.documents[0])))):r=kt(qV(n.query)),new kf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Kr.fromBase64String(n.resumeToken))}function oU(n,e){const t=rg(e.snapshotVersion),r=rg(e.lastLimboFreeSnapshotVersion);let i;i=Fw(e.target)?zV(n.Ht,e.target):WV(n.Ht,e.target);const l=e.resumeToken.toBase64();return new Ho(e.targetId,Eb(e.target),t,l,e.sequenceNumber,r,i)}function dO(n){const e=qV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Lr(e,e.limit,"L"):e}function hO(n,e){return new lO(e.largestBatchId,iO(n.Ht,e.overlayMutation))}function aU(n,e){const t=e.path.lastSegment();return[n,$i(e.path.popLast()),t]}class e${getBundleMetadata(e,t){return lU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ig(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return lU(e).put({bundleId:(r=t).id,createTime:rg(Hi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:dO(i.bundledQuery),readTime:ig(i.readTime)};var i})}saveNamedQuery(e,t){return cU(e).put({name:(r=t).name,readTime:rg(Hi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function lU(n){return zi(n,kb.store)}function cU(n){return zi(n,Mb.store)}class fO{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new fO(e,t.uid||"")}getOverlay(e,t){return Zw(e).get(aU(this.userId,t)).next(r=>r?hO(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(l=>{const u=new lO(t,l);i.push(this.Yt(e,u))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add($i(u.getCollectionPath())));const l=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Zw(e).Gt(Gi.collectionPathOverlayIndex,f))}),Se.waitFor(l)}getOverlaysForCollection(e,t,r){const i=new Map,l=$i(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Zw(e).qt(Gi.collectionPathOverlayIndex,u).next(f=>{for(const y of f){const E=hO(this.O,y);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=new Map;let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zw(e).Qt({index:Gi.collectionGroupOverlayIndex,range:f},(y,E,D)=>{const S=hO(this.O,E);l.size<i||S.largestBatchId===u?(l.set(S.getKey(),S),u=S.largestBatchId):D.done()}).next(()=>l)}Yt(e,t){return Zw(e).put(function(r,i,l){const[u,f,y]=aU(i,l.mutation.key);return new Gi(i,f,y,l.mutation.key.getCollectionGroup(),l.largestBatchId,Ww(r.Ht,l.mutation))}(this.O,this.userId,t))}}function Zw(n){return zi(n,Gi.store)}class rA{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(hr(e.integerValue));else if("doubleValue"in e){const r=hr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),vl(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(pu(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Ca(e,ZN)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):ct()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Je.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function t$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=t$(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}rA.le=new rA;class n${constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=uU(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=uU(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r${constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class i${constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class dU{constructor(){this.Se=new n$,this.De=new r$(this.Se),this.Ce=new i$(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class pO{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function mO(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:(t=hU(n.arrayValue,e.arrayValue),0!==t?t:hU(n.directionalValue,e.directionalValue)))}function hU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class s${constructor(){this.xe=new gO}addToCollectionParentIndex(e,t){return this.xe.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t,r){return Se.resolve(wn())}getFieldIndex(e,t){return Se.resolve(null)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class gO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pr(cn.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pr(cn.comparator)).toArray()}}class o${constructor(e){this.user=e,this.ke=new gO,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const l={collectionId:r,parent:$i(i)};return fU(e).put(l)}return Se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[WS(t),""],!1,!0);return fU(e).qt(i).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(bu(u.parent))}return r})}addFieldIndex(e,t){const r=sA(e),i=new Da((l=t).indexId,l.collectionGroup,l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind]));var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=sA(e),i=oA(e),l=iA(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return Se.resolve(wn())}getFieldIndex(e,t){return Se.resolve(null)}Oe(e,t){const r=new dU;for(const i of e.fields.filter(u=>2!==u.kind)){const l=t.data.field(i.fieldPath);if(null==l)return null;const u=r.Ne(i.kind);rA.le.Xt(l,u)}return r.Ve()}Me(e){const t=new dU;return rA.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=sA(e),i=oA(e);return(t?r.qt(Da.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const u=[];return Se.forEach(l,f=>i.get([f.indexId,this.uid]).next(y=>{u.push(function(E,D){const S=D?new Ym(D.sequenceNumber,new Ow(ig(D.readTime),new Je(bu(D.documentKey)),D.largestBatchId)):Ym.empty(),N=E.fields.map(([B,G])=>new vb(dr.fromServerFormat(B),G));return new YS(E.indexId,E.collectionGroup,N,S)}(f,y))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=sA(e),l=oA(e);return this.$e(e).next(u=>i.qt(Da.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(f=>Se.forEach(f,y=>{return l.put(new wl(y.indexId,this.user.uid||"",u,rg((N=r).readTime),$i(N.documentKey.path),N.largestBatchId));var N})))}updateIndexEntries(e,t){const r=new Map;return Se.forEach(t,(i,l)=>{const u=r.get(i.collectionGroup);return(u?Se.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Se.forEach(f,y=>this.Fe(e,i,y).next(E=>{const D=this.Be(l,y);return E.isEqual(D)?Se.resolve():this.Le(e,l,E,D)}))))})}Ue(e,t,r){return iA(e).put(new Cl(r.indexId,this.uid,r.arrayValue,r.directionalValue,$i(t.key.path)))}qe(e,t,r){return iA(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,$i(t.key.path)])}Fe(e,t,r){const i=iA(e);let l=new pr(mO);return i.Qt({index:Cl.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,$i(t.path)])},(u,f)=>{l=l.add(new pO(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>l)}Be(e,t){let r=new pr(mO);const i=this.Oe(t,e);if(null==i)return r;const l=t.fields.find(f=>2===f.kind);if(null!=l){const u=e.data.field(l.fieldPath);if(Km(u))for(const f of u.arrayValue.values||[])r=r.add(new pO(t.indexId,e.key,this.Me(f),i))}else r=r.add(new pO(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(u,f,y,E,D){const S=u.getIterator(),N=f.getIterator();let B=Sb(S),G=Sb(N);for(;B||G;){let de=!1,Ae=!1;if(B&&G){const We=y(B,G);We<0?Ae=!0:We>0&&(de=!0)}else null!=B?Ae=!0:de=!0;de?(E(G),G=Sb(N)):Ae?(D(B),B=Sb(S)):(B=Sb(S),G=Sb(N))}}(r,i,mO,u=>{l.push(this.Ue(e,t,u))},u=>{l.push(this.qe(e,t,u))}),Se.waitFor(l)}$e(e){let t=1;return oA(e).Qt({index:wl.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}}function fU(n){return zi(n,eg.store)}function iA(n){return zi(n,Cl.store)}function sA(n){return zi(n,Da.store)}function oA(n){return zi(n,wl.store)}const pU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $o{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new $o(e,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mU(n,e,t){const r=n.store(er.store),i=n.store(Ls.store),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const y=r.Qt({range:u},(D,S,N)=>(f++,N.delete()));l.push(y.next(()=>{St(1===f)}));const E=[];for(const D of t.mutations){const S=Ls.key(e,D.key.path,t.batchId);l.push(i.delete(S)),E.push(D.key)}return Se.waitFor(l).next(()=>E)}function aA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}$o.DEFAULT_COLLECTION_PERCENTILE=10,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$o.DEFAULT=new $o(41943040,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$o.DISABLED=new $o(-1,0,0);class _O{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){St(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new _O(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mf(e).Qt({index:er.userMutationsIndex,range:r},(i,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=Nb(e),u=Mf(e);return u.add({}).next(f=>{St("number"==typeof f);const y=new oO(f,t,r,i),E=function(N,B,G){const de=G.baseMutations.map(We=>Ww(N.Ht,We)),Ae=G.mutations.map(We=>Ww(N.Ht,We));return new er(B,G.batchId,G.localWriteTime.toMillis(),de,Ae)}(this.O,this.userId,y),D=[];let S=new pr((N,B)=>Qt(N.canonicalString(),B.canonicalString()));for(const N of i){const B=Ls.key(this.userId,N.key.path,f);S=S.add(N.key.path.popLast()),D.push(u.put(E)),D.push(l.put(B,Ls.PLACEHOLDER))}return S.forEach(N=>{D.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.Ke[f]=y.keys()}),Se.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Mf(e).get(t).next(r=>r?(St(r.userId===this.userId),Rb(this.O,r)):null)}Ge(e,t){return this.Ke[t]?Se.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Mf(e).Qt({index:er.userMutationsIndex,range:i},(u,f,y)=>{f.userId===this.userId&&(St(f.batchId>=r),l=Rb(this.O,f)),y.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mf(e).Qt({index:er.userMutationsIndex,range:t,reverse:!0},(i,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mf(e).qt(er.userMutationsIndex,t).next(r=>r.map(i=>Rb(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ls.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return Nb(e).Qt({range:i},(u,f,y)=>{const[E,D,S]=u,N=bu(D);if(E===this.userId&&t.path.isEqual(N))return Mf(e).get(S).next(B=>{if(!B)throw ct();St(B.userId===this.userId),l.push(Rb(this.O,B))});y.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pr(Qt);const i=[];return t.forEach(l=>{const u=Ls.prefixForPath(this.userId,l.path),f=IDBKeyRange.lowerBound(u),y=Nb(e).Qt({range:f},(E,D,S)=>{const[N,B,G]=E,de=bu(B);N===this.userId&&l.path.isEqual(de)?r=r.add(G):S.done()});i.push(y)}),Se.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=Ls.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new pr(Qt);return Nb(e).Qt({range:u},(y,E,D)=>{const[S,N,B]=y,G=bu(N);S===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(B)):D.done()}).next(()=>this.je(e,f))}je(e,t){const r=[],i=[];return t.forEach(l=>{i.push(Mf(e).get(l).next(u=>{if(null===u)throw ct();St(u.userId===this.userId),r.push(Rb(this.O,u))}))}),Se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mU(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),Se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(Ls.prefixForUser(this.userId)),i=[];return Nb(e).Qt({range:r},(l,u,f)=>{if(l[0]===this.userId){const y=bu(l[1]);i.push(y)}else f.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return gU(e,this.userId,t)}We(e){return _U(e).get(this.userId).next(t=>t||new xf(this.userId,-1,""))}}function gU(n,e,t){const r=Ls.prefixForPath(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Nb(n).Qt({range:l,jt:!0},(f,y,E)=>{const[D,S,N]=f;D===e&&S===i&&(u=!0),E.done()}).next(()=>u)}function Mf(n){return zi(n,er.store)}function Nb(n){return zi(n,Ls.store)}function _U(n){return zi(n,xf.store)}class sg{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new sg(0)}static Je(){return new sg(-1)}}class a${constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new sg(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>xt.fromTimestamp(new ui(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ob(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return Ob(e).Qt((u,f)=>{const y=Kw(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,l.push(this.removeTargetData(e,y)))}).next(()=>Se.waitFor(l)).next(()=>i)}forEachTarget(e,t){return Ob(e).Qt((r,i)=>{const l=Kw(i);t(l)})}Ye(e){return yU(e).get(Ta.key).next(t=>(St(null!==t),t))}Xe(e,t){return yU(e).put(Ta.key,t)}Ze(e,t){return Ob(e).put(oU(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eb(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Ob(e).Qt({range:i,index:Ho.queryTargetsIndexName},(u,f,y)=>{const E=Kw(f);Pw(t,E.target)&&(l=E,y.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=Rf(e);return t.forEach(u=>{const f=$i(u.path);i.push(l.put(new ds(r,f))),i.push(this.referenceDelegate.addReference(e,r,u))}),Se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Rf(e);return Se.forEach(t,l=>{const u=$i(l.path);return Se.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Rf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Rf(e);let l=wn();return i.Qt({range:r,jt:!0},(u,f,y)=>{const E=bu(u[1]),D=new Je(E);l=l.add(D)}).next(()=>l)}containsKey(e,t){const r=$i(t.path),i=IDBKeyRange.bound([r],[WS(r)],!1,!0);let l=0;return Rf(e).Qt({index:ds.documentTargetsIndex,jt:!0,range:i},([u,f],y,E)=>{0!==u&&(l++,E.done())}).next(()=>l>0)}Tt(e,t){return Ob(e).get(t).next(r=>r?Kw(r):null)}}function Ob(n){return zi(n,Ho.store)}function yU(n){return zi(n,Ta.store)}function Rf(n){return zi(n,ds.store)}function og(n){return yO.apply(this,arguments)}function yO(){return(yO=(0,xe.Z)(function*(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==XV)throw n;je("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function bU([n,e],[t,r]){const i=Qt(n,t);return 0===i?Qt(e,r):i}class l${constructor(e){this.en=e,this.buffer=new pr(bU),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class c${constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,xe.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){tg(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield og(i)}yield t.un(e)}))}}class u${constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Se.resolve(Ps.A);const r=new l$(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(pU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pU):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,l,u,f,y,E;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,u=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(l=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),Aw()<=Bo.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-D}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${l} targets in `+(y-f)+`ms\n\tRemoved ${S} documents in `+(E-y)+`ms\nTotal Duration: ${E-D}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:S})))}}class d${constructor(e,t){this.db=e,this.garbageCollector=new u$(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return lA(e,r)}removeReference(e,t,r){return lA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lA(e,t)}wn(e,t){return function(r,i){let l=!1;return _U(r).Wt(u=>gU(r,u,i).next(f=>(f&&(l=!0),Se.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this._n(e,(u,f)=>{if(f<=t){const y=this.wn(e,u).next(E=>{if(!E)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,xt.min()),Rf(e).delete([0,$i(u.path)])))});i.push(y)}}).next(()=>Se.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lA(e,t)}_n(e,t){const r=Rf(e);let i,l=Ps.A;return r.Qt({index:ds.documentTargetsIndex},([u,f],{path:y,sequenceNumber:E})=>{0===u?(l!==Ps.A&&t(new Je(bu(i)),l),l=E,i=y):l=Ps.A}).next(()=>{l!==Ps.A&&t(new Je(bu(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lA(n,e){return Rf(n).put((r=n.currentSequenceNumber,new ds(0,$i(e.path),r)));var r}class Pb{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){du(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return KS(this.inner)}}class vU{constructor(){this.changes=new Pb(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class h${constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nf(e).put(cA(t),r)}removeEntry(e,t){const r=Nf(e),i=cA(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Nf(e).get(cA(t)).next(r=>this.gn(t,r))}yn(e,t){return Nf(e).get(cA(t)).next(r=>({document:this.gn(t,r),size:aA(r)}))}getEntries(e,t){let r=El();return this.pn(e,t,(i,l)=>{const u=this.gn(i,l);r=r.insert(i,u)}).next(()=>r)}In(e,t){let r=El(),i=new Zr(Je.comparator);return this.pn(e,t,(l,u)=>{const f=this.gn(l,u);r=r.insert(l,f),i=i.insert(l,aA(u))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return Se.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let u=l.getNext();return Nf(e).Qt({range:i},(f,y,E)=>{const D=Je.fromSegments(f);for(;u&&Je.comparator(u,D)<0;)r(u,null),u=l.getNext();u&&u.isEqual(D)&&(r(u,y),u=l.hasNext()?l.getNext():null),u?E.Ut(u.path.toArray()):E.done()}).next(()=>{for(;u;)r(u,null),u=l.hasNext()?l.getNext():null})}getAll(e,t,r){let i=El();const l=t.length+1,u={};if(r.isEqual(xt.min())){const f=t.toArray();u.range=IDBKeyRange.lowerBound(f)}else{const f=t.toArray(),y=cO(r);u.range=IDBKeyRange.lowerBound([f,y],!0),u.index=Vr.collectionReadTimeIndex}return Nf(e).Qt(u,(f,y,E)=>{if(f.length!==l)return;const D=this.gn(Je.fromSegments(f),y);t.isPrefixOf(D.key.path)?i=i.insert(D.key,D):E.done()}).next(()=>i)}newChangeBuffer(e){return new f$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return EU(e).get(vu.key).next(t=>(St(!!t),t))}mn(e,t){return EU(e).put(vu.key,t)}gn(e,t){if(t){const r=iU(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return fr.newInvalidDocument(e)}}class f$ extends vU{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Pb(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new pr((l,u)=>Qt(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const f=this.An.get(l);if(u.isValidDocument()){const y=sU(this.Tn.O,u);i=i.add(l.path.popLast()),r+=aA(y)-f,t.push(this.Tn.addEntry(e,l,y))}else if(r-=f,this.trackRemovals){const y=sU(this.Tn.O,u.convertToNoDocument(xt.min()));t.push(this.Tn.addEntry(e,l,y))}else t.push(this.Tn.removeEntry(e,l))}),i.forEach(l=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Tn.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((l,u)=>{this.An.set(l,u)}),r))}}function EU(n){return zi(n,vu.store)}function Nf(n){return zi(n,Vr.store)}function cA(n){return n.path.toArray()}class p${constructor(e){this.O=e}kt(e,t,r,i){const l=new nA("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore(Ia.store),(f=e).createObjectStore(xf.store,{keyPath:xf.keyPath}),f.createObjectStore(er.store,{keyPath:er.keyPath,autoIncrement:!0}).createIndex(er.userMutationsIndex,er.userMutationsKeyPath,{unique:!0}),f.createObjectStore(Ls.store),wU(e),function(f){f.createObjectStore(Vr.store)}(e));let u=Se.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore(ds.store),f.deleteObjectStore(Ho.store),f.deleteObjectStore(Ta.store)}(e),wU(e)),u=u.next(()=>function(f){const y=f.store(Ta.store),E=new Ta(0,0,xt.min().toTimestamp(),0);return y.put(Ta.key,E)}(l))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,y){return y.store(er.store).qt().next(E=>{f.deleteObjectStore(er.store),f.createObjectStore(er.store,{keyPath:er.keyPath,autoIncrement:!0}).createIndex(er.userMutationsIndex,er.userMutationsKeyPath,{unique:!0});const D=y.store(er.store),S=E.map(N=>D.put(N));return Se.waitFor(S)})}(e,l))),u=u.next(()=>{!function(f){f.createObjectStore(zd.store,{keyPath:zd.keyPath})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Rn(l))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore(vu.store)}(e),this.Pn(l)))),r<7&&i>=7&&(u=u.next(()=>this.bn(l))),r<8&&i>=8&&(u=u.next(()=>this.vn(e,l))),r<9&&i>=9&&(u=u.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e),function(f){const y=f.objectStore(Vr.store);y.createIndex(Vr.readTimeIndex,Vr.readTimeIndexPath,{unique:!1}),y.createIndex(Vr.collectionReadTimeIndex,Vr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(u=u.next(()=>this.Vn(l))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore(kb.store,{keyPath:kb.keyPath})})(e),function(f){f.createObjectStore(Mb.store,{keyPath:Mb.keyPath})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const y=f.createObjectStore(Gi.store,{keyPath:Gi.keyPath});y.createIndex(Gi.collectionPathOverlayIndex,Gi.collectionPathOverlayIndexPath,{unique:!1}),y.createIndex(Gi.collectionGroupOverlayIndex,Gi.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>{!function(f){f.createObjectStore(Da.store,{keyPath:Da.keyPath,autoIncrement:!0}).createIndex(Da.collectionGroupIndex,Da.collectionGroupIndexPath,{unique:!1}),f.createObjectStore(wl.store,{keyPath:wl.keyPath}).createIndex(wl.sequenceNumberIndex,wl.sequenceNumberIndexPath,{unique:!1}),f.createObjectStore(Cl.store,{keyPath:Cl.keyPath}).createIndex(Cl.documentKeyIndex,Cl.documentKeyIndexPath,{unique:!1})}(e)})),u}Pn(e){let t=0;return e.store(Vr.store).Qt((r,i)=>{t+=aA(i)}).next(()=>{const r=new vu(t);return e.store(vu.store).put(vu.key,r)})}Rn(e){const t=e.store(xf.store),r=e.store(er.store);return t.qt().next(i=>Se.forEach(i,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt(er.userMutationsIndex,u).next(f=>Se.forEach(f,y=>{St(y.userId===l.userId);const E=Rb(this.O,y);return mU(e,l.userId,E).next(()=>{})}))}))}bn(e){const t=e.store(ds.store),r=e.store(Vr.store);return e.store(Ta.store).get(Ta.key).next(i=>{const l=[];return r.Qt((u,f)=>{const y=new cn(u),E=[0,$i(y)];l.push(t.get(E).next(D=>D?Se.resolve():t.put(new ds(0,$i(y),i.highestListenSequenceNumber))))}).next(()=>Se.waitFor(l))})}vn(e,t){e.createObjectStore(eg.store,{keyPath:eg.keyPath});const r=t.store(eg.store),i=new gO,l=u=>{if(i.add(u)){const f=u.lastSegment(),y=u.popLast();return r.put({collectionId:f,parent:$i(y)})}};return t.store(Vr.store).Qt({jt:!0},(u,f)=>{const y=new cn(u);return l(y.popLast())}).next(()=>t.store(Ls.store).Qt({jt:!0},([u,f,y],E)=>{const D=bu(f);return l(D.popLast())}))}Vn(e){const t=e.store(Ho.store);return t.Qt((r,i)=>{const l=Kw(i),u=oU(this.O,l);return t.put(u)})}}function wU(n){n.createObjectStore(ds.store,{keyPath:ds.keyPath}).createIndex(ds.documentTargetsIndex,ds.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Ho.store,{keyPath:Ho.keyPath}).createIndex(Ho.queryTargetsIndexName,Ho.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Ta.store)}const bO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vO{constructor(e,t,r,i,l,u,f,y,E,D,S=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=l,this.window=u,this.document=f,this.Dn=E,this.Cn=D,this.schemaVersion=S,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=N=>Promise.resolve(),!vO.Vt())throw new Ve(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d$(this,i),this.Bn=t+"main",this.O=new rU(y),this.Ln=new Cc(this.Bn,this.schemaVersion,new p$(this.O)),this.Un=new a$(this.referenceDelegate,this.O),this.qn=new h$(this.O),this.Kn=new e$,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===D&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(Ee.FAILED_PRECONDITION,bO);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Ps(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,xe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,xe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uA(e).put(new zd(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(tg(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Yw(e).get(Ia.key).next(t=>Se.resolve(this.ts(t)))}es(e){return uA(e).delete(this.clientId)}ns(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zi(r,zd.store);return i.qt().next(l=>{const u=e.rs(l,18e5),f=l.filter(y=>-1===u.indexOf(y));return Se.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?Se.resolve(!0):Yw(e).get(Ia.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Ve(Ee.FAILED_PRECONDITION,bO);return!1}}return!(!this.networkEnabled||!this.inForeground)||uA(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Ia.store,zd.store],t=>{const r=new nU(t,Ps.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>uA(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return _O.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new o$(e)}getDocumentOverlayCache(e){return fO.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=13===(u=this.schemaVersion)?QH:12===u?JV:11===u?QV:void ct();var u;let f;return this.Ln.runTransaction(e,i,l,y=>(f=new nU(y,this.Nn?this.Nn.next():Ps.A),"readwrite-primary"===t?this.Jn(f).next(E=>!!E||this.Yn(f)).next(E=>{if(!E)throw Dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Ve(Ee.FAILED_PRECONDITION,XV);return r(f)}).next(E=>this.Zn(f).next(()=>E)):this._s(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}_s(e){return Yw(e).get(Ia.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(Ee.FAILED_PRECONDITION,bO)})}Zn(e){const t=new Ia(this.clientId,this.allowTabSynchronization,Date.now());return Yw(e).put(Ia.key,t)}static Vt(){return Cc.Vt()}Xn(e){const t=Yw(e);return t.get(Ia.key).next(r=>this.ts(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete(Ia.key)):Se.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,U.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Dr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yw(n){return zi(n,Ia.store)}function uA(n){return zi(n,zd.store)}function EO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class m${constructor(e,t){this.progress=e,this.ws=t}}class g${constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const l of t)l.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):ut(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Je(t)).next(r=>{let i=tO();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let l=tO();return this.indexManager.getCollectionParents(e,i).next(u=>Se.forEach(u,f=>{const y=(E=t,D=f.child(i),new V(D,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,D;return this.bs(e,y,r).next(E=>{E.forEach((D,S)=>{l=l.insert(D,S)})})}).next(()=>l))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(l=>(i=l,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const u of l)for(const f of u.mutations){const y=f.key;let E=i.get(y);null==E&&(E=fr.newInvalidDocument(y),i=i.insert(y,E)),XN(f,E,u.localWriteTime),E.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((l,u)=>{_u(t,u)||(i=i.remove(l))}),i))}}class wO{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=wn(),i=wn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new wO(e,t.fromCache,r,i)}}class CU{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.Ns(e,t):this.Cs.Es(e,i).next(l=>{const u=this.xs(t,l);return(ye(t)||le(t))&&this.ks(t.limitType,u,i,r)?this.Ns(e,t):(Aw()<=Bo.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gu(t)),this.Cs.As(e,t,r).next(f=>(u.forEach(y=>{f=f.insert(y.key,y)}),f)))});var l}xs(e,t){let r=new pr(Gd(e));return t.forEach((i,l)=>{_u(e,l)&&(r=r.add(l))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ns(e,t){return Aw()<=Bo.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",gu(t)),this.Cs.As(e,t,xt.min())}}class _${constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new Zr(Qt),this.$s=new Pb(l=>Eb(l),Pw),this.Fs=xt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new g$(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function IU(n,e,t,r){return new _$(n,e,t,r)}function TU(n,e){return CO.apply(this,arguments)}function CO(){return(CO=(0,xe.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(l=>(i=l,t.Ls(e),t.gs.getAllMutationBatches(r))).next(l=>{const u=[],f=[];let y=wn();for(const E of i){u.push(E.batchId);for(const D of E.mutations)y=y.add(D.key)}for(const E of l){f.push(E.batchId);for(const D of E.mutations)y=y.add(D.key)}return t.Us.Es(r,y).next(E=>({qs:E,removedBatchIds:u,addedBatchIds:f}))})})})).apply(this,arguments)}function y$(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,f,y,E){const D=y.batch,S=D.keys();let N=Se.resolve();return S.forEach(B=>{N=N.next(()=>E.getEntry(f,B)).next(G=>{const de=y.docVersions.get(B);St(null!==de),G.version.compareTo(de)<0&&(D.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),E.addEntry(G)))})}),N.next(()=>u.gs.removeMutationBatch(f,D))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function DU(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function b$(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const f=[];e.targetChanges.forEach((E,D)=>{const S=i.get(D);if(!S)return;f.push(t.Un.removeMatchingKeys(l,E.removedDocuments,D).next(()=>t.Un.addMatchingKeys(l,E.addedDocuments,D)));let N=S.withSequenceNumber(l.currentSequenceNumber);var B,G,de;e.targetMismatches.has(D)?N=N.withResumeToken(Kr.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,r)),i=i.insert(D,N),G=N,de=E,(0===(B=S).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&f.push(t.Un.updateTargetData(l,N))});let y=El();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(SU(l,u,e.documentUpdates).next(E=>{y=E})),!r.isEqual(xt.min())){const E=t.Un.getLastRemoteSnapshotVersion(l).next(D=>t.Un.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(E)}return Se.waitFor(f).next(()=>u.apply(l)).next(()=>t.Us.Ts(l,y)).next(()=>y)}).then(l=>(t.Ms=i,l))}function SU(n,e,t){let r=wn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let l=El();return t.forEach((u,f)=>{const y=i.get(u);f.isNoDocument()&&f.version.isEqual(xt.min())?(e.removeEntry(u,f.readTime),l=l.insert(u,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),l=l.insert(u,f)):je("LocalStore","Ignoring outdated watch update for ",u,". Current version:",y.version," Watch version:",f.version)}),l})}function v$(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Fb(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(l=>l?(i=l,Se.resolve(i)):t.Un.allocateTargetId(r).next(u=>(i=new kf(e,u,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function Lb(n,e,t){return IO.apply(this,arguments)}function IO(){return(IO=(0,xe.Z)(function*(n,e,t){const r=Ke(n),i=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!tg(u))throw u;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)})).apply(this,arguments)}function dA(n,e,t){const r=Ke(n);let i=xt.min(),l=wn();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,y,E){const D=Ke(f),S=D.$s.get(E);return void 0!==S?Se.resolve(D.Ms.get(S)):D.Un.getTargetData(y,E)}(r,u,kt(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(u,f.targetId).next(y=>{l=y})}).next(()=>r.Os.As(u,e,t?i:xt.min(),t?l:wn())).next(f=>({documents:f,Ks:l})))}function AU(n,e){const t=Ke(n),r=Ke(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Tt(l,e).next(u=>u?u.target:null))}function xU(n){const e=Ke(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,l){const u=Ke(r);let f=El(),y=cO(l);const E=Nf(i),D=IDBKeyRange.lowerBound(y,!0);return E.Qt({index:Vr.readTimeIndex,range:D},(S,N)=>{const B=iU(u.O,N);f=f.insert(B.key,B),y=N.readTime}).next(()=>({ws:f,readTime:uO(y)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function TO(){return(TO=(0,xe.Z)(function*(n){const e=Ke(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Nf(r);let l=xt.min();return i.Qt({index:Vr.readTimeIndex,reverse:!0},(u,f,y)=>{f.readTime&&(l=uO(f.readTime)),y.done()}).next(()=>l)}(t)).then(t=>{e.Fs=t})})).apply(this,arguments)}function DO(){return(DO=(0,xe.Z)(function*(n,e,t,r){const i=Ke(n);let l=wn(),u=El();for(const E of t){const D=e.Gs(E.metadata.name);E.document&&(l=l.add(D));const S=e.js(E);S.setReadTime(e.Qs(E.metadata.readTime)),u=u.insert(D,S)}const f=i.Bs.newChangeBuffer({trackRemovals:!0}),y=yield Fb(i,(E=r,kt(X(cn.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>SU(E,f,u).next(D=>(f.apply(E),D)).next(D=>i.Un.removeMatchingKeysForTargetId(E,y.targetId).next(()=>i.Un.addMatchingKeys(E,l,y.targetId)).next(()=>i.Us.Ts(E,D)).next(()=>D)))})).apply(this,arguments)}function C$(n,e){return SO.apply(this,arguments)}function SO(){return(SO=(0,xe.Z)(function*(n,e,t=wn()){const r=yield Fb(n,kt(dO(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const u=Hi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Kn.saveNamedQuery(l,e);const f=r.withResumeToken(Kr.EMPTY_BYTE_STRING,u);return i.Ms=i.Ms.insert(f.targetId,f),i.Un.updateTargetData(l,f).next(()=>i.Un.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.Un.addMatchingKeys(l,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(l,e))})})).apply(this,arguments)}class I${constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return Se.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Hi(r.createTime)}),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:dO(r.bundledQuery),readTime:Hi(r.readTime)}),Se.resolve();var r}}class T${constructor(){this.overlays=new Zr(Je.comparator),this.Hs=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Hs.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,l=t.length+1,u=new Je(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const y=f.getNext().value,E=y.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===l&&y.largestBatchId>r&&i.set(y.getKey(),y)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Zr((E,D)=>E-D);const u=this.overlays.getIterator();for(;u.hasNext();){const E=u.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let D=l.get(E.largestBatchId);null===D&&(D=new Map,l=l.insert(E.largestBatchId,D)),D.set(E.getKey(),E)}}const f=new Map,y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,D)=>f.set(D,E)),!(f.size>=i)););return Se.resolve(f)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new lO(t,r));let l=this.Hs.get(t);void 0===l&&(l=new Set,this.Hs.set(t,l)),l.add(r.key)}}class AO{constructor(){this.Js=new pr(Wi.Ys),this.Xs=new pr(Wi.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Wi(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Wi(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Je(new cn([])),r=new Wi(t,e),i=new Wi(t,e+1),l=[];return this.Xs.forEachInRange([r,i],u=>{this.ei(u),l.push(u.key)}),l}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Je(new cn([])),r=new Wi(t,e),i=new Wi(t,e+1);let l=wn();return this.Xs.forEachInRange([r,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Wi(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wi{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Je.comparator(e.key,t.key)||Qt(e.oi,t.oi)}static Zs(e,t){return Qt(e.oi,t.oi)||Je.comparator(e.key,t.key)}}class D${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new pr(Wi.Ys)}checkEmpty(e){return Se.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const l=this.ci;this.ci++;const u=new oO(l,t,r,i);this.gs.push(u);for(const f of i)this.ui=this.ui.add(new Wi(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Se.resolve(u)}lookupMutationBatch(e,t){return Se.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),l=i<0?0:i;return Se.resolve(this.gs.length>l?this.gs[l]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return Se.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wi(t,0),i=new Wi(t,Number.POSITIVE_INFINITY),l=[];return this.ui.forEachInRange([r,i],u=>{const f=this.ai(u.oi);l.push(f)}),Se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pr(Qt);return t.forEach(i=>{const l=new Wi(i,0),u=new Wi(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([l,u],f=>{r=r.add(f.oi)})}),Se.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;Je.isDocumentKey(l)||(l=l.child(""));const u=new Wi(new Je(l),0);let f=new pr(Qt);return this.ui.forEachWhile(y=>{const E=y.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(f=f.add(y.oi)),!0)},u),Se.resolve(this.li(f))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return Se.forEach(t.mutations,i=>{const l=new Wi(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Wi(t,0),i=this.ui.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Se.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class S${constructor(e){this.di=e,this.docs=new Zr(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,u=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=El();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():fr.newInvalidDocument(i))}),Se.resolve(r)}getAll(e,t,r){let i=El();const l=new Je(t.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:y}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||y.readTime.compareTo(r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return Se.resolve(i)}_i(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new A$(this)}getSize(e){return Se.resolve(this.size)}}class A$ extends vU{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class x${constructor(e){this.persistence=e,this.wi=new Pb(t=>Eb(t),Pw),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.mi=0,this.gi=new AO,this.targetCount=0,this.yi=sg.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),Se.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new sg(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Ze(t),Se.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.wi.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.wi.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),Se.waitFor(l).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),Se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.gi.containsKey(t))}}class k${constructor(e,t){this.pi={},this.overlays={},this.Nn=new Ps(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new x$(this),this.indexManager=new s$,this.qn=new S$(r=>this.referenceDelegate.Ii(r)),this.O=new rU(t),this.Kn=new I$(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new D$(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new M$(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(l=>this.referenceDelegate.Ti(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ai(e,t){return Se.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class M$ extends eU{constructor(e){super(),this.currentSequenceNumber=e}}class xO{constructor(e){this.persistence=e,this.Ri=new AO,this.Pi=null}static bi(e){return new xO(e)}get vi(){if(this.Pi)return this.Pi;throw ct()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.vi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.vi,r=>{const i=Je.fromPath(r);return this.Vi(e,i).next(l=>{l||t.removeEntry(i,xt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return Se.or([()=>Se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function kU(n,e){return`firestore_clients_${n}_${e}`}function MU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kO(n,e){return`firestore_targets_${n}_${e}`}class hA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let l,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(l=new Ve(i.error.code,i.error.message))),u?new hA(e,t,i.state,l):(Dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Ve(r.error.code,r.error.message))),l?new Qw(e,r.state,i):(Dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=eA();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=Wm(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return i?new fA(e,l):(Dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class MO{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new MO(t.clientId,t.onlineState):(Dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class RO{constructor(){this.activeTargetIds=eA()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NO{constructor(e,t,r,i,l){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Zr(Qt),this.started=!1,this.$i=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Fi=kU(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new RO),this.Li=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(f){return`firestore_bundle_loaded_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const l=e.getItem(kU(e.persistenceKey,i));if(l){const u=fA.Si(i,l);u&&(e.Mi=e.Mi.insert(u.clientId,u))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(kO(this.persistenceKey,e));if(r){const i=Qw.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(l){let u=Ps.A;if(null!=l)try{const f=JSON.parse(l);St("number"==typeof f),u=f}catch(f){Dr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==Ps.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new hA(this.currentUser,e,t,r),l=MU(this.persistenceKey,this.currentUser,e);this.setItem(l,i.Di())}Ji(e){const t=MU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=kO(this.persistenceKey,e),l=new Qw(e,t,r);this.setItem(i,l.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return fA.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return hA.Si(new Dn(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return Qw.Si(i,t)}Qi(e){return MO.Si(e)}rr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),l=this.zi(r),u=[],f=[];return l.forEach(y=>{i.has(y)||u.push(y)}),i.forEach(y=>{l.has(y)||f.push(y)}),this.syncEngine.dr(u,f).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=eA();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class RU{constructor(){this._r=new RO,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new RO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class R${mr(e){}shutdown(){}}class NU{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const N$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class O${constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class P$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,l){const u=this.$r(e,t);je("RestConnection","Sending: ",u,r);const f={};return this.Fr(f,i,l),this.Br(e,u,f,r).then(y=>(je("RestConnection","Received: ",y),y),y=>{throw Bd("RestConnection",`${e} failed with error: `,y,"url: ",u,"request:",r),y})}Lr(e,t,r,i,l){return this.Mr(e,t,r,i,l)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}$r(e,t){return`${this.kr}/v1/${t}:${N$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((l,u)=>{const f=new jN;f.listenOnce(UN.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Bm.NO_ERROR:const E=f.getResponseJson();je("Connection","XHR received:",JSON.stringify(E)),l(E);break;case Bm.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),u(new Ve(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Bm.HTTP_ERROR:const D=f.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',D,"response text:",f.getResponseText()),D>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const N=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(G)>=0?G:Ee.UNKNOWN}(S.status);u(new Ve(N,S.message))}else u(new Ve(Ee.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Ve(Ee.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=gV(),u=_V(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new yV({})),this.Fr(f.initMessageHeaders,t,r),(0,U.uI)()||(0,U.b$)()||(0,U.d)()||(0,U.w1)()||(0,U.Mn)()||(0,U.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");je("Connection","Creating WebChannel: "+y,f);const E=l.createWebChannel(y,f);let D=!1,S=!1;const N=new O$({Ar:G=>{S?je("Connection","Not sending because WebChannel is closed:",G):(D||(je("Connection","Opening WebChannel transport."),E.open(),D=!0),je("Connection","WebChannel sending:",G),E.send(G))},Rr:()=>E.close()}),B=(G,de,Ae)=>{G.listen(de,We=>{try{Ae(We)}catch(nt){setTimeout(()=>{throw nt},0)}})};return B(E,hb.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),B(E,hb.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),N.Cr())}),B(E,hb.EventType.ERROR,G=>{S||(S=!0,Bd("Connection","WebChannel transport errored:",G),N.Cr(new Ve(Ee.UNAVAILABLE,"The operation could not be completed")))}),B(E,hb.EventType.MESSAGE,G=>{var de;if(!S){const Ae=G.data[0];St(!!Ae);const We=Ae,nt=We.error||(null===(de=We[0])||void 0===de?void 0:de.error);if(nt){je("Connection","WebChannel received error:",nt);const Mt=nt.status;let mt=function(Ur){const pi=hi[Ur];if(void 0!==pi)return RV(pi)}(Mt),In=nt.message;void 0===mt&&(mt=Ee.INTERNAL,In="Unknown error status: "+Mt+" with message "+nt.message),S=!0,N.Cr(new Ve(mt,In)),E.close()}else je("Connection","WebChannel received:",Ae),N.Nr(Ae)}}),B(u,BN.STAT_EVENT,G=>{G.stat===$S.PROXY?je("Connection","Detected buffering proxy"):G.stat===$S.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Dr()},0),N}}function OU(){return"undefined"!=typeof window?window:null}function pA(){return"undefined"!=typeof document?document:null}function Jw(n){return new FH(n,!0)}class OO{constructor(e,t,r=1e3,i=1.5,l=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=l,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class PU{constructor(e,t,r,i,l,u,f,y){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new OO(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,xe.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,xe.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,xe.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===Ee.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Ve(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,xe.Z)(function*(){e.state=0,e.start()}))}Io(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F$ extends PU{constructor(e,t,r,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.O=l}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ct(),i=e.targetChange.targetIds||[],l=function(y,E){return y.N?(St(void 0===E||"string"==typeof E),Kr.fromBase64String(E||"")):(St(void 0===E||E instanceof Uint8Array),Kr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(y){const E=void 0===y.code?Ee.UNKNOWN:RV(y.code);return new Ve(E,y.message||"")}(u);t=new PV(r,i,l,f||null)}else if("documentChange"in e){const r=e.documentChange,i=yu(n,r.document.name),l=Hi(r.document.updateTime),u=new cs({mapValue:{fields:r.document.fields}}),f=fr.newFoundDocument(i,l,u);t=new tA(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=yu(n,r.document),l=r.readTime?Hi(r.readTime):xt.min(),u=fr.newNoDocument(i,l);t=new tA([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=yu(n,r.document);t=new tA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,l=new SH(r.count||0);t=new OV(r.targetId,l)}}var y;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return xt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?xt.min():l.readTime?Hi(l.readTime):xt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=zw(this.O),t.addTarget=function(i,l){let u;const f=l.target;return u=Fw(f)?{documents:zV(i,f)}:{query:WV(i,f)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=UV(i,l.resumeToken):l.snapshotVersion.compareTo(xt.min())>0&&(u.readTime=$w(i,l.snapshotVersion.toTimestamp())),u}(this.O,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=zw(this.O),t.removeTarget=e,this.fo(t)}}class L$ extends PU{constructor(e,t,r,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.O=l,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let l=Hi(r.updateTime?r.updateTime:i);return l.isEqual(xt.min())&&(l=Hi(i)),new IH(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Hi(e.commitTime);return this.listener.Vo(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=zw(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ww(this.O,r))};this.fo(t)}}class V$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Ve(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.eo.Mr(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(Ee.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.eo.Lr(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(Ee.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class U${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Dr(t),this.Oo=!1):je("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class B${constructor(e,t,r,i,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=l,this.jo.mr(f=>{r.enqueueAndForget((0,xe.Z)(function*(){var y;Of(u)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,xe.Z)(function*(E){const D=Ke(E);D.Ko.add(4),yield Vb(D),D.Qo.set("Unknown"),D.Ko.delete(4),yield Xw(D)}),function(E){return y.apply(this,arguments)})(u))}))}),this.Qo=new U$(r,i)}}function Xw(n){return PO.apply(this,arguments)}function PO(){return(PO=(0,xe.Z)(function*(n){if(Of(n))for(const e of n.Go)yield e(!0)})).apply(this,arguments)}function Vb(n){return FO.apply(this,arguments)}function FO(){return(FO=(0,xe.Z)(function*(n){for(const e of n.Go)yield e(!1)})).apply(this,arguments)}function mA(n,e){const t=Ke(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),UO(t)?VO(t):Bb(t).co()&&LO(t,e))}function eC(n,e){const t=Ke(n),r=Bb(t);t.qo.delete(e),r.co()&&FU(t,e),0===t.qo.size&&(r.co()?r.ho():Of(t)&&t.Qo.set("Unknown"))}function LO(n,e){n.Wo.Z(e.targetId),Bb(n).Ao(e)}function FU(n,e){n.Wo.Z(e),Bb(n).Ro(e)}function VO(n){n.Wo=new NH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Bb(n).start(),n.Qo.Mo()}function UO(n){return Of(n)&&!Bb(n).oo()&&n.qo.size>0}function Of(n){return 0===Ke(n).Ko.size}function LU(n){n.Wo=void 0}function j$(n){return BO.apply(this,arguments)}function BO(){return(BO=(0,xe.Z)(function*(n){n.qo.forEach((e,t)=>{LO(n,e)})})).apply(this,arguments)}function H$(n,e){return jO.apply(this,arguments)}function jO(){return(jO=(0,xe.Z)(function*(n,e){LU(n),UO(n)?(n.Qo.Bo(e),VO(n)):n.Qo.set("Unknown")})).apply(this,arguments)}function $$(n,e,t){return HO.apply(this,arguments)}function HO(){return(HO=(0,xe.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof PV&&2===e.state&&e.cause)try{yield(r=(0,xe.Z)(function*(i,l){const u=l.cause;for(const f of l.targetIds)i.qo.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.qo.delete(f),i.Wo.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gA(n,r)}else if(e instanceof tA?n.Wo.ct(e):e instanceof OV?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(xt.min()))try{const r=yield DU(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const u=i.Wo.yt(l);return u.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const E=i.qo.get(y);E&&i.qo.set(y,E.withResumeToken(f.resumeToken,l))}}),u.targetMismatches.forEach(f=>{const y=i.qo.get(f);if(!y)return;i.qo.set(f,y.withResumeToken(Kr.EMPTY_BYTE_STRING,y.snapshotVersion)),FU(i,f);const E=new kf(y.target,f,1,y.sequenceNumber);LO(i,E)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield gA(n,r)}var r})).apply(this,arguments)}function gA(n,e,t){return $O.apply(this,arguments)}function $O(){return($O=(0,xe.Z)(function*(n,e,t){if(!tg(e))throw e;n.Ko.add(1),yield Vb(n),n.Qo.set("Offline"),t||(t=()=>DU(n.localStore)),n.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Xw(n)}))})).apply(this,arguments)}function VU(n,e){return e().catch(t=>gA(n,t,e))}function Ub(n){return GO.apply(this,arguments)}function GO(){return(GO=(0,xe.Z)(function*(n){const e=Ke(n),t=Pf(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;G$(e);)try{const i=yield v$(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,z$(e,i)}catch(i){yield gA(e,i)}UU(e)&&BU(e)})).apply(this,arguments)}function G$(n){return Of(n)&&n.Uo.length<10}function z$(n,e){n.Uo.push(e);const t=Pf(n);t.co()&&t.bo&&t.vo(e.mutations)}function UU(n){return Of(n)&&!Pf(n).oo()&&n.Uo.length>0}function BU(n){Pf(n).start()}function W$(n){return zO.apply(this,arguments)}function zO(){return(zO=(0,xe.Z)(function*(n){Pf(n).Do()})).apply(this,arguments)}function q$(n){return WO.apply(this,arguments)}function WO(){return(WO=(0,xe.Z)(function*(n){const e=Pf(n);for(const t of n.Uo)e.vo(t.mutations)})).apply(this,arguments)}function K$(n,e,t){return qO.apply(this,arguments)}function qO(){return(qO=(0,xe.Z)(function*(n,e,t){const r=n.Uo.shift(),i=aO.from(r,e,t);yield VU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ub(n)})).apply(this,arguments)}function Z$(n,e){return KO.apply(this,arguments)}function KO(){return(KO=(0,xe.Z)(function*(n,e){var t;e&&Pf(n).bo&&(yield(t=(0,xe.Z)(function*(r,i){if(MV(l=i.code)&&l!==Ee.ABORTED){const u=r.Uo.shift();Pf(r).ao(),yield VU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Ub(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),UU(n)&&BU(n)})).apply(this,arguments)}function jU(n,e){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,xe.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Of(t);t.Ko.add(3),yield Vb(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Xw(t)})).apply(this,arguments)}function YO(n,e){return QO.apply(this,arguments)}function QO(){return(QO=(0,xe.Z)(function*(n,e){const t=Ke(n);e?(t.Ko.delete(2),yield Xw(t)):e||(t.Ko.add(2),yield Vb(t),t.Qo.set("Unknown"))})).apply(this,arguments)}function Bb(n){return n.zo||(n.zo=function(e,t,r){const i=Ke(e);return i.No(),new F$(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:j$.bind(null,n),vr:H$.bind(null,n),To:$$.bind(null,n)}),n.Go.push(function(){var e=(0,xe.Z)(function*(t){t?(n.zo.ao(),UO(n)?VO(n):n.Qo.set("Unknown")):(yield n.zo.stop(),LU(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Pf(n){return n.Ho||(n.Ho=function(e,t,r){const i=Ke(e);return i.No(),new L$(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:W$.bind(null,n),vr:Z$.bind(null,n),So:q$.bind(null,n),Vo:K$.bind(null,n)}),n.Go.push(function(){var e=(0,xe.Z)(function*(t){t?(n.Ho.ao(),yield Ub(n)):(yield n.Ho.stop(),n.Uo.length>0&&(je("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class JO{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,l){const u=Date.now()+r,f=new JO(e,t,u,i,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jb(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),tg(n))return new Ve(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}class Hb{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=tO(),this.sortedSet=new Zr(this.comparator)}static emptySet(e){return new Hb(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hb)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Hb;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HU{constructor(){this.Jo=new Zr(Je.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):ct():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class $b{constructor(e,t,r,i,l,u,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new $b(e,t,Hb.emptySet(t),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ji(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Y${constructor(){this.Xo=void 0,this.listeners=[]}}class Q${constructor(){this.queries=new Pb(e=>Sf(e),ji),this.onlineState="Unknown",this.Zo=new Set}}function XO(n,e){return e1.apply(this,arguments)}function e1(){return(e1=(0,xe.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new Y$),i)try{l.Xo=yield t.onListen(r)}catch(u){const f=jb(u,`Initialization of query '${gu(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.listeners.push(e),e.tc(t.onlineState),l.Xo&&e.ec(l.Xo)&&r1(t)})).apply(this,arguments)}function t1(n,e){return n1.apply(this,arguments)}function n1(){return(n1=(0,xe.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function J$(n,e){const t=Ke(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.ec(i)&&(r=!0);u.Xo=i}}r&&r1(t)}function X$(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function r1(n){n.Zo.forEach(e=>{e.next()})}class i1{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $b(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=$b.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class e4{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class $U{constructor(e){this.O=e}Gs(e){return yu(this.O,e)}js(e){return e.metadata.exists?GV(this.O,e.document,!1):fr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Hi(e)}}class t4{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=GU(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new $U(this.O);for(const i of e)if(i.metadata.queries){const l=r.Gs(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||wn()).add(l);t.set(u,f)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function(n,e,t,r){return DO.apply(this,arguments)}(e.localStore,new $U(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield C$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new m$(Object.assign({},e.progress),t)})()}}function GU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zU{constructor(e){this.key=e}}class WU{constructor(e){this.key=e}}class qU{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=wn(),this.mutatedKeys=wn(),this.mc=Gd(e),this.gc=new Hb(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new HU,i=t?t.gc:this.gc;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const y=ye(this.query)&&i.size===this.query.limit?i.last():null,E=le(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const N=i.get(D),B=_u(this.query,S)?S:null,G=!!N&&this.mutatedKeys.has(N.key),de=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Ae=!1;N&&B?N.data.isEqual(B.data)?G!==de&&(r.track({type:3,doc:B}),Ae=!0):this.Tc(N,B)||(r.track({type:2,doc:B}),Ae=!0,(y&&this.mc(B,y)>0||E&&this.mc(B,E)<0)&&(f=!0)):!N&&B?(r.track({type:0,doc:B}),Ae=!0):N&&!B&&(r.track({type:1,doc:N}),Ae=!0,(y||E)&&(f=!0)),Ae&&(B?(u=u.add(B),l=de?l.add(D):l.delete(D)):(u=u.delete(D),l=l.delete(D)))}),ye(this.query)||le(this.query))for(;u.size>this.query.limit;){const D=ye(this.query)?u.last():u.first();u=u.delete(D.key),l=l.delete(D.key),r.track({type:1,doc:D})}return{gc:u,Ec:r,ks:f,mutatedKeys:l}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const l=e.Ec.Yo();l.sort((E,D)=>function(S,N){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return B(S)-B(N)}(E.type,D.type)||this.mc(E.doc,D.doc)),this.Ac(r);const u=t?this.Rc():[],f=0===this.wc.size&&this.current?1:0,y=f!==this._c;return this._c=f,0!==l.length||y?{snapshot:new $b(this.query,e.gc,i,l,e.mutatedKeys,0===f,y,!1),Pc:u}:{Pc:u}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new HU,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=wn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new WU(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new zU(r))}),t}vc(e){this.dc=e.Ks,this.wc=wn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return $b.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class n4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class r4{constructor(e){this.key=e,this.Sc=!1}}class i4{constructor(e,t,r,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Dc={},this.Cc=new Pb(f=>Sf(f),ji),this.Nc=new Map,this.xc=new Set,this.kc=new Zr(Je.comparator),this.Oc=new Map,this.Mc=new AO,this.$c={},this.Fc=new Map,this.Bc=sg.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function s4(n,e){return s1.apply(this,arguments)}function s1(){return(s1=(0,xe.Z)(function*(n,e){const t=A1(n);let r,i;const l=t.Cc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.Vc();else{const u=yield Fb(t.localStore,kt(e));t.isPrimaryClient&&mA(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield o1(t,e,r,"current"===f)}return i})).apply(this,arguments)}function o1(n,e,t,r){return a1.apply(this,arguments)}function a1(){return(a1=(0,xe.Z)(function*(n,e,t,r){n.Uc=(D,S,N)=>{return(B=(0,xe.Z)(function*(G,de,Ae,We){let nt=de.view.Ic(Ae);nt.ks&&(nt=yield dA(G.localStore,de.query,!1).then(({documents:In})=>de.view.Ic(In,nt)));const Mt=We&&We.targetChanges.get(de.targetId),mt=de.view.applyChanges(nt,G.isPrimaryClient,Mt);return _1(G,de.targetId,mt.Pc),mt.snapshot}),function(G,de,Ae,We){return B.apply(this,arguments)})(n,D,S,N);var B};const i=yield dA(n.localStore,e,!0),l=new qU(e,i.Ks),u=l.Ic(i.documents),f=Hw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=l.applyChanges(u,n.isPrimaryClient,f);_1(n,t,y.Pc);const E=new n4(e,t,l);return n.Cc.set(e,E),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),y.snapshot})).apply(this,arguments)}function o4(n,e){return l1.apply(this,arguments)}function l1(){return(l1=(0,xe.Z)(function*(n,e){const t=Ke(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(l=>!ji(l,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lb(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),eC(t.remoteStore,r.targetId),Gb(t,r.targetId)}).catch(og))):(Gb(t,r.targetId),yield Lb(t.localStore,r.targetId,!0))})).apply(this,arguments)}function c1(){return(c1=(0,xe.Z)(function*(n,e,t){const r=x1(n);try{const i=yield function(l,u){const f=Ke(l),y=ui.now(),E=u.reduce((S,N)=>S.add(N.key),wn());let D;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>f.Us.Es(S,E).next(N=>{D=N;const B=[];for(const G of u){const de=DH(G,D.get(G.key));null!=de&&B.push(new Xm(G.key,de,YN(de.value.mapValue),di.exists(!0)))}return f.gs.addMutationBatch(S,y,B,u)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,f){let y=l.$c[l.currentUser.toKey()];y||(y=new Zr(Qt)),y=y.insert(u,f),l.$c[l.currentUser.toKey()]=y}(r,i.batchId,t),yield Wd(r,i.changes),yield Ub(r.remoteStore)}catch(i){const l=jb(i,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function KU(n,e){return u1.apply(this,arguments)}function u1(){return(u1=(0,xe.Z)(function*(n,e){const t=Ke(n);try{const r=yield b$(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t.Oc.get(l);u&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Sc=!0:i.modifiedDocuments.size>0?St(u.Sc):i.removedDocuments.size>0&&(St(u.Sc),u.Sc=!1))}),yield Wd(t,r,e)}catch(r){yield og(r)}})).apply(this,arguments)}function ZU(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((l,u)=>{const f=u.view.tc(e);f.snapshot&&i.push(f.snapshot)}),function(l,u){const f=Ke(l);f.onlineState=u;let y=!1;f.queries.forEach((E,D)=>{for(const S of D.listeners)S.tc(u)&&(y=!0)}),y&&r1(f)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function l4(n,e,t){return d1.apply(this,arguments)}function d1(){return(d1=(0,xe.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),l=i&&i.key;if(l){let u=new Zr(Je.comparator);u=u.insert(l,fr.newNoDocument(l,xt.min()));const f=wn().add(l),y=new jw(xt.min(),new Map,new pr(Qt),u,f);yield KU(r,y),r.kc=r.kc.remove(l),r.Oc.delete(e),y1(r)}else yield Lb(r.localStore,e,!1).then(()=>Gb(r,e,t)).catch(og)})).apply(this,arguments)}function c4(n,e){return h1.apply(this,arguments)}function h1(){return(h1=(0,xe.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield y$(t.localStore,e);g1(t,r,null),m1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wd(t,i)}catch(i){yield og(i)}})).apply(this,arguments)}function u4(n,e,t){return f1.apply(this,arguments)}function f1(){return(f1=(0,xe.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(l,u){const f=Ke(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return f.gs.lookupMutationBatch(y,u).next(D=>(St(null!==D),E=D.keys(),f.gs.removeMutationBatch(y,D))).next(()=>f.gs.performConsistencyCheck(y)).next(()=>f.Us.Es(y,E))})}(r.localStore,e);g1(r,e,t),m1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wd(r,i)}catch(i){yield og(i)}})).apply(this,arguments)}function p1(){return(p1=(0,xe.Z)(function*(n,e){const t=Ke(n);Of(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const u=Ke(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.gs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=jb(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function m1(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function g1(n,e,t){const r=Ke(n);let i=r.$c[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function Gb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||YU(n,r)})}function YU(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(eC(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),y1(n))}function _1(n,e,t){for(const r of t)r instanceof zU?(n.Mc.addReference(r.key,e),h4(n,r)):r instanceof WU?(je("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||YU(n,r.key)):ct()}function h4(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(je("SyncEngine","New document in limbo: "+t),n.xc.add(r),y1(n))}function y1(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Je(cn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new r4(t)),n.kc=n.kc.insert(t,r),mA(n.remoteStore,new kf(kt(X(t.path)),r,2,Ps.A))}}function Wd(n,e,t){return b1.apply(this,arguments)}function b1(){return(b1=(0,xe.Z)(function*(n,e,t){const r=Ke(n),i=[],l=[],u=[];var f;r.Cc.isEmpty()||(r.Cc.forEach((f,y)=>{u.push(r.Uc(y,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,E.fromCache?"not-current":"current"),i.push(E);const D=wO.Ss(y.targetId,E);l.push(D)}}))}),yield Promise.all(u),r.Dc.To(i),yield(f=(0,xe.Z)(function*(y,E){const D=Ke(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Se.forEach(E,N=>Se.forEach(N.vs,B=>D.persistence.referenceDelegate.addReference(S,N.targetId,B)).next(()=>Se.forEach(N.Vs,B=>D.persistence.referenceDelegate.removeReference(S,N.targetId,B)))))}catch(S){if(!tg(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const N=S.targetId;if(!S.fromCache){const B=D.Ms.get(N),de=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);D.Ms=D.Ms.insert(N,de)}}}),function(y,E){return f.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function f4(n,e){return v1.apply(this,arguments)}function v1(){return(v1=(0,xe.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield TU(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(u=>{u.forEach(f=>{f.reject(new Ve(Ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wd(t,r.qs)}var i})).apply(this,arguments)}function p4(n,e){const t=Ke(n),r=t.Oc.get(e);if(r&&r.Sc)return wn().add(r.key);{let i=wn();const l=t.Nc.get(e);if(!l)return i;for(const u of l){const f=t.Cc.get(u);i=i.unionWith(f.view.yc)}return i}}function m4(n,e){return E1.apply(this,arguments)}function E1(){return(E1=(0,xe.Z)(function*(n,e){const t=Ke(n),r=yield dA(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&_1(t,e.targetId,i.Pc),i})).apply(this,arguments)}function g4(n){return w1.apply(this,arguments)}function w1(){return(w1=(0,xe.Z)(function*(n){const e=Ke(n);return xU(e.localStore).then(t=>Wd(e,t))})).apply(this,arguments)}function _4(n,e,t,r){return C1.apply(this,arguments)}function C1(){return(C1=(0,xe.Z)(function*(n,e,t,r){const i=Ke(n),l=yield function(u,f){const y=Ke(u),E=Ke(y.gs);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>E.Ge(D,f).next(S=>S?y.Us.Es(D,S):Se.resolve(null)))}(i.localStore,e);var f;null!==l?("pending"===t?yield Ub(i.remoteStore):"acknowledged"===t||"rejected"===t?(g1(i,e,r||null),m1(i,e),f=e,Ke(Ke(i.localStore).gs).Qe(f)):ct(),yield Wd(i,l)):je("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function I1(){return(I1=(0,xe.Z)(function*(n,e){const t=Ke(n);if(A1(t),x1(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield QU(t,r.toArray());t.Lc=!0,yield YO(t.remoteStore,!0);for(const l of i)mA(t.remoteStore,l)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Gb(t,u),Lb(t.localStore,u,!0))),eC(t.remoteStore,u)}),yield i,yield QU(t,r),function(l){const u=Ke(l);u.Oc.forEach((f,y)=>{eC(u.remoteStore,y)}),u.Mc.ii(),u.Oc=new Map,u.kc=new Zr(Je.comparator)}(t),t.Lc=!1,yield YO(t.remoteStore,!1)}})).apply(this,arguments)}function QU(n,e,t){return T1.apply(this,arguments)}function T1(){return(T1=(0,xe.Z)(function*(n,e,t){const r=Ke(n),i=[],l=[];for(const u of e){let f;const y=r.Nc.get(u);if(y&&0!==y.length){f=yield Fb(r.localStore,kt(y[0]));for(const E of y){const D=r.Cc.get(E),S=yield m4(r,D);S.snapshot&&l.push(S.snapshot)}}else{const E=yield AU(r.localStore,u);f=yield Fb(r.localStore,E),yield o1(r,JU(E),u,!1)}i.push(f)}return r.Dc.To(l),i})).apply(this,arguments)}function JU(n){return q(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function b4(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).ds()}function v4(n,e,t,r){return D1.apply(this,arguments)}function D1(){return(D1=(0,xe.Z)(function*(n,e,t,r){const i=Ke(n);if(i.Lc)je("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const l=yield xU(i.localStore),u=jw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Wd(i,l,u);break}case"rejected":yield Lb(i.localStore,e,!0),Gb(i,e,r);break;default:ct()}})).apply(this,arguments)}function E4(n,e,t){return S1.apply(this,arguments)}function S1(){return(S1=(0,xe.Z)(function*(n,e,t){const r=A1(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const l=yield AU(r.localStore,i),u=yield Fb(r.localStore,l);yield o1(r,JU(l),u.targetId,!1),mA(r.remoteStore,u)}for(const i of t)r.Nc.has(i)&&(yield Lb(r.localStore,i,!1).then(()=>{eC(r.remoteStore,i),Gb(r,i)}).catch(og))}})).apply(this,arguments)}function A1(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=p4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l4.bind(null,e),e.Dc.To=J$.bind(null,e.eventManager),e.Dc.qc=X$.bind(null,e.eventManager),e}function x1(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u4.bind(null,e),e}class XU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.O=Jw(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return IU(this.persistence,new CU,e.initialUser,this.O)}jc(e){return new k$(xO.bi,this.O)}Gc(e){return new RU}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class eB extends XU{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,xe.Z)(function*(){yield t().call(r,e),yield function(n){return TO.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield x1(r.zc.syncEngine),yield Ub(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return IU(this.persistence,new CU,e.initialUser,this.O)}Qc(e){return new c$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=EO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?$o.withCacheSize(this.cacheSizeBytes):$o.DEFAULT;return new vO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OU(),pA(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new RU}}class C4 extends eB{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,xe.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof NO&&(r.sharedClientState.syncEngine={hr:_4.bind(null,i),lr:v4.bind(null,i),dr:E4.bind(null,i),ds:b4.bind(null,i),ar:g4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var l=(0,xe.Z)(function*(u){yield function(n,e){return I1.apply(this,arguments)}(r.zc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}Gc(e){const t=OU();if(!NO.Vt(t))throw new Ve(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=EO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class k1{initialize(e,t){var r=this;return(0,xe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>ZU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=f4.bind(null,r.syncEngine),yield YO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Q$}createDatastore(e){const t=Jw(e.databaseInfo.databaseId),r=new P$(e.databaseInfo);return new V$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=f=>ZU(this.syncEngine,f,0),u=NU.Vt()?new NU:new R$,new B$(t,r,i,l,u);var t,r,i,l,u}createSyncEngine(e,t){return function(r,i,l,u,f,y,E){const D=new i4(r,i,l,u,f,y);return E&&(D.Lc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const r=Ke(t);je("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Vb(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tB(n,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _A{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class I4{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new ci,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const l=yield e.nu(i);return new e4(JSON.parse(l),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,xe.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class T4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ve(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,xe.Z)(function*(l,u){const f=Ke(l),y=zw(f.O)+"/documents",E={documents:u.map(B=>Gw(f.O,B))},D=yield f.Lr("BatchGetDocuments",y,E),S=new Map;D.forEach(B=>{const G=function(n,e){return"found"in e?function(t,r){St(!!r.found);const i=yu(t,r.found.name),l=Hi(r.found.updateTime),u=new cs({mapValue:{fields:r.found.fields}});return fr.newFoundDocument(i,l,u)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=yu(t,r.missing),l=Hi(r.readTime);return fr.newNoDocument(i,l)}(n,e):ct()}(f.O,B);S.set(G.key.toString(),G)});const N=[];return u.forEach(B=>{const G=S.get(B.toString());St(!!G),N.push(G)}),N}),function(l,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=Je.fromPath(i);e.mutations.push(new eO(l,e.precondition(l)))}),yield(r=(0,xe.Z)(function*(i,l){const u=Ke(i),f=zw(u.O)+"/documents",y={writes:l.map(E=>Ww(u.O,E))};yield u.Mr("Commit",f,y)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?di.updateTime(t):di.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Ve(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return di.updateTime(t)}return di.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class D4{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new OO(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,xe.Z)(function*(){const t=new T4(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.uu(l)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!wa(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!MV(t)}return!1}}class S4{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dn.UNAUTHENTICATED,this.clientId=mb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,xe.Z)(function*(f){je("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(je("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=jb(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function nB(n,e){return M1.apply(this,arguments)}function M1(){return(M1=(0,xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,xe.Z)(function*(l){r.isEqual(l)||(yield TU(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function rB(n,e){return R1.apply(this,arguments)}function R1(){return(R1=(0,xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield N1(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>jU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>jU(e.remoteStore,l)),n.onlineComponents=e})).apply(this,arguments)}function N1(n){return O1.apply(this,arguments)}function O1(){return(O1=(0,xe.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield nB(n,new XU)),n.offlineComponents})).apply(this,arguments)}function yA(n){return P1.apply(this,arguments)}function P1(){return(P1=(0,xe.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield rB(n,new k1)),n.onlineComponents})).apply(this,arguments)}function iB(n){return N1(n).then(e=>e.persistence)}function F1(n){return N1(n).then(e=>e.localStore)}function sB(n){return yA(n).then(e=>e.remoteStore)}function L1(n){return yA(n).then(e=>e.syncEngine)}function zb(n){return V1.apply(this,arguments)}function V1(){return(V1=(0,xe.Z)(function*(n){const e=yield yA(n),t=e.eventManager;return t.onListen=s4.bind(null,e.syncEngine),t.onUnlisten=o4.bind(null,e.syncEngine),t})).apply(this,arguments)}function oB(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(i,l,u,f,y){const E=new _A({next:S=>{l.enqueueAndForget(()=>t1(i,D));const N=S.docs.has(u);!N&&S.fromCache?y.reject(new Ve(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&f&&"server"===f.source?y.reject(new Ve(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new i1(X(u.path),E,{includeMetadataChanges:!0,uc:!0});return XO(i,D)}(yield zb(n),n.asyncQueue,e,t,r)})),r.promise}function aB(n,e,t={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(i,l,u,f,y){const E=new _A({next:S=>{l.enqueueAndForget(()=>t1(i,D)),S.fromCache&&"server"===f.source?y.reject(new Ve(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new i1(u,E,{includeMetadataChanges:!0,uc:!0});return XO(i,D)}(yield zb(n),n.asyncQueue,e,t,r)})),r.promise}const lB=new Map;function U1(n,e,t){if(!t)throw new Ve(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cB(n,e,t,r){if(!0===e&&!0===r)throw new Ve(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uB(n){if(!Je.isDocumentKey(n))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dB(n){if(Je.isDocumentKey(n))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bA(n);throw new Ve(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hB(n,e){if(e<=0)throw new Ve(Ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fB({}),this._settingsFrozen=!1,e instanceof ls?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ve(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ve(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new HN;switch(t.type){case"gapi":const r=t.client;return St(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zN(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ve(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lB.get(e);t&&(je("ComponentProvider","Removing Datastore"),lB.delete(e),t.terminate())}(this),Promise.resolve()}}class tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class Vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class Eu extends Vs{constructor(e,t,r){super(e,t,X(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new Je(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function pB(n,e,...t){if(n=(0,U.m9)(n),U1("collection","path",e),n instanceof tC){const r=cn.fromString(e,...t);return dB(r),new Eu(n,null,r)}{if(!(n instanceof tr||n instanceof Eu))throw new Ve(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return dB(r),new Eu(n.firestore,null,r)}}function vA(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=mb.R()),U1("doc","path",e),n instanceof tC){const r=cn.fromString(e,...t);return uB(r),new tr(n,null,new Je(r))}{if(!(n instanceof tr||n instanceof Eu))throw new Ve(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return uB(r),new tr(n.firestore,n instanceof Eu?n.converter:null,new Je(r))}}function mB(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof tr||n instanceof Eu)&&(e instanceof tr||e instanceof Eu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gB(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof Vs&&e instanceof Vs&&n.firestore===e.firestore&&ji(n._query,e._query)&&n.converter===e.converter}class V4{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new OO(this,"async_queue_retry"),this.yu=()=>{const t=pA();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=pA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=pA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new ci;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,xe.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!tg(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=JO.createAndSchedule(this,e,t,r,l=>this.Tu(l));return this.du.push(i),i}pu(){this._u&&ct()}verifyOperationInProgress(){}Au(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function B1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class U4{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends tC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new V4,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||_B(this),this._firestoreClient.terminate()}}function fi(n){return n._firestoreClient||_B(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _B(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KN(n._databaseId,l,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new S4(n._authCredentials,n._appCheckCredentials,n._queue,r)}function yB(n,e,t){const r=new ci;return n.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield nB(n,t),yield rB(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===Ee.FAILED_PRECONDITION||l.code===Ee.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function bB(n){if(n._initialized||n._terminated)throw new Ve(Ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wu(Kr.fromBase64String(e))}catch(t){throw new Ve(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wu(Kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ag{constructor(e){this._methodName=e}}class EA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}const Z4=/^__.*__$/;class Y4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xm(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uw(e,this.data,t,this.fieldTransforms)}}class vB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function EB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class wA{constructor(e,t,r,i,l,u){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===l&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new wA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return TA(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(EB(this.Vu)&&Z4.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class Q4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Jw(e)}Fu(e,t,r,i=!1){return new wA({Vu:e,methodName:t,$u:r,path:dr.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function lg(n){const e=n._freezeSettings(),t=Jw(n._databaseId);return new Q4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CA(n,e,t,r,i,l={}){const u=n.Fu(l.merge||l.mergeFields?2:0,e,t,i);G1("Data must be an object, but it was:",u,r);const f=IB(r,u);let y,E;if(l.merge)y=new fu(u.fieldMask),E=u.fieldTransforms;else if(l.mergeFields){const D=[];for(const S of l.mergeFields){const N=z1(e,S,t);if(!u.contains(N))throw new Ve(Ee.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);DB(D,N)||D.push(N)}y=new fu(D),E=u.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,E=u.fieldTransforms;return new Y4(new cs(f),y,E)}class nC extends ag{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nC}}function wB(n,e,t){return new wA({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class j1 extends ag{_toFieldTransform(e){return new Vw(e.path,new Tb)}isEqual(e){return e instanceof j1}}class J4 extends ag{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=wB(this,e,!0),r=this.Bu.map(l=>cg(l,t)),i=new Qm(r);return new Vw(e.path,i)}isEqual(e){return this===e}}class X4 extends ag{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=wB(this,e,!0),r=this.Bu.map(l=>cg(l,t)),i=new Jm(r);return new Vw(e.path,i)}isEqual(e){return this===e}}class eG extends ag{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Db(e.O,Ib(e.O,this.Lu));return new Vw(e.path,t)}isEqual(e){return this===e}}function H1(n,e,t,r){const i=n.Fu(1,e,t);G1("Data must be an object, but it was:",i,r);const l=[],u=cs.empty();du(r,(y,E)=>{const D=IA(e,y,t);E=(0,U.m9)(E);const S=i.xu(D);if(E instanceof nC)l.push(D);else{const N=cg(E,S);null!=N&&(l.push(D),u.set(D,N))}});const f=new fu(l);return new vB(u,f,i.fieldTransforms)}function $1(n,e,t,r,i,l){const u=n.Fu(1,e,t),f=[z1(e,r,t)],y=[i];if(l.length%2!=0)throw new Ve(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)f.push(z1(e,l[N])),y.push(l[N+1]);const E=[],D=cs.empty();for(let N=f.length-1;N>=0;--N)if(!DB(E,f[N])){const B=f[N];let G=y[N];G=(0,U.m9)(G);const de=u.xu(B);if(G instanceof nC)E.push(B);else{const Ae=cg(G,de);null!=Ae&&(E.push(B),D.set(B,Ae))}}const S=new fu(E);return new vB(D,S,u.fieldTransforms)}function CB(n,e,t,r=!1){return cg(t,n.Fu(r?4:3,e))}function cg(n,e){if(TB(n=(0,U.m9)(n)))return G1("Unsupported field value:",e,n),IB(n,e);if(n instanceof ag)return function(t,r){if(!EB(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const u of t){let f=cg(u,r.ku(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ib(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ui.fromDate(t);return{timestampValue:$w(r.O,i)}}if(t instanceof ui){const i=new ui(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$w(r.O,i)}}if(t instanceof EA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wu)return{bytesValue:UV(r.O,t._byteString)};if(t instanceof tr){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r.Ou(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nO(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${bA(t)}`)}(n,e)}function IB(n,e){const t={};return KS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):du(n,(r,i)=>{const l=cg(i,e.Du(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function TB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ui||n instanceof EA||n instanceof wu||n instanceof tr||n instanceof ag)}function G1(n,e,t){if(!TB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=bA(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function z1(n,e,t){if((e=(0,U.m9)(e))instanceof qd)return e._internalPath;if("string"==typeof e)return IA(n,e);throw TA("Field path arguments must be of type string or ",n,!1,void 0,t)}const tG=new RegExp("[~\\*/\\[\\]]");function IA(n,e,t){if(e.search(tG)>=0)throw TA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch(r){throw TA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function TA(n,e,t,r,i){const l=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(l||u)&&(y+=" (found",l&&(y+=` in field ${r}`),u&&(y+=` in document ${i}`),y+=")"),new Ve(Ee.INVALID_ARGUMENT,f+n+y)}function DB(n,e){return n.some(t=>t.isEqual(e))}class rC{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nG extends rC{data(){return super.data()}}function DA(n,e){return"string"==typeof e?IA(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}class ug{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kd extends rC{constructor(e,t,r,i,l,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class iC extends Kd{data(e={}){return super.data(e)}}class Ff{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ug(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new iC(this._firestore,this._userDataWriter,r.key,r,new ug(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new iC(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ug(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new iC(r._firestore,r._userDataWriter,u.doc.key,u.doc,new ug(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,E=-1;return 0!==u.type&&(y=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),E=l.indexOf(u.doc.key)),{type:rG(u.type),doc:f,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function SB(n,e){return n instanceof Kd&&e instanceof Kd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ff&&e instanceof Ff&&n._firestore===e._firestore&&gB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function AB(n){if(le(n)&&0===n.explicitOrderBy.length)throw new Ve(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sC{}function Lf(n,...e){for(const t of e)n=t._apply(n);return n}class iG extends sC{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=lg(e.firestore),r=function(i,l,u,f,y,E,D){let S;if(y.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){OB(D,E);const B=[];for(const G of D)B.push(NB(f,i,G));S={arrayValue:{values:B}}}else S=NB(f,i,D)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||OB(D,E),S=CB(u,"where",D,"in"===E||"not-in"===E);const N=Fs.create(y,E,S);return function(B,G){if(G.S()){const Ae=ke(B);if(null!==Ae&&!Ae.isEqual(G.field))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ae.toString()}' and '${G.field.toString()}'`);const We=Be(B);null!==We&&PB(0,G.field,We)}const de=function(Ae,We){for(const nt of Ae.filters)if(We.indexOf(nt.op)>=0)return nt.op;return null}(B,function(Ae){switch(Ae){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==de)throw new Ve(Ee.INVALID_ARGUMENT,de===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${de.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Vs(e.firestore,e.converter,function(i,l){const u=i.filters.concat([l]);return new V(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class oG extends sC{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new Ve(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new C(i,l);return function(f,y){if(null===Be(f)){const E=ke(f);null!==E&&PB(0,E,y.field)}}(r,u),u}(e._query,this.Uu,this.Gu);return new Vs(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new V(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xB extends sC{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new Vs(e.firestore,e.converter,Lr(e._query,this.ju,this.Qu))}}class kB extends sC{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=RB(e,this.type,this.Wu,this.zu);return new Vs(e.firestore,e.converter,(i=t,new V((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class MB extends sC{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=RB(e,this.type,this.Wu,this.zu);return new Vs(e.firestore,e.converter,(i=t,new V((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function RB(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof rC)return function(i,l,u,f,y){if(!f)throw new Ve(Ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const E=[];for(const D of yt(i))if(D.field.isKeyField())E.push(_b(l,f.key));else{const S=f.data.field(D.field);if(gb(S))throw new Ve(Ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=D.field.canonicalString();throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}E.push(S)}return new b(E,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lg(n.firestore);return function(l,u,f,y,E,D){const S=l.explicitOrderBy;if(E.length>S.length)throw new Ve(Ee.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let B=0;B<E.length;B++){const G=E[B];if(S[B].field.isKeyField()){if("string"!=typeof G)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!ut(l)&&-1!==G.indexOf("/"))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const de=l.path.child(cn.fromString(G));if(!Je.isDocumentKey(de))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${de}' is not because it contains an odd number of segments.`);const Ae=new Je(de);N.push(_b(u,Ae))}else{const de=CB(f,y,G);N.push(de)}}return new b(N,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NB(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new Ve(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ut(e)&&-1!==t.indexOf("/"))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Je.isDocumentKey(r))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _b(n,new Je(r))}if(t instanceof tr)return _b(n,t._key);throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bA(t)}.`)}function OB(n,e){if(!Array.isArray(n)||0===n.length)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function PB(n,e,t){if(!t.isEqual(e))throw new Ve(Ee.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class W1{convertValue(e,t="none"){switch(jd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return du(e.fields,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new EA(hr(e.latitude),hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ZS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zm(e));default:return null}}convertTimestamp(e){const t=bl(e);return new ui(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);St(ZV(r));const i=new ls(r.get(1),r.get(3)),l=new Je(r.popFirst(5));return i.isEqual(t)||Dr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function SA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pG extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}class FB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lg(e)}set(e,t,r){this._verifyNotCommitted();const i=Vf(e,this._firestore),l=SA(i.converter,t,r),u=CA(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,di.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Vf(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof qd?$1(this._dataReader,"WriteBatch.update",l._key,t,r,i):H1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,di.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vf(e,this._firestore);return this._mutations=this._mutations.concat(new Bw(t._key,di.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vf(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new Ve(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dg extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,t)}}function LB(n,e,t){n=on(n,tr);const r=on(n.firestore,mr),i=SA(n.converter,e,t);return Wb(r,[CA(lg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,di.none())])}function VB(n,e,t,...r){n=on(n,tr);const i=on(n.firestore,mr),l=lg(i);let u;return u="string"==typeof(e=(0,U.m9)(e))||e instanceof qd?$1(l,"updateDoc",n._key,e,t,r):H1(l,"updateDoc",n._key,e),Wb(i,[u.toMutation(n._key,di.exists(!0))])}function UB(n,...e){var t,r,i;n=(0,U.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||B1(e[u])||(l=e[u],u++);const f={includeMetadataChanges:l.includeMetadataChanges};if(B1(e[u])){const S=e[u];e[u]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[u+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[u+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let y,E,D;if(n instanceof tr)E=on(n.firestore,mr),D=X(n._key.path),y={next:S=>{e[u]&&e[u](q1(E,n,S))},error:e[u+1],complete:e[u+2]};else{const S=on(n,Vs);E=on(S.firestore,mr),D=S._query;const N=new dg(E);y={next:B=>{e[u]&&e[u](new Ff(E,N,S,B))},error:e[u+1],complete:e[u+2]},AB(n._query)}return function(S,N,B,G){const de=new _A(G),Ae=new i1(N,de,B);return S.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return XO(yield zb(S),Ae)})),()=>{de.Jc(),S.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return t1(yield zb(S),Ae)}))}}(fi(E),D,f,y)}function Wb(n,e){return function(t,r){const i=new ci;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(n,e,t){return c1.apply(this,arguments)}(yield L1(t),r,i)})),i.promise}(fi(n),e)}function q1(n,e,t){const r=t.docs.get(e._key),i=new dg(n);return new Kd(n,i,e._key,r,new ug(t.hasPendingWrites,t.fromCache),e.converter)}class IG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lg(e)}get(e){const t=Vf(e,this._firestore),r=new pG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const l=i[0];if(l.isFoundDocument())return new rC(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new rC(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Vf(e,this._firestore),l=SA(i.converter,t,r),u=CA(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const l=Vf(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof qd?$1(this._dataReader,"Transaction.update",l._key,t,r,i):H1(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Vf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vf(e,this._firestore),r=new dg(this._firestore);return super.get(e).then(i=>new Kd(this._firestore,r,t._key,i._document,new ug(!1,!1),t.converter))}}function K1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jB(){if("undefined"==typeof Uint8Array)throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function HB(){if("undefined"==typeof atob)throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){jm=Uo.SDK_VERSION,(0,Uo._registerComponent)(new bc.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),l=new mr(i,new GN(t.getProvider("auth-internal")),new $m(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Uo.registerVersion)(GS,"3.4.5",n),(0,Uo.registerVersion)(GS,"3.4.5","esm2017")}();class oC{constructor(e){this._delegate=e}static fromBase64String(e){return HB(),new oC(wu.fromBase64String(e))}static fromUint8Array(e){return jB(),new oC(wu.fromUint8Array(e))}toBase64(){return HB(),this._delegate.toBase64()}toUint8Array(){return jB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Z1(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class OG{enableIndexedDbPersistence(e,t){return function(n,e){bB(n=on(n,mr));const t=fi(n),r=n._freezeSettings(),i=new k1;return yB(t,i,new eB(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){bB(n=on(n,mr));const e=fi(n),t=n._freezeSettings(),r=new k1;return yB(e,r,new C4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ve(Ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(r){if(!Cc.Vt())return Promise.resolve();const i=r+"main";yield Cc.delete(i)}),function(r){return t.apply(this,arguments)})(EO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $B{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ls||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const l=(n=on(n,tC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Bd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=Dn.MOCK_USER;else{u=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ve(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Dn(y)}n._authCredentials=new $N(new xw(u,f))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield iB(n),t=yield sB(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.Ko.delete(0),Xw(i)}(t)}))}(fi(n=on(n,mr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield iB(n),t=yield sB(n);return e.setNetworkEnabled(!1),(r=(0,xe.Z)(function*(i){const l=Ke(i);l.Ko.add(0),yield Vb(l),l.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(fi(n=on(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new ci;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(n,e){return p1.apply(this,arguments)}(yield L1(e),t)})),t.promise}(fi(n=on(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new _A(e);return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return r=yield zb(n),i=t,Ke(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return r=yield zb(n),i=t,void Ke(r).Zo.delete(i);var r,i}))}}(fi(n=on(n,mr)),B1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qb(this,pB(this._delegate,e))}catch(t){throw co(t,"collection()","Firestore.collection()")}}doc(e){try{return new Il(this,vA(this._delegate,e))}catch(t){throw co(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new uo(this,function(n,e){if(n=on(n,tC),U1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(Ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vs(n,null,(t=e,new V(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw co(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const r=yield(i=n,yA(i).then(l=>l.datastore));var i;new D4(n.asyncQueue,r,e,t).run()})),t.promise}(fi(n=on(n,mr)),t=>e(new IG(n,t)))}(this._delegate,t=>e(new GB(this,t)))}batch(){return fi(this._delegate),new zB(new FB(this._delegate,e=>Wb(this._delegate,e)))}loadBundle(e){return function(n,e){const t=fi(n=on(n,mr)),r=new U4;return function(n,e,t,r){const i=function(l,u){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,y=function(y,E){if(y instanceof Uint8Array)return tB(y,E);if(y instanceof ArrayBuffer)return tB(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new I4(y,u);var y}(t,Jw(e));n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function(n,e,t){const r=Ke(n);var i;(i=(0,xe.Z)(function*(l,u,f){try{const y=yield u.getMetadata();if(yield function(N,B){const G=Ke(N),de=Hi(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Ae=>G.Kn.getBundleMetadata(Ae,B.id)).then(Ae=>!!Ae&&Ae.createTime.compareTo(de)>=0)}(l.localStore,y))return yield u.close(),void f._completeWith((N=y,{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}));f._updateProgress(GU(y));const E=new t4(y,l.localStore,u.O);let D=yield u.Kc();for(;D;){const N=yield E.lc(D);N&&f._updateProgress(N),D=yield u.Kc()}const S=yield E.complete();yield Wd(l,S.ws,void 0),yield function(N,B){const G=Ke(N);return G.persistence.runTransaction("Save bundle","readwrite",de=>G.Kn.saveBundleMetadata(de,B))}(l.localStore,y),f._completeWith(S.progress)}catch(y){Bd("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y)}var N}),function(l,u,f){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield L1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.Kn.getNamedQuery(l,r))}(yield F1(n),e)}))}(fi(n=on(n,mr)),e).then(t=>t?new Vs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new uo(this,t):null)}}class AA extends W1{constructor(e){super(),this.firestore=e}convertBytes(e){return new oC(new wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Il.forKey(t,this.firestore,null)}}class GB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new AA(e)}get(e){const t=fg(e);return this._delegate.get(t).then(r=>new aC(this._firestore,new Kd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=fg(e);return r?(K1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=fg(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=fg(e);return this._delegate.delete(t),this}}class zB{constructor(e){this._delegate=e}set(e,t,r){const i=fg(e);return r?(K1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=fg(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=fg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new iC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new lC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=hg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new hg(e,new AA(e),t),i.set(t,l)),l}}hg.INSTANCES=new WeakMap;class Il{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Il(t,new tr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new Il(t,new tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qb(this.firestore,pB(this._delegate,e))}catch(t){throw co(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof tr&&mB(this._delegate,e)}set(e,t){t=K1("DocumentReference.set",t);try{return t?LB(this._delegate,e,t):LB(this._delegate,e)}catch(r){throw co(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VB(this._delegate,e):VB(this._delegate,e,t,...r)}catch(i){throw co(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Wb(on(n.firestore,mr),[new Bw(n._key,di.none())])}(this._delegate)}onSnapshot(...e){const t=WB(e),r=qB(e,i=>new aC(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return UB(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=on(n,tr);const e=on(n.firestore,mr),t=fi(e),r=new dg(e);return function(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(r=(0,xe.Z)(function*(i,l,u){try{const f=yield function(y,E){const D=Ke(y);return D.persistence.runTransaction("read document","readonly",S=>D.Us.ys(S,E))}(i,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Ve(Ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=jb(f,`Failed to get document '${l} from cache`);u.reject(y)}}),function(i,l,u){return r.apply(this,arguments)})(yield F1(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Kd(e,r,n._key,i,new ug(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=on(n,tr);const e=on(n.firestore,mr);return oB(fi(e),n._key,{source:"server"}).then(t=>q1(e,n,t))}(this._delegate):function(n){n=on(n,tr);const e=on(n.firestore,mr);return oB(fi(e),n._key).then(t=>q1(e,n,t))}(this._delegate),t.then(r=>new aC(this.firestore,new Kd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Il(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}function co(n,e,t){return n.message=n.message.replace(e,t),n}function WB(n){for(const e of n)if("object"==typeof e&&!Z1(e))return e;return{}}function qB(n,e){var t,r;let i;return i=Z1(n[0])?n[0]:Z1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class aC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SB(this._delegate,e._delegate)}}class lC extends aC{data(e){const t=this._delegate.data(e);return function(n,e){n||ct()}(void 0!==t),t}}class uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new AA(e)}where(e,t,r){try{return new uo(this.firestore,Lf(this._delegate,function(n,e,t){const r=e,i=DA("where",n);return new iG(i,r,t)}(e,t,r)))}catch(i){throw co(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new uo(this.firestore,Lf(this._delegate,function(n,e="asc"){const t=e,r=DA("orderBy",n);return new oG(r,t)}(e,t)))}catch(r){throw co(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new uo(this.firestore,Lf(this._delegate,function(n){return hB("limit",n),new xB("limit",n,"F")}(e)))}catch(t){throw co(t,"limit()","Query.limit()")}}limitToLast(e){try{return new uo(this.firestore,Lf(this._delegate,function(n){return hB("limitToLast",n),new xB("limitToLast",n,"L")}(e)))}catch(t){throw co(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new uo(this.firestore,Lf(this._delegate,function(...n){return new kB("startAt",n,!0)}(...e)))}catch(t){throw co(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new uo(this.firestore,Lf(this._delegate,function(...n){return new kB("startAfter",n,!1)}(...e)))}catch(t){throw co(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new uo(this.firestore,Lf(this._delegate,function(...n){return new MB("endBefore",n,!1)}(...e)))}catch(t){throw co(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new uo(this.firestore,Lf(this._delegate,function(...n){return new MB("endAt",n,!0)}(...e)))}catch(t){throw co(t,"endAt()","Query.endAt()")}}isEqual(e){return gB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=on(n,Vs);const e=on(n.firestore,mr),t=fi(e),r=new dg(e);return function(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(r=(0,xe.Z)(function*(i,l,u){try{const f=yield dA(i,l,!0),y=new qU(l,f.Ks),E=y.Ic(f.documents),D=y.applyChanges(E,!1);u.resolve(D.snapshot)}catch(f){const y=jb(f,`Failed to execute query '${l} against cache`);u.reject(y)}}),function(i,l,u){return r.apply(this,arguments)})(yield F1(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ff(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=on(n,Vs);const e=on(n.firestore,mr),t=fi(e),r=new dg(e);return aB(t,n._query,{source:"server"}).then(i=>new Ff(e,r,n,i))}(this._delegate):function(n){n=on(n,Vs);const e=on(n.firestore,mr),t=fi(e),r=new dg(e);return AB(n._query),aB(t,n._query).then(i=>new Ff(e,r,n,i))}(this._delegate),t.then(r=>new Y1(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WB(e),r=qB(e,i=>new Y1(this.firestore,new Ff(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return UB(this._delegate,t,r)}withConverter(e){return new uo(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}class FG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new lC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Y1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new lC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new lC(this._firestore,r))})}isEqual(e){return SB(this._delegate,e._delegate)}}class qb extends uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Il(this.firestore,e):null}doc(e){try{return new Il(this.firestore,void 0===e?vA(this._delegate):vA(this._delegate,e))}catch(t){throw co(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=on(n.firestore,mr),r=vA(n),i=SA(n.converter,e);return Wb(t,[CA(lg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,di.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Il(this.firestore,t))}isEqual(e){return mB(this._delegate,e._delegate)}withConverter(e){return new qb(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}function fg(n){return on(n,tr)}class Q1{constructor(...e){this._delegate=new qd(...e)}static documentId(){return new Q1(dr.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof qd&&this._delegate._internalPath.isEqual(e._internalPath)}}class pg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new j1("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new pg(e)}static delete(){const e=new nC("deleteField");return e._methodName="FieldValue.delete",new pg(e)}static arrayUnion(...e){const t=function(...n){return new J4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new pg(t)}static arrayRemove(...e){const t=function(...n){return new X4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new pg(t)}static increment(e){const t=function(n){return new eG("increment",n)}(e);return t._methodName="FieldValue.increment",new pg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LG={Firestore:$B,GeoPoint:EA,Timestamp:ui,Blob:oC,Transaction:GB,WriteBatch:zB,DocumentReference:Il,DocumentSnapshot:aC,Query:uo,QueryDocumentSnapshot:lC,QuerySnapshot:Y1,CollectionReference:qb,FieldPath:Q1,FieldValue:pg,setLogLevel:function(n){!function(n){Ec.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new bc.wA("firestore-compat",t=>((e,t)=>new $B(e,t,new OG))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},LG)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.14")}(LE.Z);var J1=Ge(6682),cC=Ge(309),BG=Ge(7771),jG=Ge(8858);class KB extends Fn.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new HG(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,l=r.length;let u;if(this.closed)throw new Bc.N;if(this.isStopped||this.hasError?u=zr.w.EMPTY:(this.observers.push(e),u=new jG.W(this,e)),i&&e.add(e=new cC.ht(e,i)),t)for(let f=0;f<l&&!e.closed;f++)e.next(r[f]);else for(let f=0;f<l&&!e.closed;f++)e.next(r[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),u}_getNow(){return(this.scheduler||BG.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,l=i.length;let u=0;for(;u<l&&!(e-i[u].time<r);)u++;return l>t&&(u=Math.max(u,l-t)),u>0&&i.splice(0,u),i}}class HG{constructor(e,t){this.time=e,this.value=t}}function ZB(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,u,l=0,f=!1,y=!1;return function(D){let S;l++,!i||f?(f=!1,i=new KB(n,e,r),S=i.subscribe(this),u=D.subscribe({next(N){i.next(N)},error(N){f=!0,i.error(N)},complete(){y=!0,u=void 0,i.complete()}}),y&&(u=void 0)):S=i.subscribe(this),this.add(()=>{l--,S.unsubscribe(),S=void 0,u&&!y&&t&&0===l&&(u.unsubscribe(),u=void 0,i=void 0)})}}(r))}function YB(n,e){return e?lr(()=>n,e):lr(()=>n)}var X1=Ge(3101);Ge(2329);const JB=new Map,KG={activated:!1,tokenObservers:[]},ZG={initialized:!1,enabled:!1};function qi(n){return JB.get(n)||KG}function Ic(n,e){JB.set(n,e)}function kA(){return ZG}class e6{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,xe.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ho=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ej(n){if(!qi(n).activated)throw ho.create("use-before-activation",{appName:n.name})}function rP(n,e){return iP.apply(this,arguments)}function iP(){return(iP=(0,xe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,l)}catch(S){throw ho.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==u.status)throw ho.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(S){throw ho.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw ho.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const E=1e3*Number(y[1]),D=Date.now();return{token:f.attestationToken,expireTimeMillis:D+E,issuedAtTimeMillis:D}})).apply(this,arguments)}function o6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const uC="firebase-app-check-store";let NA=null;function nj(){return NA||(NA=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ho.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(uC,{keyPath:"compositeKey"})}}}catch(t){e(ho.create("storage-open",{originalErrorMessage:t.message}))}}),NA)}function sP(){return(sP=(0,xe.Z)(function*(n,e){const r=(yield nj()).transaction(uC,"readwrite"),l=r.objectStore(uC).put({compositeKey:n,value:e});return new Promise((u,f)=>{l.onsuccess=y=>{u()},r.onerror=y=>{var E;f(ho.create("storage-set",{originalErrorMessage:null===(E=y.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const dC=new Bo.Yd("@firebase/app-check");function oj(n,e){return(0,U.hl)()?function(n,e){return function(n,e){return sP.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{dC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aj(){return kA().enabled}function lj(){return cP.apply(this,arguments)}function cP(){return(cP=(0,xe.Z)(function*(){const n=kA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const g6={error:"UNKNOWN_ERROR"};function _6(n){return U.US.encodeString(JSON.stringify(n),!1)}function OA(n){return uP.apply(this,arguments)}function uP(){return(uP=(0,xe.Z)(function*(n,e=!1){const t=n.app;ej(t);const r=qi(t);let l,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&PA(y)&&(i=y)}if(!e&&i&&PA(i))return{token:i.token};let f,u=!1;if(aj()){r.exchangeTokenPromise||(r.exchangeTokenPromise=rP(o6(t,yield lj()),n.platformLoggerProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),u=!0);const y=yield r.exchangeTokenPromise;return yield oj(t,y),Ic(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?dC.warn(y.message):dC.error(y),l=y}return i?(f={token:i.token},Ic(t,Object.assign(Object.assign({},r),{token:i})),yield oj(t,i)):f=b6(l),u&&uj(t,f),f})).apply(this,arguments)}function hP(n,e){const t=qi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ic(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function cj(n){const{app:e}=n,t=qi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new e6((0,xe.Z)(function*(){let r;if(r=qi(e).token?yield OA(n,!0):yield OA(n),r.error)throw r.error}),()=>!0,()=>{const t=qi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ic(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uj(n,e){const t=qi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function PA(n){return n.expireTimeMillis-Date.now()>0}function b6(n){return{token:_6(g6),error:n}}class v6{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=qi(this.app);for(const t of e)hP(this.app,t.next);return Promise.resolve()}}const yj="app-check-internal";(0,Uo._registerComponent)(new bc.wA("app-check",n=>function(n,e){return new v6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yj).initialize()})),(0,Uo._registerComponent)(new bc.wA(yj,n=>function(n){return{getToken:e=>OA(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,l=qi(i),u={next:t,error:r,type:e};if(Ic(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&PA(l.token)){const f=l.token;Promise.resolve().then(()=>{t({token:f.token}),cj(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>cj(n))}(n,"INTERNAL",e),removeTokenListener:e=>hP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Uo.registerVersion)("@firebase/app-check","0.5.3");class LA{constructor(){return(0,xn.vb)("app-check")}}"undefined"!=typeof window&&window;var _P=Ge(7841);const yP=new p.OlP("angularfire2.auth.use-emulator"),bP=new p.OlP("angularfire2.auth.settings"),vP=new p.OlP("angularfire2.auth.tenant-id"),EP=new p.OlP("angularfire2.auth.langugage-code"),wP=new p.OlP("angularfire2.auth.use-device-language"),CP=new p.OlP("angularfire.auth.persistence"),IP=(n,e,t,r,i,l,u,f)=>(0,ss.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,l&&y.useDeviceLanguage(),u)for(const[E,D]of Object.entries(u))y.settings[E]=D;return f&&y.setPersistence(f),y},[t,r,i,l,u,f]);let VA=(()=>{class n{constructor(t,r,i,l,u,f,y,E,D,S,N,B){const G=new Fn.xQ,de=(0,lt.of)(void 0).pipe((0,cC.QV)(u.outsideAngular),lr(()=>l.runOutsideAngular(()=>Promise.resolve().then(Ge.bind(Ge,1352)))),(0,_t.U)(()=>(0,ss.on)(t,l,r)),(0,_t.U)(Ae=>IP(Ae,l,f,E,D,S,y,N)),ZB({bufferSize:1,refCount:!1}));if(_s(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,lt.of)(null);else{de.pipe(To()).subscribe();const We=de.pipe(lr(mt=>mt.getRedirectResult().then(In=>In,()=>null)),xn.iC,ZB({bufferSize:1,refCount:!1})),nt=de.pipe(lr(mt=>new Mr.y(In=>({unsubscribe:l.runOutsideAngular(()=>mt.onAuthStateChanged(Ur=>In.next(Ur),Ur=>In.error(Ur),()=>In.complete()))})))),Mt=de.pipe(lr(mt=>new Mr.y(In=>({unsubscribe:l.runOutsideAngular(()=>mt.onIdTokenChanged(Ur=>In.next(Ur),Ur=>In.error(Ur),()=>In.complete()))}))));this.authState=We.pipe(YB(nt),(0,X1.R)(u.outsideAngular),(0,cC.QV)(u.insideAngular)),this.user=We.pipe(YB(Mt),(0,X1.R)(u.outsideAngular),(0,cC.QV)(u.insideAngular)),this.idToken=this.user.pipe(lr(mt=>mt?(0,yn.D)(mt.getIdToken()):(0,lt.of)(null))),this.idTokenResult=this.user.pipe(lr(mt=>mt?(0,yn.D)(mt.getIdTokenResult()):(0,lt.of)(null))),this.credential=(0,J1.T)(We,G,this.authState.pipe(Qs(mt=>!mt))).pipe((0,_t.U)(mt=>(null==mt?void 0:mt.user)?mt:null),(0,X1.R)(u.outsideAngular),(0,cC.QV)(u.insideAngular))}return(0,ss.pX)(this,de,l,{spy:{apply:(Ae,We,nt)=>{(Ae.startsWith("signIn")||Ae.startsWith("createUser"))&&nt.then(Mt=>G.next(Mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ss.Dh),p.LFG(ss.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(xn.HU),p.LFG(yP,8),p.LFG(bP,8),p.LFG(vP,8),p.LFG(EP,8),p.LFG(wP,8),p.LFG(CP,8),p.LFG(LA,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),B6=(()=>{class n{constructor(){_P.Z.registerVersion("angularfire",xn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[VA]}),n})();function vj(n,e){return function(n,e=si.z){return new Mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function TP(n,e){return vj(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function UA(n,e){return TP(n,e).pipe(Qu(void 0),PE(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const y=i.find(D=>D.doc.ref.isEqual(u.ref)),E=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(u.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(u.metadata)||!y&&E&&JSON.stringify(E.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),l}))}function Ej(n,e,t){return UA(n,t).pipe(Io((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return DP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return DP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),A_(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function DP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function wj(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Cj{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=UA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Qu(void 0),PE(),Qs(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wj(e);return Ej(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return TP(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xn.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(xn.iC)}add(e){return this.ref.add(e)}doc(e){return new Ij(this.ref.doc(e),this.afs)}}class Ij{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=Sj(r,t);return new Cj(i,l,this.afs)}snapshotChanges(){return function(n,e){return vj(n,e).pipe(Qu(void 0),PE(),(0,_t.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(xn.iC)}}class z6{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UA(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qs(t=>t.length>0),xn.iC):UA(this.query,this.afs.schedulers.outsideAngular).pipe(xn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wj(e);return Ej(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn.iC)}valueChanges(e={}){return TP(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),xn.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(xn.iC)}}const Tj=new p.OlP("angularfire2.enableFirestorePersistence"),Dj=new p.OlP("angularfire2.firestore.persistenceSettings"),W6=new p.OlP("angularfire2.firestore.settings"),q6=new p.OlP("angularfire2.firestore.use-emulator");function Sj(n,e=(t=>t)){return{query:e(n),ref:n}}let K6=(()=>{class n{constructor(t,r,i,l,u,f,y,E,D,S,N,B,G,de,Ae,We,nt){this.schedulers=y;const Mt=(0,ss.on)(t,f,r),mt=D;S&&IP(Mt,f,N,G,de,Ae,B,We),[this.firestore,this.persistenceEnabled$]=(0,ss.cc)(`${Mt.name}.firestore`,"AngularFirestore",Mt.name,()=>{const In=f.runOutsideAngular(()=>Mt.firestore());if(l&&In.settings(l),mt&&In.useEmulator(...mt),i&&!_s(u)){const Ur=()=>{try{return(0,yn.D)(In.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(pi){return"undefined"!=typeof console&&console.warn(pi),(0,lt.of)(!1)}};return[In,f.runOutsideAngular(Ur)]}return[In,(0,lt.of)(!1)]},[l,mt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=Sj(i,r),f=this.schedulers.ngZone.run(()=>l);return new Cj(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),l=this.firestore.collectionGroup(t);return new z6(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Ij(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ss.Dh),p.LFG(ss.xv,8),p.LFG(Tj,8),p.LFG(W6,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(xn.HU),p.LFG(Dj,8),p.LFG(q6,8),p.LFG(VA,8),p.LFG(yP,8),p.LFG(bP,8),p.LFG(vP,8),p.LFG(EP,8),p.LFG(wP,8),p.LFG(CP,8),p.LFG(LA,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Z6=(()=>{class n{constructor(){_P.Z.registerVersion("angularfire",xn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Tj,useValue:!0},{provide:Dj,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[K6]}),n})();var Y6=Ge(8819);class J6{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new X6(e,this.observables,this.project))}}class X6 extends Ya{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let l=0;l<i;l++)this.toRespond.push(l);for(let l=0;l<i;l++)this.add(Vg(this,t[l],void 0,l))}notifyNext(e,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const l=i.indexOf(r);-1!==l&&i.splice(l,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class tz{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new nz(e,this.predicate))}}class nz extends ar.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const Aj="@firebase/database";let SP="";function kj(n){SP=n}class rz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class iz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Mj=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new rz(e)}}catch(e){}return new iz},mg=Mj("localStorage"),AP=Mj("sessionStorage"),Kb=new Bo.Yd("@firebase/database"),Rj=function(){let n=1;return function(){return n++}}(),Nj=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},hC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=hC.apply(null,r):e+="object"==typeof r?(0,U.Pz)(r):r,e+=" "}return e};let gg=null,Oj=!0;const Pj=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kb.logLevel=Bo.in.VERBOSE,gg=Kb.log.bind(Kb),e&&AP.set("logging_enabled",!0)):"function"==typeof n?gg=n:(gg=null,AP.remove("logging_enabled"))},Ki=function(...n){if(!0===Oj&&(Oj=!1,null===gg&&!0===AP.get("logging_enabled")&&Pj(!0)),gg){const e=hC.apply(null,n);gg(e)}},fC=function(n){return function(...e){Ki(n,...e)}},xP=function(...n){const e="FIREBASE INTERNAL ERROR: "+hC(...n);Kb.error(e)},Cu=function(...n){const e=`FIREBASE FATAL ERROR: ${hC(...n)}`;throw Kb.error(e),new Error(e)},fo=function(...n){const e="FIREBASE WARNING: "+hC(...n);Kb.warn(e)},BA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zd="[MIN_NAME]",Iu="[MAX_NAME]",_g=function(n,e){if(n===e)return 0;if(n===Zd||e===Iu)return-1;if(e===Zd||n===Iu)return 1;{const t=jA(n),r=jA(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},az=function(n,e){return n===e?0:n<e?-1:1},pC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Pz)(e))},kP=function(n){if("object"!=typeof n||null===n)return(0,U.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Pz)(e[r]),t+=":",t+=kP(n[e[r]]);return t+="}",t},Fj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Zi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Lj=function(n){(0,U.hu)(!BA(n),"Invalid JSON number");const r=1023;let i,l,u,f,y;0===n?(l=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,u=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,u=Math.round(n/Math.pow(2,-1074))));const E=[];for(y=52;y;y-=1)E.push(u%2?1:0),u=Math.floor(u/2);for(y=11;y;y-=1)E.push(l%2?1:0),l=Math.floor(l/2);E.push(i?1:0),E.reverse();const D=E.join("");let S="";for(y=0;y<64;y+=8){let N=parseInt(D.substr(y,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},dz=new RegExp("^-?(0*)\\d{1,10}$"),Vj=-2147483648,MP=2147483647,jA=function(n){if(dz.test(n)){const e=Number(n);if(e>=Vj&&e<=MP)return e}return null},Zb=function(n){try{n()}catch(e){setTimeout(()=>{throw fo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},mC=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class fz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ki("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fo(e)}}let gC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const $j=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zj="websocket",Wj="long_polling";class NP{constructor(e,t,r,i,l=!1,u="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qj(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===zj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Wj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Zi(t,(l,u)=>{i.push(l+"="+u)}),r+i.join("&")}class _z{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const OP={},PP={};function FP(n){const e=n.toString();return OP[e]||(OP[e]=new _z),OP[e]}class bz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Zb(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yb{constructor(e,t,r,i,l,u,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fC(e),this.stats_=FP(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),qj(t,Wj,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new LP((...l)=>{const[u,f,y,E,D]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=f,this.password=y;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&$j.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yb.forceAllow_=!0}static forceDisallow(){Yb.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!Yb.forceAllow_&&(Yb.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=Fj(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class LP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Rj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=LP.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Ki("frame writing exception"),f.stack&&Ki(f.stack),Ki(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ki("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ki("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let _C=null;"undefined"!=typeof MozWebSocket?_C=MozWebSocket:"undefined"!=typeof WebSocket&&(_C=WebSocket);let yC=(()=>{class n{constructor(t,r,i,l,u,f,y){this.connId=t,this.applicationId=i,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fC(this.connId),this.stats_=FP(r),this.connURL=n.connectionURL_(r,f,y,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,l){const u={v:"5"};return!(0,U.Yr)()&&"undefined"!=typeof location&&location.hostname&&$j.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),l&&(u.ac=l),qj(t,zj,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mg.set("previous_websocket_failure",!0);try{if((0,U.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${SP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,f=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new _C(this.connURL,[],l)}else this.mySock=new _C(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==_C&&!n.forceDisallow_}static previouslyFailed(){return mg.isInMemoryStorage||!0===mg.get("previous_websocket_failure")}markConnectionHealthy(){mg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Fj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class VP{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Yb,yC]}initTransports_(e){const t=yC&&yC.isAvailable();let r=t&&!yC.previouslyFailed();if(e.webSocketOnly&&(t||fo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[yC];else{const i=this.transports_=[];for(const l of VP.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class o5{constructor(e,t,r,i,l,u,f,y,E,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fC("c:"+this.id+":"),this.transportManager_=new VP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=mC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pC("t",e),r=pC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pC("t",e),r=pC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?xP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&fo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),mC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class a5{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class l5{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let l=0;l<i.length;l++)if(i[l].callback===t&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class $A extends l5{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $A}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new Cn("")}function Jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Uf(n){return n.pieces_.length-n.pieceNum_}function Rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function BP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function bC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function d5(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function gr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function po(n,e){const t=Jt(n),r=Jt(e);if(null===t)return e;if(t===r)return po(Rn(n),Rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function jz(n,e){const t=bC(n,0),r=bC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const l=_g(t[i],r[i]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function jP(n,e){if(Uf(n)!==Uf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Tl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Uf(n)>Uf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Hz{constructor(e,t){this.errorPrefix_=t,this.parts_=bC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);h5(this)}}function h5(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yg(n))}function yg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class HP extends l5{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new HP}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const vC=1e3;let zA,bg=(()=>{class n extends a5{constructor(t,r,i,l,u,f,y,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=fC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&$A.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const l=++this.requestNumber_,u={r:l,a:t,b:r};this.log_((0,U.Pz)(u)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[l]=i)}get(t){this.initConnection_();const r=new U.BH,i={p:t._path.toString(),q:t._queryObject},l={action:"g",request:i,onComplete:f=>{const y=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[u];void 0===f||l!==f||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,l){this.initConnection_();const u=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+u),this.listens.has(f)||this.listens.set(f,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(f).has(u),"listen() called twice for same path/queryId.");const y={onComplete:l,hashFn:r,query:t,tag:i};this.listens.get(f).set(u,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,y=>{const E=y.d,D=y.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(l))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(i,l),t.onComplete&&t.onComplete(D,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();fo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const u=l.s,f=l.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,t._queryObject,r)}sendUnlisten_(t,r,i,l){this.log_("Unlisten on "+t+" for "+r);const u={p:t};l&&(u.q=i,u.t=l),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,l){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(t,r,i,l){this.putInternal("p",t,r,i,l)}merge(t,r,i,l){this.putInternal("m",t,r,i,l)}putInternal(t,r,i,l,u){this.initConnection_();const f={p:r,d:i};void 0!==u&&(f.h=u),this.outstandingPuts_.push({action:t,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):xP("Unrecognized action received from server: "+(0,U.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,xe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,E=null;const D=function(){E?E.close():(y=!0,l())};t.realtime_={close:D,sendRequest:function(B){(0,U.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(B)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,G]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);y?Ki("getToken() completed but was canceled"):(Ki("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=G&&G.token,E=new o5(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,l,de=>{fo(de+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(B){t.log_("Failed to get token: "+B),y||(t.repoInfo_.nodeAdmin&&fo(B),D())}}})()}interrupt(t){Ki("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ki("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=vC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>kP(u)).join("$"):"default";const l=this.removeListen_(t,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let l;if(this.listens.has(i)){const u=this.listens.get(i);l=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(t,r){Ki("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ki("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+SP.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=$A.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class GA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(Zd,e),i=new en(Zd,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class m5 extends GA{static get __EMPTY_NODE(){return zA}static set __EMPTY_NODE(e){zA=e}compare(e,t){return _g(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Iu,zA)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,zA)}toString(){return".key"}}const Tu=new m5;class WA{constructor(e,t,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let GP,Tc=(()=>{class n{constructor(t,r,i,l,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:Go.EMPTY_NODE,this.right=null!=u?u:Go.EMPTY_NODE}copy(t,r,i,l,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let l=this;const u=i(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,i),null):0===u?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Go.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,l;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Go.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Go{constructor(e,t=Go.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Go(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Tc.BLACK,null,null))}remove(e){return new Go(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Tc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new WA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new WA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new WA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new WA(this.root_,null,this.comparator_,!0,e)}}function Qz(n,e){return _g(n.name,e.name)}function $P(n,e){return _g(n,e)}Go.EMPTY_NODE=new class{copy(e,t,r,i,l){return this}insert(e,t,r){return new Tc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const g5=function(n){return"number"==typeof n?"number:"+Lj(n):"string:"+n},_5=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===GP||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===GP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let y5,b5,v5,Qb=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),_5(this.priorityNode_)}static set __childrenNodeConstructor(t){y5=t}static get __childrenNodeConstructor(){return y5}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===Jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Jt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===Uf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+g5(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Lj(this.value_):this.value_,this.lazyHash_=Nj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(l>=0,"Unknown leaf type: "+r),(0,U.hu)(u>=0,"Unknown leaf type: "+i),l===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Bn=new class extends GA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),l=r.compareTo(i);return 0===l?_g(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Iu,new Qb("[PRIORITY-POST]",v5))}makePost(e,t){const r=b5(e);return new en(t,new Qb("[PRIORITY-POST]",r))}toString(){return".priority"}},nW=Math.log(2);class rW{constructor(e){this.count=parseInt(Math.log(e+1)/nW,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qA=function(n,e,t,r){n.sort(e);const i=function(y,E){const D=E-y;let S,N;if(0===D)return null;if(1===D)return S=n[y],N=t?t(S):S,new Tc(N,S.node,Tc.BLACK,null,null);{const B=parseInt(D/2,10)+y,G=i(y,B),de=i(B+1,E);return S=n[B],N=t?t(S):S,new Tc(N,S.node,Tc.BLACK,G,de)}},f=function(y){let E=null,D=null,S=n.length;const N=function(G,de){const Ae=S-G,We=S;S-=G;const nt=i(Ae+1,We),Mt=n[Ae],mt=t?t(Mt):Mt;B(new Tc(mt,Mt.node,de,null,nt))},B=function(G){E?(E.left=G,E=G):(D=G,E=G)};for(let G=0;G<y.count;++G){const de=y.nextBitIsOne(),Ae=Math.pow(2,y.count-(G+1));de?N(Ae,Tc.BLACK):(N(Ae,Tc.BLACK),N(Ae,Tc.RED))}return D}(new rW(n.length));return new Go(r||e,f)};let zP;const Jb={};class Yd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(Jb&&Bn,"ChildrenNode.ts has not been loaded"),zP=zP||new Yd({".priority":Jb},{".priority":Bn}),zP}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Go?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==Tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=t.getIterator(en.Wrap);let f,u=l.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=l.getNext();f=i?qA(r,e.getCompare()):Jb;const y=e.toString(),E=Object.assign({},this.indexSet_);E[y]=e;const D=Object.assign({},this.indexes_);return D[y]=f,new Yd(D,E)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,l)=>{const u=(0,U.DV)(this.indexSet_,l);if((0,U.hu)(u,"Missing index implementation for "+l),i===Jb){if(u.isDefinedOn(e.node)){const f=[],y=t.getIterator(en.Wrap);let E=y.getNext();for(;E;)E.name!==e.name&&f.push(E),E=y.getNext();return f.push(e),qA(f,u.getCompare())}return Jb}{const f=t.get(e.name);let y=i;return f&&(y=y.remove(new en(e.name,f))),y.insert(e,e.node)}});return new Yd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===Jb)return i;{const l=t.get(e.name);return l?i.remove(new en(e.name,l)):i}});return new Yd(r,this.indexSet_)}}let EC,zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_5(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EC||(EC=new n(new Go($P),null,Yd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?EC:r}}getChild(t){const r=Jt(t);return null===r?this:this.getImmediateChild(r).getChild(Rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let l,u;r.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?EC:this.priorityNode_;return new n(l,f,u)}}updateChild(t,r){const i=Jt(t);if(null===i)return r;{(0,U.hu)(".priority"!==Jt(t)||1===Uf(t),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Rn(t),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,l=0,u=!0;if(this.forEachChild(Bn,(f,y)=>{r[f]=y.val(t),i++,u&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):u=!1}),!t&&u&&l<2*i){const f=[];for(const y in r)f[y]=r[y];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+g5(this.getPriority().val())+":"),this.forEachChild(Bn,(r,i)=>{const l=i.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":Nj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const l=this.resolveIndex_(i);if(l){const u=l.getPredecessorKey(new en(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,en.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===wC?-1:0}withIndex(t){if(t===Tu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Tu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Bn),l=r.getIterator(Bn);let u=i.getNext(),f=l.getNext();for(;u&&f;){if(u.name!==f.name||!u.node.equals(f.node))return!1;u=i.getNext(),f=l.getNext()}return null===u&&null===f}return!1}return!1}}resolveIndex_(t){return t===Tu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const wC=new class extends zt{constructor(){super(new Go($P),zt.EMPTY_NODE,Yd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return zt.EMPTY_NODE}isEmpty(){return!1}};function Sr(n,e=null){if(null===n)return zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qb(n,Sr(e));if(n instanceof Array){let t=zt.EMPTY_NODE;return Zi(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const l=Sr(i);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(Sr(e))}{const t=[];let r=!1;if(Zi(n,(u,f)=>{if("."!==u.substring(0,1)){const y=Sr(f);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new en(u,y)))}}),0===t.length)return zt.EMPTY_NODE;const l=qA(t,Qz,u=>u.name,$P);if(r){const u=qA(t,Bn.getCompare());return new zt(l,Sr(e),new Yd({".priority":u},{".priority":Bn}))}return new zt(l,Sr(e),Yd.Default)}}Object.defineProperties(en,{MIN:{value:new en(Zd,zt.EMPTY_NODE)},MAX:{value:new en(Iu,wC)}}),m5.__EMPTY_NODE=zt.EMPTY_NODE,Qb.__childrenNodeConstructor=zt,function(n){GP=n}(wC),function(n){v5=n}(wC),function(n){b5=n}(Sr);class WP extends GA{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!Xt(e)&&".priority"!==Jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),l=r.compareTo(i);return 0===l?_g(e.name,t.name):l}makePost(e,t){const r=Sr(e),i=zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=zt.EMPTY_NODE.updateChild(this.indexPath_,wC);return new en(Iu,e)}toString(){return bC(this.indexPath_,0).join("/")}}const qP=new class extends GA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?_g(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=Sr(e);return new en(t,r)}toString(){return".value"}},Xb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aW=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const l=new Array(8);for(i=7;i>=0;i--)l[i]=Xb.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let u=l.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Xb.charAt(e[i]);return(0,U.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),C5=function(n){if(n===""+MP)return"-";const e=jA(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Iu;const l=Xb.charAt(Xb.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},I5=function(n){if(n===""+Vj)return Zd;const e=jA(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+MP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Xb.charAt(Xb.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function T5(n){return{type:"value",snapshotNode:n}}function ev(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function CC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function IC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ZP{constructor(e){this.index_=e}updateChild(e,t,r,i,l,u){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(CC(t,f)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(ev(t,r)):u.trackChildChange(IC(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Bn,(i,l)=>{t.hasChild(i)||r.trackChildChange(CC(i,l))}),t.isLeafNode()||t.forEachChild(Bn,(i,l)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(l)||r.trackChildChange(IC(i,l,u))}else r.trackChildChange(ev(i,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class TC{constructor(e){this.indexedFilter_=new ZP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=TC.getStartPost_(e),this.endPost_=TC.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,l,u){return this.matches(new en(t,r))||(r=zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,l,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);const l=this;return t.forEachChild(Bn,(u,f)=>{l.matches(new en(u,f))||(i=i.updateImmediateChild(u,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class cW{constructor(e){this.rangedFilter_=new TC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,l,u){return this.rangedFilter_.matches(new en(t,r))||(r=zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,l,u):this.fullLimitUpdateChild_(e,t,r,l,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;i=zt.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const f=l.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(f.name,f.node),u++}}else{let l,u,f,y;if(i=t.withIndex(this.index_),i=i.updatePriority(zt.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(N,B)=>S(B,N)}else y=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let E=0,D=!1;for(;y.hasNext();){const S=y.getNext();!D&&f(l,S)<=0&&(D=!0),D&&E<this.limit_&&f(S,u)<=0?E++:i=i.updateImmediateChild(S.name,zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,l){let u;if(this.reverse_){const S=this.index_.getCompare();u=(N,B)=>S(B,N)}else u=this.index_.getCompare();const f=e;(0,U.hu)(f.numChildren()===this.limit_,"");const y=new en(t,r),E=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(f.hasChild(t)){const S=f.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=N&&(N.name===t||f.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const B=null==N?1:u(N,y);if(D&&!r.isEmpty()&&B>=0)return null!=l&&l.trackChildChange(IC(t,r,S)),f.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(CC(t,S));const de=f.updateImmediateChild(t,zt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=l&&l.trackChildChange(ev(N.name,N.node)),de.updateImmediateChild(N.name,N.node)):de}}return r.isEmpty()?e:D&&u(E,y)>=0?(null!=l&&(l.trackChildChange(CC(E.name,E.node)),l.trackChildChange(ev(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(E.name,zt.EMPTY_NODE)):e}}class KA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Iu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bn}copy(){const e=new KA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function QP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ZA(n,e){const t=n.copy();return t.index_=e,t}function D5(n){const e={};if(n.isDefault())return e;let t;return n.index_===Bn?t="$priority":n.index_===qP?t="$value":n.index_===Tu?t="$key":((0,U.hu)(n.index_ instanceof WP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Pz)(t),n.startSet_&&(e.startAt=(0,U.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,U.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,U.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,U.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function S5(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Bn&&(e.i=n.index_.toString()),e}class YA extends a5{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=YA.getListenId_(e,r),f={};this.listens_[u]=f;const y=D5(e._queryParams);this.restRequest_(l+".json",y,(E,D)=>{let S=D;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(l,S,!1,r),(0,U.DV)(this.listens_,u)===f){let N;N=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(N,null)}})}unlisten(e,t){const r=YA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=D5(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(l,u)=>{let f=u;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(t.auth=i.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,U.cI)(f.responseText)}catch(E){fo("Failed to parse JSON response for "+u+": "+f.responseText)}r(null,y)}else 401!==f.status&&404!==f.status&&fo("Got unsuccessful REST response for "+u+" Status: "+f.status),r(f.status);r=null}},f.open("GET",u,!0),f.send()})}}class mW{constructor(){this.rootNode_=zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function QA(){return{value:null,children:new Map}}function tv(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Jt(e);n.children.has(r)||n.children.set(r,QA()),tv(n.children.get(r),e=Rn(e),t)}}function JP(n,e){if(Xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Bn,(r,i)=>{tv(n,new Cn(r),i)}),JP(n,e)}}if(n.children.size>0){const t=Jt(e);return e=Rn(e),n.children.has(t)&&JP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function XP(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{XP(i,new Cn(e.toString()+"/"+r),t)})}class _W{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class vW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _W(e);const r=1e4+2e4*Math.random();mC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Zi(e,(i,l)=>{l>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=l,r=!0)}),r&&this.server_.reportStats(t),mC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Dl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Dl||(Dl={})),Dl))();function nF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class JA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Dl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new JA(gn(),t,this.revert)}}return(0,U.hu)(Jt(this.path)===e,"operationForChild called for unrelated child."),new JA(Rn(this.path),this.affectedTree,this.revert)}}class DC{constructor(e,t){this.source=e,this.path=t,this.type=Dl.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new DC(this.source,gn()):new DC(this.source,Rn(this.path))}}class vg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Dl.OVERWRITE}operationForChild(e){return Xt(this.path)?new vg(this.source,gn(),this.snap.getImmediateChild(e)):new vg(this.source,Rn(this.path),this.snap)}}class nv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Dl.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new vg(this.source,gn(),t.value):new nv(this.source,gn(),t)}return(0,U.hu)(Jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nv(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class EW{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function SC(n,e,t,r,i,l){const u=r.filter(f=>f.type===t);u.sort((f,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,y)),u.forEach(f=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,l);i.forEach(E=>{E.respondsTo(f.type)&&e.push(E.createEvent(y,n.query_))})})}function XA(n,e){return{eventCache:n,serverCache:e}}function AC(n,e,t,r){return XA(new Bf(e,t,r),n.serverCache)}function x5(n,e,t,r){return XA(n.eventCache,new Bf(e,t,r))}function ex(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Eg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let rF;class jn{constructor(e,t=(()=>(rF||(rF=new Go(az)),rF))()){this.value=e,this.children=t}static fromObject(e){let t=new jn(null);return Zi(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Xt(e))return null;{const r=Jt(e),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(Rn(e),t);return null!=l?{path:gr(new Cn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=Jt(e),r=this.children.get(t);return null!==r?r.subtree(Rn(e)):new jn(null)}}set(e,t){if(Xt(e))return new jn(t,this.children);{const r=Jt(e),l=(this.children.get(r)||new jn(null)).set(Rn(e),t),u=this.children.insert(r,l);return new jn(this.value,u)}}remove(e){if(Xt(e))return this.children.isEmpty()?new jn(null):new jn(null,this.children);{const t=Jt(e),r=this.children.get(t);if(r){const i=r.remove(Rn(e));let l;return l=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&l.isEmpty()?new jn(null):new jn(this.value,l)}return this}}get(e){if(Xt(e))return this.value;{const t=Jt(e),r=this.children.get(t);return r?r.get(Rn(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=Jt(e),l=(this.children.get(r)||new jn(null)).setTree(Rn(e),t);let u;return u=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new jn(this.value,u)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(gr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const l=Jt(e),u=this.children.get(l);return u?u.findOnPath_(Rn(e),gr(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=Jt(e),l=this.children.get(i);return l?l.foreachOnPath_(Rn(e),gr(t,i),r):new jn(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(gr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Dc{constructor(e){this.writeTree_=e}static empty(){return new Dc(new jn(null))}}function xC(n,e,t){if(Xt(e))return new Dc(new jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let l=r.value;const u=po(i,e);return l=l.updateChild(u,t),new Dc(n.writeTree_.set(i,l))}{const i=new jn(t),l=n.writeTree_.setTree(e,i);return new Dc(l)}}}function iF(n,e,t){let r=n;return Zi(t,(i,l)=>{r=xC(r,gr(e,i),l)}),r}function k5(n,e){if(Xt(e))return Dc.empty();{const t=n.writeTree_.setTree(e,new jn(null));return new Dc(t)}}function sF(n,e){return null!=wg(n,e)}function wg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(po(t.path,e)):null}function M5(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Bn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function jf(n,e){if(Xt(e))return n;{const t=wg(n,e);return new Dc(null!=t?new jn(t):n.writeTree_.subtree(e))}}function oF(n){return n.writeTree_.isEmpty()}function rv(n,e){return R5(gn(),n.writeTree_,e)}function R5(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,l)=>{".priority"===i?((0,U.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=R5(gr(n,i),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(gr(n,".priority"),r)),t}}function tx(n,e){return L5(e,n)}function kW(n,e){if(n.snap)return Tl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Tl(gr(n.path,t),e))return!0;return!1}function RW(n){return n.visible}function N5(n,e,t){let r=Dc.empty();for(let i=0;i<n.length;++i){const l=n[i];if(e(l)){const u=l.path;let f;if(l.snap)Tl(t,u)?(f=po(t,u),r=xC(r,f,l.snap)):Tl(u,t)&&(f=po(u,t),r=xC(r,gn(),l.snap.getChild(f)));else{if(!l.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(Tl(t,u))f=po(t,u),r=iF(r,f,l.children);else if(Tl(u,t))if(f=po(u,t),Xt(f))r=iF(r,gn(),l.children);else{const y=(0,U.DV)(l.children,Jt(f));if(y){const E=y.getChild(Rn(f));r=xC(r,gn(),E)}}}}}return r}function O5(n,e,t,r,i){if(r||i){const l=jf(n.visibleWrites,e);return!i&&oF(l)?t:i||null!=t||sF(l,gn())?rv(N5(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(Tl(E.path,e)||Tl(e,E.path))},e),t||zt.EMPTY_NODE):null}{const l=wg(n.visibleWrites,e);if(null!=l)return l;{const u=jf(n.visibleWrites,e);return oF(u)?t:null!=t||sF(u,gn())?rv(u,t||zt.EMPTY_NODE):null}}}function nx(n,e,t,r){return O5(n.writeTree,n.treePath,e,t,r)}function aF(n,e){return function(n,e,t){let r=zt.EMPTY_NODE;const i=wg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Bn,(l,u)=>{r=r.updateImmediateChild(l,u)}),r;if(t){const l=jf(n.visibleWrites,e);return t.forEachChild(Bn,(u,f)=>{const y=rv(jf(l,new Cn(u)),f);r=r.updateImmediateChild(u,y)}),M5(l).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return M5(jf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function P5(n,e,t,r){return function(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=gr(e,t);if(sF(n.visibleWrites,l))return null;{const u=jf(n.visibleWrites,l);return oF(u)?i.getChild(t):rv(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function rx(n,e){return function(n,e){return wg(n.visibleWrites,e)}(n.writeTree,gr(n.treePath,e))}function lF(n,e,t){return function(n,e,t,r){const i=gr(e,t),l=wg(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(t)?rv(jf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function F5(n,e){return L5(gr(n.treePath,e),n.writeTree)}function L5(n,e){return{treePath:n,writeTree:e}}class BW{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,IC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,CC(r,i.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,ev(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,IC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const V5=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class cF{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lF(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Eg(this.viewCache_),l=function(n,e,t,r,i,l){return function(n,e,t,r,i,l,u){let f;const y=jf(n.visibleWrites,e),E=wg(y,gn());if(null!=E)f=E;else{if(null==t)return[];f=rv(y,t)}if(f=f.withIndex(u),f.isEmpty()||f.isLeafNode())return[];{const D=[],S=u.getCompare(),N=l?f.getReverseIteratorFrom(r,u):f.getIteratorFrom(r,u);let B=N.getNext();for(;B&&D.length<i;)0!==S(B,r)&&D.push(B),B=N.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,l)}(this.writes_,i,t,1,r,e);return 0===l.length?null:l[0]}}function U5(n,e,t,r,i,l){const u=e.eventCache;if(null!=rx(r,t))return e;{let f,y;if(Xt(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=Eg(e),S=aF(r,E instanceof zt?E:zt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,l)}else{const E=nx(r,Eg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const E=Jt(t);if(".priority"===E){(0,U.hu)(1===Uf(t),"Can't have a priority with additional path components");const D=u.getNode();y=e.serverCache.getNode();const S=P5(r,t,D,y);f=null!=S?n.filter.updatePriority(D,S):u.getNode()}else{const D=Rn(t);let S;if(u.isCompleteForChild(E)){y=e.serverCache.getNode();const N=P5(r,t,u.getNode(),y);S=null!=N?u.getNode().getImmediateChild(E).updateChild(D,N):u.getNode().getImmediateChild(E)}else S=lF(r,E,e.serverCache);f=null!=S?n.filter.updateChild(u.getNode(),E,S,D,i,l):u.getNode()}}return AC(e,f,u.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function ix(n,e,t,r,i,l,u,f){const y=e.serverCache;let E;const D=u?n.filter:n.filter.getIndexedFilter();if(Xt(t))E=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const B=y.getNode().updateChild(t,r);E=D.updateFullNode(y.getNode(),B,null)}else{const B=Jt(t);if(!y.isCompleteForPath(t)&&Uf(t)>1)return e;const G=Rn(t),Ae=y.getNode().getImmediateChild(B).updateChild(G,r);E=".priority"===B?D.updatePriority(y.getNode(),Ae):D.updateChild(y.getNode(),B,Ae,G,V5,null)}const S=x5(e,E,y.isFullyInitialized()||Xt(t),D.filtersNodes());return U5(n,S,t,i,new cF(i,S,l),f)}function uF(n,e,t,r,i,l,u){const f=e.eventCache;let y,E;const D=new cF(i,e,l);if(Xt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,u),y=AC(e,E,!0,n.filter.filtersNodes());else{const S=Jt(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),y=AC(e,E,f.isFullyInitialized(),f.isFiltered());else{const N=Rn(t),B=f.getNode().getImmediateChild(S);let G;if(Xt(N))G=r;else{const de=D.getCompleteChild(S);G=null!=de?".priority"===BP(N)&&de.getChild(d5(N)).isEmpty()?de:de.updateChild(N,r):zt.EMPTY_NODE}y=B.equals(G)?e:AC(e,n.filter.updateChild(f.getNode(),S,G,N,D,u),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function B5(n,e){return n.eventCache.isCompleteForChild(e)}function j5(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dF(n,e,t,r,i,l,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,y=e;E=Xt(t)?r:new jn(null).setTree(t,r);const D=e.serverCache.getNode();return E.children.inorderTraversal((S,N)=>{if(D.hasChild(S)){const G=j5(0,e.serverCache.getNode().getImmediateChild(S),N);y=ix(n,y,new Cn(S),G,i,l,u,f)}}),E.children.inorderTraversal((S,N)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!D.hasChild(S)&&!B){const de=j5(0,e.serverCache.getNode().getImmediateChild(S),N);y=ix(n,y,new Cn(S),de,i,l,u,f)}}),y}class YW{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ZP(r.getIndex()),l=function(n){return n.loadsAllData()?new ZP(n.getIndex()):n.hasLimit()?new cW(n):new TC(n)}(r);this.processor_=function(n){return{filter:n}}(l);const u=t.serverCache,f=t.eventCache,y=i.updateFullNode(zt.EMPTY_NODE,u.getNode(),null),E=l.updateFullNode(zt.EMPTY_NODE,f.getNode(),null),D=new Bf(y,u.isFullyInitialized(),i.filtersNodes()),S=new Bf(E,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=XA(S,D),this.eventGenerator_=new EW(this.query_)}get query(){return this.query_}}function XW(n,e){const t=Eg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(Jt(e)).isEmpty())?t.getChild(e):null}function H5(n){return 0===n.eventRegistrations_.length}function $5(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function G5(n,e,t,r){e.type===Dl.MERGE&&null!==e.source.queryId&&((0,U.hu)(Eg(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(ex(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function(n,e,t,r,i){const l=new BW;let u,f;if(t.type===Dl.OVERWRITE){const E=t;E.source.fromUser?u=uF(n,e,E.path,E.snap,r,i,l):((0,U.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered()&&!Xt(E.path),u=ix(n,e,E.path,E.snap,r,i,f,l))}else if(t.type===Dl.MERGE){const E=t;E.source.fromUser?u=function(n,e,t,r,i,l,u){let f=e;return r.foreach((y,E)=>{const D=gr(t,y);B5(e,Jt(D))&&(f=uF(n,f,D,E,i,l,u))}),r.foreach((y,E)=>{const D=gr(t,y);B5(e,Jt(D))||(f=uF(n,f,D,E,i,l,u))}),f}(n,e,E.path,E.children,r,i,l):((0,U.hu)(E.source.fromServer,"Unknown source."),f=E.source.tagged||e.serverCache.isFiltered(),u=dF(n,e,E.path,E.children,r,i,f,l))}else if(t.type===Dl.ACK_USER_WRITE){const E=t;u=E.revert?function(n,e,t,r,i,l){let u;if(null!=rx(r,t))return e;{const f=new cF(r,e,i),y=e.eventCache.getNode();let E;if(Xt(t)||".priority"===Jt(t)){let D;if(e.serverCache.isFullyInitialized())D=nx(r,Eg(e));else{const S=e.serverCache.getNode();(0,U.hu)(S instanceof zt,"serverChildren would be complete if leaf node"),D=aF(r,S)}D=D,E=n.filter.updateFullNode(y,D,l)}else{const D=Jt(t);let S=lF(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=y.getImmediateChild(D)),E=null!=S?n.filter.updateChild(y,D,S,Rn(t),f,l):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,zt.EMPTY_NODE,Rn(t),f,l):y,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=nx(r,Eg(e)),u.isLeafNode()&&(E=n.filter.updateFullNode(E,u,l)))}return u=e.serverCache.isFullyInitialized()||null!=rx(r,gn()),AC(e,E,u,n.filter.filtersNodes())}}(n,e,E.path,r,i,l):function(n,e,t,r,i,l,u){if(null!=rx(i,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Xt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return ix(n,e,t,y.getNode().getChild(t),i,l,f,u);if(Xt(t)){let E=new jn(null);return y.getNode().forEachChild(Tu,(D,S)=>{E=E.set(new Cn(D),S)}),dF(n,e,t,E,i,l,f,u)}return e}{let E=new jn(null);return r.foreach((D,S)=>{const N=gr(t,D);y.isCompleteForPath(N)&&(E=E.set(D,y.getNode().getChild(N)))}),dF(n,e,t,E,i,l,f,u)}}(n,e,E.path,E.affectedTree,r,i,l)}else{if(t.type!==Dl.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);u=function(n,e,t,r,i){const l=e.serverCache;return U5(n,x5(e,l.getNode(),l.isFullyInitialized()||Xt(t),l.isFiltered()),t,r,V5,i)}(n,e,t.path,r,l)}const y=l.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=ex(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(T5(ex(e)))}}(e,u,y),{viewCache:u,changes:y}}(n.processor_,i,e,t,r);return function(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,U.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,z5(n,l.changes,l.viewCache.eventCache.getNode(),null)}function z5(n,e,t,r){return function(n,e,t,r){const i=[],l=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),SC(n,i,"child_removed",e,r,t),SC(n,i,"child_added",e,r,t),SC(n,i,"child_moved",l,r,t),SC(n,i,"child_changed",e,r,t),SC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let sx,ax;class W5{constructor(){this.views=new Map}}function hF(n,e,t,r){const i=e.source.queryId;if(null!==i){const l=n.views.get(i);return(0,U.hu)(null!=l,"SyncTree gave us an op for an invalid query."),G5(l,e,t,r)}{let l=[];for(const u of n.views.values())l=l.concat(G5(u,e,t,r));return l}}function q5(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let f=nx(t,i?r:null),y=!1;f?y=!0:r instanceof zt?(f=aF(t,r),y=!1):(f=zt.EMPTY_NODE,y=!1);const E=XA(new Bf(f,y,!1),new Bf(r,i,!1));return new YW(e,E)}return u}function K5(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Hf(n,e){let t=null;for(const r of n.views.values())t=t||XW(r,e);return t}function Z5(n,e){return e._queryParams.loadsAllData()?ox(n):n.views.get(e._queryIdentifier)}function Y5(n,e){return null!=Z5(n,e)}function $f(n){return null!=ox(n)}function ox(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let cq=1;class Q5{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jn(null),this.pendingWriteTree_={visibleWrites:Dc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fF(n,e,t,r,i){return function(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=xC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?iv(n,new vg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Gf(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,l=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&kW(f,r.path)?i=!1:Tl(r.path,f.path)&&(l=!0)),u--}return!!i&&(l?(function(n){n.visibleWrites=N5(n.allWrites,RW,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=k5(n.visibleWrites,r.path):Zi(r.children,y=>{n.visibleWrites=k5(n.visibleWrites,gr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let l=new jn(null);return null!=r.snap?l=l.set(gn(),!0):Zi(r.children,u=>{l=l.set(new Cn(u),!0)}),iv(n,new JA(r.path,l,t))}return[]}function kC(n,e,t){return iv(n,new vg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function pF(n,e,t,r){const i=e._path,l=n.syncPointTree_.get(i);let u=[];if(l&&("default"===e._queryIdentifier||Y5(l,e))){const f=function(n,e,t,r){const i=e._queryIdentifier,l=[];let u=[];const f=$f(n);if("default"===i)for(const[y,E]of n.views.entries())u=u.concat($5(E,t,r)),H5(E)&&(n.views.delete(y),E.query._queryParams.loadsAllData()||l.push(E.query));else{const y=n.views.get(i);y&&(u=u.concat($5(y,t,r)),H5(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||l.push(y.query)))}return f&&!$f(n)&&l.push(new((0,U.hu)(sx,"Reference.ts has not been loaded"),sx)(e._repo,e._path)),{removed:l,events:u}}(l,e,t,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const y=f.removed;u=f.events;const E=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,N)=>$f(N));if(E&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const N=function(n){return n.fold((e,t,r)=>{if(t&&$f(t))return[ox(t)];{let i=[];return t&&(i=K5(t)),Zi(r,(l,u)=>{i=i.concat(u)}),i}})}(S);for(let B=0;B<N.length;++B){const G=N[B],de=G.query,Ae=t3(n,G);n.listenProvider_.startListening(MC(de),cx(n,de),Ae.hashFn,Ae.onComplete)}}}if(!D&&y.length>0&&!r)if(E){const S=null;n.listenProvider_.stopListening(MC(e),S)}else y.forEach(S=>{const N=n.queryToTagMap.get(ux(S));n.listenProvider_.stopListening(MC(S),N)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ux(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,y)}return u}function J5(n,e,t){const r=e._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(S,N)=>{const B=po(S,r);i=i||Hf(N,B),l=l||$f(N)});let f,u=n.syncPointTree_.get(r);u?(l=l||$f(u),i=i||Hf(u,gn())):(u=new W5,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?f=!0:(f=!1,i=zt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((N,B)=>{const G=Hf(B,gn());G&&(i=i.updateImmediateChild(N,G))}));const y=Y5(u,e);if(!y&&!e._queryParams.loadsAllData()){const S=ux(e);(0,U.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=cq++;n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let D=function(n,e,t,r,i,l){const u=q5(n,e,r,i,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Bn,(l,u)=>{r.push(ev(l,u))}),t.isFullyInitialized()&&r.push(T5(t.getNode())),z5(n,r,t.getNode(),e)}(u,t)}(u,e,t,tx(n.pendingWriteTree_,r),i,f);if(!y&&!l){const S=Z5(u,e);D=D.concat(function(n,e,t){const r=e._path,i=cx(n,e),l=t3(n,t),u=n.listenProvider_.startListening(MC(e),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!$f(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((E,D,S)=>{if(!Xt(E)&&D&&$f(D))return[ox(D).query];{let N=[];return D&&(N=N.concat(K5(D).map(B=>B.query))),Zi(S,(B,G)=>{N=N.concat(G)}),N}});for(let E=0;E<y.length;++E){const D=y[E];n.listenProvider_.stopListening(MC(D),cx(n,D))}}return u}(n,e,S))}return D}function lx(n,e,t){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,f)=>{const E=Hf(f,po(u,e));if(E)return E});return O5(i,e,l,t,!0)}function iv(n,e){return X5(e,n.syncPointTree_,null,tx(n.pendingWriteTree_,gn()))}function X5(n,e,t,r){if(Xt(n.path))return e3(n,e,t,r);{const i=e.get(gn());null==t&&null!=i&&(t=Hf(i,gn()));let l=[];const u=Jt(n.path),f=n.operationForChild(u),y=e.children.get(u);if(y&&f){const E=t?t.getImmediateChild(u):null,D=F5(r,u);l=l.concat(X5(f,y,E,D))}return i&&(l=l.concat(hF(i,n,r,t))),l}}function e3(n,e,t,r){const i=e.get(gn());null==t&&null!=i&&(t=Hf(i,gn()));let l=[];return e.children.inorderTraversal((u,f)=>{const y=t?t.getImmediateChild(u):null,E=F5(r,u),D=n.operationForChild(u);D&&(l=l.concat(e3(D,f,y,E)))}),i&&(l=l.concat(hF(i,n,r,t))),l}function t3(n,e){const t=e.query,r=cx(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=mF(n,t);if(r){const i=gF(r),l=i.path,u=i.queryId,f=po(l,e);return _F(n,l,new DC(nF(u),f))}return[]}(n,t._path,r):function(n,e){return iv(n,new DC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return pF(n,t,null,l)}}}}function cx(n,e){const t=ux(e);return n.queryToTagMap.get(t)}function ux(n){return n._path.toString()+"$"+n._queryIdentifier}function mF(n,e){return n.tagToQueryMap.get(e)}function gF(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function _F(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),hF(r,t,tx(n.pendingWriteTree_,e),null)}function MC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,U.hu)(ax,"Reference.ts has not been loaded"),ax)(n._repo,n._path):n}class yF{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yF(t)}node(){return this.node_}}class bF{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gr(this.path_,e);return new bF(this.syncTree_,t)}node(){return lx(this.syncTree_,this.path_)}}const n3=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?wq(n[".sv"],e,t):"object"==typeof n[".sv"]?Cq(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},wq=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,U.hu)(!1,"Unexpected server value: "+n)}},Cq=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},r3=function(n,e,t,r){return EF(e,new bF(t,n),r)},vF=function(n,e,t){return EF(n,new yF(e),t)};function EF(n,e,t){const r=n.getPriority().val(),i=n3(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,f=n3(u.getValue(),e,t);return f!==u.getValue()||i!==u.getPriority().val()?new Qb(f,Sr(i)):n}{const u=n;return l=u,i!==u.getPriority().val()&&(l=l.updatePriority(new Qb(i))),u.forEachChild(Bn,(f,y)=>{const E=EF(y,e.getImmediateChild(f),t);E!==y&&(l=l.updateImmediateChild(f,E))}),l}}class wF{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function dx(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=Jt(t);for(;null!==i;){const l=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new wF(i,r,l),t=Rn(t),i=Jt(t)}return r}function Cg(n){return n.node.value}function CF(n,e){n.node.value=e,IF(n)}function i3(n){return n.node.childCount>0}function hx(n,e){Zi(n.node.children,(t,r)=>{e(new wF(t,n,r))})}function s3(n,e,t,r){t&&!r&&e(n),hx(n,i=>{s3(i,e,!0,r)}),t&&r&&e(n)}function RC(n){return new Cn(null===n.parent?n.name:RC(n.parent)+"/"+n.name)}function IF(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Cg(n)&&!i3(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,IF(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,IF(n))}(n.parent,n.name,n)}const Sq=/[\[\].#$\/\u0000-\u001F\u007F]/,Aq=/[\[\].#$\u0000-\u001F\u007F]/,TF=10485760,fx=function(n){return"string"==typeof n&&0!==n.length&&!Sq.test(n)},o3=function(n){return"string"==typeof n&&0!==n.length&&!Aq.test(n)},NC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!BA(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},Du=function(n,e,t,r){r&&void 0===e||OC((0,U.gK)(n,"value"),e,t)},OC=function(n,e,t){const r=t instanceof Cn?new Hz(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yg(r));if("function"==typeof e)throw new Error(n+"contains a function "+yg(r)+" with contents = "+e.toString());if(BA(e))throw new Error(n+"contains "+e.toString()+" "+yg(r));if("string"==typeof e&&e.length>TF/3&&(0,U.ug)(e)>TF)throw new Error(n+"contains a string greater than "+TF+" utf8 bytes "+yg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,l=!1;if(Zi(e,(u,f)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!fx(u)))throw new Error(n+" contains an invalid key ("+u+") "+yg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),h5(n)})(r,u),OC(n,f,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+yg(r)+" in addition to actual children.")}},a3=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const l=[];Zi(e,(u,f)=>{const y=new Cn(u);if(OC(i,f,gr(t,y)),".priority"===BP(y)&&!NC(f))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=bC(r);for(let u=0;u<l.length;u++)if((".priority"!==l[u]||u!==l.length-1)&&!fx(l[u]))throw new Error(n+"contains an invalid key ("+l[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(jz);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Tl(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},DF=function(n,e,t){if(!t||void 0!==e){if(BA(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!NC(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},PC=function(n,e,t,r){if(!(r&&void 0===t||fx(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},FC=function(n,e,t,r){if(!(r&&void 0===t||o3(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Sl=function(n,e){if(".info"===Jt(e))throw new Error(n+" failed = Can't modify data under /.info/")},l3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!fx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),o3(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Rq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function px(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],l=i.getPath();null!==t&&!jP(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(i)}t&&n.eventLists_.push(t)}function SF(n,e,t){px(n,t),c3(n,r=>jP(r,e))}function Al(n,e,t){px(n,t),c3(n,r=>Tl(r,e)||Tl(e,r))}function c3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Nq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Nq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();gg&&Ki("event: "+t.toString()),Zb(r)}}}const u3="repo_interrupt";class Pq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=QA(),this.transactionQueueTree_=new wF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function d3(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function LC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:d3(n)})}function h3(n,e,t,r,i){n.dataUpdateCount++;const l=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const y=(0,U.UI)(t,E=>Sr(E));u=function(n,e,t,r){const i=mF(n,r);if(i){const l=gF(i),u=l.path,f=l.queryId,y=po(u,e),E=jn.fromObject(t);return _F(n,u,new nv(nF(f),y,E))}return[]}(n.serverSyncTree_,l,y,i)}else{const y=Sr(t);u=function(n,e,t,r){const i=mF(n,r);if(null!=i){const l=gF(i),u=l.path,f=l.queryId,y=po(u,e);return _F(n,u,new vg(nF(f),y,t))}return[]}(n.serverSyncTree_,l,y,i)}else if(r){const y=(0,U.UI)(t,E=>Sr(E));u=function(n,e,t){const r=jn.fromObject(t);return iv(n,new nv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,y)}else{const y=Sr(t);u=kC(n.serverSyncTree_,l,y)}let f=l;u.length>0&&(f=ov(n,l)),Al(n.eventQueue_,f,u)}function f3(n,e){AF(n,"connected",e),!1===e&&function(n){sv(n,"onDisconnectEvents");const e=LC(n),t=QA();XP(n.onDisconnect_,gn(),(i,l)=>{const u=r3(i,l,n.serverSyncTree_,e);tv(t,i,u)});let r=[];XP(t,gn(),(i,l)=>{r=r.concat(kC(n.serverSyncTree_,i,l));const u=RF(n,i);ov(n,u)}),n.onDisconnect_=QA(),Al(n.eventQueue_,gn(),r)}(n)}function AF(n,e,t){const r=new Cn("/.info/"+e),i=Sr(t);n.infoData_.updateSnapshot(r,i);const l=kC(n.infoSyncTree_,r,i);Al(n.eventQueue_,r,l)}function mx(n){return n.nextWriteId_++}function xF(n,e,t,r,i){sv(n,"set",{path:e.toString(),value:t,priority:r});const l=LC(n),u=Sr(t,r),f=lx(n.serverSyncTree_,e),y=vF(u,f,l),E=mx(n),D=fF(n.serverSyncTree_,e,y,E,!0);px(n.eventQueue_,D),n.server_.put(e.toString(),u.val(!0),(N,B)=>{const G="ok"===N;G||fo("set at "+e+" failed: "+N);const de=Gf(n.serverSyncTree_,E,!G);Al(n.eventQueue_,e,de),zf(0,i,N,B)});const S=RF(n,e);ov(n,S),Al(n.eventQueue_,S,[])}function jq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&JP(n.onDisconnect_,e),zf(0,t,r,i)})}function p3(n,e,t,r){const i=Sr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(l,u)=>{"ok"===l&&tv(n.onDisconnect_,e,i),zf(0,r,l,u)})}function kF(n,e,t){let r;r=".info"===Jt(e._path)?pF(n.infoSyncTree_,e,t):pF(n.serverSyncTree_,e,t),SF(n.eventQueue_,e._path,r)}function m3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(u3)}function sv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ki(t,...e)}function zf(n,e,t,r){e&&Zb(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let l=i;r&&(l+=": "+r);const u=new Error(l);u.code=i,e(u)}})}function MF(n,e,t){return lx(n.serverSyncTree_,e,t)||zt.EMPTY_NODE}function gx(n,e=n.transactionQueueTree_){if(e||_x(n,e),Cg(e)){const t=_3(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(E=>E.currentWriteId),i=MF(n,e,r);let l=i;const u=i.hash();for(let E=0;E<t.length;E++){const D=t[E];(0,U.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=po(e,D.path);l=l.updateChild(S,D.currentOutputSnapshotRaw)}const f=l.val(!0),y=e;n.server_.put(y.toString(),f,E=>{sv(n,"transaction put response",{path:y.toString(),status:E});let D=[];if("ok"===E){const S=[];for(let N=0;N<t.length;N++)t[N].status=2,D=D.concat(Gf(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&S.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();_x(n,dx(n.transactionQueueTree_,e)),gx(n,n.transactionQueueTree_),Al(n.eventQueue_,e,D);for(let N=0;N<S.length;N++)Zb(S[N])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{fo("transaction at "+y.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}ov(n,e)}},u)}(n,RC(e),t)}else i3(e)&&hx(e,t=>{gx(n,t)})}function ov(n,e){const t=g3(n,e),r=RC(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],E=po(t,y.path);let S,D=!1;if((0,U.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,S=y.abortReason,i=i.concat(Gf(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,S="maxretry",i=i.concat(Gf(n.serverSyncTree_,y.currentWriteId,!0));else{const N=MF(n,y.path,u);y.currentInputSnapshot=N;const B=e[f].update(N.val());if(void 0!==B){OC("transaction failed: Data returned ",B,y.path);let G=Sr(B);"object"==typeof B&&null!=B&&(0,U.r3)(B,".priority")||(G=G.updatePriority(N.getPriority()));const Ae=y.currentWriteId,We=LC(n),nt=vF(G,N,We);y.currentOutputSnapshotRaw=G,y.currentOutputSnapshotResolved=nt,y.currentWriteId=mx(n),u.splice(u.indexOf(Ae),1),i=i.concat(fF(n.serverSyncTree_,y.path,nt,y.currentWriteId,y.applyLocally)),i=i.concat(Gf(n.serverSyncTree_,Ae,!0))}else D=!0,S="nodata",i=i.concat(Gf(n.serverSyncTree_,y.currentWriteId,!0))}Al(n.eventQueue_,t,i),i=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}_x(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Zb(r[f]);gx(n,n.transactionQueueTree_)}(n,_3(n,t),r),r}function g3(n,e){let t,r=n.transactionQueueTree_;for(t=Jt(e);null!==t&&void 0===Cg(r);)r=dx(r,t),t=Jt(e=Rn(e));return r}function _3(n,e){const t=[];return y3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function y3(n,e,t){const r=Cg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);hx(e,i=>{y3(n,i,t)})}function _x(n,e){const t=Cg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,CF(e,t.length>0?t:void 0)}hx(e,r=>{_x(n,r)})}function RF(n,e){const t=RC(g3(n,e)),r=dx(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{NF(n,i)}),NF(n,r),s3(r,i=>{NF(n,i)}),t}function NF(n,e){const t=Cg(e);if(t){const r=[];let i=[],l=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,U.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):((0,U.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Gf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?CF(e,void 0):t.length=l+1,Al(n.eventQueue_,RC(e),i);for(let u=0;u<r.length;u++)Zb(r[u])}}const OF=function(n,e){const t=Qq(n),r=t.namespace;return"firebase.com"===t.domain&&Cu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Cu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new NP(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Cn(t.pathString)}},Qq=function(n){let e="",t="",r="",i="",l="",u=!0,f="https",y=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(f=n.substring(0,E-1),n=n.substring(E+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}e+="/"+i}return e}(n.substring(D,S)));const N=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(u="https"===f||"wss"===f,y=parseInt(e.substring(E+1),10)):E=e.length;const B=e.slice(0,E);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),l=r}"ns"in N&&(l=N.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:u,scheme:f,pathString:i,namespace:l}};class b3{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Pz)(this.snapshot.exportVal())}}class v3{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class E3{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class w3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return jq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Sl("OnDisconnect.remove",this._path);const e=new U.BH;return p3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Sl("OnDisconnect.set",this._path),Du("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return p3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Sl("OnDisconnect.setWithPriority",this._path),Du("OnDisconnect.setWithPriority",e,this._path,!1),DF("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function(n,e,t,r,i){const l=Sr(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(u,f)=>{"ok"===u&&tv(n.onDisconnect_,e,l),zf(0,i,u,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Sl("OnDisconnect.update",this._path),a3("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function(n,e,t,r){if((0,U.xb)(t))return Ki("onDisconnect().update() called with empty data.  Don't do anything."),void zf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,l)=>{"ok"===i&&Zi(t,(u,f)=>{const y=Sr(f);tv(n.onDisconnect_,gr(e,u),y)}),zf(0,r,i,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class zo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:BP(this._path)}get ref(){return new xl(this._repo,this._path)}get _queryIdentifier(){const e=S5(this._queryParams),t=kP(e);return"{}"===t?"default":t}get _queryObject(){return S5(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof zo))return!1;const t=this._repo===e._repo,r=jP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function yx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Wf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Tu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Zd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Iu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Bn){if(null!=e&&!NC(e)||null!=t&&!NC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof WP||n.getIndex()===qP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xl extends zo{constructor(e,t){super(e,t,new KA,!1)}get parent(){const e=d5(this._path);return null===e?null:new xl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ig{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=Tg(this.ref,e);return new Ig(this._node.getChild(t),r,Bn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ig(i,Tg(this.ref,r),Bn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function C3(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?Tg(n._root,e):n._root}function I3(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=OF(e,n._repo.repoInfo_.nodeAdmin);l3("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Cu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),C3(n,t.path.toString())}function Tg(n,e){return null===Jt((n=(0,U.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),FC("child","path",t,!1)):FC("child","path",e,!1),new xl(n._repo,gr(n._path,e));var t}function PF(n,e){n=(0,U.m9)(n),Sl("set",n._path),Du("set",e,n._path,!1);const t=new U.BH;return xF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function n8(n,e){a3("update",e,n._path,!1);const t=new U.BH;return function(n,e,t,r){sv(n,"update",{path:e.toString(),value:t});let i=!0;const l=LC(n),u={};if(Zi(t,(f,y)=>{i=!1,u[f]=r3(gr(e,f),Sr(y),n.serverSyncTree_,l)}),i)Ki("update() called with empty data.  Don't do anything."),zf(0,r,"ok",void 0);else{const f=mx(n),y=function(n,e,t,r){!function(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=iF(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=jn.fromObject(t);return iv(n,new nv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,f);px(n.eventQueue_,y),n.server_.merge(e.toString(),t,(E,D)=>{const S="ok"===E;S||fo("update at "+e+" failed: "+E);const N=Gf(n.serverSyncTree_,f,!S),B=N.length>0?ov(n,e):e;Al(n.eventQueue_,B,N),zf(0,r,E,D)}),Zi(t,E=>{const D=RF(n,gr(e,E));ov(n,D)}),Al(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function r8(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,D)=>{const S=po(E,t);r=r||Hf(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Hf(i,gn()):(i=new W5,n.syncPointTree_=n.syncPointTree_.set(t,i));const l=null!=r,u=l?new Bf(r,!0,!1):null;return function(n){return ex(n.viewCache_)}(q5(i,e,tx(n.pendingWriteTree_,e._path),l?u.getNode():zt.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Sr(r).withIndex(e._queryParams.getIndex()),l=kC(n.serverSyncTree_,e._path,i);return SF(n.eventQueue_,e._path,l),Promise.resolve(i)},r=>(sv(n,"get for query "+(0,U.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,U.m9)(n))._repo,n).then(e=>new Ig(e,new xl(n._repo,n._path),n._queryParams.getIndex()))}class vx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new b3("value",this,new Ig(e.snapshotNode,new xl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new v3(this,e,t):null}matches(e){return e instanceof vx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ex{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new v3(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=Tg(new xl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new b3(e.type,this,new Ig(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ex&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function VC(n,e,t,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const y=t,E=(D,S)=>{kF(n._repo,n,f),y(D,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const u=new E3(t,l||void 0),f="value"===e?new vx(u):new Ex(e,u);return function(n,e,t){let r;r=".info"===Jt(e._path)?J5(n.infoSyncTree_,e,t):J5(n.serverSyncTree_,e,t),SF(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>kF(n._repo,n,f)}function FF(n,e,t,r){return VC(n,"value",e,t,r)}function T3(n,e,t,r){return VC(n,"child_added",e,t,r)}function D3(n,e,t,r){return VC(n,"child_changed",e,t,r)}function S3(n,e,t,r){return VC(n,"child_moved",e,t,r)}function A3(n,e,t,r){return VC(n,"child_removed",e,t,r)}function x3(n,e,t){let r=null;const i=t?new E3(t):null;"value"===e?r=new vx(i):e&&(r=new Ex(e,i)),kF(n._repo,n,r)}class Sc{}class k3 extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Du("endAt",this._value,e._path,!0);const t=QP(e._queryParams,this._value,this._key);if(bx(t),Wf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class s8 extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Du("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===Tu?("string"==typeof e&&(e=I5(e)),i=QP(n,e,t)):(r=null==t?Zd:I5(t),i=QP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(bx(t),Wf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class M3 extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Du("startAt",this._value,e._path,!0);const t=YP(e._queryParams,this._value,this._key);if(bx(t),Wf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class l8 extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Du("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Tu)"string"==typeof e&&(e=C5(e)),r=YP(n,e,t);else{let i;i=null==t?Iu:C5(t),r=YP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bx(t),Wf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class u8 extends Sc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class h8 extends Sc{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class p8 extends Sc{constructor(e){super(),this._path=e}_apply(e){yx(e,"orderByChild");const t=new Cn(this._path);if(Xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new WP(t),i=ZA(e._queryParams,r);return Wf(i),new zo(e._repo,e._path,i,!0)}}class g8 extends Sc{_apply(e){yx(e,"orderByKey");const t=ZA(e._queryParams,Tu);return Wf(t),new zo(e._repo,e._path,t,!0)}}class y8 extends Sc{_apply(e){yx(e,"orderByPriority");const t=ZA(e._queryParams,Bn);return Wf(t),new zo(e._repo,e._path,t,!0)}}class v8 extends Sc{_apply(e){yx(e,"orderByValue");const t=ZA(e._queryParams,qP);return Wf(t),new zo(e._repo,e._path,t,!0)}}class w8 extends Sc{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Du("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new k3(this._value,this._key)._apply(new M3(this._value,this._key)._apply(e))}}function Ac(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,U.hu)(!sx,"__referenceConstructor has already been defined"),sx=n})(xl),function(n){(0,U.hu)(!ax,"__referenceConstructor has already been defined"),ax=n}(xl);const LF={};function N3(n,e,t,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Cu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ki("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,E,u=OF(l,i),f=u.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(y=!0,l=`http://${E}?ns=${f.namespace}`,u=OF(l,i),f=u.repoInfo):y=!u.repoInfo.secure;const D=i&&y?new gC(gC.OWNER):new pz(n.name,n.options,e);l3("Invalid Firebase Database URL",u),Xt(u.path)||Cu("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let i=LF[e.name];i||(i={},LF[e.name]=i);let l=i[n.toURLString()];return l&&Cu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new Pq(n,false,t,r),i[n.toURLString()]=l,l}(f,n,D,new fz(n.name,t));return new x8(S,n)}class x8{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=FP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new YA(n.repoInfo_,(r,i,l,u)=>{h3(n,r,i,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>f3(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new bg(n.repoInfo_,e,(r,i,l,u)=>{h3(n,r,i,l,u)},r=>{f3(n,r)},r=>{!function(n,e){Zi(e,(t,r)=>{AF(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return PP[t]||(PP[t]=e()),PP[t]}(n.repoInfo_,()=>new vW(n.stats_,n.server_)),n.infoData_=new mW,n.infoSyncTree_=new Q5({startListening:(r,i,l,u)=>{let f=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(f=kC(n.infoSyncTree_,r._path,y),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),AF(n,"connected",!1),n.serverSyncTree_=new Q5({startListening:(r,i,l,u)=>(n.server_.listen(r,l,i,(f,y)=>{const E=u(f,y);Al(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xl(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=LF[e];(!t||t[n.key]!==n)&&Cu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),m3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Cu("Cannot call "+e+" on a deleted database.")}}function N8(n,e){Pj(n,e)}class V8{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},bg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},kj(Uo.SDK_VERSION),(0,Uo._registerComponent)(new bc.wA("database",(e,{instanceIdentifier:t})=>N3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Uo.registerVersion)(Aj,"0.12.5",void 0),(0,Uo.registerVersion)(Aj,"0.12.5","esm2017");const H8=new Bo.Yd("@firebase/database-compat"),O3=function(n){H8.warn("FIREBASE WARNING: "+n)};class z8{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),l=>r(l)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let l=0;l<e.length;++l)i[""+l]=e[l];e=i,O3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class W8{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),FC("DataSnapshot.child","path",e,!1),new qf(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),FC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new qf(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Sa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class hs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var l;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const u=hs.getCancelAndContextArgs_("Query.on",r,i),f=(E,D)=>{t.call(u.context,new qf(this.database,E),D)};f.userCallback=t,f.context=u.context;const y=null===(l=u.cancel)||void 0===l?void 0:l.bind(u.context);switch(e){case"value":return FF(this._delegate,f,y),t;case"child_added":return T3(this._delegate,f,y),t;case"child_removed":return A3(this._delegate,f,y),t;case"child_changed":return D3(this._delegate,f,y),t;case"child_moved":return S3(this._delegate,f,y),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,x3(this._delegate,e,i)}else x3(this._delegate,e)}get(){return r8(this._delegate).then(e=>new qf(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const l=hs.getCancelAndContextArgs_("Query.once",r,i),u=new U.BH,f=(E,D)=>{const S=new qf(this.database,E);t&&t.call(l.context,S,D),u.resolve(S)};f.userCallback=t,f.context=l.context;const y=E=>{l.cancel&&l.cancel.call(l.context,E),u.reject(E)};switch(e){case"value":FF(this._delegate,f,y,{onlyOnce:!0});break;case"child_added":T3(this._delegate,f,y,{onlyOnce:!0});break;case"child_removed":A3(this._delegate,f,y,{onlyOnce:!0});break;case"child_changed":D3(this._delegate,f,y,{onlyOnce:!0});break;case"child_moved":S3(this._delegate,f,y,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new hs(this.database,Ac(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new u8(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new hs(this.database,Ac(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new h8(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new hs(this.database,Ac(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return FC("orderByChild","path",n,!1),new p8(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new hs(this.database,Ac(this._delegate,new g8))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new hs(this.database,Ac(this._delegate,new y8))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new hs(this.database,Ac(this._delegate,new v8))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new hs(this.database,Ac(this._delegate,function(n=null,e){return PC("startAt","key",e,!0),new M3(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new hs(this.database,Ac(this._delegate,function(n,e){return PC("startAfter","key",e,!0),new l8(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new hs(this.database,Ac(this._delegate,function(n,e){return PC("endAt","key",e,!0),new k3(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new hs(this.database,Ac(this._delegate,function(n,e){return PC("endBefore","key",e,!0),new s8(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new hs(this.database,Ac(this._delegate,function(n,e){return PC("equalTo","key",e,!0),new w8(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof hs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Sa(this.database,new xl(this._delegate._repo,this._delegate._path))}}class Sa extends hs{constructor(e,t){super(e,new zo(t._repo,t._path,new KA,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Sa(this.database,Tg(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Sa(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Sa(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=PF(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let l=0;l<e.length;++l)i[""+l]=e[l];e=i,O3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sl("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=n8(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Sl("setWithPriority",n._path),Du("setWithPriority",e,n._path,!1),DF("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return xF(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),l=>r(l)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Sl("remove",n._path),PF(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,U.m9)(n),Sl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new U.BH,f=FF(n,()=>{});return function(n,e,t,r,i,l){sv(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:Rj(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=MF(n,e,void 0);u.currentInputSnapshot=f;const y=u.update(f.val());if(void 0===y)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{OC("transaction failed: Data returned ",y,u.path),u.status=0;const E=dx(n.transactionQueueTree_,e),D=Cg(E)||[];let S;D.push(u),CF(E,D),"object"==typeof y&&null!==y&&(0,U.r3)(y,".priority")?(S=(0,U.DV)(y,".priority"),(0,U.hu)(NC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(lx(n.serverSyncTree_,e)||zt.EMPTY_NODE).getPriority().val();const N=LC(n),B=Sr(y,S),G=vF(B,f,N);u.currentOutputSnapshotRaw=B,u.currentOutputSnapshotResolved=G,u.currentWriteId=mx(n);const de=fF(n.serverSyncTree_,e,G,u.currentWriteId,u.applyLocally);Al(n.eventQueue_,e,de),gx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,E,D)=>{let S=null;y?l.reject(y):(S=new Ig(D,new xl(n._repo,n._path),Bn),l.resolve(new V8(E,S)))},f,i),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new W8(l.committed,new qf(this.database,l.snapshot)));return t&&i.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,U.m9)(n),Sl("setPriority",n._path),DF("setPriority",e,!1);const t=new U.BH;return xF(n._repo,gr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,U.m9)(n),Sl("push",n._path),Du("push",e,n._path,!0);const t=d3(n._repo),r=aW(t),i=Tg(n,r),l=Tg(n,r);let u;return u=null!=e?PF(l,e).then(()=>l):Promise.resolve(l),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Sa(this.database,u));t&&i.then(()=>t(null),u=>t(u));const l=new Sa(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return Sl("Reference.onDisconnect",this._delegate._path),new z8(new w3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class UC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Cu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new gC(gC.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);l=new gC(u)}!function(n,e,t,r){n.repoInfo_=new NP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Sa){const t=I3(this._delegate,e.toString());return new Sa(this,t)}{const t=C3(this._delegate,e);return new Sa(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=I3(this._delegate,e);return new Sa(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),m3(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(u3)}(n._repo)}(this._delegate)}}UC.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var K8=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){kj(t);const u=new bc.zt("auth-internal",new bc.H0("database-standalone"));return u.setComponent(new bc.wA("auth-internal",()=>r,"PRIVATE")),{instance:new UC(N3(n,u,void 0,e,l),n),namespace:i}}});const Z8=UC.ServerValue;function P3(n){return null==n}function F3(n){return"function"==typeof n.set}function L3(n,e){return F3(e)?e:n.ref(e)}function V3(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(F3(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function BC(n,e,t="on",r=si.z){return new Mr.y(i=>{let l=null;return l=n[t](e,(u,f)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,_t.U)(i=>{const{snapshot:l,prevKey:u}=i;let f=null;return l.exists()&&(f=l.key),{type:e,payload:l,prevKey:u,key:f}}),(0,Y6.B)())}function U3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function tK(n,e){const{payload:t,prevKey:r,key:i}=e,l=U3(n,i),u=function(n,e){if(P3(e))return 0;{const t=U3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(y=>{const E={payload:y,type:"value",prevKey:f,key:y.key};return f=y.key,n=[...n,E],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(u,0,f),n}return n;default:return n}}function B3(n){return(P3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function j3(n,e,t){return function(n,e,t){return BC(n,"value","once",t).pipe(lr(r=>{const i=[(0,lt.of)(r)];return e.forEach(l=>i.push(BC(n,l,"on",t))),(0,J1.T)(...i).pipe(Io(tK,[]))}),A_())}(n,e=B3(e),t)}function H3(n,e,t){const r=(e=B3(e)).map(i=>BC(n,i,"on",t));return(0,J1.T)(...r)}function $3(n,e){return function(r,i){return V3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function sK(n){return function(t){return t?V3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function G3(n,e){return function(){return BC(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new bc.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new UC(i,r)},"PUBLIC").setServiceProps({Reference:Sa,Query:hs,Database:UC,DataSnapshot:qf,enableLogging:N8,INTERNAL:K8,ServerValue:Z8}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(LE.Z);const lK=new p.OlP("angularfire2.realtimeDatabaseURL"),cK=new p.OlP("angularfire2.database.use-emulator");let uK=(()=>{class n{constructor(t,r,i,l,u,f,y,E,D,S,N,B,G,de,Ae){this.schedulers=f;const We=y,nt=(0,ss.on)(t,u,r);E&&IP(nt,u,D,N,B,G,S,de),this.database=(0,ss.cc)(`${nt.name}.database.${i}`,"AngularFireDatabase",nt.name,()=>{const Mt=u.runOutsideAngular(()=>nt.database(i||void 0));return We&&Mt.useEmulator(...We),Mt},[We])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>L3(this.database,t));let l=i;return r&&(l=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:$3(r,"update"),set:$3(r,"set"),push:i=>r.push(i),remove:sK(r),snapshotChanges:i=>j3(n,i,t).pipe(xn.iC),stateChanges:i=>H3(n,i,t).pipe(xn.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return BC(n,"value","on",e).pipe((0,_t.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new J6(n,t))}}(e),(0,_t.U)(([i,l])=>{const u=i.lastKeyToLoad,f=l.map(y=>y.key);return{actions:l,lastKeyToLoad:u,loadedKeys:f}}),function(n){return e=>e.lift(new tz(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,_t.U)(i=>i.actions))}(n,H3(n,e).pipe(Io((i,l)=>[...i,l],[])),t)}(n,i,t).pipe(xn.iC),valueChanges:(i,l)=>j3(n,i,t).pipe((0,_t.U)(f=>f.map(y=>l&&l.idField?Object.assign(Object.assign({},y.payload.val()),{[l.idField]:y.key}):y.payload.val())),xn.iC)}}(l,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>G3(n,e.schedulers.outsideAngular)().pipe(xn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>G3(n,e.schedulers.outsideAngular)().pipe(xn.iC,(0,_t.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>L3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ss.Dh),p.LFG(ss.xv,8),p.LFG(lK,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(xn.HU),p.LFG(cK,8),p.LFG(VA,8),p.LFG(yP,8),p.LFG(bP,8),p.LFG(vP,8),p.LFG(EP,8),p.LFG(wP,8),p.LFG(CP,8),p.LFG(LA,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),dK=(()=>{class n{constructor(){_P.Z.registerVersion("angularfire",xn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[uK]}),n})(),hK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Ru,ss.hO.initializeApp(nN_firebase),Z6,B6,dK]]}),n})(),fK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[OE]}),n.\u0275inj=p.cJS({providers:[],imports:[[Uc,NE,Wx,Sd,hK,XR]]}),n})();const mK=new KB(1);(0,p.G48)();const VF=function(n){if("object"!=typeof n)throw Error("single-spa-angular requires a configuration object");const e=Object.assign(Object.assign({},Ft),n);if("function"!=typeof e.bootstrapFunction)throw Error("single-spa-angular must be passed an options.bootstrapFunction");if("string"!=typeof e.template)throw Error("single-spa-angular must be passed options.template string");if(!e.NgZone)throw Error("single-spa-angular must be passed the NgZone option");return e.Router&&!e.NavigationStart&&console.warn("single-spa-angular must be passed the NavigationStart option"),{bootstrap:mI.bind(null,e),mount:E_.bind(null,e),unmount:pa.bind(null,e),update:e.updateFunction}}({bootstrapFunction:n=>(mK.next(n),Jl([{provide:Vv,deps:[[new p.tBr(Y)]]},{provide:J,useExisting:Vv}]).bootstrapModule(fK)),template:"<app-root />",Router:Yn,NavigationStart:I,NgZone:p.R0b}),gK=VF.bootstrap,_K=VF.mount,yK=VF.unmount})(),Cx})()});